<!doctype html>

<!--[if lt IE 7 ]> <html class="ie ie6 no-js" lang="ca"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie ie7 no-js" lang="ca"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie ie8 no-js" lang="ca"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie ie9 no-js" lang="ca"> <![endif]-->
<!--[if gt IE 9]><!--><html class="no-js" lang="ca"><!--<![endif]-->
<!-- the "no-js" class is for Modernizr. -->

<head id="www-sitename-com" data-template-set="html5-reset">

	<meta charset="utf-8">
	
	<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>Programació orientada a objectes</title>
	
<!-- <meta name="title" content=""> --> 
	<meta name="description" content="">
	<!-- Google will often use this as its description of your page/site. Make it good. -->
	
	<meta name="google-site-verification" content="">
	<!-- Speaking of Google, don't forget to set your site up: http://google.com/webmasters -->
	
	<meta name="author" content="Institut Obert de Catalunya">
	<meta name="Copyright" content="Copyright Institut Obert de Catalunya 2011. All Rights Reserved.">

	<!-- Dublin Core Metadata : http://dublincore.org/ -->
	<meta name="DC.title" content="Programació orientada a objectes">
	<meta name="DC.subject" content="Informàtica i comunicacions">
	<meta name="DC.creator" content="Institut Obert de Catalunya">
	
	<!--  Mobile Viewport Fix
	j.mp/mobileviewport & davidbcalhoun.com/2010/viewport-metatag 
	device-width : Occupy full width of the screen in its current orientation
	initial-scale = 1.0 retains dimensions instead of zooming out if page height > device height
	maximum-scale = 1.0 retains dimensions instead of zooming in if page width < device width
	-->
	<!-- Uncomment to use � use thoughtfully!
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	-->

	<link rel="shortcut icon" href="../../../img/favicon.ico">
	<!-- This is the traditional favicon.
		 - size: 16x16 or 32x32
		 - transparency is OK
		 - see wikipedia for info on browser support: http://mky.be/favicon/ -->
		 
	<link rel="apple-touch-icon" href="../../../img/apple-touch-icon.png">
	<!-- The is the icon for iOS's Web Clip.
		 - size: 57x57 for older iPhones, 72x72 for iPads, 114x114 for iPhone4's retina display (IMHO, just go ahead and use the biggest one)
		 - To prevent iOS from applying its styles to the icon name it thusly: apple-touch-icon-precomposed.png
		 - Transparency is not recommended (iOS will put a black BG behind the icon) -->
	
	<!-- CSS: screen, mobile & print are all in the same file -->
	<link rel="stylesheet" href="../../../_/css/style.css">

	<!-- CSS: jQuery UI -->
	<link rel="stylesheet" href="../../../_/css/jquery-ui.css">
	
	<!-- all our JS is at the bottom of the page, except for Modernizr. -->
	<script src="../../../_/js/modernizr-1.7.min.js"></script>
	<script src="../../../_/js/Hyphenator.js" type="text/javascript"></script>
	<script type="text/javascript">
	   Hyphenator.config({
		minwordlength : 4
	   });
	   Hyphenator.run();
	</script>
    <script src="../../../_/js/build.js" type="text/javascript"></script>
</head>

<body class="style-newspaper">

<div class="wrapper"><!-- not needed? up to you: http://camendesign.com/code/developpeurs_sans_frontieres -->

	<header id="header">
		<div class="head"><a href="http://ioc.gencat.cat"><img src="../../../img/logo.png" alt="Institut Obert de Catalunya"/></a><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/es/deed.ca"><img src="../../../img/license.png" alt="Llic&egrave;ncia" class="license"/></a></div>
		<div class="headdocument"><a href="../../../index.html">Programació orientada a objectes</a></div>
        <div id="search" class="search" name="search">
         <form id="frmsearch" action="../../../search.html" method="get">
          <input type="text" name="q"/>
        </form>
        </div>
	</header>
   <div id="upbutton" class="upbutton" style="display:none;"><img src="../../../img/uparrow.png" alt="Pujar a l'inici de p&agrave;gina"/></div>
   <aside id="aside">
    <div id="menu">
      <ul>
       <li name="toc"><div><img src="../../../img/toc.png" alt="&Iacute;ndex"/></div></li>
       <li name="settings"><div><img src="../../../img/settings.png" alt="Configuraci&oacute;"/></div></li>
       <li name="printer"><div><img src="../../../img/printer.png" alt="Imprimir"/></div></li>
       <li name="favorites"><div><img src="../../../img/favorites.png" alt="Favorits"/></div></li>
       <li name="help_icon" class="help_icon"><div><img src="../../../img/help_icon.png" alt="Ajuda"/></div></li>
      </ul>
     </div>
   </aside>
   <div id="sidebar-hide" name="sidebar-hide"><img src="../../../img/arrows.png"/></div>
   <section>
     <div id="toc" class="hidden">
      <div class="menucontent">
        <ul>
        <li id="u4" class="parentnode"><p><a href="../../../WebContent/u4/introduccio.html">4. Interfícies gràfiques d'usuari. Fluxos i  fitxers</a></p><ul class="expander"><li id="u4introduccio"><a href="../../../WebContent/u4/introduccio.html">Introducció</a></li><li id="u4resum"><a href="../../../WebContent/u4/resum.html">Resum</a></li><li id="u4mapa"><a href="../../../WebContent/u4/mapa.html">Mapa conceptual</a></li><li id="u4resultats"><a href="../../../WebContent/u4/resultats.html">Resultats d'aprenentatge</a></li><li id="u4referencies"><a href="../../../WebContent/u4/referencies.html">Referències</a></li><li id="u4a1" class="tocsection"><p id="u4a1continguts"><a href="../../../WebContent/u4/a1/continguts.html">Interfícies gràfiques d'usuari</a><span class="buttonexp"></span></p><ul><li id="u4a1activitats"><a href="../../../WebContent/u4/a1/activitats.html">Activitats</a></li><li id="u4a1exercicis"><a href="../../../WebContent/u4/a1/exercicis.html">Exercicis</a></li><li id="u4a1annexos"><a href="../../../WebContent/u4/a1/annexos.html">Annexos</a></li></ul></li><li id="u4a2" class="tocsection"><p id="u4a2continguts"><a href="../../../WebContent/u4/a2/continguts.html">Fluxos i fitxers</a><span class="buttonexp"></span></p><ul><li id="u4a2activitats"><a href="../../../WebContent/u4/a2/activitats.html">Activitats</a></li><li id="u4a2exercicis"><a href="../../../WebContent/u4/a2/exercicis.html">Exercicis</a></li></ul></li></ul></li><li id="" class="indexnode"><p><a href="../../../index.html">Anar a l&#39;&iacute;ndex general</a></p></li>
        </ul>
      </div>
    </div>
   </section>
   <section>
   <div id="settings" class="hidden">
    <div class="menucontent">
     <div class="allsettings">
     <div class="settings">
      <label>Font i Color</label>
		<div class="setting-option">
	        <ul class="fontBackground">
				<li id="style-newspaper" title="Newspaper" class="appearance-style-newspaper"><span>Newspaper</span></li>
                <li id="style-novel" title="Novel" class="appearance-style-novel"><span>Novel</span></li>
                <li id="style-ebook" title="eBook" class="appearance-style-ebook"><span>eBook</span></li>
				<li id="style-inverse" title="Inverse" class="appearance-style-inverse active"><span>Inverse</span></li>
				<li id="style-athelas" title="Athelas" class="appearance-style-athelas"><span>Athelas</span></li>
			</ul>
		</div>
     </div>
	<div class="settings">
      <label>Amplada</label>
		<div class="setting-option">
	        <div id="slider-width"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
		<div class="setting-option">
	        <div id="slider-font"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
	  <div class="setting-option">
       <form action="" class="sett-options">
		<ul>
		    <li><input type="checkbox" id="secondary-content" /><label for="secondary-content">Mostra recursos complementaris</label></li>
		    <li><input type="checkbox" id="main-images" /><label for="main-images">Mostra imatges</label></li>
		    <li><input type="checkbox" id="text-alignment" /><label for="text-alignment">Text justificat</label></li>
			<li><input type="checkbox" id="text-hyphen" /><label for="text-hyphen">Partici&oacute; sil·l&agrave;bica</label></li>
		</ul>
       </form>
	  </div>
     </div>
     </div>
    </div>
   </div>
   </section>
 <section>
 <div id="favorites" class="hidden"></div>
 </section>   
 <div id="bridge" class="hidden"></div>
 <div id="help" class="hidden">
  <div class="helptitle">Dreceres del teclat<hr></div>
  <div class="helpsection"><span>General</span>
   <ul>
    <li><span class="shortcut">g</span>: Anar al men&uacute; de navegaci&oacute;</li>
    <li><span class="shortcut">o</span>: Anar a opcions</li>
    <li><span class="shortcut">s</span>: Guardar la p&agrave;gina actual a favorits</li>
    <li><span class="shortcut">p</span>: Imprimir la p&agrave;gina actual</li>
    <li><span class="shortcut">?</span>: Mostrar/Ocultar l&#39;ajuda</li>
   </ul>
  </div>
  <div class="helpsection"><span>Navegaci&oacute;</span>
   <ul>
    <li><span class="shortcut">i</span>: Anar a l&#39;&iacute;ndex general</li>
    <li><span class="shortcut">t</span>: Anar a l&#39;inici de p&agrave;gina</li>
    <li><span class="shortcut">b</span>: Anar al final de p&agrave;gina</li>
    <li><span class="shortcut">j</span>: Anar cap endavant dintre la p&agrave;gina</li>
    <li><span class="shortcut">k</span>: Anar cap enrere dintre la p&agrave;gina</li>
    <li><span class="shortcut">h</span>: Anar a la p&agrave;gina anterior:</li>
    <li><span class="shortcut">l</span>: Anar a la p&agrave;gina seg&uuml;ent:</li>
   </ul>
   </div>
 </div>
 <div id="favcounter" name="favcounter" class="hidden"><span></span></div>
 <div id="navmenu" class="navmenu"><ul class="webnav"><li><a href="../../../index.html" title="Anar a l&#39;&iacute;ndex general">Inici</a></li><li><a href="../introduccio.html">Interfícies gràfiques d'usuari. Fluxos i  fitxers</a></li><li>Interfícies gràfiques d'usuari</li></ul></div>
	<div id="content" lang="ca" class="hyphenate text">
     <article lang="ca" class="sheet">
        <h1><a id="interficies_grafiques_d_usuari"> Interfícies gràfiques d'usuari </a></h1>
    	
<p>
A mesura que els ordinadors i els sistemes operatius han evolucionat, una gran part de les aplicacions desenvolupades han passat d’estar orientades a la línia d’ordres, mostrant la informació en format exclusivament textual, a estar basades en un entorn totalment gràfic, molt més amigable per a l’usuari. Actualment, poques aplicacions no es basen en el que col·loquialment s’anomena una <acronym title="Graphical User Interface">GUI</acronym> (<em>graphical user interface</em>, <em>interface</em> gràfica d’usuari).
</p>
<div class="iocnote"><div class="ioccontent">
<p>
La immensa majoria de sistemes operatius moderns es basen principalment en una <acronym title="Graphical User Interface">GUI</acronym> per interactuar amb l’usuari.
</p>
</div></div><div class="iocimportant"><div class="ioccontent">
<p>
Una <strong><acronym title="Graphical User Interface">GUI</acronym></strong> és un tipus d’<em>interface</em> en què els mecanismes que utilitza l’usuari per donar ordres al programa o visualitzar qualsevol informació es basa en la manipulació d’icones en lloc de l’entrada d’ordres textuals.
</p>
</div></div>
<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/ic10m03u4_01.png" class="imgB" title="Imatge del Dynabook esbossada per Alan Kay/6" alt="Imatge del Dynabook esbossada per Alan Kay/6" /></li><li><small>Imatge del Dynabook esbossada per Alan Kay</small></li>
</ul></div>

</p>

<p>
Cal remuntar-se fins als anys seixanta per trobar les primeres petjades de les <acronym title="Graphical User Interface">GUI</acronym>, basades en el treball dels investigadors de l’empresa Xerox. Ja al final dels anys seixanta i al principi dels setanta, Alan Kay, investigador de la Universitat de Utah, va considerar que la metodologia de l’orientació a objectes era especialment indicada per al disseny d’entorns gràfics. Una <acronym title="Graphical User Interface">GUI</acronym> és un exemple evident d’elements clarament identificables, amb unes propietats i un comportament, que interactuen per dur a terme una tasca concreta. Les seves idees van ser aprofitades pels investigadors de Xerox per crear un ordinador amb entorn totalment gràfic, el Dynabook. Conjuntament, aquesta feina també va desembocar en un fet important com el naixement de l’SmallTalk, un dels primers llenguatges orientats a objectes. Així, doncs, ja es pot veure que l’orientació a objectes i la generació de <acronym title="Graphical User Interface">GUI</acronym> són aspectes molt íntimament lligats.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Apple i les GUI</p>
<p>
Un mite molt popular és que l’empresa Apple va ser la primera a desenvolupar <acronym title="Graphical User Interface">GUI</acronym>. En realitat, es va inspirar en les innovacions anteriors de Xerox.
</p>
</div></div>
<p>
Avançant fins als anys noranta, sorgeix un nou llenguatge que també aprofita els postulats d’Alan Kay: el llenguatge Java. En els seus orígens, aquest llenguatge estava especialment orientat a poder incloure en pàgines web elements gràfics dinàmics, en forma de petits programes que s’executaven en el navegador: els <em>applets</em>. No és casual que el desenvolupador de la primera versió de la biblioteca gràfica fos Netscape Communications, la companyia responsable del navegador principal del moment. Amb les millores successives i l’augment de la potència dels ordinadors, les aplicacions desenvolupades en Java finalment van fer el salt des del navegador a l’escriptori. Per aquest motiu, un dels punts en què el Java ofereix una biblioteca més completa i amb força feina al darrere és per a la generació d’entorns gràfics.
</p>

<p>
Aquest nucli d’activitat se centra totalment en la generació d’entorns gràfics mitjançant el Java. Per assolir aquesta fita, no solament és necessari entendre quines són les classes relacionades amb elements gràfics, sinó que també cal entendre com es vinculen a les classes especificades en l’etapa de disseny: la lògica interna del programa.
</p>

<h2><a id="el_paquet_java_swing" >El paquet Java Swing</a></h2>
<div class="level2">

<p>
El conjunt de classes vinculades a l’entorn gràfic del Java pertanyen a la jerarquia de paquets javax.swing. Familiarment, es coneixen com la biblioteca Java Swing o, simplement, Swing. Aquestes són una extensió d’una biblioteca més antiga anomenada AWT (<em>Abstract Windows Toolkit</em>, joc d’eines abstracte de finestres).
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Naixement del Java</p>
<p>
Cal dir que quan sorgeix el Java, els navegadors més populars avui dia encara estan fent els primers passos. De fet, Internet Explorer no apareix fins al 1995.
</p>
</div></div>
<p>
La biblioteca original AWT sorgeix l’any 1995 com una primera aproximació a un mecanisme de generació d’entorns gràfics que sigui totalment abstracte, amb un estil homogeni independentment de l’arquitectura sobre la qual s’executi l’aplicació. Aquesta era una tasca molt complicada, ja que cada sistema operatiu disposa del seu propi aspecte (<em>look and feel</em>) i primitives per a la gestió d’elements gràfics, normalment molt diferents entre si. En darrera instància, es pot considerar que AWT va assolir la seva fita: mitjançant el seu ús és possible generar <em>interfaces</em> molt lletges de manera homogènia, independentment de l’arquitectura. Aquest resultat pot ser comprensible si es té en compte que van ser desenvolupades a corre cuita en un sol mes.
</p>

<p>
Afortunadament, tot i aquest mal pas, molts dels principis ideats per AWT, fora de l’àmbit purament estètic, van servir per generar una nova versió millorada visualment: <strong>la biblioteca Swing</strong>. Alguns exemples de les solucions que va aportar AWT, i van ser reusats per Swing, són quina estratègia cal usar per vincular la lògica interna del programa a la <em>interface</em> gràfica, o com es poden organitzar els elements gràfics dins una finestra. A l’actualitat, pràcticament cap aplicació usa AWT com a biblioteca gràfica, sempre s’utilitza la biblioteca Swing. Tot i així, AWT sempre està present en el rerefons de qualsevol aplicació basada en Swing.
</p>

</div>

<h3><a id="jerarquia_de_classes_swing" >Jerarquia de classes Swing</a></h3>
<div class="level3">

<p>
La biblioteca Swing pren la forma d’una jerarquia de classes de mida considerable. Cadascuna de les classes que en formen part representa un element típic d’un entorn gràfic: finestres, botons, formularis, menús, etc. Si es vol incloure algun d’aquests elements en la <em>interface</em> de l’aplicació, caldrà instanciar la classe pertinent.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
Una jerarquia de classes és la manera com es classifiquen diferents classes amb relacions d’herència entre elles.
</p>
</div></div><div class="iocimportant"><div class="ioccontent">
<p>
Tot i cada element que compon un entorn gràfic és un <strong>objecte</strong>. Hi haurà tants objectes com elements es vulguin incloure.
</p>
</div></div>
<p>
Una part petita però prou aclaridora de la jerarquia de classes Swing es presenta en la <span class="figref"><a href="#Figure1"><span>figura</span></a></span>. Per millorar la llegibilitat de l’esquema, s’ha simplificat el format de les classes.
</p>
<div class="iocfigure"><a name="Figure1"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Jerarquia de les classes Swing

</figcaption><img src="../media/ic10m03u4_02.png" alt="" /></figure>
</div><div class="iocimportant"><div class="ioccontent">
<p>
Qualsevol element gràfic dins la <em>interface</em> gràfica s’anomena un <strong>component</strong>, ja que tots són un objecte java.awt.Component.
</p>
</div></div>
<p>
Les classes amb noms que comencen per <em>J</em> en la figura són les incloses a Swing, mentre que la resta pertanyen a AWT o a la biblioteca estàndard del Java. Com es pot veure, una part de la biblioteca original AWT continua present dins Swing en forma de les superclasses <code>java.awt.Component</code> i <code>java.awt.Container</code> (entre d’altres), ja que Swing és una extensió d’aquesta. Aquestes dues classes especifiquen tots els aspectes genèrics del comportament dels elements d’un entorn gràfic. Per fer-ho, defineixen mètodes que les subclasses poden sobreescriue d’acord amb les seves particularitats. Això permet al motor gràfic del Java garantir que cada component sempre té implementat tot el conjunt de mètodes necessaris per visualitzar-los correctament i cridar-los polimòrficament.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
Per tenir la llista completa de les classes i tots els seus mètodes cal consultar la documentació del Java.
</p>
</div></div>
<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/ic10m03u4_03.png" class="imgB" title="JCheckBox i JRadioButton/6" alt="JCheckBox i JRadioButton/6" /></li><li><small>JCheckBox i JRadioButton</small></li>
</ul></div>

</p>

<p>
Específicament, la classe abstracta <code>java.awt.Component</code> defineix totes les característiques referents a l’aspecte d’un element gràfic, com la mida, la font del text que conté, si està habilitat o la ubicació en pantalla, com també tot el conjunt d’interaccions que l’element pot rebre (ser pitjat, seleccionat, posar el punter del ratolí a sobre, etc.). En canvi, la classe <code>java.awt.Container</code> especifica tot el comportament relatiu a la capacitat d’un element gràfic de contenir-ne d’altres.
</p>

<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/ic10m03u4_04.png" class="imgB" title="Exemple de JLabel, JTextField i JTextArea/4" alt="Exemple de JLabel, JTextField i JTextArea/4" /></li><li><small>Exemple de JLabel, JTextField i JTextArea</small></li>
</ul></div>

</p>

<p>
En la jerarquia completa de Swing hi ha una gran quantitat de components en forma de subclasses de JComponent, moltes més de les representades en la <span class="figref"><a href="#Figure1"><span>figura</span></a></span>. Les classes més significatives, tot i que la llista no és ni molt menys completa, són les següents:
</p>

<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/ic10m03u4_05.png" class="imgB" title="Exemple de JList/5" alt="Exemple de JList/5" /></li><li><small>Exemple de JList</small></li>
</ul></div>

</p>
<ul>
<li class="level1"><div class="li"> <strong>JButton:</strong> Correspon al botó típic que es pot pitjar per donar ordres a l’aplicació.</div>
</li>
<li class="level1"><div class="li"> <strong>JToggleButton:</strong> Es tracta d’un botó especial amb ressort, que alterna entre un estat de pitjat o no. Cada cop que es pitja canvia d’estat.</div>
</li>
<li class="level1"><div class="li"> <strong>JCheckBox</strong> i <strong>JRadioButton:</strong> Representen un selector d’opció amb un text associat. En el primer cas, de forma quadrada tipus <em>checked/ unchecked</em>(marcat/no marcat), i en el segon de forma rodona. En el fons, és un cas especial d’un botó amb ressort, però amb una representació gràfica diferent. Són útils per fer apartats de configuració o formularis tipus test. La <span class="figref"><a href="#Figure3"><span>figura</span></a></span> mostra un exemple de visualització d’un JButton amb icones gràfiques, un JCheckBox i un JRadioButton (de dalt a baix). Noteu la diferència en l’aspecte dels dos darrers.</div>
</li>
<li class="level1"><div class="li"> <strong>JLabel:</strong> Correspon a una etiqueta en què es pot mostrar text o una imatge.</div>
</li>
<li class="level1"><div class="li"> <strong>JTextField:</strong> Correspon a un camp de text, en què l’usuari pot escriure. Només es pot escriure una única línia. No permet variar l’estil dins del text (mida o tipus de la font).</div>
</li>
<li class="level1"><div class="li"> <strong>JTextArea:</strong> Component similar a l’anterior, per en aquest cas especifica una àrea de text en què és possible escriure lliurement, sense limitació a una única línia. La <span class="figref"><a href="#Figure4"><span>figura</span></a></span> mostra un exemple de JLabel (dalt a l’esquerra), JTextField (dalt a la dreta) i JTextArea (a baix). Mentre que en la primera no es pot escriure, a la resta si que es pot.</div>
</li>
<li class="level1"><div class="li"> <strong>JTextPane:</strong> Component de funcionalitat pràcticament idèntica a l’àrea de text, però amb la capacitat afegida de poder editar text amb estil diferent (cursiva, negreta, etc.).</div>
</li>
<li class="level1"><div class="li"> <strong>JList:</strong> Una llista d’elements o ítems, normalment cadenes de text, d’entre les quals es pot seleccionar un conjunt. La <span class="figref"><a href="#Figure5"><span>figura</span></a></span> mostra un exemple d’una JList, una llista d’elements amb opció de selecció múltiple. En aquest cas, es troba seleccionat l’element anomenat “item 2”.</div>
</li>
<li class="level1"><div class="li"> <strong>JFrame:</strong> La finestra principal de la <em>interface</em> gràfica en una aplicació d’escriptori.</div>
</li>
<li class="level1"><div class="li"> <strong>JApplet:</strong> La finestra principal de la <em>interface</em> gràfica en una aplicació incrustada en una pàgina web, un <em>applet</em>.</div>
</li>
<li class="level1"><div class="li"> <strong>JDialog:</strong> És un quadre d’alerta o de diàleg amb l’usuari.</div>
</li>
<li class="level1"><div class="li"> <strong>JPanel:</strong> Representa una àrea específica de la finestra, amb unes propietats concretes diferenciades: color de fons, vora, etc.</div>
</li>
<li class="level1"><div class="li"> <strong>JScrollPane:</strong> Idèntic a l’anterior, però si en algun moment la mida de la finestra és massa petita per visualitzar tot el contingut d’aquesta àrea, apareix una barra de desplaçament (<em>scroll</em>).</div>
</li>
<li class="level1"><div class="li"> <strong>JTabbedPane:</strong> Un conjunt de panells accessible mitjançant etiquetes (<em>tabs</em>) amb una cadena de text, de manera semblant a fitxes de biblioteca. Cada panell està associat a una etiqueta, de manera que quan es pitja, només es visualitza aquest panell.</div>
</li>
</ul>

</div>

<h3><a id="agregacio_de_components" >Agregació de components</a></h3>
<div class="level3">

<p>
Tot i que no es mostra representat explícitament dins la jerarquia de classes de Swing, ja que totes les seves classes hereten tant de <code>java.awt.Component</code> com de <code>java.awt.Container</code>, es considera que hi ha dos tipus de components. Per una banda, els <strong>controls Swing</strong>, que són aquells components amb els quals l’usuari interactua directament: botons, opcions de menú, quadres de text, etc.
</p>

<p>
Exemples de controls Swing poden ser JButton, JToggleButton, JCheckBox, JRadioButton, JLabel, JList, JTextField, JTextArea, JTextPane.
</p>

<p>
D’altra banda, els <strong>contenidors Swing</strong>, que són aquells components que no tenen una funció directa d’interacció amb l’usuari, que serveixen exclusivament per encabir i organitzar a dintre qualsevol component, tant controls com altres contenidors. Aquests normalment corresponen a components com finestres, panells o barres de menú. Si bé és possible interactuar-hi (per exemple, redimensionar una finestra o obrir un menú), els resultats de l’acció solen quedar dins l’àmbit de l’entorn gràfic, i no se solen usar per donar ordres a la lògica interna del programa.
</p>

<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/ic10m03u4_06.png" class="imgB" title="Exemple de JTabbedPane" alt="Exemple de JTabbedPane" /></li><li><small>Exemple de JTabbedPane</small></li>
</ul></div>

</p>

<p>
Exemples de contenidors poden ser JFrame, JDialog, JApplet, JPanel, JScrollPane, JTabbedPane.
</p>

<p>
La <span class="figref"><a href="#Figure6"><span>figura</span></a></span> mostra un exemple de JTabbedPane, un contenidor. Aquest és capaç d’encabir diferents elements gràfics, ordenats segons diferents etiquetes. En aquest cas, hi ha dues etiquetes anomenades “Etiqueta 1” i “Etiqueta 2” la visualització de les quals es pot anar alternant mitjançant la selecció del nom. En la imatge es visualitza “Etiqueta 1”. 
</p>

<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/ic10m03u4_07.png" class="imgB" title="Un arbre N-ari és un arbre en què cada node pare pot tenir qualsevol nombre de successors. Els nodes sense successors s&#039;anomenen &quot;fulles&quot;." alt="Un arbre N-ari és un arbre en què cada node pare pot tenir qualsevol nombre de successors. Els nodes sense successors s&#039;anomenen &quot;fulles&quot;." /></li><li><small>Un arbre N-ari és un arbre en què cada node pare pot tenir qualsevol nombre de successors. Els nodes sense successors s&#039;anomenen &quot;fulles&quot;.</small></li>
</ul></div>

</p>

<p>
La relació entre aquests dos tipus de components dins de qualsevol <em>interface</em> gràfica és la següent. Dins un contenidor poden haver tant components com d’altres contenidors. En canvi, un component no pot contindre res, és un element final a l’estructura de la interfície Swing. Per tant, aquesta estructura sempre pren la forma d’un arbre <em>N</em>-ari. Els objectes ubicats en les fulles corresponen normalment a controls Swing, mentre que la resta són contenidors. Quan un contenidor A conté un altre component qualsevol B, es diu que A és el <strong>contenidor pare</strong> de B. 
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
Per incloure qualsevol <strong>component</strong> dins un contenidor, cal cridar el mètode, <code>add(Component comp)</code> sobre el contenidor, passant com a paràmetre el component a afegir-hi. Aquest es troba definit en la classe <code>java.awt.Container</code> i totes les classes de la biblioteca Swing l’hereten.
</p>
</div></div>
<p>

</p>

<p>
Addicionalment, hi ha un subtipus especial de contenidors Swing, els anomenats <strong>contenidors d’alt nivell</strong> (<em>top-level containers</em>). Aquests es consideren els contenidors principals de la <em>interface</em> d’usuari, de manera que l’objecte arrel de l’arbre que conforma el mapa d’objectes de la interfície gràfica sempre és un contenidor d’aquest subtipus. Swing en defineix tres, tots subclasses de java.awt.Window: JFrame, JApplet i JDialog.
</p>

<p>
En el cas dels contenidors d’alt nivell, no és possible afegir-hi directament components cridant el mètode <code>add</code>. Només és possible la interacció mitjançant el seu <strong>panell de contingut</strong> (<em>content pane</em>), que es pot obtenir amb el mètode <code>getContentPane()</code>. Aquest ja és un contenidor normal sobre el qual sí que es pot cridar el mètode <code>add</code>.
</p>

<p>
La <span class="figref"><a href="#Figure2"><span>figura</span></a></span> mostra un exemple de com es representaria una <em>interface</em> gràfica concreta en forma de mapa d’objectes i la seva classificació per tipus.
</p>
<div class="iocfigure"><a name="Figure2"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Estructura d’una calculadora simple

</figcaption><img src="../media/ic10m03u4_08.png" alt="" /></figure>
</div>
<p>
Cal instanciar les diferents classes associades a cada component del panell de contingut i afegir cada control obtingut en els contenidors corresponents, de manera que al final tots estiguin vinculats a un contenidor d’alt nivell: la finestra principal, instància de JFrame. Un fragment prou significatiu del codi necessari per generar el panell de contingut és el següent:
</p>
<div class="iocnote"><div class="ioccontent">
<p>
El mètode setHorizontalAlignment assigna el tipus de justificació del text. La classe defineix un conjunt de constants estàtiques per cada tipus de justificació.
</p>
</div></div><pre class="code java"><ol><li class="li1"><div class="de1"><span class="co1">//Contenidor d'alt nivell: finestra principal</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jframe"><span class="kw3">JFrame</span></a> calculadora <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jframe"><span class="kw3">JFrame</span></a><span class="br0">&#40;</span><span class="st0">&quot;Calculadora&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//Panell de contingut</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+container"><span class="kw3">Container</span></a> panell <span class="sy0">=</span> calculadora.<span class="me1">getContentPane</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1"><span class="co1">//Display de la calculadora</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jlabel"><span class="kw3">JLabel</span></a> display <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jlabel"><span class="kw3">JLabel</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>              </div></li><li class="li1"><div class="de1">display.<span class="me1">setHorizontalAlignment</span><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+swingconstants"><span class="kw3">SwingConstants</span></a>.<span class="me1">RIGHT</span><span class="br0">&#41;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">panell.<span class="me1">add</span><span class="br0">&#40;</span>display<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1"><span class="co1">//Panell auxiliar on posar els botons       </span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jpanel"><span class="kw3">JPanel</span></a> panellBotons <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jpanel"><span class="kw3">JPanel</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jbutton"><span class="kw3">JButton</span></a> boto7 <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jbutton"><span class="kw3">JButton</span></a><span class="br0">&#40;</span><span class="st0">&quot;7&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jbutton"><span class="kw3">JButton</span></a> boto8 <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jbutton"><span class="kw3">JButton</span></a><span class="br0">&#40;</span><span class="st0">&quot;8&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jbutton"><span class="kw3">JButton</span></a> botoC <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jbutton"><span class="kw3">JButton</span></a><span class="br0">&#40;</span><span class="st0">&quot;C&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//Afegir botons a panell auxiliar</span></div></li><li class="li1"><div class="de1">panellBotons.<span class="me1">add</span><span class="br0">&#40;</span>boto7<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">panellBotons.<span class="me1">add</span><span class="br0">&#40;</span>boto8<span class="br0">&#41;</span><span class="sy0">;</span>                 </div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1"><span class="me1">panellBotons</span>.<span class="me1">add</span><span class="br0">&#40;</span>botoC<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//Afegir panell auxiliar de botons a interface</span></div></li><li class="li1"><div class="de1">panell.<span class="me1">add</span><span class="br0">&#40;</span>panellBotons<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">calculadora.<span class="me1">setVisible</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>
<div class="iocnote"><div class="ioccontent">
<p>
El mètode setVisible fa visible el component. Fins que no es crida, tot i estar creat, és invisible per a l’usuari.
</p>
</div></div>
</div>

<h3><a id="la_barra_de_menus" >La barra de menús</a></h3>
<div class="level3">

<p>
Un tret característic força típic de les aplicacions d’escriptori és la utilització de menús en la franja superior de la finestra principal, amb l’objectiu de donar accés a moltes opcions sense atapeir la pantalla. Els components principals vinculats als menús dins la biblioteca Swing són els següents:
</p>
<ul>
<li class="level1"><div class="li"> <strong>JMenuBar:</strong> Contenidor que representa la barra de menús. Només n’hi pot haver un per finestra (JFrame).</div>
</li>
<li class="level1"><div class="li"> <strong>JMenu:</strong> Contenidor que representa un menú individual d’entre els diferents que es poden incloure dins la barra de menús. L’usuari visualitza el seu nom i es desplega en pitjar amb el ratolí. Es poden incloure menús dins d’altres menús, que es despleguen consecutivament.</div>
</li>
<li class="level1"><div class="li"> <strong>JMenuItem:</strong> Control associat a una opció individual de menú, que l’usuari selecciona.</div>
</li>
<li class="level1"><div class="li"> <strong>JCheckBoxMenuItem:</strong> Control que combina el JMenuItem i elJCheckBox.</div>
</li>
<li class="level1"><div class="li"> <strong>JRadioButtonMenuItem:</strong> Control que combina el JMenuItem i elJRadioButtonMenu.</div>
</li>
</ul>

<p>
La <span class="figref"><a href="#Figure3"><span>figura</span></a></span> mostra un exemple amb tots els components possibles d’una barra de menús. No es pot afegir cap altre tipus de component o contenidor dins un menú.
</p>
<div class="iocfigure"><a name="Figure3"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Barra de menús amb tots els elements possibles.

</figcaption><img src="../media/ic10m03u4_09.png" alt="" /></figure>
</div>
<p>
Els menús també usen el mètode <code>add</code> per afegir components als contenidors. Es visualitzaran dins el menú exactament en el mateix ordre en què s’han afegit. L’única excepció sobre el mecanisme general és assignar l’única barra de menús a la finestra principal, que es fa cridant el mètode següent:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw4">void</span> setJMenuBar<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jmenubar"><span class="kw3">JMenuBar</span></a> menubar<span class="br0">&#41;</span></div></li></ol></pre>

<p>
A continuació es presenta un fragment del codi que generaria una barra de menús com la que s’ha mostrat en la <span class="figref"><a href="#Figure3"><span>figura</span></a></span>, centrant-se en el menú <em>View</em>. Analitzeu detingudament com s’afegeixen els elements del menú mitjançant crides successives del mètode add.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
El mètode addSeparator permet afegir línies de separació entre els elements d’un menú.
</p>
</div></div><div class="iocnote"><div class="ioccontent">
<p>
El mètode setSelected serveix per marcar com a seleccionat o deseleccionat un control tipus o .
</p>
</div></div><div class="iocnote"><div class="ioccontent">
<p>
El mètode setMnemonic serveix per establir una drecera de teclat per a un control donat. La classe defineix constants per a totes les tecles.
</p>
</div></div><div class="iocnote"><div class="ioccontent">
<p>
El mètode setEnabled habilita o deshabilita un control.
</p>
</div></div><pre class="code java"><ol><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jframe"><span class="kw3">JFrame</span></a> navegador <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jframe"><span class="kw3">JFrame</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jmenubar"><span class="kw3">JMenuBar</span></a> barraMenu <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jmenubar"><span class="kw3">JMenuBar</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>            </div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jmenu"><span class="kw3">JMenu</span></a> viewMenu <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jmenu"><span class="kw3">JMenu</span></a><span class="br0">&#40;</span><span class="st0">&quot;View&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jmenu"><span class="kw3">JMenu</span></a> toolbarSubmenu <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jmenu"><span class="kw3">JMenu</span></a><span class="br0">&#40;</span><span class="st0">&quot;Toolbars&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>            </div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1"><span class="me1">viewMenu</span>.<span class="me1">add</span><span class="br0">&#40;</span>toolbarSubmenu<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">JCkeckBoxMenuItem statusbarItem <span class="sy0">=</span> </div></li><li class="li1"><div class="de1"><span class="kw1">new</span> JCkeckBoxMenuItem<span class="br0">&#40;</span><span class="st0">&quot;Status Bar&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">statusBar.<span class="me1">setSelected</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>                 </div></li><li class="li1"><div class="de1">viewMenu.<span class="me1">add</span><span class="br0">&#40;</span>statusbarItem<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">...                             </div></li><li class="li1"><div class="de1"><span class="me1">viewMenu</span>.<span class="me1">addSeparator</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jmenuitem"><span class="kw3">JMenuItem</span></a> stopItem <span class="sy0">=</span> </div></li><li class="li1"><div class="de1"><span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jmenuitem"><span class="kw3">JMenuItem</span></a><span class="br0">&#40;</span><span class="st0">&quot;Stop&quot;</span>, <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+imageicon"><span class="kw3">ImageIcon</span></a><span class="br0">&#40;</span><span class="st0">&quot;Stop.gif&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>       </div></li><li class="li1"><div class="de1">stopItem.<span class="me1">setMnemonic</span><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+keyevent"><span class="kw3">KeyEvent</span></a>.<span class="me1">VK_ESCAPE</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">stopItem.<span class="me1">setEnabled</span><span class="br0">&#40;</span><span class="kw2">false</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">viewMenu.<span class="me1">add</span><span class="br0">&#40;</span>stopItem<span class="br0">&#41;</span><span class="sy0">;</span>                 </div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jmenu"><span class="kw3">JMenu</span></a> pagestyleSubmenu <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jmenu"><span class="kw3">JMenu</span></a><span class="br0">&#40;</span><span class="st0">&quot;Page Style&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>         </div></li><li class="li1"><div class="de1">pagestyleSubmenu.<span class="me1">add</span> <span class="br0">&#40;</span><span class="kw1">new</span> </div></li><li class="li1"><div class="de1">JMenuCheckBoxMenuItem<span class="br0">&#40;</span><span class="st0">&quot;No Style&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>             </div></li><li class="li1"><div class="de1">JMenuCheckBoxMenuItem basicStyle <span class="sy0">=</span> <span class="kw1">new</span> </div></li><li class="li1"><div class="de1">JMenuCheckBoxMenuItem<span class="br0">&#40;</span><span class="st0">&quot;Basic Page Style&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">basicStyle.<span class="me1">setSelected</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">pagestyleSubmenu.<span class="me1">add</span> <span class="br0">&#40;</span>basicStyle<span class="br0">&#41;</span>             </div></li><li class="li1"><div class="de1">viewMenu.<span class="me1">add</span><span class="br0">&#40;</span>pagestyleSubmenu<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1"><span class="me1">barraMenu</span>.<span class="me1">add</span><span class="br0">&#40;</span>viewMenu<span class="br0">&#41;</span><span class="sy0">;</span>                       </div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1"><span class="me1">navegador</span>.<span class="me1">setJMenubar</span><span class="br0">&#40;</span>barraMenu<span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>

</div>

<h3><a id="layouts" >Layouts</a></h3>
<div class="level3">

<p>
Un dels objectius més importants de la biblioteca d’entorn gràfic del Java és poder generar aplicacions amb un comportament homogeni independentment de la plataforma en què s’executin. Aquesta fita té molt sentit si es recorda que el Java es va pensar inicialment per al desenvolupament d’aplicacions executades en un navegador, els <em>applets</em>. En un entorn heterogeni com és Internet, és impossible establir per endavant els paràmetres sota els quals s’executa el navegador: maquinari, sistema operatiu, resolució de la pantalla, dimensions de la finestra del navegador, etc. Per tant, no es pot generar un entorn gràfic en què els components s’ubiquin d’una manera preestablerta i tinguin una mida fixa, suposant unes dimensions concretes de la finestra principal.
</p>

<p>
El mètode usat per afegir controls a un contenidor, <code>add (Component comp)</code>, i les seves sobrecàrregues no disposen de cap paràmetre vinculat a les coordenades en què es pugui ubicar el component, només s’indica el component que s’ha d’afegir. El motiu és el mecanisme que el Java aporta per solucionar la circumstància que és impossible establir per endavant els paràmetres sota els quals s’executa el navegador. En una aplicació Swing (o AWT), en realitat, no és possible establir la ubicació i mides exactes de cada component dins la <em>interface</em> gràfica. El que es fa és, per a cada contenidor Swing (principalment, els JPanel i JFrame), especificar una política d’ubicació de components, de manera que el motor gràfic del Java escull automàticament la millor opció d’acord amb les dimensions reals de la finestra principal. Cada cop que la finestra principal canvia de dimensions, els components es reubiquen i redimensionen dinàmicament. Aquestes polítiques no les ha de generar el desenvolupador -el Swing ja defineix un conjunt predeterminat disponible-, entre les quals tan sols cal triar-ne una per a cada contenidor en la <em>interface</em>. Cada una és el que s’anomena un <em>layout</em>.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
Un <strong>layout</strong> és una política d’ubicació i dimensionament de components, de manera que el motor gràfic del Java escull automàticament on s’ha de visualitzar i quina ha de ser la seva mida.
</p>
</div></div>
<p>
Concretament, els <em>layouts</em> disponibles a Swing són totes les classes que implementen la <em>interface</em> <code>java.awt.LayoutManager</code>.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
El <strong>mètode</strong> que assigna un <em>layout</em> a un contenidor és <code>setLayout (LayoutManager manager)</code>.
</p>
</div></div><div class="ioctext"><div class="ioccontent"><p class="ioctitle">setPreferredSize</p>
<p>
Aquest mètode permet suggerir quina mida es vol que tingui un component. Tot i així, no hi ha cap garantia que el layout l’obeeixi sempre.
</p>
</div></div>
<p>
Sota el sistema de <em>layouts</em>, tots els components tenen com a mida per defecte la mínima necessària per encabir tot el contingut. En principi, les seves dimensions no es poden establir de manera estàtica.
</p>

<p>
Malauradament, els <em>layouts</em> són un de tants casos d’idees que sonen molt més bé del que realment funcionen a l’hora de la veritat. En la immensa majoria dels casos, el motor gràfic del Java mai tindrà el mateix concepte de “millor ubicació i mida” que la que té al cap el desenvolupador. En conseqüència, l’ús de <em>layouts</em> sense l’ajut d’un IDE que proporcioni un editor d’interfícies gràfiques és una tasca complicada i que normalment necessita la inversió de força temps i esforç. Tot i així, si es vol veure el costat positiu de tot plegat, alguns dels defensors incondicionals del Java consideren que això no és necessàriament dolent, ja que força el desenvolupador a cenyir-se a entorns gràfics senzills, no gaire recarregats i, per tant, més usables. Fer una <em>interfaces</em> massa complexa es pot arribar a convertir en un exercici de paciència si no s’és un desenvolupador experimentat en l’ús de <em>layouts</em>.
</p>

<p>
L’única excepció en aquesta característica són els contenidors vinculats a menús, que no usen <em>layouts</em>, ja que un menú mai no es redimensiona ni els seus components canvien d’ubicació. Sempre té el mateix aspecte al llarg de l’execució de l’aplicació.
</p>

<p>
Els <em>layouts</em> més significatius són FlowLayout, BorderLayout, GridLayout, BoxLayout, GridBayLayout i GroupLayout.
</p>

</div>

<h4><a id="flowlayout" >FlowLayout</a></h4>
<div class="level4">

<p>
El FlowLayout és el <em>layout</em> que hi ha per defecte en tots els contenidors si no se n’assigna cap altre mitjançant el mètode setLayout. S’anomena així perquè es considera que els elements “flueixen de manera natural” dins el contenidor. La política que defineix és que tots els components es mantenen en la seva mida per defecte i es van ubicant per línies, d’esquerra a dreta i de dalt a baix, centrats horitzontalment. Si en un moment donat un component no cap en la línia actual, s’ubica en la línia immediatament inferior. L’ordre en què s’afegeixen al contenidor és el mateix en què s’ha cridat el mètode add.
</p>

<p>
El seu constructor és <code>public FlowLayout()</code>.
</p>

<p>
La <span class="figref"><a href="#Figure4"><span>figura</span></a></span> mostra un exemple de com varia la ubicació dels components en cas de redimensionar el contenidor. En tots els casos, es considera que la seva mida és la mínima per encabir-ne el contingut (en aquest cas, el mateix text que apareix representat).
</p>
<div class="iocfigure"><a name="Figure4"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Redimensionat d’un FlowLayout

</figcaption><img src="../media/ic10m03u4_10.png" alt="" /></figure>
</div>
</div>

<h4><a id="borderlayout" >BorderLayout</a></h4>
<div class="level4">

<p>
En un component en què s’aplica el BorderLayout es defineixen cinc zones diferenciades: nord, sud, est, oest i centre, que corresponen als punts cardinals del contenidor. En cada zona només es pot ubicar un component, que l’ocupa totalment i mai no varia de posició. Els components de les zones nord i sud ocupen el màxim espai possible horitzontal i el mínim indispensable en vertical. Per a les zones est i oest es dóna el cas invers. La zona central és l’única que varia de mida quan es redimensiona el contenidor.
</p>

<p>
El seu constructor és <code>public BorderLayout()</code>.
</p>

<p>
Aquest <em>layout</em> és una excepció respecte a la resta, ja que sobre un contenidor que l’usa es pot cridar una sobrecàrrega del mètode add en què es passa un paràmetre addicional que indica la zona en què es pot ubicar el component:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw4">void</span> add<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+component"><span class="kw3">Component</span></a> comp, <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+object"><span class="kw3">Object</span></a> constraints<span class="br0">&#41;</span></div></li></ol></pre>

<p>
La classe BorderLayout defineix cinc constants que serveixen per indicar cada zona en el paràmetre <code>constraints</code>:
</p>
<ul>
<li class="level1"><div class="li"> <code>BorderLayout.NORTH</code> </div>
</li>
<li class="level1"><div class="li"> <code>BorderLayout.SOUTH</code> </div>
</li>
<li class="level1"><div class="li"> <code>BorderLayout.EAST</code>  </div>
</li>
<li class="level1"><div class="li"> <code>BorderLayout.WEST</code></div>
</li>
<li class="level1"><div class="li"> <code>BorderLayout.CENTER</code></div>
</li>
</ul>

<p>
La <span class="figref"><a href="#Figure5"><span>figura</span></a></span> mostra un exemple de redimensionat d’un contenidor amb aquest <em>layout</em>. Fixeu-vos que els components a est i oest no varien de mida tot i que el contenidor augmenta d’amplada.
</p>
<div class="iocfigure"><a name="Figure5"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Redimensionat d’un BorderLayout

</figcaption><img src="../media/ic10m03u4_11.png" alt="" /></figure>
</div>
</div>

<h4><a id="gridlayout" >GridLayout</a></h4>
<div class="level4">

<p>
El GridLayout organitza el component com una matriu amb cel·les de mida idèntica. En cada cel·la només hi pot haver un component, que ocupa tot l’espai disponible independentment de quina en seria la mida per defecte. Els components s’ubiquen per files, d’esquerra a dreta en el ma-add teix ordre en què es crida el mètode add.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
No es poden saltar cel·les en anar cridant add. Si es vol deixar una cel·la en blanc, n’hi ha prou d’afegir un panell buit.
</p>
</div></div>
<p>
El seu constructor és <code>public GridLayout(int rows, int cols)</code>.
</p>

<p>
El paràmetre <code>rows</code> indica el nombre de files i <code>cols</code> el nombre de columnes. La <span class="figref"><a href="#Figure6"><span>figura</span></a></span> mostra un exemple de redimensionat d’un GridLayout.
</p>
<div class="iocfigure"><a name="Figure6"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Redimensionat d’un GridLayout

</figcaption><img src="../media/ic10m03u4_12.png" alt="" /></figure>
</div>
</div>

<h4><a id="boxlayout" >BoxLayout</a></h4>
<div class="level4">

<p>
El BoxLayout s’acostuma a aplicar sobre un contenidor específic, el Box, que ja porta incorporat aquest <em>layout</em> per defecte en ser instanciat i no es pot canviar. Els components que conté mantenen la mida per defecte i s’ubiquen en una sola línia horitzontal o vertical, centrada.
</p>

<p>
Les instàncies de la classe Box no es generen mitjançant un mètode constructor, en els seu lloc s’utilitza un dels dos mètodes estàtics definits en la mateixa classe Box. El mètode a usar depèn de si es volen alinear els components horitzontalment o verticalment:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+box"><span class="kw3">Box</span></a> alineaVertical <span class="sy0">=</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+box"><span class="kw3">Box</span></a>.<span class="me1">createVerticalBox</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+box"><span class="kw3">Box</span></a> alineaHoritzontal <span class="sy0">=</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+box"><span class="kw3">Box</span></a>.<span class="me1">createHorizontalBox</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>

<p>
La <span class="figref"><a href="#Figure7"><span>figura</span></a></span> mostra un exemple de redimensionat d’un contenidor Box d’alineació vertical.
</p>
<div class="iocfigure"><a name="Figure7"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Redimensionat d’un BoxLayout vertical

</figcaption><img src="../media/ic10m03u4_13.png" alt="" /></figure>
</div>
<p>
Una altra de les particularitats dels contenidors Box és la seva capacitat d’incloure, usant el mètode add, dos components especials que cap altre tipus de <em>layout</em> pot usar: les <em>Struts</em> i les <em>Glues</em>, verticals i horitzontals. Donada una instància de Box, només es poden afegir <em>Glues</em> o <em>Struts</em> de la seva mateixa alineació (vertical o horitzontal). Novament, aquests components s’instancien mitjançant mètodes estàtics definits en la classe Box:
</p>
<ul>
<li class="level1"><div class="li"> <code>Component Box.createVerticalGlue()</code> </div>
</li>
<li class="level1"><div class="li"> <code>Component Box.createVerticalStrut(int height)</code> </div>
</li>
<li class="level1"><div class="li"> <code>Component Box.createHorizontalGlue()</code> </div>
</li>
<li class="level1"><div class="li"> <code>Component Box.createHorizontalStrut(int width)</code></div>
</li>
</ul>

<p>
Les <em>Struts</em> són espais en blanc d’un nombre concret de píxels (indicat amb els paràmetres <code>height</code> o <code>width</code>). Independentment de les dimensions de la Box, aquest espai es manté sempre invariable. Les <em>Glue</em> són exactament el contrari al que podria donar a entendre la seva traducció, “cola”. Dos components separats per una <em>Glue</em> sempre s’ubiquen el més separat possible segons l’espai que hi ha. Es pot considerar que es comporta com una molla en expansió.
</p>

<p>
En la <span class="figref"><a href="#Figure8"><span>figura</span></a></span> es mostra un exemple d’aplicació de <em>Glues</em> i <em>Struts</em>.
</p>
<div class="iocfigure"><a name="Figure8"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Exemple d’ús de “Struts” i “Glues”.

</figcaption><img src="../media/ic10m03u4_14.png" alt="" /></figure>
</div>
</div>

<h4><a id="cardlayout" >CardLayout</a></h4>
<div class="level4">

<p>
Aquest <em>layout</em> organitza els components com una pila de cartes, on tots estan ubicats però a cada moment només se’n pot visualitzar un, el qual ocupa el màxim espai possible. L’ordre amb què s’afegeixen a la pila és el mateix en què es crida el mètode add sobre el contenidor.
</p>

<p>
El seu constructor és <code>public CardLayout()</code>.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
El CardLayout se sol usar per sobreposar panells.
</p>
</div></div>
<p>
Per anar canviant entre els diferents components de la pila, la classe <code>CardLayout</code> disposa d’un seguit de mètodes. En tots el paràmetre es refereix al contenidor en què s’ha aplicat el <em>layout</em>:
</p>
<ul>
<li class="level1"><div class="li"> <code>public void first(Container parent)</code>: Salta al primer component afegit.</div>
</li>
<li class="level1"><div class="li"> <code>public void last(Container parent)</code>: Salta al darrer component afegit.</div>
</li>
<li class="level1"><div class="li"> <code>public void next(Container parent)</code>: Salta al component afegit a continuació del visualitzat actualment.</div>
</li>
<li class="level1"><div class="li"> <code>public void previous(Container parent)</code>: Salta al component afegit tot just abans del visualitzat actualment.</div>
</li>
</ul>

<p>
La <span class="figref"><a href="#Figure9"><span>figura</span></a></span> mostra com s’alternen els components d’un CardLayout.
</p>
<div class="iocfigure"><a name="Figure9"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Esquema de funcionament del CardLayout.

</figcaption><img src="../media/ic10m03u4_15.png" alt="" /></figure>
</div>
</div>

<h4><a id="gridbaglayout" >GridBagLayout</a></h4>
<div class="level4">

<p>
El GridBagLayout és el més versàtil i complex de tots els <em>layouts</em>. Justament per la seva complexitat, ens limitarem a donar una idea general del seu funcionament, ja que una explicació detallada seria molt extensa.
</p>

<p>
Aquest <em>layout</em> és conceptualment similar al GridLayout, i divideix el contenidor en una matriu de cel·les. La particularitat és que en aquest cas les diferents files i columnes poden ser de mida desigual i els components inclosos poden ocupar diverses cel·les contigües, tant en diferents files com columnes. Els components sempre ocupen tot l’espai possible de les cel·les assignades.
</p>

<p>
El seu constructor és <code>public GridBagLayout()</code>.
</p>

<p>
Totes les propietats especials de les cel·les es defineixen amb l’ajut de la classe auxiliar <code>GridBagConstraints</code>. Les crides al mètode <code>add</code> al contenidor que usa aquest <em>layout</em> contenen tant el component a afegir com una instància d’aquesta classe:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">add<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+component"><span class="kw3">Component</span></a> comp, <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+gridbagconstraints"><span class="kw3">GridBagConstraints</span></a> constraints<span class="br0">&#41;</span></div></li></ol></pre>

<p>
La classe <code>GridBagConstraints</code> té un conjunt de propietats amb les quals definim com s’ubica l’element afegit dins la graella i quantes caselles ocupa per cada eix. Algunes de les més significatives són:
</p>
<ul>
<li class="level1"><div class="li"> <strong>gridx, gridy</strong>. Especifica la fila i columna en l’extrem superior dret del component. La primera fila i columna de la graella són les posicions zero. Si no s’especifica, l’element s’ubicarà tot just desprès de l’afegit tot just abans.</div>
</li>
<li class="level1"><div class="li"> <strong>gridwidth, gridheight</strong>. Indica el nombre de cel·les horitzontals o verticals que ocupa el component. Per defecte és 1. Si s’usa la constantGridBagConstraints.REMAINDER, significa que es volen ocupar totes les files o columnes restants fins al final.</div>
</li>
<li class="level1"><div class="li"> <strong>ipadx, ipady</strong>. Especifica un farcit extra al voltant del component, internament, en píxels. Per tant, el component mai serà més petit que aquest valor. Per defecte és zero.</div>
</li>
<li class="level1"><div class="li"> <strong>insets</strong>.Similar al cas anterior, però el farcit és extern, per la qual cosa es crea un cert espai de separació entre aquest component i la resta que l’envolten. Per defecte és zero.</div>
</li>
<li class="level1"><div class="li"> <strong>anchor</strong>. Usat quan el component és més petit que la cel·la, de manera que indica a quin extrem d’aquesta s’ha d’ajustar. GridBagConstraints especifica un seguit de constants per a aquest valor: <code>CENTER</code> (per defecte), <code>PAGE_START</code>, <code>PAGE_END</code>, <code>LINE_START</code>, <code>LINE_END</code>, <code>FIRST_LINE_START</code>, <code>FIRST_LINE_END</code>, <code>LAST_LINE_END</code>, i <code>LAST_LINE_START</code>.</div>
</li>
</ul>

<p>
Tot i que res no impedeix reusar objectes GridBagConstraints en crides successives del mètode add per als casos de components amb característiques idèntiques, és millor usar instàncies diferents per evitar confusions.
</p>

<p>
La <span class="figref"><a href="#Figure10"><span>figura</span></a></span> mostra un exemple de redimensionat de GridBagLayout. Les línies de separació entre cel·les no es visualitzen en realitat, només apareixen en la figura per facilitar la comprensió del seu funcionament. El component 5 és un exemple de l’element més petit que les cel·les que ocupa, i per tant ha està afegit amb un <em>anchor</em> de LAST_LINE_END.
</p>
<div class="iocfigure"><a name="Figure10"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Exemple de redimensionat de GridBagLayout

</figcaption><img src="../media/ic10m03u4_16.png" alt="" /></figure>
</div>
</div>

<h4><a id="grouplayout" >GroupLayout</a></h4>
<div class="level4">

<p>
Des de la versió 1.6, el Java incorpora el <em>layout</em> GroupLayout, molt orientat al desenvolupament automàtic d’<em>interfaces</em> gràfiques mitjançant eines auxiliars. Res no impedeix usar-lo manualment, tot i que, com el GridBagLayout, té un cert grau de complicació.
</p>

<p>
La filosofia d’aquest <em>layout</em> és desplegar els elements al llarg dels dos eixos de coordenades (vertical i horitzontal). Al llarg d’aquests eixos, els elements s’agrupen mitjançant grups jeràrquics, de manera que donat un grup, hi pot haver continguts, components, altres grups, o espais en blanc. L’addició de grups és el que permet fer una organització jeràrquica, mentre que els espais són espais en blanc, són separacions buides entre elements. Els grups estan representats per la classe <code>GroupLayout.Group</code>, en la qual hi ha un conjunt de mètodes que permeten afegir-hi elements:
</p>
<ul>
<li class="level1"><div class="li"> <code>addComponent (Component comp)</code></div>
</li>
<li class="level1"><div class="li"> <code>addGroup(GroupLayout.Group group)</code></div>
</li>
<li class="level1"><div class="li"> <code>addGap(int size)</code></div>
</li>
</ul>

<p>
Al mateix temps, hi ha dos tipus de grups: seqüencials i paral·lels. En el primer cas els elements s’ubiquen un darrera l’altre al llarg de l’eix de coordenades corresponent, mentre que en el segon cas s’ubiquen en paral·lel. De manera similar a les Box, hi ha una classe concreta per a cada subtipus: <code>SequentialGroup</code> i <code>ParallelGroup</code>. Per crear algun d’aquest grups cal cridar els mètodes definits en la classe GroupLayout:
</p>
<ul>
<li class="level1"><div class="li"> <code>GroupLayout.Group createSequentialGroup()</code></div>
</li>
<li class="level1"><div class="li"> <code>GroupLayout.Group createParallelGroup()</code></div>
</li>
</ul>

<p>
La clau d’aquest <em>layout</em> està en el fet que almenys hi ha d’haver un grup associat a l’eix vertical i un altre a l’horitzontal, i tots els components han de pertànyer a dos grups, un de l’eix vertical i un de l’horitzontal. A partir del grup on estan associats, se’n pot calcular la ubicació.
</p>

<p>
La millor manera d’entendre com es fa aquest càlcul d’ubicació és mitjançant un exemple. La <span class="figref"><a href="#Figure11"><span>figura</span></a></span> mostra un GroupLayout en què hi ha un únic grup paral·lel associat a l’eix vertical i un de seqüencial a l’eix horitzontal. Cada component visualitzat (1, 2 i 3) pertany a tots dos grups i s’ha afegit al grup en ordre de numeració incremental. Els espais entre elements en realitat no existirien, s’han posat en la imatge per fer-la més clara.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">GroupLayout layout <span class="sy0">=</span> <span class="kw1">new</span> groupLapout<span class="br0">&#40;</span>panel<span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">GroupLayout.<span class="me1">SequentialLayout</span> hg <span class="sy0">=</span> </div></li><li class="li1"><div class="de1">layout.<span class="me1">createSequentialGroup</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">GroupLayout.<span class="me1">ParallelLayout</span> vg <span class="sy0">=</span> layout.<span class="me1">createParallelGroup</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jlabel"><span class="kw3">JLabel</span></a> l1 <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jlabel"><span class="kw3">JLabel</span></a><span class="br0">&#40;</span><span class="st0">&quot;1&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jlabel"><span class="kw3">JLabel</span></a> l2 <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jlabel"><span class="kw3">JLabel</span></a><span class="br0">&#40;</span><span class="st0">&quot;2&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jlabel"><span class="kw3">JLabel</span></a> l3 <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jlabel"><span class="kw3">JLabel</span></a><span class="br0">&#40;</span><span class="st0">&quot;3&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">hg.<span class="me1">addComponent</span><span class="br0">&#40;</span>l1<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">hg.<span class="me1">addComponent</span><span class="br0">&#40;</span>l2<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">hg.<span class="me1">addComponent</span><span class="br0">&#40;</span>l3<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">vg.<span class="me1">addComponent</span><span class="br0">&#40;</span>l1<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">vg.<span class="me1">addComponent</span><span class="br0">&#40;</span>l2<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">vg.<span class="me1">addComponent</span><span class="br0">&#40;</span>l3<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">layout.<span class="me1">setHorizontalGroup</span><span class="br0">&#40;</span>hg<span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>
<div class="iocfigure"><a name="Figure11"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

GroupLayout seqüencial (eix horitzontal) i paral.lel (eix vertical).

</figcaption><img src="../media/ic10m03u4_17.png" alt="" /></figure>
</div>
<p>
En contraposició, en la <span class="figref"><a href="#Figure12"><span>figura</span></a></span> es mostra com s’ubicarien els components si els dos grups fossin seqüencials en els dos eixos. Els elements s’han afegit als grups igual que en el cas de la <span class="figref"><a href="#Figure11"><span>figura</span></a></span>, però com es pot apreciar, en lloc d’ubicar-se paral·lelament en l’eix vertical avancen una posició perquè són un grup seqüencial.
</p>
<div class="iocfigure"><a name="Figure12"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

GroupLayout seqüencial (eix horitzontal) i seqüencial (eix vertical).

</figcaption><img src="../media/ic10m03u4_18.png" alt="" /></figure>
</div>
<p>
Una de les particularitats més importants del GroupLayout és que permet crear composicions d’elements sense haver de dependre de subpanells auxiliars. Els grups ja fan aquest paper.
</p>

</div>

<h3><a id="creacio_d_interficies_complexes" >Creació d&#039;interfícies complexes</a></h3>
<div class="level3">

<p>
A partir de l’estudi dels diferents <em>layouts</em> existents, es pot arribar a la conclusió que molts, per si mateixos, no són suficients per generar una <em>interface</em> gràfica d’una certa complexitat. Aquest fet és especialment evident en casos com el BorderLayout, en què en cada zona només hi pot haver un component i, per tant, només hi podria haver cinc components en tota la <em>interface</em>.
</p>

<p>
Això es deu al fet que, normalment, un entorn gràfic no es pot resoldre amb un únic <em>layout</em>, sinó que cal la combinació de diferents <em>layouts</em> usats en diversos panells dins la finestra principal, tal com mostra la <span class="figref"><a href="#Figure13"><span>figura</span></a></span>. De fet, els <em>layouts</em> és el que dóna sentit a l’existència de la classe JPanel, un contenidor que defineix àrees dins la finestra principal.
</p>
<div class="iocfigure"><a name="Figure13"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Combinació de layouts per generar una interfície gràfica complexa.

</figcaption><img src="../media/ic10m03u4_19.png" alt="" /></figure>
</div>
<p>
El fet d’haver d’estudiar com es combinen diferents <em>layouts</em> per assolir el resultat desitjat és un dels factors que donen una certa complexitat al disseny d’una <em>interface</em> gràfica i el que fa recomanable l’ús d’un IDE.
</p>

<p>
A continuació es mostra un exemple de com es poden combinar diferents <em>layouts</em> per generar la calculadora que es mostra en la <span class="figref"><a href="#Figure14"><span>figura</span></a></span>. Concretament, es combina un BorderLayout amb un GridLayout per aconseguir l’efecte final.
</p>

<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/ic10m03u4_20.png" class="imgB" title="Calculadora creada combinant layouts./1" alt="Calculadora creada combinant layouts./1" /></li><li><small>Calculadora creada combinant layouts.</small></li>
</ul></div>

</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="co1">//Contenidor d'alt nivell: finestra principal</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jframe"><span class="kw3">JFrame</span></a> frame <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jframe"><span class="kw3">JFrame</span></a><span class="br0">&#40;</span><span class="st0">&quot;Calculadora&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jpanel"><span class="kw3">JPanel</span></a> panell <span class="sy0">=</span> calculadora.<span class="me1">getContentPane</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">panell.<span class="me1">setLayout</span><span class="br0">&#40;</span><span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+borderlayout"><span class="kw3">BorderLayout</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jlabel"><span class="kw3">JLabel</span></a> display <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jlabel"><span class="kw3">JLabel</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">display.<span class="me1">setHorizontalAlignment</span><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+swingconstants"><span class="kw3">SwingConstants</span></a>.<span class="me1">RIGHT</span><span class="br0">&#41;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1"><span class="co1">//Display de la calculadora a la zona superior</span></div></li><li class="li1"><div class="de1">panell.<span class="me1">add</span><span class="br0">&#40;</span>display, <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+borderlayout"><span class="kw3">BorderLayout</span></a>.<span class="me1">NORTH</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jpanel"><span class="kw3">JPanel</span></a> panellBotons <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jpanel"><span class="kw3">JPanel</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">panellBotons.<span class="me1">setLayout</span><span class="br0">&#40;</span><span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+gridlayout"><span class="kw3">GridLayout</span></a><span class="br0">&#40;</span><span class="nu0">4</span>, <span class="nu0">4</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jbutton"><span class="kw3">JButton</span></a> boto7 <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jbutton"><span class="kw3">JButton</span></a><span class="br0">&#40;</span><span class="st0">&quot;7&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1"><span class="me1">panell</span>.<span class="me1">add</span><span class="br0">&#40;</span>boto7<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1"><span class="co1">//Panell de botons a la zona central</span></div></li><li class="li1"><div class="de1">panell.<span class="me1">add</span><span class="br0">&#40;</span>panellBotons, <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+borderlayout"><span class="kw3">BorderLayout</span></a>.<span class="me1">CENTER</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">...</div></li></ol></pre>
<div class="ioctextl"><div class="ioccontent"><p class="ioctitle">El Netbeans i layouts absoluts</p>
<p>
El Netbeans disposa d’un <em>layout</em> de posicionament absolut: la classe <code>org.netbeans.lib.awtextra.AbsoluteLayout</code>.
</p>
</div></div>
<p>
Afortunadament, a l’hora de generar <em>interfaces</em> amb composicions complexes, en què cal ubicar els components de manera molt especial, hi ha una alternativa molt útil: els <em>layouts</em> de posicionament absolut (o, simplement, <em>layouts</em> absoluts). Algunes biblioteques externes a les estàndard del Java proporcionen un tipus especial de <em>layout</em> que permet el posicionament absolut dels components. D’aquesta manera, es pot indicar la ubicació i mides exactes de cada component, que mai varia al llarg de l’execució de l’aplicació independentment que es redimensioni el contenidor.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">setResizable</p>
<p>
Aquest mètode serveix per habilitar/deshabilitar la capacitat de redimensionar una finestra. Evitant que es pugui redimensionar la finestra podem eludir el problema del redimensionat del layout absolut.
</p>
</div></div>
<p>
Si bé aquest tipus de <em>layout</em> pot estalviar molta feina, cal ser molt conscient de les implicacions del seu ús. Per una banda, al redimensionar el contenidor d’alt nivell, tot segueix igual, i per tant, tot el nou espai extra queda buit, tal com mostra la <span class="figref"><a href="#Figure14"><span>figura</span></a></span>
</p>
<div class="iocfigure"><a name="Figure14"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Redimensionat d’un layout absolut.

</figcaption><img src="../media/ic10m03u4_21.png" alt="" /></figure>
</div>
<p>
D’altra banda, mai no s’ha d’oblidar que els <em>layouts</em> absoluts són aliens a les biblioteques estàndard del Java. Cal incloure’ls com a classes addicionals dins de les aplicacions que els usen en desplegar-les, o aquestes no funcionaran.
</p>

</div>

<h2><a id="connexio_de_la_interficie_a_l_aplicacio" >Connexió de la interfície a l&#039;aplicació</a></h2>
<div class="level2">

<p>
Mitjançant la combinació d’objectes de les classes definides en la biblioteca Java Swing és possible generar finestres amb tots els components correctament ubicats i visualitzats, però qualsevol interacció per part de l’usuari no fa res. Per interconnectar la <em>interface</em> gràfica generada amb la lògica interna del programa, quan l’usuari dóna una ordre, aquesta es tradueix en una interacció directa amb els objectes que componen la lògica interna del programa, i en canvia l’estat.
</p>

<p>
Aquesta tasca d’interconnexió no és trivial si és vol fer la feina ben feta, ja que hi ha problemes que, si no es preveuen, tenen un impacte greu en l’escalabilitat de l’aplicació, i incrementen la possibilitat que qualsevol lleugera modificació impliqui canvis en moltes altres classes. El més important de tot és no respectar el principi d’encapsulació, barrejant el codi vinculat exclusivament a la gestió de la <em>interface</em> gràfica amb el de la lògica del programa. Si això succeeix, el disseny generat quedarà lligat per sempre a aquesta <em>interface</em>, i adaptar-lo a una altra implicarà modificacions. Les classes deixen de ser directament reusables. Per tant, l’objectiu principal és separar les classes vinculades a la <em>interface</em> amb les vinculades a la lògica interna, o estat, de l’aplicació.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
Per lògica interna del programa s’entén les instàncies de les classes generades en el procés de disseny de l’aplicació.
</p>
</div></div><div class="iocimportant"><div class="ioccontent">
<p>
El <strong>cas ideal d’interconnexió és</strong> aquell en què les classes del model estàtic UML, resultat del procés de disseny, es poden integrar dins de qualsevol <em>interface</em>, sigui quina en sigui l’aparença, sense haver de fer absolutament cap canvi sobre aquestes.
</p>
</div></div>
<p>

</p>

<p>
Perquè l’aplicació final sigui escalable i reusable, s’ha d’establir una estratègia que es pugui usar en qualsevol llenguatge de programació.
</p>

</div>

<h3><a id="el_patro_model-vista-controlador" >El patró Model-Vista-Controlador</a></h3>
<div class="level3">

<p>
Per a interconnectar la lògica interna de l’aplicació, generada en el procés de disseny en forma de diagrama UML, amb la <em>interface</em> d’usuari, una immensa majoria de llenguatges, incloent-hi el Java, es decanta pel patró de disseny anomenat <strong>Model-Vista-Controlador</strong> (MVC).
</p>
<div class="iocnote"><div class="ioccontent">
<p>
El patró MVC és aplicable a qualsevol aplicació que permet la interacció amb l’usuari. No és exclusiu d’aplicacions amb interfaces gràfiques.
</p>
</div></div><div class="iocimportant"><div class="ioccontent">
<p>
Un <strong>patró de disseny</strong> és una estratègia a seguir per resoldre un problema determinat dins el procés de disseny del programari, de manera es pugui emprar en un ampli ventall de situacions. De totes maneres, sempre cal adaptar aquesta estratègia als detalls de cada cas concret.
</p>
</div></div>
<p>
En aquest cas, el problema que hi ha en el procés de disseny de programari que es vol resoldre és l’esmentat anteriorment: com es pot separar de manera efectiva la lògica interna del programa de la <em>interface</em> d’usuari, de manera que modificacions en una part impliquin canvis mínims en l’altra.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">MVC i SmallTalk</p>
<p>
El patró MVC té els orígens en el llenguatge SmallTalk, cosa que no és gens estranya si es té en compte que aquest llenguatge va ser dissenyat per fer la <em>interface</em> gràfica del Dynabook.
</p>
</div></div>
<p>
El patró MVC divideix les diferents classes de l’aplicació en tres conjunts diferenciats, segons el rol. Aquesta diferenciació és exclusivament conceptual i no s’ha de traduir en algun tipus de relació entre classes a nivell de diagrama UML (associació, herència, etc.).
</p>

<p>
Les classes del <strong>Model</strong> representen la lògica interna del programa i contenen l’estat de l’aplicació, i proporcionen totes les funcionalitats exclusives a l’aplicació, independents de la <em>interface</em>. Aquest grup està compost principalment per les classes que el dissenyador ha reflectit en el model estàtic UML.
</p>

<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/ic10m03u4_22.png" class="imgB" title="La torre Agbar de Barcelona és un enorme panell de LED (Light Emitting Diodes, diodes emissors de llum) que forma part de la Vista del programa que la controla./5" alt="La torre Agbar de Barcelona és un enorme panell de LED (Light Emitting Diodes, diodes emissors de llum) que forma part de la Vista del programa que la controla./5" /></li><li><small>La torre Agbar de Barcelona és un enorme panell de LED (Light Emitting Diodes, diodes emissors de llum) que forma part de la Vista del programa que la controla.</small></li>
</ul></div>

</p>

<p>
Les classes de la <strong>Vista</strong> representen l’aspecte purament vinculat a la <em>interface</em> d’usuari, gràfica o no. Aquestes s’encarreguen tant de capturar les interaccions de l’usuari com d’accedir a les dades emmagatzemades en el model, de manera que l’usuari les pugui visualitzar i manipular correctament. Per tant, una de les seves responsabilitats principals és mantenir la consistència entre les dades internes i el que visualitza l’usuari. Qualsevol classe usada per gestionar un element on visualitzar la informació o donar ordres a l’aplicació forma part d’aquest grup. Per exemple, la classe que gestiona una impressora o un panell de LED també es consideraria part de la Vista. Tots els components gràfics Swing de l’aplicació pertanyen exclusivament a aquest grup.
</p>

<p>
Les classes del <strong>Controlador</strong> representen la capa intermèdia entre dades i <em>interface</em> que s’encarrega de traduir cada interacció de l’usuari, capturada per la Vista, en crides a mètodes definits en el Model, de manera que s’executi la lògica interna adequada a l’ordre donada per l’usuari. En aquest grup hi haurà una classe per a cada funcionalitat que es vulgui incorporar a la <em>interface</em>.
</p>

<p>
Mitjançant les interaccions dels objectes de classes dels diferents conjunts es genera una aplicació que respon a les ordres de l’usuari. Atès que aquestes interaccions, en darrera instància, sempre es tradueixen en crides a mètodes, aquest patró de disseny estableix els mecanismes necessaris perquè un usuari pugui cridar mètodes sobre les instàncies de les classes del diagrama UML resultat del disseny de l’aplicació.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
S’entén per fer doble clic pitjar un botó del ratolí dues vegades molt ràpidament.
</p>
</div></div>
<p>
L’esquema d’actuació dels elements del patró MVC és el següent:
</p>
<ol>
<li class="level1"><div class="li"> L’usuari actua sobre una instància d’una classe de la Vista, per exemple, un botó.</div>
</li>
<li class="level1"><div class="li"> L’objecte rep l’acció i la passa a una instància d’una classe del Controlador. En aquest procés es transmet tota la informació addicional necessària per al tractament correcte de l’acció. Per exemple, si s’ha fet amb el botó dret o esquerre del ratolí, o si s’ha fet doble clic.</div>
</li>
<li class="level1"><div class="li"> L’objecte Controlador crida els mètodes que pertoqui del Model per aconseguir el resultat associat a l’acció de l’usuari.</div>
</li>
<li class="level1"><div class="li"> L’estat dels objectes del Model canvia.</div>
</li>
<li class="level1"><div class="li"> El Model avisa la Vista que hi ha hagut canvis.</div>
</li>
<li class="level1"><div class="li"> Els objectes de la Vista que mostren la informació associada a l’estat del Model criden els mètodes de consulta necessaris per mostrar correctament el nou estat.</div>
</li>
</ol>

<p>
La <span class="figref"><a href="#Figure15"><span>figura</span></a></span> mostra un resum de les interaccions entre els objectes dels tres conjunts. Les diferents interaccions normalment es divideixen entre les que es tradueixen en crides a mètodes en moments clarament identificables durant l’execució de l’aplicació, les crides síncrones, i les que no ho són, ja que poden sorgir en qualsevol moment, les crides asíncrones.
</p>
<div class="iocfigure"><a name="Figure15"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Esquema d’interaccions Model-Vista-Controlador.

</figcaption><img src="../media/ic10m03u4_23.png" alt="" /></figure>
</div><div class="ioctext"><div class="ioccontent"><p class="ioctitle">Entorns heterogenis</p>
<p>
Alguns exemples típics són la portabilitat a dispositius mòbils o sistemes encastats (caixers automàtics, caixes enregistradores, etc.).
</p>
</div></div>
<p>
A part dels beneficis esmentats, tot seguit es mostren algunes altres aportacions d’usar el patró MVC. El preu a pagar per obtenir tots aquests beneficis és un cert increment en la complexitat de l’aplicació. Aquest, però, és un preu que val la pena pagar. Són:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Més reusabilitat de les classes</strong>. La separació entre les classes del Model i la Vista permet implementar més fàcilment aplicacions en què hi ha diferents mecanismes per visualitzar la informació en paral·lel. Això també permet facilitar el test i el manteniment d’aquestes classes, ja que tot l’accés a l’estat de l’aplicació sempre es realitza per mitjà d’aquestes.</div>
</li>
<li class="level1"><div class="li"> <strong>Millor portabilitat en entorns heterogenis</strong>. L’adaptació de l’aplicació a nous sistemes amb diferents capacitats per visualitzar la informació només implica la implementació d’una nova Vista. El Model es pot mantenir íntegre sense que calgui cap modificació.</div>
</li>
</ul>

<p>
Tot i els passos enumerats, val la pena comentar que hi ha situacions en què és factible no obeir el model directament i fer que sigui el Controlador el que forci l’actualització de la Vista. Si bé aquesta no és una aproximació pura, no es perd cap dels avantatges descrits del patró MVC.
</p>

</div>

<h3><a id="control_d_esdeveniments" >Control d&#039;esdeveniments</a></h3>
<div class="level3">
<div class="iocnote"><div class="ioccontent">
<p>
Sempre s’executa el codi vinculat al motor gràfic que gestiona la visualització de la interfície.
</p>
</div></div>
<p>
Una de les particularitats de les aplicacions interactives és que, un cop es posen en marxa, aquestes es queden parcialment o totalment inactives a l’espera que l’usuari faci alguna acció. Fins que això no succeeix, no s’executa cap codi associat a les funcionalitats de l’aplicació. Aquesta circumstància es plasma dins el patró MVC amb les crides asíncrones, també anomenades esdeveniments, entre els objectes de la Vista i el Controlador. És per això que la biblioteca Java Swing implementa aquest patró mitjançant el mecanisme anomenat <strong>control d’esdeveniments</strong>. Els esdeveniments són generats pel motor gràfic del Java en resposta a accions de l’usuari. El programador no s’ha de preocupar de com es generen realment.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
Les accions de l’usuari sobre components Swing generen <strong>esdeveniments</strong>. Aquests esdeveniments són associats a fragments de codi, que s’executen cada cop que tenen lloc.
</p>
</div></div>
<p>
Reflexionant una mica, el concepte d’esdeveniment asíncron amb un codi associat no és un aspecte totalment nou, ja que conceptualment no és gens diferent de l’usat en el Java per al control d’errors mitjançant excepcions.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Gestió de focus</p>
<p>
Un control guanya el focus sempre que és usat. Normalment, el focus també es pot desplaçar entre controls amb la tecla de tabulador.
</p>
</div></div>
<p>
Swing defineix un conjunt de classes que representen cada tipus d’interacció, genèricament, que l’usuari pot realitzar sobre un component. Com en el cas de les excepcions, els esdeveniments són objectes, resultants de la instanciació d’alguna d’aquestes classes, que el programador pot manipular per obtenir informació més detallada respecte a les particularitats de l’acció que l’han generat. Totes elles pertanyen al paquet java.awt.event.
</p>

<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/ic10m03u4_24.png" class="imgB" title="El control JButton2 té el focus en aquesta imatge." alt="El control JButton2 té el focus en aquesta imatge." /></li><li><small>El control JButton2 té el focus en aquesta imatge.</small></li>
</ul></div>

</p>

<p>
Alguns dels tipus d’esdeveniments més típics són els següents:
</p>
<ul>
<li class="level1"><div class="li"> <strong>ActionEvent</strong>: Es genera en realitzar l’acció més típica, o estàndard, sobre un control. Cada control estableix quina considera que és la seva acció estàndard, que pot ser diferent per a cada cas. Per exemple, en el cas d’un botó, es genera en pitjar-lo.</div>
</li>
<li class="level1"><div class="li"> <strong>MouseEvent</strong>: Generat davant qualsevol acció vinculada exclusivament al ratolí. Per exemple, en pitjar qualsevol botó del ratolí, moure l’apuntador dins una àrea concreta, etc.</div>
</li>
<li class="level1"><div class="li"> <strong>KeyEvent</strong>: Associat a accions exclusivament relatives al teclat. Per exemple, pitjar una tecla o deixar-la anar.</div>
</li>
<li class="level1"><div class="li"> <strong>WindowEvent</strong>: Qualsevol esdeveniment relatiu a l’estat d’una finestra. Per exemple, minimitzar-la, maximitzar-la, redimensionar-la o tancar-la.</div>
</li>
<li class="level1"><div class="li"> <strong>FocusEvent</strong>: Aquest esdeveniment ve donat per accions vinculades al focus de controls. Amb focus es refereix al fet que un control queda remarcat dins la <em>interface</em>, de manera que s’hi pot interactuar directament mitjançant el teclat. Exemples d’aquest tipus d’esdeveniment són guanyar o perdre el focus.</div>
</li>
<li class="level1"><div class="li"> <strong>TextEvent</strong>: Generat en realitzar accions relatives a camps de text. Per exemple, modificar un camp de text.</div>
</li>
</ul>

<p>
No tots els components Swing poden generar absolutament tots els tipus d’esdeveniments, sinó que només generen els associats a interaccions que realment poden rebre. De fet, alguns estan molt vinculats a components molt específics: per exemple, en una aplicació d’escriptori, només els JFrame generen WindowEvent i només els JTextComponent generen TextEvent. Per veure amb detall quins esdeveniments llença cada component Swing davant cada tipus d’acció, és necessari mirar la documentació de Java.
</p>

<p>
La <span class="figref"><a href="#Figure16"><span>figura</span></a></span> mostra un exemple d’esdeveniment: la classe <code>MouseEvent</code>. Com es pot veure, aquest disposa d’un conjunt de mètodes que permeten consultar-ne els detalls: quin botó s’ha pitjat, quantes pulsacions s’han fet, quines són les coordenades de la seva posició sobre la finestra principal, etc. Alguns d’aquest mètodes són específics d’un esdeveniment generat pel ratolí, i d’altres són aplicables a qualsevol, heretats de la superclasse <code>AWTEvent</code>.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
El mètode getComponent retorna el component que ha generat l’esdeveniment.
</p>
</div></div><div class="iocfigure"><a name="Figure16"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Exemple d’esdeveniment: la classe “MouseEvent”.

</figcaption><img src="../media/ic10m03u4_25.png" alt="" /></figure>
</div>
</div>

<h3><a id="captura_d_esdeveniments" >Captura d&#039;esdeveniments</a></h3>
<div class="level3">

<p>
La captura d’esdeveniments, de manera que es puguin tractar dins l’aplicació, es realitza mitjançant uns objectes especials anomenats <em>Listeners</em>. Aquests objectes conformen la part de Controlador del patró MVC plasmat en la biblioteca gràfica del Java. 
</p>

</div>

<h4><a id="listeners" >Listeners</a></h4>
<div class="level4">

<p>
Hi ha un tipus de <em>Listener</em> diferent per cada tipus d’esdeveniment: objectes ActionListener, que capturen esdeveniments tipus ActionEvent, objectes MouseListener per capturar els MouseEvent, etc. Cada tipus de <em>Listener</em> només pot capturar el tipus d’esdeveniment al qual esta associat, i absolutament cap altre.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Nomenclatura dels Listeners</p>
<p>
Donat un tipus d’esdeveniment “xxxEvent”, normalment, el seu “Listener” associat té el nom “xxxListener”. El mètode per assignar-lo a un component es diu “addxxxListener”.
</p>
</div></div>
<p>
Un <em>Listener</em> captura els esdeveniments que genera un únic component dins la <em>interface</em> gràfica. Perquè pugui acomplir aquesta tasca cal <strong>registrar-lo</strong> en el component. Si per un tipus concret d’esdeveniment el component no té cap <em>Listener</em> associat registrat, aquests s’ignoraran, independentment del fet que l’usuari pugui fer l’acció sobre el component. No passarà res a l’aplicació en fer-la. Per fer el registre, cada component disposa d’un mètode diferent per cada tipus d’esdeveniment que pot generar. Per exemple, els components que generen ActionEvent disposen d’un mètode addActionListener que permet registrar-hi un ActionListener. En contraposició, els components que no poden generar aquest tipus d’esdeveniment no disposen d’aquest mètode i, per tant, no poden tenir registrat cap ActionListener.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
Els objectes <strong>Listener</strong> són els encarregats de capturar els diferents tipus d’esdeveniment, adoptant el rol de Controlador del patró MVC. Per poder fer-ho, cal que estiguin <strong>registrats</strong> en els components que generen els esdeveniments a capturar.
</p>
</div></div>
<p>
Cada component té la seva llista individualitzada d’objectes <em>Listener</em>, tants com tipus d’esdeveniment calgui capturar pel component. La <span class="figref"><a href="#Figure17"><span>figura</span></a></span> mostra un esquema d’aquest mecanisme per dos botons diferents dins una <em>interface</em> gràfica. D’acord amb la seva llista de <em>Listeners</em>, cada botó respon de manera diferent davant els diferents esdeveniments que generen individualment. Val la pena remarcar que cada <em>Listener</em> que apareix en la figura és un objecte diferent.
</p>
<div class="iocfigure"><a name="Figure17"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Exemple de registre de Listeners i captura d’Events.

</figcaption><img src="../media/ic10m03u4_26.png" alt="" /></figure>
</div>
<p>
La biblioteca gràfica del Java defineix dins de cada tipus de <em>Listener</em> un conjunt de mètodes, cadascun dels quals correspon a una interacció més concreta del que marca l’esdeveniment. Per exemple, la generació d’un MouseEvent per si mateixa només indica que ha passat alguna cosa amb el ratolí, però res més. El nombre d’aquests mètodes varia segons el tipus d’interaccions més especifiques que pot significar cada tipus d’esdeveniment.
</p>

<p>
La <span class="figref"><a href="#Figure18"><span>figura</span></a></span> mostra els <em>Listeners</em> més usats d’entre els definits pel Java, amb tots els seus mètodes.
</p>
<div class="iocfigure"><a name="Figure18"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Exemple d’alguns Listeners típics, amb els seus mètodes definits.

</figcaption><img src="../media/ic10m03u4_27.png" alt="" /></figure>
</div>
<p>
Quan un <em>Listener</em> captura un esdeveniment, immediatament crida el mètode corresponent a l’acció més concreta que ha dut a terme la generació de l’esdeveniment. Per exemple, si es genera un MouseEvent per la pulsació d’un botó del ratolí, el MouseListener, en capturar-lo, executarà immediatament el mètode <code>mouseClicked</code>. D’aquesta manera, és possible fitar quina acció concreta ha dut a terme l’usuari sobre el component que ha generat l’esdeveniment. El mateix esdeveniment es passa com a paràmetre en aquesta crida, de manera que és possible consultar-ne els detalls (quin botó s’ha pitjat, la seva posició, etc.). Tot aquest comportament es produeix automàticament, gestionat pel motor gràfic del Java.
</p>
<div class="iocfigure"><a name="Figure19"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Crida dels mètodes als Listeners.

</figcaption><img src="../media/ic10m03u4_28.png" alt="" /></figure>
</div>
<p>
Un cop s’ha entès com es porta a terme la captura d’esdeveniments i què passa quan es porta a terme, és el moment de veure la darrera peça que falta: com s’executa un tros codi concret quan un usuari realitza una acció sobre la <em>interface</em> gràfica Swing.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
Interfaces Java són classes abstractes pures, sense cap mètode codificat a l’interior. S’hereta d’aquestes amb la paraula clau implements.
</p>
</div></div>
<p>
Dins la biblioteca gràfica del Java, tots els diferents tipus de <em>Listener</em> es troben definits com a <em>interfaces</em> Java. Concretament, tots hereten de la <em>interface</em> comú EventListener. Per tant, en realitat, no és possible instanciar directament un <em>Listener</em> a partir d’ells, ja que aquests només proporcionen la definició dels mètodes mostrats en la <span class="figref"><a href="#Figure19"><span>figura</span></a></span>, però no contenen cap codi executable. Per poder instanciar un <em>Listener</em> d’un tipus concret, el desenvolupador ha de crear una classe pròpia que implementi la <em>interface</em> corresponent i, per tant, codificar mitjançant sobreescriptura tots i cadascun del mètodes definits en la <em>interface</em>. L’objecte <em>Listener</em> que realment es registra en un component és una instància d’aquesta classe creada pel desenvolupador.
</p>

<p>
És justament en aquest punt, en la implementació dels mètodes definits en la <em>interface</em>, que s’assigna el codi que es vol executar davant l’acció d’un usuari. Pel mecanisme de polimorfisme, quan el <em>Listener</em>, prèviament registrat en un component, capturi un esdeveniment i cridi el mètode corresponent a l’acció de l’usuari, el codi que s’executarà serà l’assignat a aquest mètode en la classe creada pel desenvolupador. Així, doncs, es pot veure com gràcies a l’ús de mètodes polimorfes ha estat possible crear la biblioteca gràfica del Java de manera que pugui ser adaptada a qualsevol aplicació.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
El <strong>desenvolupador</strong> ha de generar una classe per cada <em>Listener</em> que vulgui usar dins l’aplicació. Cadascuna d’aquestes classes implementa la <em>interface</em> <em>Listener</em> associada al tipus d’esdeveniment a controlar. Les seves instàncies són les que realment es registren en els components.
</p>
</div></div>
<p>
Donats els rols dels elements del patró MVC, és justament dins els mètodes sobreescrits a aquests <em>Listeners</em> personalitzats des d’on cal fer les crides cap a objectes del Model. La <span class="figref"><a href="#Figure20"><span>figura</span></a></span> mostra una visió general de tot el sistema, associant ja cada part implicada al patró MVC. Recordem que, pel mecanisme d’herència, un objecte Boto1ActionListener també és un ActionListener.
</p>

<p>
Una de les conclusions d’aquest mecanisme és que, atès que el codi associat a una mateixa acció en diferents components normalment també serà diferent, això implica que el desenvolupador ha de crear una classe pròpia <em>Listener</em> per cada tipus d’esdeveniment i cada component dins la <em>interface</em> gràfica. Per exemple, si hi ha tres botons i es vol assignar codi diferent a l’acció de pitjar cada un, caldrà definir tres classes diferents que implementin la <em>interface</em> ActionListener. A cada una s’assignarà el codi que correspongui, diferent dels altres, als mètodes <code>actionPerformed</code> respectius. Un cop fet, ja només resta crear una instància de cadascuna d’aquestes tres classes i assignar una a cada botó, d’acord amb el codi que es vol executar en pitjar cada un. La <span class="figref"><a href="#Figure20"><span>figura</span></a></span> esquematitza aquest comportament.
</p>
<div class="iocfigure"><a name="Figure20"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Assignació de codi als esdeveniments usant mètodes polimórfics i usant el patró MVC.

</figcaption><img src="../media/ic10m03u4_29.png" alt="" /></figure>
</div>
<p>
Tot i que normalment es registra un objecte <em>Listener</em> diferent en cada component per cada tipus d’esdeveniment, res no impedeix reusar el mateix objecte per a un mateix tipus d’esdeveniment en diferents components. La condició per fer-ho és que el codi que cal executar en capturar l’esdeveniment sigui exactament el mateix per a tots els casos.
</p>

<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/ic10m03u4_30.png" class="imgB" title="Esquema de la classe Calculadora." alt="Esquema de la classe Calculadora." /></li><li><small>Esquema de la classe Calculadora.</small></li>
</ul></div>

</p>

<p>
Prenent l’exemple de la calculadora, a continuació es mostra un fragment de codi que serveix per il·lustrar aquest fet. Un dels aspectes que val la pena destacar de l’exemple és el fet que tots els <em>Listeners</em> es defineixen com a classes internes. Aquest és un fet molt habitual per dos motius. D’una banda, i el menys important, pel fet que els <em>Listeners</em> propis es poden considerar classes auxiliars de la <em>interface</em> gràfica. D’aquesta manera s’evita tenir una quantitat enorme de classes en fitxers .java separats. D’altra banda, i com a motiu principal, això permet que des del codi dels <em>Listeners</em> es pugui accedir directament als atributs de la<em>interface</em> gràfica. Això és important, ja que no és possible cridar mètodes d’objectes del model sense tenir-hi una referència. En l’exemple, això es veu en la crida de mètode als objectes <code><em class="u">calculadora:Calculadora</em></code> i <code><em class="u">display: JTextField</em></code>.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> CalculadoraGUI <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="co1">//Model</span></div></li><li class="li1"><div class="de1">  <span class="kw1">private</span> Calculadora calculadora <span class="sy0">=</span> <span class="kw1">new</span> Calculadora<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">  <span class="co1">//Display consulta estat del Model per inicialitzar-se</span></div></li><li class="li1"><div class="de1">  <span class="kw1">private</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jlabel"><span class="kw3">JLabel</span></a> display <span class="sy0">=</span> </div></li><li class="li1"><div class="de1">                 <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jlabel"><span class="kw3">JLabel</span></a><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+float"><span class="kw3">Float</span></a>.<span class="me1">toString</span><span class="br0">&#40;</span>calculadora.<span class="me1">getDisplay</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="kw1">private</span> <span class="kw1">class</span> B1ActListener <span class="kw1">implements</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+actionlistener"><span class="kw3">ActionListener</span></a> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">public</span> <span class="kw4">void</span> actionPerformed<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+actionevent"><span class="kw3">ActionEvent</span></a> e<span class="br0">&#41;</span><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      calculadora.<span class="me1">pitjarNumero</span><span class="br0">&#40;</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      display.<span class="me1">setText</span><span class="br0">&#40;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+float"><span class="kw3">Float</span></a>.<span class="me1">toString</span><span class="br0">&#40;</span>calculadora.<span class="me1">getDisplay</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span>  </div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  ...</div></li><li class="li1"><div class="de1">  <span class="kw1">private</span> <span class="kw1">class</span> SumActListener <span class="kw1">implements</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+actionlistener"><span class="kw3">ActionListener</span></a> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">public</span> <span class="kw4">void</span> actionPerformed<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+actionevent"><span class="kw3">ActionEvent</span></a> e<span class="br0">&#41;</span><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      calculadora.<span class="me1">pitjarOperacio</span><span class="br0">&#40;</span>Calculadora.<span class="me1">SUMA</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      display.<span class="me1">setText</span><span class="br0">&#40;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+float"><span class="kw3">Float</span></a>.<span class="me1">toString</span><span class="br0">&#40;</span>calculadora.<span class="me1">getDisplay</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span>  </div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  ...</div></li><li class="li1"><div class="de1">  <span class="kw1">private</span> <span class="kw1">class</span> ResActListener <span class="kw1">implements</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+actionlistener"><span class="kw3">ActionListener</span></a> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">public</span> <span class="kw4">void</span> actionPerformed<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+actionevent"><span class="kw3">ActionEvent</span></a> e<span class="br0">&#41;</span><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      calculadora.<span class="me1">reset</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      display.<span class="me1">setText</span><span class="br0">&#40;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+float"><span class="kw3">Float</span></a>.<span class="me1">toString</span><span class="br0">&#40;</span>calculadora.<span class="me1">getDisplay</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  ...</div></li><li class="li1"><div class="de1">  <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jbutton"><span class="kw3">JButton</span></a> boto1 <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jbutton"><span class="kw3">JButton</span></a><span class="br0">&#40;</span><span class="st0">&quot;1&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  boto1.<span class="me1">addActionListener</span><span class="br0">&#40;</span><span class="kw1">new</span> B1ActListener<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  ...</div></li><li class="li1"><div class="de1">  <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jbutton"><span class="kw3">JButton</span></a> botoSuma <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jbutton"><span class="kw3">JButton</span></a><span class="br0">&#40;</span><span class="st0">&quot;+&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  botoSuma.<span class="me1">addActionListener</span><span class="br0">&#40;</span><span class="kw1">new</span> SumActListener<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  ...</div></li><li class="li1"><div class="de1">  <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jbutton"><span class="kw3">JButton</span></a> botoC <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jbutton"><span class="kw3">JButton</span></a><span class="br0">&#40;</span><span class="st0">&quot;C&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  botoC.<span class="me1">addActionListener</span><span class="br0">&#40;</span><span class="kw1">new</span> ResActListener<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  ...</div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
Un exemple de reutilització d’un mateix objecte <em>Listener</em> en diferents components es mostra a continuació pels diferents botons numèrics. Si el mètode <code>actionPerformed</code> es codifica d’una manera adequada, en realitat tots els botons han de fer el mateix: cridar el mètode <code>pitjarBoto</code> sobre el model (l’objecte calculadora).
</p>
<div class="iocnote"><div class="ioccontent">
<p>
parseInt és mètode estàtic de la classe Integer que permet transformar una cadena de text en enter.
</p>
</div></div><pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">private</span> <span class="kw1">class</span> BotoNumeroListener <span class="kw1">implements</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+actionlistener"><span class="kw3">ActionListener</span></a> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw4">void</span> actionPerformed<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+actionevent"><span class="kw3">ActionEvent</span></a> e<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jbutton"><span class="kw3">JButton</span></a> botoPitjat <span class="sy0">=</span> <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jbutton"><span class="kw3">JButton</span></a><span class="br0">&#41;</span>e.<span class="me1">getSource</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>  </div></li><li class="li1"><div class="de1">    calculadora.<span class="me1">pitjarNumero</span><span class="br0">&#40;</span></div></li><li class="li1"><div class="de1">    <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+integer"><span class="kw3">Integer</span></a>.<span class="me1">parseInt</span><span class="br0">&#40;</span>botoPitjat.<span class="me1">getText</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    display.<span class="me1">setText</span><span class="br0">&#40;</span></div></li><li class="li1"><div class="de1">    <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+float"><span class="kw3">Float</span></a>.<span class="me1">toString</span><span class="br0">&#40;</span>calculadora.<span class="me1">getDisplay</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span> </div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1"><span class="co1">//S'instancia un únic Listener                    </span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+actionlistener"><span class="kw3">ActionListener</span></a> botoNumeroListener <span class="sy0">=</span> <span class="kw1">new</span> BotoNumeroListener<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="co1">//Es generen els 10 botons numèrics amb un bucle</span></div></li><li class="li1"><div class="de1"><span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span><span class="nu0">0</span><span class="sy0">&lt;</span><span class="nu0">10</span><span class="sy0">;</span>i<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jbutton"><span class="kw3">JButton</span></a> boto <span class="sy0">=</span> <span class="kw1">new</span> JButon<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+integer"><span class="kw3">Integer</span></a>.<span class="me1">toString</span><span class="br0">&#40;</span>i<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="co1">//S'assigna sempre el mateix objecte Listener per tots</span></div></li><li class="li1"><div class="de1">  boto.<span class="me1">addActionListener</span><span class="br0">&#40;</span>botoNumeroListener<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  panellBotons.<span class="me1">add</span><span class="br0">&#40;</span>boto<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  ...</div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

</div>

<h4><a id="adaptadors" >Adaptadors</a></h4>
<div class="level4">
<div class="iocnote"><div class="ioccontent">
<p>
Atès que els adaptadors són classes normals, s’hereta dels adaptadors usant la sentència “extends”.
</p>
</div></div>
<p>
Atès que els <em>Listeners</em> són <em>interfaces</em>, el desenvolupador està obligat a sobreescriure tots els seus mètodes sense cap excepció, o en cas contrari el compilador retornarà un error. Això vol dir que si per algun dels mètodes estesos definits no es vol realitzar realment cap acció, serà necessari deixar el mètode buit, sense codi. En els casos de <em>Listeners</em> amb diversos mètodes, per exemple, el WindowListener, això pot ser pesat i fer el codi més confús. Per aquest motiu, la biblioteca gràfica del Java defineix un conjunt de classes <em>Listener</em> no abstractes amb tots els mètodes ja sobreescrits, però de contingut buit: els <strong>adaptadors</strong> (<em>adapters</em>). Per tant, el desenvolupador també pot generar diferents tipus de <em>Listener</em> heretant-ne d’ells i només sobreescrivint els mètodes que realment vol usar.
</p>

<p>
Tots els adaptadors també estan definits en el paquet <code>java.awt.event</code>. Hi ha un adaptador per cada tipus de <em>Listener</em> amb més d’un mètode: FocusAdapter, WindowAdapter, KeyAdapter, etc. No hi ha adaptadors per a <em>Listeners</em> amb un únic mètode, com l’ActionListener o el TextListener, ja que en aquest sentit no aporten res.
</p>
<div class="ioctextl"><div class="ioccontent"><p class="ioctitle">Un error típic: el problema de les majúscules i minúscules</p>
<p>
Un error típic del programador inexpert és, en decidir sobreescriure un mètode, equivocar-se en una majúscula o minúscula en el nom del mètode respecte a l’original de la superclasse. Atès que el Java és sensible a majúscula/minúscula (és <em>case-sensitive</em>), quan això passa, en realitat no s’ha sobreescrit el mètode, sinó que se n’ha generat un de nou amb un nom molt semblant. El compilador ho accepta i no retorna cap error. Atès que el mètode original es manté invariable, que en el cas dels adaptadors vol dir sense codi, l’aplicació no farà absolutament res en realitzar aquella acció, ja que en capturar l’esdeveniment es crida el mètode original buit.
</p>

<p>
El <em>Listener</em> següent no fa res quan el component en què s’ha registrat guanya el focus:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> ElMeuListener <span class="kw1">extends</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+focusadapter"><span class="kw3">FocusAdapter</span></a> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <span class="kw4">void</span> focusgained<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+focusevent"><span class="kw3">FocusEvent</span></a> e<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <span class="co1">//Realitzar acció...</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>
</div></div>
</div>

<h4><a id="classes_anonimes" >Classes anònimes</a></h4>
<div class="level4">

<p>
En la immensa majoria de casos, els <em>Listeners</em> que codifica el desenvolupador són classes relativament senzilles i curtes, amb pocs mètodes, i de les quals només s’usa una instància dins de tota l’aplicació, ja que cada <em>Listener</em> se sol registrar a un únic component. Atès aquest fet, és útil conèixer un mecanisme que ofereix el Java per definir classes auxiliars de manera encara més simple que les classes privades: les classes anònimes.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
Una <strong>classe anònima</strong> no té nom. Es caracteritza perquè en lloc de definir-se com a entitat diferenciada amb una capçalera class, es defineix dins el codi just en el moment precís d’instanciar-la.
</p>
</div></div>
<p>
Les classes anònimes són un mecanisme del llenguatge Java que es pot usar per a qualsevol situació, però són especialment útils a l’hora de generar <em>Listeners</em>. Com les classes privades, les classes anònimes tenen accés directe a qualsevol atribut de la classe en què es defineixen.
</p>

<p>
Per usar-les, és prerequisit que la classe que es vol definir sigui subclasse d’una altra ja existent. La seva sintaxi és la següent:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">new</span> NomSuperclasse<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <span class="co1">//Definició normal de la classe (atributs + mètodes)</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
Per exemple, els <em>Listeners</em> usats en exemples anteriors es poden definir de la manera següent, en lloc de mitjançant classes privades. Fixeu-vos com les classes són definides just en el moment d’instanciar-les (en fer un “new”), en lloc de fer-ho prèviament en un bloc a part. Els fragments de codi en què es defineixen classes anònimes es troben remarcats en negreta.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">windowClosing</p>
<p>
Perquè una aplicació realment acabi en tancar la finestra principal, cal registrar-hi un WindowListener i fer que el seu mètode finalitzi l’aplicació. Per exemple, cridant la crida System.exit(0).
</p>
</div></div><pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> CalculadoraGUI <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">//Model</span></div></li><li class="li1"><div class="de1"><span class="kw1">private</span> Calculadora calculadora <span class="sy0">=</span> <span class="kw1">new</span> Calculadora<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">//Contenidor d'alt nivell: finestra principal</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jframe"><span class="kw3">JFrame</span></a> frame <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jframe"><span class="kw3">JFrame</span></a><span class="br0">&#40;</span><span class="st0">&quot;Calculadora&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">//Display consulta estat del Model per inicialitzar-se</span></div></li><li class="li1"><div class="de1"><span class="kw1">private</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jlabel"><span class="kw3">JLabel</span></a> display <span class="sy0">=</span> </div></li><li class="li1"><div class="de1">               <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jlabel"><span class="kw3">JLabel</span></a><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+float"><span class="kw3">Float</span></a>.<span class="me1">toString</span><span class="br0">&#40;</span>calculadora.<span class="me1">getDisplay</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jbutton"><span class="kw3">JButton</span></a> botoSuma <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jbutton"><span class="kw3">JButton</span></a><span class="br0">&#40;</span><span class="st0">&quot;+&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">//Classe anònima per Listener del botó de sumar</span></div></li><li class="li1"><div class="de1">botoSuma.<span class="me1">addActionListener</span><span class="br0">&#40;</span><span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+actionlistener"><span class="kw3">ActionListener</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw4">void</span> actionPerformed<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+actionevent"><span class="kw3">ActionEvent</span></a> e<span class="br0">&#41;</span> <span class="br0">&#123;</span> </div></li><li class="li1"><div class="de1">    calculadora.<span class="me1">pitjarOperacio</span><span class="br0">&#40;</span>Calculadora.<span class="me1">SUMA</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    display.<span class="me1">setText</span><span class="br0">&#40;</span></div></li><li class="li1"><div class="de1">    <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+float"><span class="kw3">Float</span></a>.<span class="me1">toString</span><span class="br0">&#40;</span>calculadora.<span class="me1">getDisplay</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span> </div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jbutton"><span class="kw3">JButton</span></a> botoC <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jbutton"><span class="kw3">JButton</span></a><span class="br0">&#40;</span><span class="st0">&quot;C&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">//Classe anònima per Listener del botó de reset</span></div></li><li class="li1"><div class="de1">botoC.<span class="me1">addActionListener</span><span class="br0">&#40;</span><span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+actionlistener"><span class="kw3">ActionListener</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw4">void</span> actionPerformed<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+actionevent"><span class="kw3">ActionEvent</span></a> e<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    calculadora.<span class="me1">reset</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">    display.<span class="me1">setText</span><span class="br0">&#40;</span></div></li><li class="li1"><div class="de1">    <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+float"><span class="kw3">Float</span></a>.<span class="me1">toString</span><span class="br0">&#40;</span>calculadora.<span class="me1">getDisplay</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span>                              windowClosing</div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1"><span class="co1">//Gestio el tancament de la finestra principal</span></div></li><li class="li1"><div class="de1">frame.<span class="me1">addWindowListener</span><span class="br0">&#40;</span><span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+windowadapter"><span class="kw3">WindowAdapter</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> </div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw4">void</span> windowClosing<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+windowevent"><span class="kw3">WindowEvent</span></a> e<span class="br0">&#41;</span> <span class="br0">&#123;</span>            </div></li><li class="li1"><div class="de1">    <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">exit</span><span class="br0">&#40;</span><span class="nu0">0</span><span class="br0">&#41;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span>                          </div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

</div>

<h2><a id="altres_elements_grafics" >Altres elements gràfics</a></h2>
<div class="level2">

<p>
La biblioteca gràfica Swing és molt extensa i ofereix un conjunt de funcionalitats que, si són conegudes pel desenvolupador, poden estalviar-li molta feina. Swing permet realitzar tasques habituals dins la generació d’una <em>interface</em> gràfica de manera flexible i amb poc esforç. Per veure com funcionen amb detall absolut les classes implicades és necessari consultar la documentació del Java, en què s’enumeren tots els seus mètodes i s’explica com cridar-los correctament.
</p>

</div>

<h3><a id="panells_d_opcions" >Panells d&#039;opcions</a></h3>
<div class="level3">

<p>
Un element molt usat en les <em>interfaces</em> gràfiques són els panells d’opcions, que serveixen per avisar l’usuari d’algun esdeveniment o demanar-li confirmació davant alguna acció. L’aplicació queda bloquejada fins que es respon en el panell d’opcions amb alguna de les opcions presentades: Sí/No, Acceptar/Cancel·lar, etc. La <span class="figref"><a href="#Figure21"><span>figura</span></a></span> mostra un exemple de panell d’opcions.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
L’idioma dels botons sempre està associat a la configuració d’idioma del sistema operatiu.
</p>
</div></div><div class="iocfigure"><a name="Figure21"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Un panell d’opcions.

</figcaption><img src="../media/ic10m03u4_31.png" alt="" /></figure>
</div><div class="iocimportant"><div class="ioccontent">
<p>
A Swing, per realitzar un <strong>panell d’opcions</strong> no és necessari crear una finestra i afegir tots els components un a un, ja hi ha una classe que els construeix automàticament i els mostra per pantalla: la classe JoptionPane.
</p>
</div></div>
<p>
La classe <code>JOptionPane</code> presenta una particularitat important respecte a tota la resta de mecanismes emprats a Swing, una gran part dels seus mètodes són estàtics. Cada un està vinculat a la generació d’un tipus de panell d’opcions diferent. Així, doncs, en contraposició amb tots els altres components, els panells d’opcions no se solen generar mitjançant la instanciació d’una classe. Només s’usen constructors per generar panells personalitzats.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Component pare</p>
<p>
Un paràmetre que apareix en tots els casos és el component pare del panell d’opcions, normalment, el contenidor d’alt nivell corresponent.
</p>
</div></div>
<p>
Existeixen quatre blocs de mètodes estàtics, tots amb diferents sobrecàrregues, que permeten generar diferents tipus de panells d’opcions:
</p>
<ul>
<li class="level1"><div class="li"> <strong>showConfirmDialog</strong>. Mostra un panell de confirmació, en què es poden establir diferents possibilitats de resposta: Sí/No, Sí/No/Cancel·lar, Acceptar/Cancel·lar.</div>
</li>
<li class="level1"><div class="li"> <strong>showInputDialog</strong>. Mostra un panell en què l’usuari pot introduir una única línia de text.</div>
</li>
<li class="level1"><div class="li"> <strong>showMessageDialog</strong>. Mostra un missatge a l’usuari, que només pot acceptar.</div>
</li>
<li class="level1"><div class="li"> <strong>showOptionDialog</strong>. Permet mostrar qualsevol tipus de panell. La llista de paràmetres permet personalitzar-ne totes les propietats.</div>
</li>
</ul>

<p>
Tots els mètodes retornen el valor corresponent a la resposta donada per l’usuari. La classe <code>JOptionPane</code> defineix un conjunt de constants que permeten al desenvolupador establir el comportament del panell. Les constants que permeten esbrinar la resposta donada per l’usuari són:
</p>
<ul>
<li class="level1"><div class="li"> <code>JOptionPane.YES_OPTION</code>, si l’usuari ha pitjat Sí.</div>
</li>
<li class="level1"><div class="li"> <code>JOptionPane.NO_OPTION</code>, si l’usuari ha pitjat No.</div>
</li>
<li class="level1"><div class="li"> <code>JOptionPane.CANCEL_OPTION</code>, si l’usuari ha pitjat Cancel.lar.</div>
</li>
<li class="level1"><div class="li"> <code>JOptionPane.OK_OPTION</code>, si l’usuari ha pitjat <em>OK</em>.</div>
</li>
<li class="level1"><div class="li"> <code>JOptionPane.CLOSED_OPTION</code>, si l’usuari ha tancat el panell.</div>
</li>
</ul>

<p>
En el cas del mètode <code>showInputDialog</code>, no es retorna cap d’aquestes constants, sinó un <code>String</code> amb el valor introduït per l’usuari. En cas que l’acció es cancel·li, retorna <code>null</code>.
</p>

<p>
Les que permeten indicar quin tipus de panell (<em>messageType</em>) es mostra, reflectit en una icona diferent (un signe d’exclamació, un senyal d’informació, etc.), són:
</p>
<ul>
<li class="level1"><div class="li"> <code>JOptionPane.ERROR_MESSAGE</code></div>
</li>
<li class="level1"><div class="li"> <code>JOptionPane.INFORMATION_MESSAGE</code></div>
</li>
<li class="level1"><div class="li"> <code>JOptionPane.WARNING_MESSAGE</code></div>
</li>
<li class="level1"><div class="li"> <code>JOptionPane.QUESTION_MESSAGE</code></div>
</li>
<li class="level1"><div class="li"> <code>JOptionPane.PLAIN_MESSAGE</code></div>
</li>
</ul>

<p>
Cadascuna de les imatges que es mostren correspon a les diferents tipus de constants enumerades, en el mateix ordre. La constant <code>PLAIN_MESSAGE</code> no genera cap icona, deixa l’espai buit.
</p>

<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/ic10m03u4_32.png" class="imgB" title="Icones possibles a un JOptionPane." alt="Icones possibles a un JOptionPane." /></li><li><small>Icones possibles a un JOptionPane.</small></li>
</ul></div>

</p>

<p>
Finalment, les constants que permeten establir quines combinacions de botons han d’aparèixer en el panell (<em>optionType</em>) són:
</p>
<ul>
<li class="level1"><div class="li"> <code>JOptionPane.YES_NO_OPTION</code></div>
</li>
<li class="level1"><div class="li"> <code>JOptionPane.YES_NO_CANCEL_OPTION</code></div>
</li>
<li class="level1"><div class="li"> <code>JOptionPane.OK_CANCEL_OPTION</code></div>
</li>
</ul>

<p>
A continuació es mostra el fragment de codi que generaria el panell que es mostra en la <span class="figref"><a href="#Figure21"><span>figura</span></a></span>.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jframe"><span class="kw3">JFrame</span></a> finestra <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jframe"><span class="kw3">JFrame</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1"><span class="kw4">int</span> resposta <span class="sy0">=</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+joptionpane"><span class="kw3">JOptionPane</span></a>.<span class="me1">showConfirmDialog</span><span class="br0">&#40;</span>finestra,</div></li><li class="li1"><div class="de1">  <span class="st0">&quot;Fitxer ja existent. Vol sobreescriure'l realment?&quot;</span>,</div></li><li class="li1"><div class="de1">  <span class="st0">&quot;Sobreescriure fitxer&quot;</span>,</div></li><li class="li1"><div class="de1">  <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+joptionpane"><span class="kw3">JOptionPane</span></a>.<span class="me1">YES_NO_CANCEL_OPTION</span>,</div></li><li class="li1"><div class="de1">  <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+joptionpane"><span class="kw3">JOptionPane</span></a>. <span class="me1">QUESTION_MESSAGE</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">switch</span><span class="br0">&#40;</span>resposta<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">case</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+joptionpane"><span class="kw3">JOptionPane</span></a>.<span class="me1">YES_OPTION</span><span class="sy0">:</span> </div></li><li class="li1"><div class="de1">    <span class="co1">//Acció per SÍ </span></div></li><li class="li1"><div class="de1">    <span class="kw1">break</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">case</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+joptionpane"><span class="kw3">JOptionPane</span></a>.<span class="me1">NO_OPTION</span><span class="sy0">:</span> </div></li><li class="li1"><div class="de1">    <span class="co1">//Acció per NO </span></div></li><li class="li1"><div class="de1">    <span class="kw1">break</span></div></li><li class="li1"><div class="de1">  <span class="kw1">default</span><span class="sy0">:</span> </div></li><li class="li1"><div class="de1">    <span class="co1">//Acció per CANCELAR</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

</div>

<h3><a id="selectors_de_fitxers" >Selectors de fitxers</a></h3>
<div class="level3">

<p>
Un altre dels elements que Swing ja té pregenerat, la qual cosa fa innecessari haver de crear-lo des de zero agregant components individuals, són els panells de selecció de fitxers emprats per obrir o desar dades. La <span class="figref"><a href="#Figure22"><span>figura</span></a></span> mostra un exemple d’aquest tipus de panell, concretament d’un per obrir dades.
</p>
<div class="iocfigure"><a name="Figure22"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Un panell selector de fitxers.

</figcaption><img src="../media/ic10m03u4_33.png" alt="" /></figure>
</div><div class="iocimportant"><div class="ioccontent">
<p>
La <strong>classe responsable</strong> de mostrar panells de selecció de fitxers és la <code>JFileChooser</code>.
</p>
</div></div>
<p>
En aquest cas, aquesta classe sí que s’ha d’instanciar. No es basa en mètodes estàtics com <code>JOptionPane</code>. Un cop creat l’objecte, hi ha dos mètodes per generar els dos tipus diferents de panells:
</p>
<ul>
<li class="level1"><div class="li"> <strong>public int showOpenDialog (Component parent)</strong>. Mostra un panell per obrir un fitxer o directori.</div>
</li>
<li class="level1"><div class="li"> <strong>public int showSaveDialog (Component parent)</strong>. Igual que l’anterior, però per desar-lo.</div>
</li>
</ul>

<p>
En realitat, ambdós panells són pràcticament idèntics, i únicament es diferencien pel títol de la finestra. Com en el JOptionPane, aquests mètodes retornen un valor que es pot comparar amb un conjunt de constants definides per veure si l’operació s’ha realitzat correctament:
</p>
<ul>
<li class="level1"><div class="li"> <code>JFileChooser.CANCEL_OPTION</code>, si l’usuari ha pitjat <em>Cancelar</em>.</div>
</li>
<li class="level1"><div class="li"> <code>JFileChooser.APPROVE_OPTION</code>, si la selecció ha estat correcta.</div>
</li>
<li class="level1"><div class="li"> <code>JFileChooser.ERROR_OPTION</code>, en cas d’error.</div>
</li>
</ul>

<p>
Per obtenir el fitxer seleccionat, cal usar el mètode <code>getSelectedFile</code>. Si la selecció ha estat correcta, s’obté una instància de la classe <code>java.io.File</code>, que és la que el Java usa per fer operacions amb fitxers. En cas contrari, aquest retorna <code>null</code>.
</p>

<p>
Una funcionalitat dels JFileChooser que val la pena comentar és la possibilitat de filtrar els fitxers visualitzats en la finestra, de manera que només es mostren els que tenen una extensió determinada. Aquesta funció se sol usar molt en les aplicacions que usen selectors de fitxers. Els mètodes principals implicats per assolir-la són:
</p>
<ul>
<li class="level1"><div class="li"> <strong>public void setFileFilter(FileFilter filter)</strong>. Assigna el filtre actiu.</div>
</li>
<li class="level1"><div class="li"> <strong>public void addChoosableFileFilter (FileFilter filter)</strong>. Afegeix un filtre a la llista desplegable del selector. Això permet filtrar per diferents tipus d’extensió.</div>
</li>
</ul>

<p>
Els filtres són objectes del tipus <code>javax.swing.filechooser.FileFilter</code>. Aquesta és una classe abstracta, de manera que és el desenvolupador qui en realitat ha de definir la seva pròpia subclasse i codificar els mètodes abstractes d’acord amb el seu criteri de si, donat un nom de fitxer, aquest s’ha de visualitzar o no. Per sort, existeix una subclasse que proporciona una implementació per defecte de tots els mètodes: la classe <code>javax.swing.filechooser.FileNameExtensionFilter</code>. Tot i ser senzilla, serveix per a la majoria de casos.
</p>

<p>
A continuació es mostra el codi que genera el selector de fitxers representat en la <span class="figref"><a href="#Figure22"><span>figura</span></a></span>.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jframe"><span class="kw3">JFrame</span></a> frame <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jframe"><span class="kw3">JFrame</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jfilechooser"><span class="kw3">JFileChooser</span></a> selector <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jfilechooser"><span class="kw3">JFileChooser</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">selector.<span class="me1">setFileSelectionMode</span><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jfilechooser"><span class="kw3">JFileChooser</span></a>.<span class="me1">FILES_ONLY</span><span class="br0">&#41;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">FileNameExtensionFilter filtre <span class="sy0">=</span> </div></li><li class="li1"><div class="de1">  <span class="kw1">new</span> FileNameExtensionFilter<span class="br0">&#40;</span><span class="st0">&quot;.lin; Fitxers de llista de lineas.&quot;</span>, <span class="st0">&quot;lin&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">selector.<span class="me1">setFileFilter</span><span class="br0">&#40;</span>filtre<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">selector.<span class="me1">showOpenDialog</span><span class="br0">&#40;</span>frame<span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>

</div>

<h3><a id="selectors_de_colors" >Selectors de colors</a></h3>
<div class="level3">

<p>
De la mateixa manera que hi ha una classe predissenyada que permet obrir un diàleg per obrir o tancar un fitxer, Swing també en proporciona una que permet triar entre una paleta de colors: la classe <code>JColorChooser</code>. La <span class="figref"><a href="#Figure23"><span>figura</span></a></span> en mostra l’aspecte.
</p>
<div class="iocfigure"><a name="Figure23"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Un panell selector de colors.

</figcaption><img src="../media/ic10m03u4_34.png" alt="" /></figure>
</div>
<p>
Com en el cas del selector de fitxers, per poder fer-ne ús, primer cal crear una instància, que no es mostra en pantalla fins a cridar el mètode <code>public Color showDialog (Component parent, String titol, Color color)</code> que mostra un panell per seleccionar un color, amb un títol donat a la seva capçalera i un color per defecte preseleccionat.
</p>

<p>
El component pare es queda bloquejat fins que es dóna una resposta al selector de color. Aquesta crida retorna <code>nul</code> si es cancel·la la selecció, o una instància de la <code>classe java.awt.Color</code> amb el color seleccionat. Aquesta classe representa un color a partir d’una combinació de valors vermell-verd-blau (RGB, <em>red-green-blue</em>) i s’utilitza en totes les classes gràfiques sempre que cal definir algun color.
</p>

<p>
A fi de facilitar la feina del desenvolupador, la classe Color defineix un seguit de constants que es poden usar en qualsevol situació:
</p>
<ul>
<li class="level1"><div class="li"> <code>Color.BLACK</code>, negre.</div>
</li>
<li class="level1"><div class="li"> <code>Color.BLUE</code>, blau.</div>
</li>
<li class="level1"><div class="li"> <code>Color.WHITE</code>, blanc.</div>
</li>
<li class="level1"><div class="li"> <code>Color.GREEN</code>, verd.</div>
</li>
<li class="level1"><div class="li"> <code>Color.DARK_GRAY</code>, gris fosc.</div>
</li>
<li class="level1"><div class="li"> etc.</div>
</li>
</ul>

<p>
A continuació es mostra un exemple de crida de codi per mostrar un selector de colors:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jframe"><span class="kw3">JFrame</span></a> frame <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jframe"><span class="kw3">JFrame</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jcolorchooser"><span class="kw3">JColorChooser</span></a> chooser <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jcolorchooser"><span class="kw3">JColorChooser</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+color"><span class="kw3">Color</span></a> res <span class="sy0">=</span> chooser.<span class="me1">showDialog</span><span class="br0">&#40;</span>frame, <span class="st0">&quot;Tria el color&quot;</span>, </div></li><li class="li1"><div class="de1">           <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+color"><span class="kw3">Color</span></a>.<span class="me1">WHITE</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jlabel"><span class="kw3">JLabel</span></a> label <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jlabel"><span class="kw3">JLabel</span></a><span class="br0">&#40;</span><span class="st0">&quot;Un text amb fons de colors&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span><span class="kw2">null</span> <span class="sy0">!=</span> res<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  label.<span class="me1">setBackground</span><span class="br0">&#40;</span>res<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

</div>

<h3><a id="classes_basades_en_models" >Classes basades en models</a></h3>
<div class="level3">

<p>
Tots els components de Swing disposen d’un ampli ventall de mètodes que permeten modificar directament el seu aspecte d’acord amb els designis del desenvolupador: el text que mostren, el color, etc. Tot i així, hi ha un conjunt de controls que integren directament el patró MVC en el seu codi, ja que es vinculen a un Model i per variar-ne l’aspecte cal interactuar amb aquest Model, en lloc de cridar mètodes directament sobre el control. Per aquest motiu s’anomenen <strong>classes basades en models</strong>. Els exponents principals d’aquest conjunt són les classes <code>JList</code>, <code>JTable</code> i <code>JTree</code>.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
Per modificar l’aspecte d’una <strong>classe basada en model</strong>, cal assignar un Model al seu constructor, o mitjançant el mètode <code>setModel</code>, i interactuar amb aquest Model. Cada una defineix la pròpia classe a usar com a Model i quins mètodes s’hi poden cridar.
</p>
</div></div>
<p>
Una particularitat dels Models d’aquestes classes és que poden emmagatzemar <em>Listeners</em>, de manera que és possible avisar el motor gràfic del Java sempre que hi ha alguna modificació. Quan això passa, aquest crida automàticament els mètodes consultors necessaris per veure quina ha estat la modificació i actualitzar els valors presentats per pantalla.
</p>

</div>

<h4><a id="jlist" >JList</a></h4>
<div class="level4">

<p>
La classe <code>JList</code> correspon a una llista d’elements, de la qual se’n pot seleccionar un o més. Si es mira la documentació, es pot apreciar que no té cap mètode amb el qual afegir aquests elements, ja que cal usar el seu Model per fer-ho. El Model definit per interactuar-hi és la <em>interface</em> ListModel. Per tant, és responsabilitat del desenvolupador crear una implementació, d’acord amb les seves necessitats, que és la que realment s’instancia i assigna a la JList.
</p>

<p>
Aquesta defineix els mètodes públics següents:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Object getElementAt(int index)</strong>. Obté l’element emmagatzemat en la posició <em>i</em> de la llista. Fixeu-vos que es pot desar qualsevol tipus d’objecte. El text que es visualitza en la JList és el resultat de cridar el mètode toString sobre l’objecte retornat.</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <strong>int getSize()</strong>. Obté el nombre d’elements emmagatzemats en la llista.</div>
</li>
<li class="level1"><div class="li"> <strong>void removeListDataListener(ListDataListener l)</strong>. Elimina un <em>Listener</em> associat.</div>
</li>
<li class="level1"><div class="li"> <strong>void addListDataListener(ListDataListener l)</strong>. Els mètodes associats a la gestió dels <em>Listeners</em> registrats.</div>
</li>
</ul>

<p>
Com es pot veure, la <em>interface</em> només defineix els mètodes consultors de lectura, que són els mínims indispensables per al motor gràfic del Java a fi de poder esbrinar quina informació ha de representar en pantalla. El desenvolupador disposa de llibertat absoluta per afegir tots els mètodes addicionals que consideri necessaris a la seva implementació (normalment, accessoris d’escriptura per poder desar o modificar les dades de la llista).
</p>

<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/ic10m03u4_35.png" class="imgB" title="Exemple d&#039;una JList amb un Model associat que retorna cinc cadenes de text diferents (Valor = 1...5). Per tant, es visualitzen cinc elements./4" alt="Exemple d&#039;una JList amb un Model associat que retorna cinc cadenes de text diferents (Valor = 1...5). Per tant, es visualitzen cinc elements./4" /></li><li><small>Exemple d&#039;una JList amb un Model associat que retorna cinc cadenes de text diferents (Valor = 1...5). Per tant, es visualitzen cinc elements.</small></li>
</ul></div>

</p>

<p>
Afortunadament, per estalviar feina al desenvolupador, Swing proporciona una parell de subclasses en què ja es proporciona una implementació per defecte dels mètodes definits en la <em>interface</em> <code>ListModel</code>. D’una banda, hi ha la classe abstracta <code>AbstractListModel</code>, en què ja estan codificats tots els aspectes vinculats al registre de <em>Listeners,</em> de manera que si s’hereta directament d’ella només cal implementar els mètodes <code>getElementAt</code> i <code>getSize</code> i cridar el mètode <code>fireContentsChanged</code> sempre que les dades del model es modifiquin. En fer-ho, el motor gràfic del Java ja s’encarrega d’actualitzar el component gràfic d’acord amb els valors emmagatzemats en el Model. D’altra banda, la classe <code>DefaultListModel</code> encara va més enllà i implementa absolutament tota la <em>interface</em>, de manera que en proporciona un amb un comportament per defecte igual al d’un vector. Normalment, n’hi ha prou amb aquesta <em>interface</em> per a la majoria de casos.
</p>

<p>
A continuació es mostra un exemple de codi per generar una JList correctament a partir d’un Model, en aquest cas, partint de la classe <code>AbstractListModel</code>. Sempre que es crida el mètode incrementar, l’aspecte del component varia en pantalla.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1"><span class="kw1">private</span> <span class="kw1">class</span> MyListModel <span class="kw1">extends</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+abstractlistmodel"><span class="kw3">AbstractListModel</span></a> <span class="br0">&#123;</span>        </div></li><li class="li1"><div class="de1">  <span class="kw4">int</span><span class="br0">&#91;</span><span class="br0">&#93;</span> valors <span class="sy0">=</span> <span class="br0">&#123;</span><span class="nu0">1</span>,<span class="nu0">2</span>,<span class="nu0">3</span>,<span class="nu0">4</span>,<span class="nu0">5</span><span class="br0">&#125;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+object"><span class="kw3">Object</span></a> getElementAt<span class="br0">&#40;</span><span class="kw4">int</span> i<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">return</span> <span class="st0">&quot;Valor = &quot;</span> <span class="sy0">+</span> valors<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw4">int</span> getSize<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> </div></li><li class="li1"><div class="de1">    <span class="kw1">return</span> valors.<span class="me1">length</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw4">void</span> incrementar<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> </div></li><li class="li1"><div class="de1">    <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span>i <span class="sy0">&lt;</span> valors.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> valors<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="sy0">++;</span> </div></li><li class="li1"><div class="de1">    <span class="co1">//Avisar que s'ha modificat el model</span></div></li><li class="li1"><div class="de1">    fireContentsChanged<span class="br0">&#40;</span><span class="kw1">this</span>, <span class="nu0">0</span>, valors.<span class="me1">length</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"> <span class="br0">&#125;</span> </div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jlist"><span class="kw3">JList</span></a> list <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jlist"><span class="kw3">JList</span></a><span class="br0">&#40;</span><span class="kw1">new</span> MyListModel<span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>

</div>

<h4><a id="jtable" >JTable</a></h4>
<div class="level4">

<p>
La classe <code>JTable</code> mostra una taula com la que es podria generar en un full de càlcul. El seu Model associat és la <em>interface</em> <code>TableModel</code> i la seva filosofia és exactament igual que el cas JList, si bé, evidentment, en aquest cas els mètodes definits en el Model són diferents. Aquests són els següents:
</p>
<ul>
<li class="level1"><div class="li"> <strong>int getRowCount()</strong>. Retorna el nombre de files de la taula.</div>
</li>
<li class="level1"><div class="li"> <strong>int getColumnCount()</strong>. Retorna el nombre de columnes de la taula.</div>
</li>
<li class="level1"><div class="li"> <strong>Object getValueAt(int row, int column)</strong>. Retorna l’element emmagatzemant en la cel·la de la fila <code>row</code> i columna <code>column</code>. Novament, es visualitza el resultat de cridar el mètode <code>toString</code> sobre l’objecte retornat.</div>
</li>
</ul>

<p>
La <span class="figref"><a href="#Figure24"><span>figura</span></a></span> mostra un exemple d’una JTable amb un model associat que indica que es compon de tres files i quatre columnes. Per cada cel.la, el model retorna una cadena de text del tipus “Valor = xx”.
</p>
<div class="iocfigure"><a name="Figure24"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Exemple de taula amb model associat.

</figcaption><img src="../media/ic10m03u4_36.png" alt="" /></figure>
</div>
<p>
En aquest cas, també hi ha implementacions parcials, definides juntament amb el Model dins el paquet <code>javax.swing.table</code>. Aquestes són la classe <code>AbstractTableModel</code>, que proporciona una implementació parcial, i la classe <code>DefaultTableModel</code>, que en proporciona una de completa amb un comportament per defecte. Tot seguit es mostra un exemple basat en el primer cas per la taula de la <span class="figref"><a href="#Figure24"><span>figura</span></a></span>.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">import</span> <span class="co2">javax.swing.table.*</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1"><span class="kw1">private</span> <span class="kw1">class</span> MyTableModel <span class="kw1">extends</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+abstracttablemodel"><span class="kw3">AbstractTableModel</span></a> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <span class="co1">//Per una taula de 3 files * 4 columnes</span></div></li><li class="li1"><div class="de1">  <span class="kw4">int</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="br0">&#93;</span> valors <span class="sy0">=</span> </div></li><li class="li1"><div class="de1">  <span class="br0">&#123;</span><span class="br0">&#123;</span><span class="nu0">1</span>,<span class="nu0">2</span>,<span class="nu0">3</span>,<span class="nu0">4</span><span class="br0">&#125;</span>, <span class="br0">&#123;</span><span class="nu0">5</span>,<span class="nu0">6</span>,<span class="nu0">7</span>,<span class="nu0">8</span><span class="br0">&#125;</span>, <span class="br0">&#123;</span><span class="nu0">9</span>,<span class="nu0">10</span>,<span class="nu0">11</span>,<span class="nu0">12</span><span class="br0">&#125;</span><span class="br0">&#125;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw4">int</span> getRowCount<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> </div></li><li class="li1"><div class="de1">    <span class="kw1">return</span> valors.<span class="me1">length</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw4">int</span> getColumnCount<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span> </div></li><li class="li1"><div class="de1">    <span class="kw1">return</span> valors<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.<span class="me1">length</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+object"><span class="kw3">Object</span></a> getValueAt<span class="br0">&#40;</span><span class="kw4">int</span> row, <span class="kw4">int</span> column<span class="br0">&#41;</span><span class="br0">&#123;</span> </div></li><li class="li1"><div class="de1">    <span class="kw1">return</span> <span class="st0">&quot;Valor = &quot;</span> <span class="sy0">+</span> valors<span class="br0">&#91;</span>row<span class="br0">&#93;</span><span class="br0">&#91;</span>column<span class="br0">&#93;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw4">void</span> incrementar<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> </div></li><li class="li1"><div class="de1">    <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span>i <span class="sy0">&lt;</span> valors.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> </div></li><li class="li1"><div class="de1">      <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> j<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span>j <span class="sy0">&lt;</span> valors<span class="br0">&#91;</span>i<span class="br0">&#93;</span>.<span class="me1">length</span><span class="sy0">;</span> j<span class="sy0">++</span><span class="br0">&#41;</span> </div></li><li class="li1"><div class="de1">        valors<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#91;</span>j<span class="br0">&#93;</span><span class="sy0">++;</span> </div></li><li class="li1"><div class="de1">    <span class="co1">//Avisar que s'ha modificat el model</span></div></li><li class="li1"><div class="de1">    fireTableDataChanged<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span> </div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jtable"><span class="kw3">JTable</span></a> table <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jtable"><span class="kw3">JTable</span></a><span class="br0">&#40;</span><span class="kw1">new</span> MyTableModel<span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>

</div>

<h4><a id="jtree" >JTree</a></h4>
<div class="level4">

<p>
La classe <code>JTree</code> mostra un arbre desplegable d’elements, de manera que en pitjar sobre un es mostren o s’oculten tots els seus fills de manera commutada. El Model que utilitza és la <em>interface</em> <code>TreeModel</code>, definida en el paquet javax.swing.tree. Aquest Model és més complex que els anteriors i utilitza un seguit de classes auxiliars (<code>TreeNode</code> i les seves subclasses), per la qual cosa no es llistaran tots els seus mètodes. És molt recomanable usar la implementació per defecte que ofereix el Java, que en aquest cas només és una classe: <code>DefaultTreeModel</code>. Novament, els elements es visualitzen d’acord amb el valor retornat per la crida del mètode <code>toString</code>.
</p>
<div class="iocfigure"><a name="Figure25a"></a><figure>
<figcaption><span class="figuretitle">Figura</span></figcaption><img src="../media/ic10m03u4_37.png" alt="" /></figure>
<div class="footfigure">Exemple de JTree amb un model associat compost per una jerarquia de nodes. Cada node té associada una cadena de text, que és la que es visualitza en la interface gràfica.</div></div>
<p>
A títol il·lustratiu, el codi següent mostra el codi que generaria el JTree i el model associat a la <span class="figref"><a href="#Figure25a"><span>figura</span></a></span>.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">import</span> <span class="co2">javax.swing.tree.*</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1"><span class="kw1">private</span> <span class="kw1">class</span> MyTreeModel <span class="kw1">extends</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+defaulttreemodel"><span class="kw3">DefaultTreeModel</span></a> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <span class="kw4">int</span><span class="br0">&#91;</span><span class="br0">&#93;</span> valors <span class="sy0">=</span> <span class="br0">&#123;</span><span class="nu0">1</span>,<span class="nu0">2</span>,<span class="nu0">3</span>,<span class="nu0">4</span>,<span class="nu0">5</span>,<span class="nu0">6</span><span class="br0">&#125;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+defaultmutabletreenode"><span class="kw3">DefaultMutableTreeNode</span></a><span class="br0">&#91;</span><span class="br0">&#93;</span> nodes <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+defaultmutabletreenode"><span class="kw3">DefaultMutableTreeNode</span></a><span class="br0">&#91;</span><span class="nu0">6</span><span class="br0">&#93;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> MyTreeModel<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">super</span><span class="br0">&#40;</span><span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+defaultmutabletreenode"><span class="kw3">DefaultMutableTreeNode</span></a><span class="br0">&#40;</span><span class="st0">&quot;Arrel&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+defaultmutabletreenode"><span class="kw3">DefaultMutableTreeNode</span></a> arrel <span class="sy0">=</span> <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+defaultmutabletreenode"><span class="kw3">DefaultMutableTreeNode</span></a><span class="br0">&#41;</span>getRoot<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i<span class="sy0">&lt;</span> nodes.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">      nodes<span class="br0">&#91;</span>i<span class="br0">&#93;</span> <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+defaultmutabletreenode"><span class="kw3">DefaultMutableTreeNode</span></a><span class="br0">&#40;</span><span class="st0">&quot;Valor = &quot;</span> <span class="sy0">+</span> valors<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    arrel.<span class="me1">add</span><span class="br0">&#40;</span>nodes<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    nodes<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.<span class="me1">add</span><span class="br0">&#40;</span>nodes<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    nodes<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.<span class="me1">add</span><span class="br0">&#40;</span>nodes<span class="br0">&#91;</span><span class="nu0">2</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    arrel.<span class="me1">add</span><span class="br0">&#40;</span>nodes<span class="br0">&#91;</span><span class="nu0">3</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    nodes<span class="br0">&#91;</span><span class="nu0">3</span><span class="br0">&#93;</span>.<span class="me1">add</span><span class="br0">&#40;</span>nodes<span class="br0">&#91;</span><span class="nu0">4</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    nodes<span class="br0">&#91;</span><span class="nu0">3</span><span class="br0">&#93;</span>.<span class="me1">add</span><span class="br0">&#40;</span>nodes<span class="br0">&#91;</span><span class="nu0">5</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw4">void</span> incrementar<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i<span class="sy0">&lt;</span>nodes.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      valors<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="sy0">++;</span></div></li><li class="li1"><div class="de1">      nodes<span class="br0">&#91;</span>i<span class="br0">&#93;</span>.<span class="me1">setUserObject</span><span class="br0">&#40;</span><span class="st0">&quot;Valor = &quot;</span> <span class="sy0">+</span> valors<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>      </div></li><li class="li1"><div class="de1">      <span class="co1">//Avisar que s'ha modificat el model</span></div></li><li class="li1"><div class="de1">      <span class="kw1">this</span>.<span class="me1">nodeChanged</span><span class="br0">&#40;</span>nodes<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span> </div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jtree"><span class="kw3">JTree</span></a> tree <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jtree"><span class="kw3">JTree</span></a><span class="br0">&#40;</span><span class="kw1">new</span> MyTreeModel<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>

</div>

<h3><a id="dibuix_lliure" >Dibuix lliure</a></h3>
<div class="level3">
<div class="iocnote"><div class="ioccontent">
<p>
<acronym title="Application Programming Interface">API</acronym> són les inicials d’Application Programming Interface, interface de programació d’aplicacions.
</p>
</div></div>
<p>
Hi ha situacions en què el desenvolupador vol poder dibuixar lliurement sobre una part de la pantalla, normalment sobre un panell, i modificar-ne directament l’aspecte. Per a això, la biblioteca gràfica del Java proporciona una <acronym title="Application Programming Interface">API</acronym> en què s’estableixen dos mecanismes diferents, però molt relacionats, per controlar com es dibuixen els components a pantalla, un associat als d’AWT i un altre als de Swing. De totes maneres, en ser una <acronym title="Application Programming Interface">API</acronym> d’una certa extensió i amb moltes funcionalitats, es limita a donar una visió general per al segon cas, però més que suficient per conèixer els aspectes bàsics amb els quals es pot començar a treballar.
</p>

<p>
El primer pas per entendre com es pot modificar l’aspecte dels components Swing és veure quin és el mecanisme que en gestiona la visualització correcta en pantalla. El més important d’aquest mecanisme és que quan es detecta que el dibuix d’un component qualsevol en pantalla s’ha d’actualitzar, cal cridar-ne el mètode <code>repaint</code>, definit a <code>java.awt.Component</code> i heretat per tots els elements gràfics Aquest és el responsable de proporcionar la imatge que cal mostrar en pantalla i se sobreescriu per a cada cas. Hi ha dos motius pels quals cal actualitzar la visualització d’un component:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Actualització iniciada pel sistema.</strong> Es tracta d’un cas iniciat automàtica- ment pel motor gràfic del Java quan detecta que la regió de la pantalla que ocupa el component ha variat i, per tant, ha de ser redibuixada. El desenvolupador no ha de fer res, per exemple, en redimensionar una finestra, de manera que el component deixa de ser visible o ho torna a ser.</div>
</li>
<li class="level1"><div class="li"> <strong>Actualització iniciada per l’aplicació.</strong> Es tracta del cas en què el desenvolupador força l’actualització explícitament, cridant <code>repaint</code> al seu codi, ja que el Model associat al component ha variat i considera que ha de canviar la manera com es visualitzen les dades. Per exemple, el cas d’una gràfica en què en un moment donat varien els valors que cal mostrar.</div>
</li>
</ul>
<div class="iocnote"><div class="ioccontent">
<p>
En els components AWT, els mètodes a sobreescriure són “paint” i “update”.
</p>
</div></div>
<p>
El mètode <code>repaint</code> realitza internament un conjunt de tasques diferents per garantir que el component es visualitzarà correctament. Per exemple, també ha de gestionar l’actualització d’altres components que conté, entre d’altres coses. El conjunt de tasques concretes varia segons si el component és de la biblioteca AWT o Swing. En el cas de Swing, el punt clau d’aquestes tasques és la crida a un nou mètode, <code>paintComponent</code>, que és el que realment defineix com s’ha de dibuixar el component. Aquest rep com a paràmetre un objecte de tipus <code>java.awt.Graphics</code>, a partir del qual es pot dibuixar directament sobre el component.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
Per modificar directament l’aspecte gràfic d’un component Swing, cal sobreescriure’n el mètode <strong>paintComponent</strong>
, per així poder manipular-ne l’objecte <code>Graphics</code> associat.
</p>
</div></div>
<p>
Per assolir un component amb un aspecte personalitzat, el desenvolupador ha de generar una nova subclasse pròpia a partir del component original en què se sobreescrigui el mètode <code>paintComponent</code>. Per fer dibuixos lliurement en una àrea de la pantalla, cal crear una subclasse de <code>JPanel</code>.
</p>

<p>
La classe <code>Graphics</code> defineix un ampli ventall de mètodes per dibuixar lliurament sobre el panell, per la qual cosa, un cop obtingut l’objecte d’aquest tipus associat al component, tot es limita ja a cercar dins la documentació el mètode més adequat per a la tasca a realitzar.
</p>

</div>

<h4><a id="carrega_d_imatges" >Càrrega d&#039;imatges</a></h4>
<div class="level4">

<p>
La càrrega d’imatges sobre un panell es realitza mitjançant alguns dels mètodes <code>drawImage</code> ,oferts per la classe <code>Graphics</code>. Per gestionar imatges, la biblioteca AWT ofereix una classe auxiliar, Toolkit, que permet obtenir objectes Image a partir del nom del fitxer o un bloc de dades. 
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> MyPanel <span class="kw1">extends</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jpanel"><span class="kw3">JPanel</span></a> <span class="br0">&#123;</span> </div></li><li class="li1"><div class="de1">  <span class="co1">//Classe auxiliar per gestionar imatges</span></div></li><li class="li1"><div class="de1">  <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+toolkit"><span class="kw3">Toolkit</span></a> t <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+toolkit"><span class="kw3">Toolkit</span></a>.<span class="me1">getDefaultToolkit</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+image"><span class="kw3">Image</span></a> imatge<span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> MyPanel<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> nom<span class="br0">&#41;</span> <span class="br0">&#123;</span> </div></li><li class="li1"><div class="de1">    imatge <span class="sy0">=</span> t.<span class="me1">getImage</span><span class="br0">&#40;</span>nom<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw4">void</span> paintComponent<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+graphics"><span class="kw3">Graphics</span></a> g<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <span class="co1">//Mantenim el comportament original</span></div></li><li class="li1"><div class="de1">    <span class="kw1">super</span>.<span class="me1">paintComponent</span><span class="br0">&#40;</span>g<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="co1">//Dibuixem la imatge</span></div></li><li class="li1"><div class="de1">    g.<span class="me1">drawImage</span><span class="br0">&#40;</span>imatge,<span class="nu0">0</span>,<span class="nu0">0</span>,<span class="kw1">this</span><span class="br0">&#41;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

</div>

<h4><a id="dibuixar_figures_geometriques" >Dibuixar figures geomètriques</a></h4>
<div class="level4">

<p>
De la mateixa manera que es poden carregar imatges, la classe <code>Graphics</code> disposa d’un mètode diferent per a pràcticament qualsevol tipus de figura, en dues o tres dimensions. A continuació es mostren alguns dels més significatius:
</p>
<ul>
<li class="level1"><div class="li"> <strong>void drawLine(int x1, int y1, int x2, int y2)</strong>. Dibuixa una línia recta des de les coordenades (x1,y1) fins a les coordenades (x2,y2). Es considera la coordenada (0,0) la cantonada superior esquerra del component.</div>
</li>
<li class="level1"><div class="li"> <strong>void drawArc(int x, int y, int width, int height, int startAngle, int arcAngle)</strong>. Dibuixa una línia corba, en forma d’arc, partint de les coordenades (x,y). La seva alçària i amplada, en píxels, són widthi height de manera que l’àrea coberta és igual a un rectangle. L’arc d’inclinació parteix destartAngle graus i es manté durant arcAngle graus.</div>
</li>
<li class="level1"><div class="li"> <strong>drawRect(int x, int y, int width, int height)</strong>. Dibuixa un rectangle de coordenades quadrades, partint de les coordenades (x,y), amb una amplada i alçària de width i heightpíxels.</div>
</li>
<li class="level1"><div class="li"> <strong>drawRoundRect(int x, int y, int width, int height, int arcWidth, int arcHeight)</strong>. Dibuixa un rectangle de cantonades arrodonides, partint de les coordenades (x,y), amb una amplada i alçària de width i heightpíxels. El grau d’arrodoniment de les cantonades està determinat pels valors arcWidthi arcHeightde manera similar a com es defineixen les línies corbes en el mètodedrawArc.</div>
</li>
<li class="level1"><div class="li"> <strong>drawOval(int x, int y, int width, int height)</strong>. Dibuixa un oval amb centre en les coordenades (x,y) i amb una amplada i alçària de width i heightpíxels. Si aquest dos valors són iguals, el resultat és un cercle.</div>
</li>
</ul>

<p>
Tots els mètodes descrits dibuixen figures “buides”, de manera que el seu interior és transparent i es veu el color del fons del component sobre el qual s’han dibuixat. Per crear figures opaques, per a cada mètode hi ha una versió anomenada <code>fillXXX</code>, en lloc de <code>drawXXX</code> que realitza aquesta tasca (<code>fillOval</code>, <code>fillRect</code>,etc.).
</p>

<p>
Per establir el color amb què es vol dibuixar, cal cridar prèviament el mètode <code>setColor</code>. Cada cop que es vol usar un color diferent cal tornar a cridar aquest mètode amb el nou color.
</p>
<div class="iocfigure"><a name="Figure25b"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Resultat del codi d’exemple.

</figcaption><img src="../media/ic10m03u4_38.png" alt="" /></figure>
</div>
<p>
Tot seguit es mostra un exemple de dibuix com el de la <span class="figref"><a href="#Figure25b"><span>figura</span></a></span> usant diverses crides al mètode <code>drawLine</code>:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> MyPanel <span class="kw1">extends</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jpanel"><span class="kw3">JPanel</span></a> <span class="br0">&#123;</span> </div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw4">void</span> paintComponent<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+graphics"><span class="kw3">Graphics</span></a> g<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">super</span>.<span class="me1">paintComponent</span><span class="br0">&#40;</span>g<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    g.<span class="me1">setColor</span><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+color"><span class="kw3">Color</span></a>.<span class="me1">BLACK</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    g.<span class="me1">fillRect</span><span class="br0">&#40;</span><span class="nu0">100</span>, <span class="nu0">100</span>, <span class="nu0">200</span>, <span class="nu0">100</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    g.<span class="me1">drawLine</span><span class="br0">&#40;</span><span class="nu0">100</span>,<span class="nu0">100</span>,<span class="nu0">150</span>,<span class="nu0">50</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    g.<span class="me1">drawLine</span><span class="br0">&#40;</span><span class="nu0">150</span>,<span class="nu0">50</span>,<span class="nu0">350</span>,<span class="nu0">50</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    g.<span class="me1">drawLine</span><span class="br0">&#40;</span><span class="nu0">300</span>,<span class="nu0">100</span>,<span class="nu0">350</span>,<span class="nu0">50</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    g.<span class="me1">drawLine</span><span class="br0">&#40;</span><span class="nu0">350</span>,<span class="nu0">50</span>,<span class="nu0">350</span>,<span class="nu0">150</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    g.<span class="me1">drawLine</span><span class="br0">&#40;</span><span class="nu0">300</span>,<span class="nu0">200</span>,<span class="nu0">350</span>,<span class="nu0">250</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  <span class="co1">//Sobreescrivint getPreferredSize es pot definir</span></div></li><li class="li1"><div class="de1">  <span class="co1">//una mida per defecte.</span></div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+dimension"><span class="kw3">Dimension</span></a> getPreferredSize<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">return</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+dimension"><span class="kw3">Dimension</span></a><span class="br0">&#40;</span><span class="nu0">400</span>, <span class="nu0">400</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

</div>

<h4><a id="dibuixar_cadenes_de_caracters" >Dibuixar cadenes de caràcters</a></h4>
<div class="level4">

<p>
Per escriure lletres directament en unes coordenades concretes del component hi ha el mètode <code>drawString</code>.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> MyPanel <span class="kw1">extends</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jpanel"><span class="kw3">JPanel</span></a> <span class="br0">&#123;</span> </div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+color"><span class="kw3">Color</span></a> colors<span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="br0">&#123;</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+color"><span class="kw3">Color</span></a>.<span class="me1">BLACK</span>, <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+color"><span class="kw3">Color</span></a>.<span class="me1">BLUE</span>, </div></li><li class="li1"><div class="de1">    <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+color"><span class="kw3">Color</span></a>.<span class="me1">RED</span>, <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+color"><span class="kw3">Color</span></a>.<span class="me1">GREEN</span>, <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+color"><span class="kw3">Color</span></a>.<span class="me1">YELLOW</span><span class="br0">&#125;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw4">void</span> paintComponent<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+graphics"><span class="kw3">Graphics</span></a> g<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">super</span>.<span class="me1">paintComponent</span><span class="br0">&#40;</span>g<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span>i<span class="sy0">&lt;</span><span class="nu0">5</span><span class="sy0">;</span>i<span class="sy0">+=</span><span class="nu0">50</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      g.<span class="me1">setColor</span><span class="br0">&#40;</span>colors<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      g.<span class="me1">drawString</span><span class="br0">&#40;</span> <span class="st0">&quot;Hola Java!&quot;</span>, i<span class="sy0">+</span><span class="nu0">50</span>, i<span class="sy0">+</span><span class="nu0">50</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="co1">//Sobreescrivint getPreferredSize es pot definir</span></div></li><li class="li1"><div class="de1">  <span class="co1">//una mida per defecte.</span></div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+dimension"><span class="kw3">Dimension</span></a> getPreferredSize<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">return</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+dimension"><span class="kw3">Dimension</span></a><span class="br0">&#40;</span><span class="nu0">400</span>, <span class="nu0">400</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

</div>

<h3><a id="applets" >Applets</a></h3>
<div class="level3">

<p>
El llenguatge Java ofereix alternatives a les aplicacions d’escriptori a l’hora de generar <em>interfaces</em> gràfiques. De fet, el tipus d’aplicació que va impulsar el llenguatge Java com un entorn ideal per generar aplicacions gràfiques a Internet van ser els anomenats <em>applets</em>.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">El codi HTML</p>
<p>
És la sintaxi usada per representar una pàgina web, de manera que pugui ser interpretada pel navegador i visualitzada per l’usuari.
</p>
</div></div><div class="iocimportant"><div class="ioccontent">
<p>
Un <strong>applet</strong> és una aplicació Java que s’executa dins una altra aplicació, en lloc de directament sota el sistema operatiu. Normalment, s’executen dins els navegadors web, i permeten crear pàgines dinàmiques o interactives d’una complexitat que el codi <acronym title="HyperText Markup Language">HTML</acronym> per si mateix no permet.
</p>
</div></div><div class="ioctext"><div class="ioccontent"><p class="ioctitle">Provant applets</p>
<p>
Per tant, si es vol provar un <em>applet</em> quan s’està desenvolupant, cal tancar totalment el navegador cada cop que es vulgui executar una nova versió. No n’hi ha prou sortint de la pàgina que el conté i tornant a entrar-hi.
</p>
</div></div>
<p>
La <span class="figref"><a href="#Figure25"><span>figura</span></a></span> esquematitza el funcionament d’un <em>applet</em> i quin és el seu cicle de vida quan un usuari accedeix a la pàgina web que el conté des del seu navegador. L’<em>applet</em> es troba instal·lat en el servidor web i es descarrega dins el navegador quan l’usuari accedeix a la pàgina web que el conté. Un cop descarregat, el navegador l’emmagatzema en la memòria de l’ordinador i immediatament l’executa. L’aspecte més destacat d’aquest cicle de vida és que la descàrrega de l’<em>applet</em> només es produeix la primera vegada que s’accedeix a la seva pàgina. Al llarg de l’execució del navegador, l’<em>applet</em> roman en la memòria independentment que l’usuari accedeixi a altres pàgines web diferents i deixi de visualitzar-lo. Només s’elimina realment de la memòria quan es tanca el navegador. La propera vegada que l’usuari posi en marxa el navegador i torni a accedir a la pàgina de l’<em>applet</em>, tot el procés es repetirà des del principi.
</p>
<div class="iocfigure"><a name="Figure25"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Cicle de vida d’un applet.

</figcaption><img src="../media/ic10m03u4_39.png" alt="" /></figure>
</div>
<p>
L’avantatge principal de generar aplicacions en forma d’<em>applet</em> és la facilitat de desplegament, en contrast amb una aplicació estàndard d’escriptori. No cal copiar el fitxers de l’aplicació en cada ordinador que l’ha d’usar, només cal copiar-los en el servidor web i garantir que en cada client hi ha algun navegador instal·lat. Avui en dia, es pot garantir que això és cert per a pràcticament qualsevol ordinador. En cas de fer actualitzacions, novament, només cal canviar les dades en el servidor web. Evidentment, el seu desavantatge principal és que cada client ha de descarregar l’<em>applet</em> del servidor quan el vol executar, procés més lent que si la instal·lació és local. Si el servidor no funciona per algun motiu, ningú no pot executar l’aplicació.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Adobe Flash</p>
<p>
O simplement Flash, és una plataforma multimèdia per a la creació d’animacions i aplicacions gràfiques riques, executables sobre navegadors. Aquestes solen prendre la forma de fitxers amb extensió .swf.
</p>
</div></div>
<p>
Cal dir que, a mesura que els navegadors han evolucionat i l’amplada de banda disponible per a les connexions a Internet ha crescut, els <em>applets</em> Java han vist disminuir parcialment la popularitat en favor d’altres tecnologies més modernes, amb capacitats gràfiques i multimèdia superiors, com pot ser la tecnologia Flash. Tot i així, els <em>applets</em> encara tenen l’avantatge de permetre a un desenvolupador del Java traduir aplicacions d’escriptori a executables sobre navegadors sense haver d’aprendre un nou llenguatge de programació absolutament diferent. Un altre avantatge important és que, en l’actualitat, pràcticament el 100% dels navegadors moderns disposen de la màquina virtual del Java preinstal·lada, cosa que no és el cas per a altres tecnologies, que normalment requereixen la instal·lació de complements addicionals (connectors o <em>plug-ins</em>) per part de l’usuari. Per tant, encara no ha arribat l’hora d’obviar el desenvolupament d’<em>applets</em>.
</p>

</div>

<h4><a id="la_classe_japplet" >La classe JApplet</a></h4>
<div class="level4">

<p>
La classe que representa el contenidor d’alt nivell dels <em>applets</em> dins la biblioteca Swing és <code>JApplet</code>. Aquesta pertany a una branca de la jerarquia de classes diferent de la resta de components Swing explicats fins ara (<code>JFrame</code>, <code>JPanel</code>, etc.), per la qual cosa no comparteixen totes les mateixes funcionalitats exactament.
</p>

<p>

</p>

<p>
Per generar un <em>applet</em>, cal crear una classe que hereti de <code>JApplet</code> i sobreescriure, d’acord amb les tasques que es vol que realitzi, els mètodes associats al seu cicle de vida:
</p>
<ul>
<li class="level1"><div class="li"> <strong>public void init()</strong>. S’executa la primera vegada que l’<em>applet</em> es descarrega en el navegador i es posa en marxa. És l’equivalent al mètode main d’una aplicació Java d’escriptori, per la qual cosa és obligatori sobreescriure’l si es vol arribar a algun resultat.</div>
</li>
<li class="level1"><div class="li"> <strong>public void stop()</strong>. S’executa cada cop que l’<em>applet</em> es deixa de visualitzar en pantalla, per exemple, perquè el navegador es minimitza o surt de la seva pàgina i es visita una pàgina diferent. Resulta útil amb vista a aturar l’execució d’elements associats que impliquen una certa càrrega, però que no té sentit que estiguin en marxa si l’<em>applet</em> no s’està visualitzant com, per exemple, animacions o qualsevol element dinàmic que canviï constantment. No és imprescindible sobreescriure’l si no hi ha cap element d’aquest tipus.</div>
</li>
<li class="level1"><div class="li"> <strong>public void start()</strong>. S’executa cada cop que l’<em>applet</em> es visualitza en pantalla. Per tant, es crida sempre immediatament després del mètode init, però també sempre que l’usuari retorna a la pàgina que conté l’<em>applet</em>, després que per algun motiu es deixa de visualitzar. Només sol tenir sentit sobreescriure’l si també s’ha sobreescrit el mètode stop.</div>
</li>
<li class="level1"><div class="li"> <strong>public void destroy()</strong>. S’executa en tancar el navegador de manera ordenada, moment en què l’<em>applet</em> es descarrega definitivament de la memòria de l’ordinador, per la qual cosa cal alliberar qualsevol recurs important en el seu codi. Només se sol sobreescriure en <em>applets</em> complexos.</div>
</li>
</ul>

<p>
Els <em>applets</em> no es poden obrir directament amb el navegador, sempre es troben encastats dins una pàgina normal en codi <acronym title="HyperText Markup Language">HTML</acronym>, a la qual s’accedeix per mitjà del navegador web. Per incloure un <em>applet</em> dins una pàgina web cal usar l’etiqueta o <em>tag</em> <acronym title="HyperText Markup Language">HTML</acronym>:
</p>
<pre class="code html4strict"><ol><li class="li1"><div class="de1"><span class="sc2">&lt;<a href="http://december.com/html/4/element/applet.html"><span class="kw2">APPLET</span></a> <span class="kw3">CODE</span> <span class="sy0">=</span> <span class="st0">&quot;NomApplet&quot;</span> <span class="kw3">WIDTH</span> <span class="sy0">=</span> <span class="st0">&quot;500&quot;</span> <span class="kw3">HEIGHT</span> <span class="sy0">=</span> <span class="st0">&quot;500&quot;</span>&gt;</span></div></li><li class="li1"><div class="de1">  <span class="sc2">&lt;<a href="http://december.com/html/4/element/param.html"><span class="kw2">PARAM</span></a> <span class="kw3">NAME</span><span class="sy0">=</span>nom1 <span class="kw3">VALUE</span><span class="sy0">=</span>valor1 <span class="sy0">/</span>&gt;</span></div></li><li class="li1"><div class="de1">  <span class="sc2">&lt;<a href="http://december.com/html/4/element/param.html"><span class="kw2">PARAM</span></a> <span class="kw3">NAME</span><span class="sy0">=</span>nom2 <span class="kw3">VALUE</span><span class="sy0">=</span>valor2 <span class="sy0">/</span>&gt;</span></div></li><li class="li1"><div class="de1">  ...</div></li><li class="li1"><div class="de1"><span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/applet.html"><span class="kw2">APPLET</span></a>&gt;</span></div></li></ol></pre>

<p>
Els indicadors <code>WIDTH</code> i <code>HEIGHT</code> permeten indicar quines són les dimensions que ha d’ocupar dins la finestra del navegador, l’amplada i alçària respectivament. Opcionalment, és possible incloure un conjunt d’etiquetes <code>PARAM</code> per definir parells nom-valor que indiquen paràmetres amb vista a l’execució de l’<em>applet</em>, de manera similar als arguments associats al mètode <code>main</code> d’una aplicació d’escriptori. Els valors d’aquests paràmetres es poden recuperar mitjançant el mètode definit en la mateixa classe <code>JApplet</code>:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">public</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> getParameter<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> nomParametre<span class="br0">&#41;</span></div></li></ol></pre>

<p>
A part d’aquestes particularitats, el comportament de la classe JApplet és pràcticament igual que un JFrame per a generar la <em>interface</em> gràfica. Mitjançant el mètode <code>getContentPane()</code> se’n pot obtenir el panell de contingut, i per aquest es pot afegir qualsevol contenidor o control Swing cridant el mètode <code>add</code>.
</p>

<p>
Tot seguit es mostra un exemple de codi per generar un <em>applet</em> dinàmic, en què un comptador avança cada segon a partir del valor establert en un paràmetre.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Timer i TimerTask</p>
<p>
Mitjançant aquestes classes del paquet <code>java.util</code> permeten executar tasques cada cert temps, alhora que s’executa el codi del programa principal.
</p>
</div></div><pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> Test <span class="kw1">extends</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+japplet"><span class="kw3">JApplet</span></a> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">private</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jlabel"><span class="kw3">JLabel</span></a> display <span class="sy0">=</span> <span class="kw2">null</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  java.<span class="me1">util</span>.<a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+timer"><span class="kw3">Timer</span></a> timer <span class="sy0">=</span> <span class="kw2">null</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">private</span> <span class="kw4">int</span> valor <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="co1">//Classe que defineix una tasca de temporitzador</span></div></li><li class="li1"><div class="de1">  <span class="kw1">private</span> <span class="kw1">class</span> Task <span class="kw1">extends</span> java.<span class="me1">util</span>.<a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+timertask"><span class="kw3">TimerTask</span></a> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">public</span> <span class="kw4">void</span> run<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      valor<span class="sy0">++;</span></div></li><li class="li1"><div class="de1">      display.<span class="me1">setText</span><span class="br0">&#40;</span><span class="st0">&quot;Comptador :&quot;</span> <span class="sy0">+</span> valor<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="co1">//Reprogramar el temporitzador de nou        </span></div></li><li class="li1"><div class="de1">      timer.<span class="me1">schedule</span><span class="br0">&#40;</span><span class="kw1">new</span> Task<span class="br0">&#40;</span><span class="br0">&#41;</span>,<span class="nu0">1000</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="kw1">private</span> <span class="kw4">int</span> getValor<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">try</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> valStr <span class="sy0">=</span> getParameter<span class="br0">&#40;</span><span class="st0">&quot;INICI&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">return</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+integer"><span class="kw3">Integer</span></a>.<span class="me1">parseInt</span><span class="br0">&#40;</span>valStr<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span> <span class="kw1">catch</span> <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+exception"><span class="kw3">Exception</span></a> ex<span class="br0">&#41;</span> <span class="br0">&#123;</span> </div></li><li class="li1"><div class="de1">      <span class="kw1">return</span> <span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span> </div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw4">void</span> init<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    valor <span class="sy0">=</span> getValor<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jpanel"><span class="kw3">JPanel</span></a> panell <span class="sy0">=</span> <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jpanel"><span class="kw3">JPanel</span></a><span class="br0">&#41;</span>getContentPane<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    display <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+jlabel"><span class="kw3">JLabel</span></a><span class="br0">&#40;</span><span class="st0">&quot;Comptador :&quot;</span> <span class="sy0">+</span> valor<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    display.<span class="me1">setHorizontalAlignment</span><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+swingconstants"><span class="kw3">SwingConstants</span></a>.<span class="me1">CENTER</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    display.<span class="me1">setOpaque</span><span class="br0">&#40;</span><span class="kw2">true</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    panell.<span class="me1">add</span><span class="br0">&#40;</span>display<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="co1">//Es genera un temporitzador</span></div></li><li class="li1"><div class="de1">    timer <span class="sy0">=</span> <span class="kw1">new</span> java.<span class="me1">util</span>.<a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+timer"><span class="kw3">Timer</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw4">void</span> start<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <span class="co1">//Activar el temporitzador a 1 segon</span></div></li><li class="li1"><div class="de1">    timer.<span class="me1">schedule</span><span class="br0">&#40;</span><span class="kw1">new</span> Task<span class="br0">&#40;</span><span class="br0">&#41;</span>,<span class="nu0">1000</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

</div>

<h4><a id="la_capsa_de_sorra" >La capsa de sorra</a></h4>
<div class="level4">

<p>
Tot i que, a grans trets, la programació del codi d’un <em>applet</em> és molt semblant a la d’una aplicació d’escriptori, sí que hi ha un aspecte important que tot desenvolupador ha de tenir ben present. Els <em>applets</em> sempre s’executen dins un navegador que s’anomena <em>capsa de sorra</em> (<em>sandbox</em>).
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
Una <strong>capsa de sorra</strong> (sandbox) és un entorn d’execució segur en què no es permet que les aplicacions realitzin un conjunt d’operacions considerades inherentment insegures, que poden deixar la porta oberta a malifetes per part de codi creat amb males intencions.
</p>
</div></div><div class="ioctext"><div class="ioccontent"><p class="ioctitle">Malware</p>
<p>
S’anomena així tot tipus de programari maliciós amb l’únic objectiu d’executar-se sense el permís de l’usuari amb intencions funestes.
</p>
</div></div>
<p>
En el cas específic dels <em>applets</em>, es tracta amb un tipus d’aplicació amb totes les funcionalitats de les biblioteques completes del Java i que s’executa automàticament en el navegador tan bon punt l’usuari es connecta a la pàgina en què s’ha inclòs. Això implica una porta d’entrada per a tota mena de programa maliciós o <em>malware</em>. Per exemple, suposem que es genera un <em>applet</em> que formata el disc de l’ordinador, o cerca tots els fitxers amb informació personal i els envia a una adreça de correu electrònic, tot sota l’aparença d’una aplicació lícita (per exemple, unes divertides animacions amb coloraines). En un entorn d’execució sense cap límit, tan bon punt qualsevol usuari es connecti a la pàgina amb aquest <em>applet</em> ja es pot dur a terme la malifeta. Quan s’adoni del que ha passat, ja serà massa tard.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
Runtime és una classe de les biblioteques del Java que permet executar altres programes usant el seu mètode .
</p>
</div></div>
<p>
Per aquest motiu, hi ha algunes tasques que un <em>applet</em> no pot realitzar per defecte. En fer-les, es llança una excepció des del mètode que ho ha intentat. Aquestes tasques són, a grans trets:
</p>
<ul>
<li class="level1"><div class="li"> Qualsevol mena d’interacció amb el sistema de fitxers, tant de lectura com d’escriptura.</div>
</li>
<li class="level1"><div class="li"> Qualsevol mena d’interacció per xarxa amb una màquina que no sigui la mateixa en què l’<em>applet</em>està instal·lat (el servidor web).</div>
</li>
<li class="level1"><div class="li"> Consultar o modificar qualsevol propietat del sistema operatiu en què s’executa l’<em>applet</em>.</div>
</li>
<li class="level1"><div class="li"> Executar altres programes.</div>
</li>
<li class="level1"><div class="li"> Instanciar altres contenidors d’alt nivell.</div>
</li>
<li class="level1"><div class="li"> Sortir directament de l’<em>applet</em> amb la crida <code>System.exit()</code>.</div>
</li>
</ul>
<div class="iocnote"><div class="ioccontent">
<p>
Per signar un <em>applet</em>, s’usa l’eina “jarsigner”, distribuïda amb l’entorn estàndard del Java. 
</p>
</div></div>
<p>
Per tant, en desenvolupar un <em>applet</em> cal tenir en compte que hi ha aquestes limitacions dins les tasques que pot realitzar. Tot i així, hi ha mecanismes per generar <em>applets</em>que poden saltar-se algunes d’aquestes restriccions, com per exemple el que s’anomena <em>signar l’applet.</em>
</p>

</div>

	 </article>
     <div class="pnpage">
      <div class="left-corner"></div>
      <div id="prevpage">Anar a la p&agrave;gina anterior:<br /><a href="../../../WebContent/u4/referencies.html">Referències</a></div>
      <div id="nextpage">Anar a la p&agrave;gina seg&uuml;ent:<br /><a href="../../../WebContent/u4/a1/activitats.html">Activitats</a></div>
      <div class="right-corner"></div>
     </div>
    </div>
    <footer class="footer">
      <div><small>Aquest document està subjecte a una llicència oberta de Creative Commons, es reserva el dret de reconeixement de l'autoria, d'exigir que no se'n faci cap mena d'ús comercial. Si altereu o transformeu aquesta obra, o en genereu obres derivades, només podeu distribuir l'obra generada amb una llicència idèntica a aquesta.</small></div>
    </footer>
 </div>
 <div id="back_preview" class="hidden"></div>
 <div id="preview" class="hidden">
  <div class="prevcontent"></div>
 </div>
 <div id="help-tooltips">
  <div id="help-toc" class="hidden tooltip"><span>Taula de continguts:</span> Ofereix una vista general de l&#39;estructura del m&ograve;dul, que us facilitar&agrave; la navegaci&oacute; a trav&eacute;s dels seus continguts.<span class="arrow-left"></span></div> 
  <div id="help-settings" class="hidden tooltip"><span>Opcions de format:</span> Permet configurar el format de lectura a partir de les vostres prefer&egrave;ncies, modificant la mida de la lletra, el color del fons, l&#39;amplada de la p&agrave;gina o l&#39;ocultaci&oacute; dels continguts complementaris, entre d&#39;altres.<span class="arrow-left"></span></div>
  <div id="help-printer" class="hidden tooltip"><span>Imprimir:</span>  Envia el contingut seleccionat a la impressora.<span class="arrow-left"></span></div>
  <div id="help-favorites" class="hidden tooltip"><span>Prefereits:</span> Permet desar aquelles parts del contingut a les que us interessi accedir en un moment posterior; us permetr&agrave; anar creant un repositori personalitzat de les seccions que considereu m&eacute;s rellevants. Un cop l&#39;hageu començat a fer servir se us mostrar&agrave; a sota un comptador que us informar&agrave; del nombre de preferits que s&#39;hagin emmagatzemat fins al moment.<span class="arrow-left"></span></div>
  <div id="help-favcounter" class="hidden tooltip"><span>Comptador i llistat de preferits:</span> Indica el nombre de preferits que s&#39;han desat fins el moment; clicant damunt seu accedireu al llistat de preferits, i a trav&eacute;s d&#39;aquest podreu accedir directament als continguts que hageu emmagatzemat.<span class="arrow-left"></span></div>
  <div id="help-help_icon" class="hidden tooltip"><span>Ajuda:</span> Aquesta opci&oacute; activa la informaci&oacute; de les funcionalitats del web tot situant el punter del ratol&iacute; al damunt dels diferents &iacute;tems.<span class="arrow-left"></span></div>
  <div id="help-sidebar-hide" class="hidden tooltip"><span>Mostrar/Ocultar barra lateral:</span>  Deshabilita la barra d&#39;opcions, permetent la seva recuperaci&oacute; quan es desitgi.<span class="arrow-left"></span></div>
  <div id="help-search" class="hidden tooltip"><span>Cerca:</span>  Introdu&iuml;u les paraules clau sobre aquells conceptes que desitgeu localitzar en els continguts del m&ograve;dul. Tamb&eacute; podeu excloure un terme de la cerca tot afegint-hi el signe &#8220;-&#8221; al davant.<span class="arrow-top"></span></div>
  <div id="help-header" class="hidden tooltip"><span>Cap&ccedil;alera:</span>  Indica l&#39;apartat o secci&oacute; que es mostra en pantalla. Tingueu present que les capçaleres de segon, tercer i quart nivell tamb&eacute; es poden desar com a marcadors.<span class="arrow-left"></span></div>
</div> 
</body>
</html>
