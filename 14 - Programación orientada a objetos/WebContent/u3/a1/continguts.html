<!doctype html>

<!--[if lt IE 7 ]> <html class="ie ie6 no-js" lang="ca"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie ie7 no-js" lang="ca"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie ie8 no-js" lang="ca"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie ie9 no-js" lang="ca"> <![endif]-->
<!--[if gt IE 9]><!--><html class="no-js" lang="ca"><!--<![endif]-->
<!-- the "no-js" class is for Modernizr. -->

<head id="www-sitename-com" data-template-set="html5-reset">

	<meta charset="utf-8">
	
	<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>Programació orientada a objectes</title>
	
<!-- <meta name="title" content=""> --> 
	<meta name="description" content="">
	<!-- Google will often use this as its description of your page/site. Make it good. -->
	
	<meta name="google-site-verification" content="">
	<!-- Speaking of Google, don't forget to set your site up: http://google.com/webmasters -->
	
	<meta name="author" content="Institut Obert de Catalunya">
	<meta name="Copyright" content="Copyright Institut Obert de Catalunya 2011. All Rights Reserved.">

	<!-- Dublin Core Metadata : http://dublincore.org/ -->
	<meta name="DC.title" content="Programació orientada a objectes">
	<meta name="DC.subject" content="Informàtica i comunicacions">
	<meta name="DC.creator" content="Institut Obert de Catalunya">
	
	<!--  Mobile Viewport Fix
	j.mp/mobileviewport & davidbcalhoun.com/2010/viewport-metatag 
	device-width : Occupy full width of the screen in its current orientation
	initial-scale = 1.0 retains dimensions instead of zooming out if page height > device height
	maximum-scale = 1.0 retains dimensions instead of zooming in if page width < device width
	-->
	<!-- Uncomment to use � use thoughtfully!
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	-->

	<link rel="shortcut icon" href="../../../img/favicon.ico">
	<!-- This is the traditional favicon.
		 - size: 16x16 or 32x32
		 - transparency is OK
		 - see wikipedia for info on browser support: http://mky.be/favicon/ -->
		 
	<link rel="apple-touch-icon" href="../../../img/apple-touch-icon.png">
	<!-- The is the icon for iOS's Web Clip.
		 - size: 57x57 for older iPhones, 72x72 for iPads, 114x114 for iPhone4's retina display (IMHO, just go ahead and use the biggest one)
		 - To prevent iOS from applying its styles to the icon name it thusly: apple-touch-icon-precomposed.png
		 - Transparency is not recommended (iOS will put a black BG behind the icon) -->
	
	<!-- CSS: screen, mobile & print are all in the same file -->
	<link rel="stylesheet" href="../../../_/css/style.css">

	<!-- CSS: jQuery UI -->
	<link rel="stylesheet" href="../../../_/css/jquery-ui.css">
	
	<!-- all our JS is at the bottom of the page, except for Modernizr. -->
	<script src="../../../_/js/modernizr-1.7.min.js"></script>
	<script src="../../../_/js/Hyphenator.js" type="text/javascript"></script>
	<script type="text/javascript">
	   Hyphenator.config({
		minwordlength : 4
	   });
	   Hyphenator.run();
	</script>
    <script src="../../../_/js/build.js" type="text/javascript"></script>
</head>

<body class="style-newspaper">

<div class="wrapper"><!-- not needed? up to you: http://camendesign.com/code/developpeurs_sans_frontieres -->

	<header id="header">
		<div class="head"><a href="http://ioc.gencat.cat"><img src="../../../img/logo.png" alt="Institut Obert de Catalunya"/></a><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/es/deed.ca"><img src="../../../img/license.png" alt="Llic&egrave;ncia" class="license"/></a></div>
		<div class="headdocument"><a href="../../../index.html">Programació orientada a objectes</a></div>
        <div id="search" class="search" name="search">
         <form id="frmsearch" action="../../../search.html" method="get">
          <input type="text" name="q"/>
        </form>
        </div>
	</header>
   <div id="upbutton" class="upbutton" style="display:none;"><img src="../../../img/uparrow.png" alt="Pujar a l'inici de p&agrave;gina"/></div>
   <aside id="aside">
    <div id="menu">
      <ul>
       <li name="toc"><div><img src="../../../img/toc.png" alt="&Iacute;ndex"/></div></li>
       <li name="settings"><div><img src="../../../img/settings.png" alt="Configuraci&oacute;"/></div></li>
       <li name="printer"><div><img src="../../../img/printer.png" alt="Imprimir"/></div></li>
       <li name="favorites"><div><img src="../../../img/favorites.png" alt="Favorits"/></div></li>
       <li name="help_icon" class="help_icon"><div><img src="../../../img/help_icon.png" alt="Ajuda"/></div></li>
      </ul>
     </div>
   </aside>
   <div id="sidebar-hide" name="sidebar-hide"><img src="../../../img/arrows.png"/></div>
   <section>
     <div id="toc" class="hidden">
      <div class="menucontent">
        <ul>
        <li id="u3" class="parentnode"><p><a href="../../../WebContent/u3/introduccio.html">3. Classes fonamentals</a></p><ul class="expander"><li id="u3introduccio"><a href="../../../WebContent/u3/introduccio.html">Introducció</a></li><li id="u3resum"><a href="../../../WebContent/u3/resum.html">Resum</a></li><li id="u3mapa"><a href="../../../WebContent/u3/mapa.html">Mapa conceptual</a></li><li id="u3resultats"><a href="../../../WebContent/u3/resultats.html">Resultats d'aprenentatge</a></li><li id="u3referencies"><a href="../../../WebContent/u3/referencies.html">Referències</a></li><li id="u3a1" class="tocsection"><p id="u3a1continguts"><a href="../../../WebContent/u3/a1/continguts.html">Classes fonamentals</a><span class="buttonexp"></span></p><ul><li id="u3a1activitats"><a href="../../../WebContent/u3/a1/activitats.html">Activitats</a></li><li id="u3a1exercicis"><a href="../../../WebContent/u3/a1/exercicis.html">Exercicis</a></li></ul></li></ul></li><li id="" class="indexnode"><p><a href="../../../index.html">Anar a l&#39;&iacute;ndex general</a></p></li>
        </ul>
      </div>
    </div>
   </section>
   <section>
   <div id="settings" class="hidden">
    <div class="menucontent">
     <div class="allsettings">
     <div class="settings">
      <label>Font i Color</label>
		<div class="setting-option">
	        <ul class="fontBackground">
				<li id="style-newspaper" title="Newspaper" class="appearance-style-newspaper"><span>Newspaper</span></li>
                <li id="style-novel" title="Novel" class="appearance-style-novel"><span>Novel</span></li>
                <li id="style-ebook" title="eBook" class="appearance-style-ebook"><span>eBook</span></li>
				<li id="style-inverse" title="Inverse" class="appearance-style-inverse active"><span>Inverse</span></li>
				<li id="style-athelas" title="Athelas" class="appearance-style-athelas"><span>Athelas</span></li>
			</ul>
		</div>
     </div>
	<div class="settings">
      <label>Amplada</label>
		<div class="setting-option">
	        <div id="slider-width"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
		<div class="setting-option">
	        <div id="slider-font"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
	  <div class="setting-option">
       <form action="" class="sett-options">
		<ul>
		    <li><input type="checkbox" id="secondary-content" /><label for="secondary-content">Mostra recursos complementaris</label></li>
		    <li><input type="checkbox" id="main-images" /><label for="main-images">Mostra imatges</label></li>
		    <li><input type="checkbox" id="text-alignment" /><label for="text-alignment">Text justificat</label></li>
			<li><input type="checkbox" id="text-hyphen" /><label for="text-hyphen">Partici&oacute; sil·l&agrave;bica</label></li>
		</ul>
       </form>
	  </div>
     </div>
     </div>
    </div>
   </div>
   </section>
 <section>
 <div id="favorites" class="hidden"></div>
 </section>   
 <div id="bridge" class="hidden"></div>
 <div id="help" class="hidden">
  <div class="helptitle">Dreceres del teclat<hr></div>
  <div class="helpsection"><span>General</span>
   <ul>
    <li><span class="shortcut">g</span>: Anar al men&uacute; de navegaci&oacute;</li>
    <li><span class="shortcut">o</span>: Anar a opcions</li>
    <li><span class="shortcut">s</span>: Guardar la p&agrave;gina actual a favorits</li>
    <li><span class="shortcut">p</span>: Imprimir la p&agrave;gina actual</li>
    <li><span class="shortcut">?</span>: Mostrar/Ocultar l&#39;ajuda</li>
   </ul>
  </div>
  <div class="helpsection"><span>Navegaci&oacute;</span>
   <ul>
    <li><span class="shortcut">i</span>: Anar a l&#39;&iacute;ndex general</li>
    <li><span class="shortcut">t</span>: Anar a l&#39;inici de p&agrave;gina</li>
    <li><span class="shortcut">b</span>: Anar al final de p&agrave;gina</li>
    <li><span class="shortcut">j</span>: Anar cap endavant dintre la p&agrave;gina</li>
    <li><span class="shortcut">k</span>: Anar cap enrere dintre la p&agrave;gina</li>
    <li><span class="shortcut">h</span>: Anar a la p&agrave;gina anterior:</li>
    <li><span class="shortcut">l</span>: Anar a la p&agrave;gina seg&uuml;ent:</li>
   </ul>
   </div>
 </div>
 <div id="favcounter" name="favcounter" class="hidden"><span></span></div>
 <div id="navmenu" class="navmenu"><ul class="webnav"><li><a href="../../../index.html" title="Anar a l&#39;&iacute;ndex general">Inici</a></li><li><a href="../introduccio.html">Classes fonamentals</a></li><li>Classes fonamentals</li></ul></div>
	<div id="content" lang="ca" class="hyphenate text">
     <article lang="ca" class="sheet">
        <h1><a id="classes_fonamentals"> Classes fonamentals </a></h1>
    	
<p>
El llenguatge Java proporciona una gran quantitat de paquets de classes, la seva <acronym title="Application Programming Interface">API</acronym>, que són referència bàsica per a qualsevol programador en Java i, per tant, ens correspon endinsar-nos en el seu coneixement. Val a dir, però, que això només és possible quan ja es dominen els mecanismes de la programació orientada a objectes (encapsulament, herència i polimorfisme).
</p>

<p>
La nomenclatura dels paquets és uniforme i ajuda a categoritzar les classes. El primer qualificador és <code>java</code> o <code>javax</code> (per a les classes dedicades a la interfície gràfica) o <code>org</code> (per a les classes dedicades a donar suport a paquets de determinades organitzacions). Pels paquets <code>java.*</code> i <code>javax.*</code>, el segon qualificador dóna una idea de la matèria que cobreix el paquet, com io (entrada/sortida) i math (funcions matemàtiques). Hi ha temes que contenen subpaquets, amb un tercer qualificador més específic (per exemple, <code>javax.sound.midi</code>, amb un nom prou significatiu).
</p>

<p>
I, com ens podem plantejar el coneixement de l’extensa <acronym title="Application Programming Interface">API</acronym> de Java? Intentar fer un recorregut per tots els paquets i classes seria, gairebé, un suïcidi. El consell és plantejar l’aprenentatge dels paquets agrupats per funcionalitats, començant per les més usuals en qualsevol tipus de desenvolupament: representació i manipulació de col·leccions d’objectes, informació referent a les classes i llur estructura, control d’errors, gestió d’entrades i sortides, desenvolupament d’interfícies gràfiques…
</p>

<p>
En alguns casos, la documentació del mateix llenguatge Java agrupa, sota un nom determinat, el conjunt de paquets relacionats amb una funcionalitat determinada. Les agrupacions d’aquest tipus són simplement documentals i no es tradueixen en cap concepte dins el llenguatge Java. I respecte a la nomenclatura d’aquestes agrupacions, la plataforma Java no és uniforme i tant utilitza el mot <acronym title="Application Programming Interface">API</acronym> (per referir-se a un subconjunt de l’<acronym title="Application Programming Interface">API</acronym> de Java) com el mot <em>framework</em> com no utilitza cap mot especial. Com a exemples d’aquesta no uniformitat, podem visitar la pàgina principal de la documentació <acronym title="HyperText Markup Language">HTML</acronym> de la plataforma Java SE 6, en la qual trobarem una imatge com la de la <span class="figref"><a href="#Figure1"><span>figura</span></a></span> que mostra tots els components de la plataforma Java.
</p>

<p>
Un escombratge del ratolí per damunt dels diversos components ens mostra el nom oficial que Java dóna als components. Entre d’altres, hi podem veure <em>Collections Framework (Collections)</em>, <em>Reflection <acronym title="Application Programming Interface">API</acronym> (Reflection)</em>, <em>Input/Output <acronym title="Application Programming Interface">API</acronym> (I/O)</em>, <em>Abstract Window Toolkit (AWT)</em>, <em>Graphical User Interface Components (Swing)</em>, <em>Java Database Connectivity <acronym title="Application Programming Interface">API</acronym> (JDBC)</em>, <em>Java archive file format (JAR)</em>, <em>Input Method Framework (Input Methods)</em>, etc. 
</p>
<div class="iocfigure"><a name="Figure1"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Components de la plataforma Java Se

</figcaption><img src="../media/ic10m03u3_01.png" alt="" /></figure>
</div>
<p>
Com es veu, hi ha funcionalitats batejades amb el sufix <acronym title="Application Programming Interface">API</acronym>, altres amb el sufix <em>framework</em> i altres sense cap sufix especial. Queda clar, doncs, que Java utilitza el mot <em>framework</em> per batejar alguns components de la plataforma. Aquest concepte no és propietat de la plataforma Java sinó que s’utilitza força en el món de la programació orientada a objectes.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
Un <strong><em>framework</em></strong> (entorn o marc de treball) és un concepte utilitzat en la programació orientada a objectes per designar un conjunt de classes que defineixen un disseny abstracte i una estructura per solucionar un conjunt de problemes relacionats.
</p>
</div></div>
<p>
De tot el mapa presentat a la <span class="figref"><a href="#Figure1"><span>figura</span></a></span>, en aquest apartat ens centrarem en només dos parts molt concretes. Per una banda, una part molt important de “lang i util”, la centrada en el control i gestió d’errors: les excepcions. I d’altra banda, la ”<em>Collections Framework</em>”.
</p>

<h2><a id="excepcions" >Excepcions</a></h2>
<div class="level2">

<p>
En el desenvolupament de programes en qualsevol llenguatge de programació, el programador ha de disposar de mecanismes (proporcionats pel llenguatge) per detectar els errors que es puguin produir en temps d’execució. Així, per exemple, si un programa ha d’accedir a un fitxer que es troba en un dispositiu determinat, el programador ha d’haver previst que el fitxer pot no ser accessible i, per tant, ha d’haver establert les alternatives d’execució enlloc de provocar una aturada brusca del programa.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
S’anomena <strong>gestió d’excepcions</strong> el conjunt de mecanismes que un llenguatge de programació proporciona per detectar i gestionar els errors que es puguin produir en temps d’execució.
</p>
</div></div>
<p>
La gestió d’excepcions no preveu mai els errors de sintaxi que es detecten en temps de compilació i, molt poques vegades, els anomenats <em>errors</em>
<em>de programació</em> que no s’haurien de produir mai: intent d’accés a una posició inexistent en una taula, divisió per zero, intent d’accés per una referència nul·la…
</p>

<p>
Hi ha dues maneres de gestionar les excepcions:
</p>
<ul>
<li class="level1"><div class="li"> De la manera tradicional, dissenyant els mètodes de manera que retornin un codi d’error que es revisa després de la crida a la funció o mètode amb l’ajut d’instruccions condicionals per tal de prendre la decisió adequada. Aquesta tècnica no dóna bons resultats quan l’error és fatal (ha de provocar la finalització del programa) i es pot produir en diferents nivells de crides internes, ja que la funció o el mètode dissenyats per nosaltres es pot cridar dins d’altres funcions o mètodes, fet que fa impossible saber la cascada de crides fins al punt en el qual s’ha produït l’error.</div>
</li>
<li class="level1"><div class="li"> Utilitzant construccions especials per a la gestió d’errors proporcionades pel llenguatge de programació, com és habitual en els llenguatges moderns com C++, Visual Basic i Java, que acostumen a proporcionar mecanismes de propagació de l’error cap a les funcions o mètodes que han cridat la funció o mètode en què s’ha produït l’error, de manera que és possible conèixer la cascada de crides fins el punt en el què s’ha produït l’error.</div>
</li>
</ul>

<p>
El model de gestió d’excepcions que proporciona el llenguatge Java és simple: en produir-se un error, la màquina virtual llança (<em>throw</em>) un avís que el programador hauria de poder capturar (<em>catch</em>) per resoldre la situació problemàtica.
</p>

</div>

<h3><a id="tipus_d_excepcions" >Tipus d&#039;excepcions</a></h3>
<div class="level3">

<p>
El llenguatge Java distingeix entre error i excepció. Els errors corresponen a situacions irrecuperables, que no tenen solució i que no depenen del programador, el qual no s’ha de preocupar de capturar. No s’haurien de produir mai, però quan tenen lloc provoquen la finalització brusca del programa. Tenim exemples d’errors quan la màquina virtual es queda sense recursos per continuar amb l’execució del programa, quan alguna cosa va malament en la càrrega d’un servei d’un proveïdor, quan deixa de respondre un canal d’entrada/sortida…
</p>

<p>
En canvi, les excepcions corresponen a situacions excepcionals que els programes es poden trobar en temps d’execució, i s’hi poden incloure, fins i tot, els errors de programació. El programador pot preveure cada tipus d’excepció i escriure el codi adequat per a la seva gestió.
</p>

<p>

</p>

<p>
El llenguatge Java engloba tots els possibles errors en la classe <code>Error</code> i totes les possibles excepcions en la classe <code>Exception</code>. És a dir, cada possible situació problemàtica té associada una classe (derivada d<code>‘Errror</code> o d<code>‘Exception</code>) de manera que, en el moment en què es produeix la situació problemàtica, es crea un objecte de la subclasse corresponent que conté la informació del context en què s’ha produït el problema.
</p>

<p>
Les classes <code>Error</code> i <code>Exception</code> deriven, a la vegada, de la classe <code>Throwable</code>, la qual proporciona mecanismes comuns per a la gestió de qualsevol tipus d’error i excepció, entre els quals convé conèixer:
</p>
<ul>
<li class="level1"><div class="li"> L’existència de quatre constructors per a qualsevol classe derivada, similars al següent:</div>
</li>
</ul>
<pre class="code java"><ol><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+throwable"><span class="kw3">Throwable</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">   <span class="coMULTI">/* Construeix un objecte Throwable amb missatge null */</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+throwable"><span class="kw3">Throwable</span></a><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> message<span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">   <span class="coMULTI">/* Construeix un objecte Throwable amb el missatge indicat */</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+throwable"><span class="kw3">Throwable</span></a><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> message, <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+throwable"><span class="kw3">Throwable</span></a> cause<span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">   <span class="coMULTI">/* Construeix un objecte Throwable amb el missatge indicat i amb la causa que ha </span></div></li><li class="li1"><div class="de1"><span class="coMULTI">&nbsp;     provocat la situació */</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+throwable"><span class="kw3">Throwable</span></a><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+throwable"><span class="kw3">Throwable</span></a> cause<span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">   <span class="coMULTI">/* Construeix un objecte Throwable amb la causa que l'ha provocat i com a missatge, </span></div></li><li class="li1"><div class="de1"><span class="coMULTI">&nbsp;     el resultat de: cause==null ? null : cause.toString() */</span></div></li></ol></pre>

<p>
Fixem-nos que hi ha dos constructors que incorporen la possibilitat de crear un objecte <code>Throwable</code> indicant un altre objecte <code>Throwable</code> com a causant (cause) del nou objecte, fet que permet encadenar els errors i/o excepcions.
</p>
<ul>
<li class="level1"><div class="li"> L’existència de mètodes per conèixer el context en el qual s’ha produït la situació problemàtica i, per tant, poder actuar en conseqüència, com, per exemple, els següents:</div>
</li>
</ul>
<pre class="code java"><ol><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+throwable"><span class="kw3">Throwable</span></a> getCause<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>  <span class="coMULTI">/* Retorna la causa o null */</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> getMessage<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>   <span class="coMULTI">/* Retorna el missatge o null */</span></div></li><li class="li1"><div class="de1"><span class="kw4">void</span> printStackTrace<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>   <span class="coMULTI">/* Visualitza pel canal d'errors, el context en el que s'ha</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">&nbsp;                         produït l'error i la cascada de crides des del mètode main()</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">&nbsp;                         que han portat al punt en el que s'ha produït l'error */</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> toString<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>   <span class="coMULTI">/* Retorna una curta descripció de l'objecte */</span></div></li></ol></pre>

<p>
Per tal de desenvolupar aplicacions Java amb una bona gestió d’excepcions, en primer lloc ens hem de centrar en el coneixement de la jerarquia de classes que neix a partir de la classe <code>Exception</code> i, en segon lloc, en els mecanismes de gestió d’excepcions que proporciona Java.
</p>

<p>
En la classe <code>Exception</code> cal distingir dos grans subtipus d’excepcions:
</p>
<ol>
<li class="level1"><div class="li"> Les excepcions implícites que la mateixa màquina virtual s’encarrega de comprovar durant l’execució d’un programa i que el programador no té l’obligació de capturar i gestionar. Estan agrupades en la classe <code>RuntimeException</code> i normalment estan relacionades amb errors de programació, que podríem categoritzar en els següents:</div>
<ul>
<li class="level2"><div class="li"> <strong>Errors que normalment no es revisen en el codi d’un programa</strong> com, per exemple, rebre una referència <code>null</code> en un mètode, quan el dissenyador del mètode ha suposat que qui la cridi ja haurà passat una referència no nul·la.</div>
</li>
<li class="level2"><div class="li"> <strong>Errors que el programador hauria d’haver revisat en escriure el codi</strong> com, per exemple, sobrepassar la grandària assignada a una taula.<br/>
En realitat seria possible comprovar aquests dos tipus d’errors, però el codi es complicaria excessivament. Hem de pensar en el <em>savoir faire</em> del programador, no?</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Les excepcions explícites (totes les de la classe <code>Exception</code> que no pertanyen a la subclasse <code>RuntimeException</code>) que el programador està obligat a tenir en compte allà on es puguin produir.</div>
</li>
</ol>

<p>
En referència als mecanismes de gestió d’excepcions que proporciona Java, ens cal saber com es gestionen les excepcions, com es generen (<em>llancen</em>, en terminologia Java) excepcions, com es creen noves excepcions per donar suport a una gestió d’excepcions per a les classes que dissenyem i quins efectes té l’herència en la gestió d’excepcions.
</p>

</div>

<h3><a id="captura_i_tractament" >Captura i tractament</a></h3>
<div class="level3">

<p>
El llenguatge Java proporciona el mecanisme “try - catch” per capturar una excepció i definir l’actuació que correspongui. Aquest consisteix a col·locar el codi susceptible de generar (llançar) l’excepció que es vol capturar dins un bloc de codi precedit per la paraula reservada <code>try</code> i seguit de tants blocs de codi <code>catch</code> com excepcions diferents es volen capturar, segons la sintaxi següent:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">try</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1"><span class="sy0">&lt;</span>bloc_de_codi_susceptible_de_llançar_excepció<span class="sy0">&gt;</span>  </div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span> <span class="kw1">catch</span> <span class="br0">&#40;</span>nomClasseExcepció<span class="nu0">1</span> e1<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1"><span class="sy0">&lt;</span>bloc_de_codi_a_executar_si_en_el_bloc_try_s<span class="st0">'ha_produït_una_nomClasseExcepció1&gt;  </span></div></li><li class="li1"><div class="de1"><span class="st0">} catch (nomClasseExcepció2 e2) {</span></div></li><li class="li1"><div class="de1"><span class="st0">&lt;bloc_de_codi_a_executar_si_en_el_bloc_try_s'</span>ha_produït_una_nomClasseExcepció<span class="nu0">2</span><span class="sy0">&gt;</span>  </div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span> ...</div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span> <span class="kw1">finally</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1"><span class="sy0">&lt;</span>bloc_de_codi_a_executar_en_qualsevol_cas<span class="sy0">-</span>s<span class="st0">'hagi_produït_o_no_una_excepció-&gt;  </span></div></li><li class="li1"><div class="de1"><span class="st0">}</span></div></li></ol></pre>

<p>
El bloc <code>try</code> pot anar seguit d’un o més blocs <code>catch</code> cadascun dels quals va precedit d’una declaració (<code>nomClasseExcepció e</code>) que defineix l’excepció (o conjunt d’excepcions corresponents a totes les classes derivades de <code>nomClasseExcepció</code>) a la qual el bloc dóna resposta.
</p>

<p>
En cas de produir-se una excepció en el codi del bloc <code>try</code>, la màquina virtual avorta l’execució del codi del bloc <code>try</code> (no s’acabarà en cap cas) i comença a avaluar els diversos blocs <code>catch</code>, en l’ordre en què estiguin situats, fins a trobar el primer bloc que en la seva classe d’excepcions inclogui l’excepció produïda en el bloc <code>try</code>. Per tant, en cas que entre les excepcions a capturar n’hi hagi d’emparentades per la relació de derivació (unes siguin subclasses d’altres), cal situar en primer lloc els blocs <code>catch</code> per gestionar les excepcions corresponents a les classes que ocupen el lloc més baix en la jerarquia de classes.
</p>

<p>
En cas d’existir un bloc <code>catch</code> que correspongui a l’excepció produïda en el bloc <code>try</code>, la màquina virtual executa el codi del bloc <code>catch</code> (que podria ser buit!) i, en finalitzar, executa el codi del bloc <code>finally</code>, en cas d’existir, per posteriorment prosseguir l’execució del programa.
</p>

<p>
En cas de no existir cap bloc <code>catch</code> que correspongui a l’excepció produïda, la màquina virtual executa el codi del bloc <code>finally</code>, en cas d’existir, i posteriorment avorta el mètode en què s’ha produït l’excepció i propaga l’excepció al mètode immediatament superior (en el punt en què s’havia produït la crida al mètode actual) perquè sigui allí on es capturi l’excepció. Si l’excepció tampoc no és capturada, s’avorta el mètode i es propaga l’excepció al mètode immediatament superior i així successivament fins que l’excepció és gestionada. Si una excepció no es gestiona i arriba al mètode <code>main()</code> i ni tant sols aquest la gestiona, es produeix una finalització anormal de l’execució del programa.
</p>

<p>
El bloc opcional <code>finally</code> s’executa sempre, s’hagi produït una excepció o no i, si s’ha produït, hagi estat capturada o no. Aquest bloc fins i tot s’executa si dins els blocs “try - catch” hi ha alguna sentència <code>continue</code>, <code>break</code> o <code>return</code>. L’única situació en què el bloc <code>finally</code> no s’executa és quan es crida el mètode <code>System.exit()</code> que finalitza l’execució del programa.
</p>

<p>
Com a exemple de conveniència d’utilització del bloc <code>finally</code> podem pensar en un bloc <code>try</code> dins del qual s’obre un fitxer per a lectura i escriptura de dades i, en finalitzar, es vol tancar el fitxer obert. El fitxer obert s’ha de tancar tant si es produeix una excepció com si no es produeix, ja que deixar un fitxer obert pot provocar problemes. Per assegurar el tancament del fitxer, caldria situar les sentències corresponents dins el bloc <code>finally</code>.
</p>

<p>
En la majoria de casos, un bloc <code>try</code> anirà seguit d’un o més blocs <code>catch</code>, però també és possible que no hi hagi cap bloc catch però sí un bloc finally per assegurar l’execució de certes accions. El codi següent il·lustra aquesta situació:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">try</span></div></li><li class="li1"><div class="de1"><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  obrirAixeta<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  regarGespa<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span> <span class="kw1">finally</span> <span class="br0">&#123;</span> </div></li><li class="li1"><div class="de1">  tancarAixeta<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
En el moment en què es produeix la situació excepcional, es crea un objecte de la classe corresponent a l’excepció que conté la informació del context en què s’ha produït el problema. Aquest objecte és apuntat per la referència e indicada en la declaració de l’excepció que gestiona el bloc <code>catch (nomClasseExcepció e)</code> corresponent i conté informació que pot ser d’importància per al programador. Recordem que els mètodes se
güents heretats de la classe <code>Throwable</code> ens permeten obtenir informació del context en què s’ha produït l’excepció a partir de l’objecte generat:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> getMessage<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>   <span class="coMULTI">/* Retorna el missatge o null */</span></div></li><li class="li1"><div class="de1"><span class="kw4">void</span> printStackTrace<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>   <span class="coMULTI">/* Visualitza pel canal d'errors, el context en el que s'ha produït l'error i la cascada de crides des del mètode main() que han portat al punt en el que s'ha produït l'error */</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> toString<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>   <span class="coMULTI">/* Retorna una curta descripció de l'objecte */</span></div></li></ol></pre>

</div>

<h4><a id="exemple_de_llancament_d_excepcio_no_capturada" >Exemple de llançament d&#039;excepció no capturada</a></h4>
<div class="level4">

<p>
L’exemple següent mostra un programa que conté un error de programació, ja que s’intenta efectuar un recorregut per una taula sortint dels límits permesos. Aquesta és una excepció catalogada sota <code>RuntimeException</code> i, si el programador hagués estat atent, no s’hauria d’haver produït mai.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="co1">//Fitxer Excepcio01.java</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> Excepcio01 <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> args<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> t<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">=</span><span class="br0">&#123;</span><span class="st0">&quot;Hola&quot;</span>,<span class="st0">&quot;Adéu&quot;</span>,<span class="st0">&quot;Fins demà&quot;</span><span class="br0">&#125;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i<span class="sy0">&lt;=</span>t.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">         <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Posició &quot;</span> <span class="sy0">+</span> i <span class="sy0">+</span> <span class="st0">&quot; : &quot;</span> <span class="sy0">+</span> t<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;El programa s'ha acabat.&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
Si executem el programa, obtenim:
</p>
<pre class="code">Posició 0 : Hola
Posició 1 : Adéu
Posició 2 : Fins demà
Exception in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: 3
    at Excepcio01.main(Excepcio01.java:12)</pre>

<p>
Veiem que la màquina virtual va executant el programa i efectuant el recorregut per les diverses posicions de la taula fins que intenta accedir a la posició indexada amb el valor 3, inexistent en la taula. En aquest moment la màquina virtual llança l’excepció <code>ArrayIndexOutOfBoundsException</code>, i com que el codi en què s’ha produït l’excepció no es troba dins cap bloc “try - catch”, i ja estem en el main(), s’avorta el programa. Fixeu-vos que el darrer missatge “El programa s’ha acabat” no apareix en la consola perquè no s’arriba a executar la instrucció que el visualitza.
</p>

<p>
La màquina virtual informa, pel canal de sortida d’errors (que per defecte és la consola), de l’error produït i el nom del mètode i número de línia en què s’ha produït l’excepció.
</p>

</div>

<h4><a id="exemple_de_llancament_d_excepcio_capturada" >Exemple de llançament d&#039;excepció capturada</a></h4>
<div class="level4">

<p>
L’exemple següent mostra un programa que conté un error de programació que és capturat. Aquests errors no s’acostumen a capturar, però ens serveix com a exemple senzill de captura d’una excepció. L’exemple anterior ens ha mostrat que el compilador no ens obliga a capturar aquest tipus d’excepció.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="co1">//Fitxer Excepcio02.java</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> Excepcio02 <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> args<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> t<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">=</span><span class="br0">&#123;</span><span class="st0">&quot;Hola&quot;</span>,<span class="st0">&quot;Adéu&quot;</span>,<span class="st0">&quot;Fins demà&quot;</span><span class="br0">&#125;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">try</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">         <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Abans d'executar el for&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">         <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i<span class="sy0">&lt;=</span>t.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">            <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Posició &quot;</span> <span class="sy0">+</span> i <span class="sy0">+</span> <span class="st0">&quot; : &quot;</span> <span class="sy0">+</span> t<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">         <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Després d'executar el for&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="br0">&#125;</span> <span class="kw1">catch</span> <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+arrayindexoutofboundsexception"><span class="kw3">ArrayIndexOutOfBoundsException</span></a> e<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">         <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;El programador estava a la lluna... S'ha sortit de límits!!!&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Final del programa&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>      </div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
L’execució del programa mostra:
</p>
<pre class="code">Abans d&#039;executar el for
Posició 0 : Hola
Posició 1 : Adéu
Posició 2 : Fins demà
El programador estava a la lluna... S&#039;ha sortir de límits!!!
Final del programa</pre>

<p>
Veiem que la màquina virtual va executant el programa i efectuant el recorregut per les diverses posicions de la taula fins que intenta accedir a la posició indexada amb el valor 3, inexistent en la taula. En aquest moment la màquina virtual llança l’excepció <code>ArrayIndexOutOfBoundsException</code> i, com que el codi en què s’ha produït l’excepció es troba dins un bloc “try - catch” que captura l’excepció produïda, la màquina virtual executa el codi del bloc catch i després continua el programa. Fixeu-vos que el darrer missatge “Després d’executar el for” del bloc try no s’executa, ja que l’excepció provoca l’avortament de l’execució del codi del bloc en el moment en què es produeix.
</p>

<p>
La màquina virtual no diu, per enlloc, que s’ha produït una excepció. El programador ho sap per què el flux d’execució ha entrat en el bloc <code>catch</code> que gestiona l’excepció.
</p>

<p>
Si ens informem, en la documentació de Java sobre l’excepció <code>ArrayIndexOutOfBoundsException</code>, veurem que és subclasse de la classe <code>IndexOutOfBoundsException</code>, que al seu torn és subclasse de <code>RuntimeException</code>, i aquesta, de la classe <code>Exception</code>. Per tant, si en el bloc catch haguéssim declarat qualsevol d’aquestes classes, l’excepció també hauria estat capturada. En general només utilitzem superclasses de l’excepció a capturar si no hem de proveir diferents actuacions per a diferents excepcions.
</p>

</div>

<h4><a id="exemple_de_llancament_d_excepcio_amb_intent_erroni_de_captura_i_metode_finally" >Exemple de llançament d&#039;excepció amb intent erroni de captura i mètode finally</a></h4>
<div class="level4">

<p>
L’exemple següent mostra un programa que conté un error de programació amb un intent de captura que falla perquè l’excepció que s’indica en el bloc <code>catch</code> no és adequada per a l’excepció que es produeix. Així mateix incorpora un bloc finally per demostrar que el codi introduït en aquest bloc s’executa en qualsevol cas.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="co1">//Fitxer Excepcio03.java</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> Excepcio03 <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> args<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> t<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">=</span><span class="br0">&#123;</span><span class="st0">&quot;Hola&quot;</span>,<span class="st0">&quot;Adéu&quot;</span>,<span class="st0">&quot;Fins demà&quot;</span><span class="br0">&#125;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">try</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">         <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Abans d'executar el for&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">         <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i<span class="sy0">&lt;=</span>t.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">            <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Posició &quot;</span> <span class="sy0">+</span> i <span class="sy0">+</span> <span class="st0">&quot; : &quot;</span> <span class="sy0">+</span> t<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">         <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Després d'executar el for&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="br0">&#125;</span> <span class="kw1">catch</span> <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+stringindexoutofboundsexception"><span class="kw3">StringIndexOutOfBoundsException</span></a> e<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">         <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;El programador estava a la lluna... S'ha sortir de límits!!!&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="br0">&#125;</span> <span class="kw1">finally</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">         <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Aquest codi s'executa, peti qui peti!!!&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Final del programa&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>      </div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
L’execució d’aquest programa provoca la sortida:
</p>
<pre class="code">Abans d&#039;executar el for
Posició 0 : Hola
Posició 1 : Adéu
Posició 2 : Fins demà
Aquest codi s&#039;executa, peti qui peti!!!
Exception in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: 3
    at Excepcio03.main(Excepcio03.java:16)</pre>

<p>
Veiem que l’excepció que es produeix <code>ArrayIndexOutOfBoundsException</code> no és subclasse de la classe <code>StringIndexOutOfBoundsException</code> i, per tant, el bloc catch existent no captura l’excepció que es produeix. Així mateix podem veure que el bloc finally s’executa abans de la finalització brusca del programa.
</p>

</div>

<h4><a id="exemple_de_llancament_d_excepcio_en_metode_interior_sense_captura_en_cap_metode" >Exemple de llançament d&#039;excepció en mètode interior sense captura en cap mètode</a></h4>
<div class="level4">

<p>
El programa següent mostra un exemple de propagació de l’excepció cap al mètode superior sense cap tipus de tractament, de manera que la propagació arriba al mètode main().
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="co1">//Fitxer Excepcio04.java</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> Excepcio04 <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> met02<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> t<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">=</span><span class="br0">&#123;</span><span class="st0">&quot;Hola&quot;</span>,<span class="st0">&quot;Adéu&quot;</span>,<span class="st0">&quot;Fins demà&quot;</span><span class="br0">&#125;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i<span class="sy0">&lt;=</span>t.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">         <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Posició &quot;</span> <span class="sy0">+</span> i <span class="sy0">+</span> <span class="st0">&quot; : &quot;</span> <span class="sy0">+</span> t<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;El mètode met02 s'ha acabat.&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> met01<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Entrem en el mètode met01 i anem a executar met02&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      met02<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Tornem a estar en met02 després de finalitzar met02&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> args<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Iniciem el programa i anem a executar met01&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      met01<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Tornem a estar en el main després de finalitzar met01&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
L’execució d’aquest programa dóna el resultat:
</p>
<pre class="code">Iniciem el programa i anem a executar met01
Entrem en el mètode met01 i anem a executar met02
Posició 0 : Hola
Posició 1 : Adéu
Posició 2 : Fins demà
Exception in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: 
3
    at Excepcio04.met02(Excepcio04.java:15)
    at Excepcio04.met01(Excepcio04.java:22)
    at Excepcio04.main(Excepcio04.java:29)</pre>

<p>
L’execució del programa demostra que, en el moment en què es produeix l’error dins el mètode <code>met02</code>, es finalitza l’execució d’aquest mètode i l’excepció es passa a la instrucció del mètode <code>met01</code> en què s’havia cridat el mètode met02. Com que l’excepció tampoc no es captura dins <code>met01</code>, aquest mètode també avorta la seva execució i l’excepció es passa a la instrucció del mètode main en què s’havia cridat el mètode <code>met01</code>. En no haver-hi, tampoc, captura, el programa avorta.
</p>

<p>
Fixem-nos en el missatge que proporciona la màquina virtual: informa de l’excepció que s’ha produït, i la cascada de crides, en ordre invers, des del programa principal fins a la instrucció en què s’ha produït l’excepció.
</p>

</div>

<h4><a id="exemple_de_llancament_d_excepcio_capturada_en_metode_superior" >Exemple de llançament d&#039;excepció capturada en mètode superior</a></h4>
<div class="level4">

<p>
El programa següent mostra un exemple de propagació de l’excepció cap al mètode superior en què, abans d’arribar al <code>main()</code>, es troba un mètode que captura l’excepció.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="co1">//Fitxer Excepcio05.java</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> Excepcio05 <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> met03<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> t<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">=</span><span class="br0">&#123;</span><span class="st0">&quot;Hola&quot;</span>,<span class="st0">&quot;Adéu&quot;</span>,<span class="st0">&quot;Fins demà&quot;</span><span class="br0">&#125;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i<span class="sy0">&lt;=</span>t.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">         <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Posició &quot;</span> <span class="sy0">+</span> i <span class="sy0">+</span> <span class="st0">&quot; : &quot;</span> <span class="sy0">+</span> t<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;El mètode met03 s'ha acabat.&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> met02<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Entrem en el mètode met02 i anem a executar met03&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      met03<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Tornem a estar en met02 després de finalitzar met03&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> met01<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">try</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">         <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Entrem en el mètode met01 i anem a executar met02&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">         met02<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">         <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Tornem a estar en met01 després de finalitzar met02&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="br0">&#125;</span> <span class="kw1">catch</span> <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+arrayindexoutofboundsexception"><span class="kw3">ArrayIndexOutOfBoundsException</span></a> e<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">         <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;El programador estava a la lluna... S'ha sortir de límits!!!&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> args<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Iniciem el programa i anem a executar met01&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      met01<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Tornem a estar en el main després de finalitzar met01&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
L’execució d’aquest programa dóna la sortida:
</p>
<pre class="code">Iniciem el programa i anem a executar met01
Entrem en el mètode met01 i anem a executar met02
Entrem en el mètode met02 i anem a executar met03
Posició 0 : Hola
Posició 1 : Adéu
Posició 2 : Fins demà
El programador estava a la lluna... S&#039;ha sortir de límits!!!
Tornem a estar en el main després de finalitzar met01</pre>

<p>
L’execució d’aquest programa ens demostra que la propagació cap als mètodes superiors finalitza quan trobem un mètode que captura l’excepció. En el cas que ens ocupa, l’excepció es produeix en el mètode <code>met03</code> que no captura l’excepció, i aquesta es propaga fins al mètode <code>met02</code> que, en no capturar-la, la propaga cap al mètode met01. En aquest mètode sí que es captura l’excepció i el programa continua la seva execució normal a partir de la instrucció següent a la captura.
</p>

</div>

<h4><a id="exemple_d_obtencio_d_informacio_d_una_excepcio" >Exemple d&#039;obtenció d&#039;informació d&#039;una excepció</a></h4>
<div class="level4">

<p>
Modifiquem el mètode <code>met01()</code> de manera que en el bloc <code>catch</code> que captura l’excepció utilitzem els mètodes que ens permeten obtenir informació sobre l’excepció.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">static</span> <span class="kw4">void</span> met01<span class="br0">&#40;</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">try</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Entrem en el mètode met01 i anem a executar met02&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      met02<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Tornem a estar en met01 després de finalitzar met02&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">catch</span> <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+arrayindexoutofboundsexception"><span class="kw3">ArrayIndexOutOfBoundsException</span></a> e<span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Estem dins el bloc catch que ha capturat l'excepció.&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Informació que dona el mètode getMessage():&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span>e.<span class="me1">getMessage</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Informació que dona el mètode printtStackTrace():&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      e.<span class="me1">printStackTrace</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Informació que dona el mètode toString():&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span>e<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
L’execució del programa ens mostra la informació que proporciona cada mètode:
</p>
<pre class="code">Iniciem el programa i anem a executar met01
Entrem en el mètode met01 i anem a executar met02
Entrem en el mètode met02 i anem a executar met03
Posició 0 : Hola
Posició 1 : Adéu
Posició 2 : Fins demà
Estem dins el bloc catch que ha capturat l&#039;excepció.
Informació que dona el mètode getMessage():           Excepcio06.java
3                                Excepcio05.java
Informació que dona el mètode printStackTrace():
java.lang.ArrayIndexOutOfBoundsException: 3
    at Excepcio06.met03(Excepcio06.java:13)
    at Excepcio06.met02(Excepcio06.java:20)
    at Excepcio06.met01(Excepcio06.java:29)
    at Excepcio06.main(Excepcio06.java:47)
Informació que dona el mètode toString():
java.lang.ArrayIndexOutOfBoundsException: 3
Tornem a estar en el main després de finalitzar met01</pre>

<p>
Veiem que la informació que dóna el mètode printStackTrace() és la mateixa que mostra la màquina virtual pel canal de sortida d’errors en cas d’avortar el programa perquè no s’ha capturat l’excepció.
</p>

</div>

<h3><a id="gestiocaptura_o_delegacio" >Gestió: captura o delegació</a></h3>
<div class="level3">

<p>
El llenguatge Java obliga el programador a gestionar totes les excepcions derivades de la classe Exception exceptuant les de la classe <code>RuntimeException</code>.
</p>

<p>
Per exemple, el compilador no obliga a gestionar l’excepció <code>ArrayIndexOutOfBoundsException</code>, ja que és una excepció de la classe <code>RuntimeException</code> i és generada (llançada) directament per la màquina virtual en el control de l’execució del programa. Però la resta d’excepcions de la classe Exception(que no siguin RuntimeException) no són generades (llançades) per la màquina virtual, sinó per diversos mètodes de diverses classes, proporcionades pel llenguatge Java o dissenyades pel programador.
</p>

<p>
Així, doncs, el programador es troba amb la necessitat de saber quins mètodes de quines classes poden llançar una excepció amb obligatorietat de gestió. Sembla una tasca impossible atesa la gran quantitat de classes que proporciona el llenguatge Java més les classes dissenyades pel mateix equip de programació o per tercers. Això no és cap problema! Tenim dues maneres d’informar-nos sobre les excepcions que pot llançar un mètode:
</p>

<p>
<strong>1) Fent una ullada a la documentació del mètode.</strong> La <span class="figref"><a href="#Figure2"><span>figura</span></a></span> mostra la informació detallada d’un dels mètodes constructors de la classe
<code>FileOutputStream</code> que serveix per crear arxius per escriptura. Hi ha dues informacions relacionades amb la gestió d’excepcions a tenir en compte:
</p>
<ul>
<li class="level1"><div class="li"> En la part final de l’explicació hi ha l’apartat “Throws” que informa sobre les excepcions que pot llançar aquest mètode. N’hi trobem dues: <code>FileNotFoundException</code> i <code>SecurityException</code>. La primera no deriva de la classe <code>RuntimeException</code>, però la segona sí. Això vol dir que el programador que cridi el mètode <code>FileOutputStream</code> haurà de gestionar obligatòriament l’excepció <code>FileNotFoundException</code> i podrà gestionar l’excepció SecurityException o no.</div>
</li>
<li class="level1"><div class="li"> En la part inicial de l’explicació, en què es mostra la capçalera del mètode, veiem que la zona de paràmetres va seguida de la paraula throws seguida de l’excepció <code>FileNotFoundException</code>. Aquesta línia ens diu que qualsevol crida del mètode ha de gestionar aquesta excepció.</div>
</li>
</ul>
<div class="iocfigure"><a name="Figure2"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Informació, en la documentació dels mètodes, relativa a la gestió d’excepcions

</figcaption><img src="../media/ic10m03u3_02.png" alt="" /></figure>
</div>
<p>
<strong>2)</strong> Observant els errors de compilació que es produeixen si no es gestiona una excepció que no sigui <code>RuntimeException</code>.
</p>

<p>
En efecte, el compilador de Java comprova, per totes les crides de mètodes, si totes les excepcions no <code>RuntimeException</code> que el mètode pot llançar són gestionades pel programa. Si no és així, informa d’un error similar al següent:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">unreported exception nomExcepció<span class="sy0">;</span> must be caught or declared to be thrown</div></li></ol></pre>

<p>
El programador es veu obligat a gestionar les excepcions no <code>RuntimeError</code>, i per fer-ho disposa de dos mecanismes, tal com indica el compilador quan detecta una excepció no gestionada: “must be caught or declared to be thrown”:
</p>
<ol>
<li class="level1"><div class="li"> Gestionar l’excepció dins el mètode en què es pugui produir capturant-la amb la utilització de blocs “try - catch”.</div>
</li>
<li class="level1"><div class="li"> Delegar la gestió de l’excepció al mètode superior, fet que s’indica en la capçalera del mètode, declarant les excepcions que no es gestionaran en el mètode amb la clàusula <code>throws</code> i seguint aquesta sintaxi següent:</div>
</li>
</ol>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="br0">&#91;</span>modificadors<span class="br0">&#93;</span> nomMètode <span class="br0">&#40;</span><span class="sy0">&lt;</span>arguments<span class="sy0">&gt;</span><span class="br0">&#41;</span> <span class="br0">&#91;</span><span class="kw1">throws</span> exc1, exc2...<span class="br0">&#93;</span></div></li></ol></pre>

<p>
Fixem-nos que la paraula reservada <code>throws</code> ha d’anar seguida de totes les excepcions (exc1, exc2…) que el mètode hauria de gestionar, però que opta per no gestionar i delega la gestió al mètode superior que el cridi.
</p>

<p>
D’aquesta manera, quan el compilador avalua un mètode que conté la clàusula <code>throws</code> no té en compte les excepcions de gestió obligatòria que es poden produir dins el mètode, no capturades, i que estiguin declarades en la clàusula <code>throws</code>. En contrapartida, el compilador obliga qualsevol mètode que cridi un mètode amb clàusula <code>throws</code> a gestionar les excepcions indicades en la clàusula, capturant-les o delegant-les.
</p>

</div>

<h4><a id="exemple_de_programa_que_no_gestiona_les_excepcions_de_gestio_obligatoria" >Exemple de programa que no gestiona les excepcions de gestió obligatòria</a></h4>
<div class="level4">

<p>
Considerem el següent fitxer .java:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="co1">//Fitxer Excepcio07.java</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">import</span> <span class="co2">java.io.*</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> Excepcio07 <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> args<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+fileoutputstream"><span class="kw3">FileOutputStream</span></a> f <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+fileoutputstream"><span class="kw3">FileOutputStream</span></a> <span class="br0">&#40;</span><span class="st0">&quot;C:<span class="es0">\</span>arxiu.txt&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      f.<span class="me1">close</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
La seva compilació detecta els errors següents:
</p>
<pre class="code">Excepcio07.java:13: unreported exception java.io.FileNotFoundException; must be caught or 
declared to be thrown
   FileOutputStream f = new FileOutputStream (&quot;C:\arxiu.txt&quot;);
       ^
Excepcio07.java:14: unreported exception java.io.IOException; must be caught or declared to be thrown
   f.close();
       ^
2 errors</pre>

<p>
Veiem que tots dos errors s’han produït perquè s’han cridat mètodes, <code>FileOutputStream()</code> i <code>close()</code>, que poden llançar excepcions de gestió obligatòria i no les hem gestionat. També veiem que, en cada cas, el compilador ens informa sobre l’excepció no gestionada.
</p>

</div>

<h4><a id="exemple_de_delegacio_de_gestio_d_excepcions" >Exemple de delegació de gestió d&#039;excepcions</a></h4>
<div class="level4">

<p>
El fitxer .java següent mostra un mètode que en el seu interior crida els mètodes <code>FileOutputStream (String)</code> i <code>close()</code>. El primer obliga la gestió de l’excepció <code>FileNotFoundException</code> i el segon obliga la gestió de l’excepció <code>IOException</code>. S’ha optat per no gestionar les excepcions dins el mètode sinó delegar-les als mètodes que el cridin.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="co1">//Fitxer Excepcio08.java</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">import</span> <span class="co2">java.io.*</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">class</span> Excepcio08</div></li><li class="li1"><div class="de1"><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <span class="kw4">void</span> metodeAmbClausulaThrows <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> nomFitxer<span class="br0">&#41;</span> </div></li><li class="li1"><div class="de1">               <span class="kw1">throws</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+filenotfoundexception"><span class="kw3">FileNotFoundException</span></a>, <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+ioexception"><span class="kw3">IOException</span></a></div></li><li class="li1"><div class="de1">   <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+fileoutputstream"><span class="kw3">FileOutputStream</span></a> f <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+fileoutputstream"><span class="kw3">FileOutputStream</span></a> <span class="br0">&#40;</span>nomFitxer<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      f.<span class="me1">close</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span> <span class="br0">&#40;</span><span class="st0">&quot;El metodeAmbClausulaThrows ha finalitzat.&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
Fixem-nos que com que l’excepció <code>FileNotFoundException</code> és subclasse de l’excepció <code>IOException</code>, hauríem pogut indicar, a la clàusula trhows, únicament l’excepció <code>IOException</code> i el compilador hauria traduït el programa, però, d’aquesta manera, els mètodes que cridin metode <code>AmbClausulaThrows()</code> no podrien veure quina excepció s’ha produït: sigui quina sigui, només podrien capturar-la mitjançant <code>IOException</code>.
</p>

<p>
El fitxer .java següent intenta cridar <code>metodeAmbClausulaThrows()</code> sense gestionar les possibles excepcions.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="co1">//Fitxer Prova01Excepcio08.java</span></div></li><li class="li1"><div class="de1"><span class="kw1">import</span> <span class="co2">java.io.*</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> Prova01Excepcio08 <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> args<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    Excepcio08 exc <span class="sy0">=</span> <span class="kw1">new</span> Excepcio08<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    exc.<span class="me1">metodeAmbClausulaThrows</span><span class="br0">&#40;</span><span class="st0">&quot;c:<span class="es0">\</span>arxiu.txt&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span> <span class="br0">&#40;</span><span class="st0">&quot;Hem tornat del metodeAmbClasulaThrows&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span> <span class="br0">&#40;</span><span class="st0">&quot;El programa ha finalitzat.&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
Veiem l’informe del compilador:
</p>
<pre class="code">Prova01Excepcio08.java:13: unreported exception java.io.FileNotFoundException; must be caught or 
declared to be thrown
exc.metodeAmbClausulaThrows(&quot;c:\arxiu.txt&quot;);
^
1 error</pre>

<p>
Fixem-nos que el compilador només ens informa de la primera excepció indicada a la clàusula <code>throws</code> del <code>metodeAmbClausulaThrows()</code> que no és gestionada.
</p>

<p>
Millorem el codi anterior gestionant l’excepció <code>FileNotFoundException</code>:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="co1">//Fitxer Prova02Excepcio08.java</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">import</span> <span class="co2">java.io.*</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> Prova02Excepcio08 <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> args<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      Excepcio08 exc <span class="sy0">=</span> <span class="kw1">new</span> Excepcio08<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">try</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">         exc.<span class="me1">metodeAmbClausulaThrows</span><span class="br0">&#40;</span><span class="st0">&quot;c:<span class="es0">\</span>arxiu.txt&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">      <span class="br0">&#125;</span> <span class="kw1">catch</span> <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+filenotfoundexception"><span class="kw3">FileNotFoundException</span></a> e<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">         <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;S'ha capturat l'excepció FileNotFoundException&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;El programa ha finalitzat.&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
El programador ja ha gestionat l’excepció <code>FileNotFoundException</code> però s’ha oblidat de l’excepció <code>IOException</code> i l’informe del compilador és clar:
</p>
<pre class="code">Prova02Excepcio08.java:15: unreported exception java.io.IOException; must be caught or declared to 
be thrown
      exc.metodeAmbClausulaThrows(&quot;c:\arxiu.txt&quot;);
        ^
1 error</pre>

<p>
Queda clar, doncs, que la crida del mètode <code>metodeAmbClausulaThrows()</code> obliga a la gestió de les dues excepcions. Vegem la versió de programa següent:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="co1">//Fitxer Prova03Excepcio08.java</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">import</span> <span class="co2">java.io.*</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> Prova03Excepcio08 <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> args<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">if</span> <span class="br0">&#40;</span>args.<span class="me1">length</span><span class="sy0">!=</span><span class="nu0">1</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">         <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;La crida del programa ha d'indicar un paràmetre:&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">         <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;   nomArxiu amb el corresponent camí de directoris.&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">         <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">exit</span><span class="br0">&#40;</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">      Excepcio08 exc <span class="sy0">=</span> <span class="kw1">new</span> Excepcio08<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">try</span> <span class="br0">&#123;</span>  </div></li><li class="li1"><div class="de1">         exc.<span class="me1">metodeAmbClausulaThrows</span><span class="br0">&#40;</span>args<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">      <span class="br0">&#125;</span> <span class="kw1">catch</span> <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+filenotfoundexception"><span class="kw3">FileNotFoundException</span></a> e<span class="br0">&#41;</span> <span class="br0">&#123;</span>  </div></li><li class="li1"><div class="de1">         <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;S'ha capturat l'excepció FileNotFoundException, amb informació:&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">         <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span>e<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="br0">&#125;</span> <span class="kw1">catch</span> <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+ioexception"><span class="kw3">IOException</span></a> e<span class="br0">&#41;</span> <span class="br0">&#123;</span>  </div></li><li class="li1"><div class="de1">         <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;S'ha capturat l'excepció IOException, amb informació:&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">         <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span>e<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;El programa ha finalitzat.&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
Aquesta versió ja no té cap error de compilació i podem procedir a executar-la. Abans, però, de dur a la pràctica l’execució del programa indicant un nom de fitxer (c:\arxiu.txt), comproveu que aquest fitxer no existeix, ja que el programa el substituirà per un nou fitxer buit. En l’exemple d’execució següent, una vegada creat (segona acció) hi donem accés de només lectura (tercera acció) de manera que la quarta acció falla.
</p>
<pre class="code">C:\&gt;java Prova03Excepcio08
La crida del programa ha d&#039;indicar un paràmetre:
   nomArxiu amb el corresponent camí de directoris.

C:\&gt;java Prova03Excepcio08 c:\arxiu.txt
El metodeAmbClausulaThrows ha finalitzat.
El programa ha finalitzat.

C:\&gt;attrib +r c:\arxiu.txt

C:\&gt;java  Prova03Excepcio08 c:\arxiu.txt
S&#039;ha capturat l&#039;excepció FileNotFoundException, amb informació:
java.io.FileNotFoundException: c:\arxiu.txt (Acceso denegado)
El programa ha finalitzat.

C:\&gt;java Prova03Excepcio08 x:\arxiu.txt
S&#039;ha capturat l&#039;excepció FileNotFoundException, amb informació:
java.io.FileNotFoundException: x:\arxiu.txt (El sistema no puede 
hallar la ruta especificada)
El programa ha finalitzat.</pre>

</div>

<h3><a id="llancament" >Llançament</a></h3>
<div class="level3">

<p>
Els mètodes de les classes que proporciona Java llencen excepcions, segons les seves necessitats. De la mateixa manera, els mètodes que desenvolupa un programador poden llançar excepcions. El mecanisme per llançar una excepció des d’un mètode és molt simple i consta de dos passos:
</p>
<ol>
<li class="level1"><div class="li"> Es crea un objecte de la subclasse de la classe <code>Exception</code> que correspongui a l’excepció que es vol llançar (generar).</div>
</li>
<li class="level1"><div class="li"> Es llança l’excepció amb la sentència <code>throw</code> seguida de l’objecte creat.</div>
</li>
</ol>

<p>
És a dir, els dos passos indicats serien:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">nomExcepció e <span class="sy0">=</span> <span class="kw1">new</span> nomExcepció <span class="br0">&#40;</span>...<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">throw</span> e<span class="sy0">;</span></div></li></ol></pre>

<p>
Però també es pot fer en un sol pas:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">throw</span> <span class="kw1">new</span> nomExcepció <span class="br0">&#40;</span>...<span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>

<p>
En el moment en què dins un mètode es llança una excepció que no és <code>RuntimeException</code>, el programador ha de decidir entre:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Gestionar l’excepció dins el mateix mètode</strong>, fet que implicaria que la instrucció on es llança l’excepció hauria d’estar dins un bloc “try-catch” que capturés l’excepció. Això no és gaire usual, però de vegades el programador pot utilitzar aquest recurs per provocar un break en un bloc de codi.</div>
</li>
<li class="level1"><div class="li"> <strong>Delegar la gestió de l’excepció a mètodes superiors</strong>, fet que implica que la capçalera del mètode inclogui la declaració de l’excepció amb la clàusula <code>throws</code>. Aquesta és la manera més usual de treballar, i el llançament fa que el mètode finalitzi i l’excepció es propagui cap al mètode superior en la pila de crides, el qual l’haurà de capturar o delegar.</div>
</li>
</ul>

</div>

<h4><a id="exemple_de_llancament_d_excepcio_de_gestio_obligatoria_dins_un_metode" >Exemple de llançament d&#039;excepció de gestió obligatòria dins un mètode</a></h4>
<div class="level4">

<p>
El fitxer .java següent ens mostra un exemple de mètode que llança una excepció de gestió obligatòria.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="co1">//Fitxer Excepcio09.java</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> Excepcio09 <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   <span class="coMULTI">/* Mètode que avalua si la taula t té n cel·les, provocant, en cas de ser avaluada com a fals,</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">&nbsp;     una excepció d'obligada gestió: Exception */</span></div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> verificaLengthTaula <span class="br0">&#40;</span><span class="kw4">int</span> n, <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> t<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="kw1">throws</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+exception"><span class="kw3">Exception</span></a> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">if</span> <span class="br0">&#40;</span>t.<span class="me1">length</span><span class="sy0">!=</span>n<span class="br0">&#41;</span> <span class="kw1">throw</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+exception"><span class="kw3">Exception</span></a> <span class="br0">&#40;</span><span class="st0">&quot;La taula no té la llargada indicada.&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span> <span class="br0">&#40;</span><span class="st0">&quot;Sortida de verificaLengthTaula.&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> args<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">try</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">        <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Punt 1.&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">        verificaLengthTaula <span class="br0">&#40;</span><span class="nu0">4</span>, <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a><span class="br0">&#91;</span><span class="nu0">4</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">        <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Punt 2.&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">        verificaLengthTaula <span class="br0">&#40;</span><span class="nu0">2</span>, <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a><span class="br0">&#91;</span><span class="nu0">4</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">        <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Punt 3.&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="br0">&#125;</span> <span class="kw1">catch</span> <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+exception"><span class="kw3">Exception</span></a> e<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">         e.<span class="me1">printStackTrace</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span> <span class="br0">&#40;</span><span class="st0">&quot;Programa finalitzat.&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
Fixem-nos que en llançar una excepció <code>Exception</code> estem obligats a declarar l’excepció en la capçalera del mètode (si eliminem la clàusula <code>throws</code> el fitxer no es pot compilar). Així mateix, dins el mètode <code>main()</code> estem obligats a incloure les crides al mètode dins un bloc “try-catch”.
</p>

<p>
L’execució del programa genera la sortida següent:
</p>
<pre class="code">Punt 1.
Sortida de verificaLengthTaula.
Punt 2.
java.lang.Exception: La taula no té la llargada indicada.
    at Excepcio09.verificaLengthTaula(Excepcio09.java:12)
    at Excepcio09.main(Excepcio09.java:23)
Programa finalitzat.</pre>

<p>
Veiem que la segona crida al mètode <code>verificaLengthTaula</code>, amb valor 2 com a primer paràmetre, provoca el llançament de l’excepció <code>Exception</code>, i s’avorta l’execució del mètode (el segon missatge de sortida no apareix) i es propaga l’excepció cap al mètode superior: el <code>main()</code>, que la captura adequadament. Fixem-nos que el missatge Punt 3 ja no apareix.
</p>

</div>

<h4><a id="exemple_de_llancament_d_excepcio_runtimeexception_dins_un_metode" >Exemple de llançament d&#039;excepció RuntimeException dins un mètode</a></h4>
<div class="level4">

<p>
El fitxer .java següent ens mostra un exemple de mètode que llança una excepció <code>RuntimeException</code>. Es tracta del mateix programa que el de l’exemple anterior, però substituint l’excepció ExceptionExcepcio10.java que es llança per una excepció <code>RuntimeException</code>.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="co1">//Fitxer Excepcio10.java</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> Excepcio10 <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   <span class="coMULTI">/* Mètode que avalua si la taula t té n cel·les, provocant, en cas de ser avaluada com a fals,</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">&nbsp;     una excepció RuntimeException */</span></div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> verificaLengthTaula <span class="br0">&#40;</span><span class="kw4">int</span> n, <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> t<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">if</span> <span class="br0">&#40;</span>t.<span class="me1">length</span><span class="sy0">!=</span>n<span class="br0">&#41;</span> <span class="kw1">throw</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+runtimeexception"><span class="kw3">RuntimeException</span></a> <span class="br0">&#40;</span><span class="st0">&quot;La taula no té la llargada indicada.&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span> <span class="br0">&#40;</span><span class="st0">&quot;Sortida de verificaLengthTaula.&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> args<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Punt 1.&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      verificaLengthTaula <span class="br0">&#40;</span><span class="nu0">4</span>, <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a><span class="br0">&#91;</span><span class="nu0">4</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Punt 2.&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      verificaLengthTaula <span class="br0">&#40;</span><span class="nu0">2</span>, <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a><span class="br0">&#91;</span><span class="nu0">4</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Punt 3.&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span> <span class="br0">&#40;</span><span class="st0">&quot;Programa finalitzat.&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
Fixem-nos que en llançar una excepció <code>RuntimeException</code> no estem obligats a declarar l’excepció en la capçalera del mètode. Si decidim, però, afegir la clàusula <code>throws RuntimeException</code> el compilador no es queixa però no té cap efecte en els mètodes superiors. Així mateix, dins el mètode main() no estem obligats a incloure les crides al mètode dins un bloc “try-catch”.
</p>

<p>
L’execució del programa genera la sortida següent:
</p>
<pre class="code">Punt 1.
Sortida de verificaLengthTaula.
Punt 2.
Exception in thread &quot;main&quot; java.lang.RuntimeException: La taula no té la llargada indicada.
    at Excepcio10.verificaLengthTaula(Excepcio10.java:12)
    at Excepcio10.main(Excepcio10.java:21)</pre>

<p>
En aquest cas, l’execució del <code>main()</code> no finalitza correctament, ja que es produeix l’excepció no gestionada.
</p>

</div>

<h3><a id="creacio" >Creació</a></h3>
<div class="level3">

<p>
El programador pot crear les pròpies excepcions a partir de la derivació de la classe <code>Exception</code> o d’alguna de les seves classes derivades. El lògic és heretar de la classe de la jerarquia de classes que s’adapti millor al tipus d’excepció, i cal tenir en compte que, si s’hereta a partir de la classe <code>RuntimeException</code> o d’alguna de les seves subclasses, la nova excepció no serà de gestió obligatòria.
</p>

<p>
En tractar-se de classes, com qualsevol altra classe, pot contenir variables i mètodes nous que s’afegeixen als heretats de la classe de la qual derivi.
</p>

</div>

<h4><a id="exemple_de_classe_excepcio_creada_pel_programador" >Exemple de classe excepció creada pel programador</a></h4>
<div class="level4">
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="co1">//Fitxer Excepcio11.java</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> Excepcio11 <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> args<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">try</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">         provocoExcepcio<span class="br0">&#40;</span><span class="nu0">0</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">         provocoExcepcio<span class="br0">&#40;</span><span class="nu0">10</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="br0">&#125;</span> <span class="kw1">catch</span> <span class="br0">&#40;</span>LaMevaExcepcio e<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">         e.<span class="me1">printStackTrace</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span> <span class="br0">&#40;</span><span class="st0">&quot;El programa finalitza correctament&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> provocoExcepcio<span class="br0">&#40;</span><span class="kw4">int</span> valor<span class="br0">&#41;</span> <span class="kw1">throws</span> LaMevaExcepcio <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span> <span class="br0">&#40;</span><span class="st0">&quot;Valor: &quot;</span> <span class="sy0">+</span> valor<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">if</span> <span class="br0">&#40;</span>valor<span class="sy0">!=</span><span class="nu0">0</span><span class="br0">&#41;</span> <span class="kw1">throw</span> <span class="kw1">new</span> LaMevaExcepcio <span class="br0">&#40;</span>valor<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span> <span class="br0">&#40;</span><span class="st0">&quot;No s'ha provocat l'excepció.&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="co1">//Fitxer LaMevaExcpecio.java</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> LaMevaExcepcio <span class="kw1">extends</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+exception"><span class="kw3">Exception</span></a> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">private</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+integer"><span class="kw3">Integer</span></a> valor<span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> LaMevaExcepcio <span class="br0">&#40;</span><span class="kw4">int</span> xxx<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      valor <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+integer"><span class="kw3">Integer</span></a><span class="br0">&#40;</span>xxx<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> toString <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">return</span> <span class="st0">&quot;Exception LaMevaExcepcio: Error motivat per valor = &quot;</span> <span class="sy0">+</span> valor.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
Observem l’execució del programa:
</p>
<pre class="code">Valor: 0
No s&#039;ha provocat l&#039;excepció.
Valor: 10
Exception LaMevaExcepcio: Error motivat per valor = 10
    at Excepcio11.provocoExcepcio(Excepcio11.java:25)
    at Excepcio11.main(Excepcio11.java:13)
El programa finalitza correctament</pre>

</div>

<h3><a id="efecte_de_l_herencia" >Efecte de l&#039;herència</a></h3>
<div class="level3">

<p>
Si un mètode d’una classe és una sobreescriptura d’un mètode de la classe base que incorpora la clàusula <code>throws</code>, el mètode sobreescrit no ha de llençar necessàriament les mateixes excepcions que el mètode de la classe base: pot llançar les mateixes excepcions o menys, però no més excepcions que el mètode sobreescrit.
</p>

<p>
Aquesta restricció existeix per permetre que els mètodes que treballen amb referències a una classe base també puguin treballar amb referències que en realitat apuntin a objectes de classes derivades mantenint la gestió d’excepcions.
</p>

</div>

<h2><a id="col_leccions" >Col·leccions</a></h2>
<div class="level2">

<p>
Una col·lecció és una agrupació d’elements (objectes) en la qual s’hi han de poder executar diverses accions: afegir, recórrer, cercar, extreure… Tradicionalment, les estructures pensades per a l’organització de la informació s’han classificat segons el tipus d’accés que proporcionen. El llenguatge Java, conscient de la importància d’aquesta organització, proporciona un conjunt complet d’estructures que abraça les diverses possibilitats d’organització de la informació, i constitueix el conegut <em>framework</em> de col·leccions (<em>Java collections framework</em> o JCF).
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
El <strong><em>framework</em> de col·leccions</strong> de Java és una arquitectura unificada per representar i gestionar col·leccions, independent dels detalls de la implementació.
</p>
</div></div>
<p>
El <em>framework</em> de col·leccions de Java, que neix en la versió 1.2 de Java, i en la versió 1.5 incorpora els tipus genèrics, està format per tres tipologies de components:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Interfícies.</strong> Tipus abstractes de dades (TAD) que defineixen la funcionalitat de les col·leccions i funcionalitats de suport.</div>
</li>
<li class="level1"><div class="li"> <strong>Implementacions.</strong> Classes que implementen les interfícies de les col·leccions, de manera que una interfície pot tenir més d’una implementació (classe que la implementi).</div>
</li>
<li class="level1"><div class="li"> <strong>Algorismes.</strong> Mètodes que efectuen càlculs (cerques, ordenacions…) en els objectes de les implementacions.</div>
</li>
</ul>

</div>

<h3><a id="classes_generiques" >Classes genèriques</a></h3>
<div class="level3">

<p>
Les Col.leccions que proporciona el Java pertanyen a un tipus de classes especials, anomenades classes genèriques. Aquestes proporcionen a solució a un problema molt important que val la pena veure amb detall abans d’aprofundir-hi.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
Les <strong>classes genèriques</strong> són classes que encapsulen dades i mètodes basats en tipus de dades genèrics i serveixen de plantilla per generar classes a partir de concretar els tipus de dades genèrics.
</p>
</div></div>
<p>
La utilització més habitual de les classes genèriques es dóna en el disseny de classes pensades per a la gestió de conjunts de dades (llistes, piles, cues, arbres…) en els quals, si no existís aquest concepte, hauríem de dissenyar tantes classes com diferents tipus de dades s’haguessin de gestionar. Així, per exemple, podríem tenir:
</p>
<pre class="code">class llistaInteger.../* Gestió de llista d&#039;objectes Integer
class llistaPersona.../* Gestió de llista d&#039;objectes Persona
class llistaDate.../* Gestió de llista d&#039;objectes Date</pre>

<p>
Fixem-nos que les tres llistes es diferencien en el tipus de dada que emmagatzemen (<code>Integer</code>, <code>Persona</code>, <code>Date</code>) però els mètodes a implementar en les tres llistes són idèntics (<code>afegirPerInici</code>, <code>afegirPelFinal</code>, <code>recorregut</code>, <code>extreurePrimerElement</code>, <code>extreureDarrerElement</code>, etc) i, si no disposéssim de les classes genèriques, hauríem d’implementar tres llistes diferents amb la repetició consegüent de codi idèntic.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Classes parametritzades</p>
<p>
Les classes genèriques també es coneixen com a <em>classes parametritzades</em> o <em>classes plantilla</em> i el llenguatge Java les incorpora des de la versió 1.5(Java 5).
</p>
</div></div>
<p>
La sintaxi per definir una classe genèrica en Java és:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="br0">&#91;</span><span class="kw1">public</span><span class="br0">&#93;</span> <span class="br0">&#91;</span><span class="kw1">final</span><span class="sy0">|</span><span class="kw1">abstract</span><span class="br0">&#93;</span> <span class="kw1">class</span> NomClasse <span class="sy0">&lt;</span>T1, T2...<span class="sy0">&gt;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">...                        </div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
<code>T1</code>, <code>T2</code>… fan referència als tipus de dades genèrics gestionats pels mètodes de la classe genèrica, i s’han d’explicitar en la declaració de les referències a la classe genèrica i en la creació dels objectes de la classe genèrica, emprant la sintaxi següent:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">NomClasse obj<span class="sy0">&lt;</span>nomTipusConcret1,nomTipusConcret2...<span class="sy0">&gt;;</span></div></li><li class="li1"><div class="de1">obj <span class="sy0">=</span> <span class="kw1">new</span> NomClasse<span class="sy0">&lt;</span>nomTipusConcret1,nomTipusConcret2...<span class="sy0">&gt;</span><span class="br0">&#40;</span>...<span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>

<p>
En la utilització de tipus genèrics és important, per a la seguretat del codi desenvolupat, indicar els tipus específics corresponents als tipus genèrics en la creació dels objectes. És a dir, tot i tractar-se d’una classe genèrica, podríem crear objectes sense indicar els tipus específics corresponents als tipus genèrics:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">NomClasse obj <span class="sy0">=</span> <span class="kw1">new</span> NomClasse <span class="br0">&#40;</span>...<span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>

</div>

<h4><a id="exemple_de_definicio_de_classe_generica_amb_diversos_tipus_parametritzats" >Exemple de definició de classe genèrica amb diversos tipus parametritzats</a></h4>
<div class="level4">

<p>
La classe següent és un exemple de classe genèrica amb dos tipus parametritzats, i en el mètode <code>main()</code> es veu que es pot cridar amb diferents tipus de dades. La classe que es presenta no té altra utilitat que servir d’exemple en l’inici de l’aprenentatge de les classes genèriques.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">import</span> <span class="co2">java.util.Date</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">import</span> <span class="co2">java.awt.Color</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> ExempleClasseGenerica <span class="sy0">&lt;</span>T1, T2<span class="sy0">&gt;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">private</span> T1 x1<span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">private</span> T2 x2<span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> ExempleClasseGenerica <span class="br0">&#40;</span>T1 p1, T2 p2<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      x1<span class="sy0">=</span>p1<span class="sy0">;</span></div></li><li class="li1"><div class="de1">      x2<span class="sy0">=</span>p2<span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> toString<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">return</span> x1.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">+</span><span class="st0">&quot; - &quot;</span> <span class="sy0">+</span>x2.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> T1 getX1<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> x1<span class="sy0">;</span> <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> T2 getX2<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> x2<span class="sy0">;</span> <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> args<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      ExempleClasseGenerica <span class="sy0">&lt;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+integer"><span class="kw3">Integer</span></a>, Float<span class="sy0">&gt;</span> obj1 <span class="sy0">=</span> </div></li><li class="li1"><div class="de1">         <span class="kw1">new</span> ExempleClasseGenerica <span class="sy0">&lt;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+integer"><span class="kw3">Integer</span></a>,Float<span class="sy0">&gt;</span> <span class="br0">&#40;</span><span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+integer"><span class="kw3">Integer</span></a><span class="br0">&#40;</span><span class="nu0">20</span><span class="br0">&#41;</span>, <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+float"><span class="kw3">Float</span></a><span class="br0">&#40;</span><span class="nu0">42.45</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      ExempleClasseGenerica <span class="sy0">&lt;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+double"><span class="kw3">Double</span></a>, Double<span class="sy0">&gt;</span> obj2 <span class="sy0">=</span> </div></li><li class="li1"><div class="de1">         <span class="kw1">new</span> ExempleClasseGenerica <span class="sy0">&lt;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+double"><span class="kw3">Double</span></a>,Double<span class="sy0">&gt;</span> <span class="br0">&#40;</span><span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+double"><span class="kw3">Double</span></a><span class="br0">&#40;</span><span class="nu0">4.32</span><span class="br0">&#41;</span>, <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+double"><span class="kw3">Double</span></a><span class="br0">&#40;</span><span class="nu0">7.45</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      ExempleClasseGenerica obj3 <span class="sy0">=</span> <span class="kw1">new</span> ExempleClasseGenerica <span class="br0">&#40;</span><span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+integer"><span class="kw3">Integer</span></a><span class="br0">&#40;</span><span class="nu0">22</span><span class="br0">&#41;</span>, <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+date"><span class="kw3">Date</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      ExempleClasseGenerica obj4 <span class="sy0">=</span> <span class="kw1">new</span> ExempleClasseGenerica <span class="br0">&#40;</span><span class="nu0">50</span>, <span class="st0">'a'</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span>obj1.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span>obj2.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span>obj3.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span>obj4.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
Fixem-nos que la classe genèrica no incorpora, en la definició, cap crida a cap operació específica dels tipus T1 i T2. Si no, no hauríem pogut compilar el fitxer font.
</p>

<p>
Fixem-nos, també, en el següent:
</p>
<ul>
<li class="level1"><div class="li"> La referència “obj1” declarada com a “ExempleClasseGenerica &lt;Integer, Float&gt;” recull l’objecte creat en cridar el constructor de la classe genèrica passant-li, per paràmetres, una referència a un objecte <code>Integer</code>, que recull l’argument “T1”, i una referència a un objecte <code>Float</code>, que recull l’argument T2. Aquesta crida provoca la creació de la classe <code>ExempleClasseGenerica &lt;Integer, Float&gt;</code> en temps d’execució.</div>
</li>
<li class="level1"><div class="li"> La referència “obj2” declarada com a “ExempleClasseGenerica &lt;Double, Double&gt;” recull l’objecte creat en cridar el constructor de la classe genèrica passant-li, per paràmetres, dues referències a objectes Double, que recullen els arguments “T1” i “T2”. Aquesta crida provoca la creació de la classe E<code>xempleClasseGenerica &lt;Double, Double&gt;</code> en temps d’execució.</div>
</li>
<li class="level1"><div class="li"> La referència “obj3” declarada sense especificar els tipus corresponents a “T1” i “T2” recull l’objecte creat en cridar el constructor de la classe genèrica passant-li, per paràmetres, una referència a un objecte <code>Integer</code>, que recull l’argument “T1”, i una referència a un objecte <code>Date</code>, que recull l’argument “T2”. Aquesta crida provoca la creació, per la màquina virtual, de la classe <code>ExempleClasseGenerica &lt;Integer, Date&gt;</code> en temps d’execució.</div>
</li>
<li class="level1"><div class="li"> La referència “obj4” declarada sense especificar els tipus corresponents a “T1” i “T2” recull l’objecte creat en cridar el constructor de la classe genèrica passant-li, per paràmetres, una dada del tipus primitiu <code>int</code> que recull l’argument “T1” com si fos un <code>Integer</code>, i una referència a un objecte <code>String</code>, que recull l’argument “T”2. Aquesta crida provoca la creació, per la màquina virtual, de la classe <code>ExempleClasseGenerica &lt;Integer, String&gt;</code> en temps d’execució.</div>
</li>
</ul>

<p>
Veiem que la compilació d’aquest fitxer ens dóna un avís:
</p>
<pre class="code">Note: ExempleClasseGenerica.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.</pre>

<p>
El compilador ens està avisant de que estem cridant la classe <code>ExempleClasseGenerica</code> sense indicar el tipus parametritzat, i té raó, ja que en les creacions dels objectes apuntats per “obj3” i “obj4” no s’han explicitat els tipus parametritzats “T1” i “T2”. L’avís ens diu que efectuant la compilació amb el paràmetre <code>-Xlint:unchecked</code> obtindrem més detalls:
</p>
<pre class="code">ExempleClasseGenerica.java:34: warning: [unchecked] unchecked call to ExempleCla
sseGenerica(T1,T2) as a member of the raw type ExempleClasseGenerica
    ExempleClasseGenerica obj3 = new ExempleClasseGenerica (new Integer(22), n
ew Date());
        ^
ExempleClasseGenerica.java:35: warning: [unchecked] unchecked call to ExempleCla
sseGenerica(T1,T2) as a member of the raw type ExempleClasseGenerica
    ExempleClasseGenerica obj4 = new ExempleClasseGenerica (50, &quot;Hola&quot;);
        ^
2 warnings</pre>

<p>
L’execució, però, es duu a terme sense problemes:
</p>
<pre class="code">20 - 42.45
4.32 - 7.45
22 - Mon Mar 30 05:36:59 CEST 2009
50 - Hola</pre>

<p>
Tot i que el nostre exemple s’ha executat sense problemes, ara suposem que sobre el membre x2 de l’objecte apuntat per obj3, que sabem que és del tipus Date, volem conèixer el dia del mes de la data corresponent (que, segons el resultat vist en la darrera execució, hauria de ser el valor 30). Per aconseguir-ho, hauríem de fer una cosa així:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span>obj3.<span class="me1">getX2</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">getDate</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>

<p>
La compilació del fitxer amb aquesta instrucció afegida al final, provoca l’error:
</p>
<pre class="code">ExempleClasseGenerica.java:40: cannot find symbol
symbol  : method getDate()
location: class java.lang.Object
   System.out.println(obj3.getX2().getDate());
        ^
Note: ExempleClasseGenerica.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
1 error</pre>

<p>
És clar que el programador sap que l’objecte retornat per “obj3.getX2()” és del tipus <code>Date</code>, però el compilador no ho sap perquè no li hem dit en la creació de l’objecte “obj3” i, per tant, per obtenir la compilació, haurem d’explicitar una conversió <em>cast</em>:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="br0">&#40;</span><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+date"><span class="kw3">Date</span></a><span class="br0">&#41;</span>obj3.<span class="me1">getX2</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>.<span class="me1">getDate</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>

<p>
Però, si el programador es confon i efectua una conversió <em>cast</em> errònia com la següent:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="br0">&#40;</span><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+color"><span class="kw3">Color</span></a><span class="br0">&#41;</span>obj3.<span class="me1">getX2</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>.<span class="me1">getAlpha</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>

<p>
El compilador s’empassa sense cap problema aquesta conversió <em>cast</em>, ja que no té cap mecanisme, en temps de compilació, per saber si el membre “x2” de d’“obj3” és de la classe <code>Color</code>. L’error es produirà en temps d’execució.
</p>

<p>
La necessitat de la conversió <em>cast</em> i els possibles errors de conversió desapareixen si en la creació de l’objecte s’indica el tipus específic corresponent a cada tipus genèric:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">ExempleClasseGenerica <span class="sy0">&lt;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+integer"><span class="kw3">Integer</span></a>, Date<span class="sy0">&gt;</span> obj3 <span class="sy0">=</span> </div></li><li class="li1"><div class="de1">   <span class="kw1">new</span> ExempleClasseGenerica <span class="sy0">&lt;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+integer"><span class="kw3">Integer</span></a>, Date<span class="sy0">&gt;</span> <span class="br0">&#40;</span><span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+integer"><span class="kw3">Integer</span></a><span class="br0">&#40;</span><span class="nu0">22</span><span class="br0">&#41;</span>, <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+date"><span class="kw3">Date</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>

<p>
Havent creat l’objecte “obj3” com indica la darrera instrucció, no és necessària la conversió <em>cast</em> per aplicar el mètode “getDate()” directament sobre “x2.obj3”. Però és que, a més, si el programador intenta fer una conversió <em>cast</em> similar a ”(Color)obj3.getX2()”, el compilador detecta la incoherència de la conversió i no compila el fitxer.
</p>

<p>
Per tant, per a la seguretat del codi desenvolupat, és important indicar els tipus específics corresponents als tipus genèrics en la creació dels objectes.
</p>

<p>
Abans de l’aparició dels tipus genèrics (Java 5) s’utilitzava la classe <code>Object</code> com a comodí per simular els tipus genèrics, però això provocava els problemes següents:
</p>
<ul>
<li class="level1"><div class="li"> En dissenyar estructures contenidores d’objectes (piles, cues, llistes, arbres…) no hi havia una manera senzilla de delimitar els tipus dels objectes a inserir i, si no s’anava amb compte, en una mateixa estructura contenidora hi podia haver objectes dispars.</div>
</li>
<li class="level1"><div class="li"> Sovint calia fer conversions <em>cast</em> de la classe Object a la classe corresponent, amb perill d’equivocacions per part del programador que no es detecten fins a l’execució del programa, com s’ha comprovat al final del darrer exemple.</div>
</li>
</ul>

<p>
De vegades és necessari implementar mètodes que admetin, per paràmetres, objectes de classes genèriques. La sintaxi a utilitzar és:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="sy0">&lt;</span>modificadorAccés<span class="sy0">&gt;</span> <span class="br0">&#91;</span><span class="kw1">final</span><span class="sy0">|</span><span class="kw1">abstract</span><span class="br0">&#93;</span> nomMètode <span class="br0">&#40;</span> NomClasse<span class="sy0">&lt;?</span>,<span class="sy0">?</span>...<span class="sy0">&gt;</span> <span class="br0">&#91;</span>,...<span class="br0">&#93;</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#123;</span>...<span class="br0">&#125;</span></div></li></ol></pre>

</div>

<h4><a id="exemple_de_classe_dissenyada_amb_tipus_generics" >Exemple de classe dissenyada amb tipus genèrics</a></h4>
<div class="level4">

<p>
L’exemple següent mostra el disseny d’un mètode que pot rebre, per paràmetre, objectes de la classe genèrica dissenyada en l’exemple anterior.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">import</span> <span class="co2">java.util.Date</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> MetodeAmbClasseGenerica <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> metode <span class="br0">&#40;</span>ExempleClasseGenerica<span class="sy0">&lt;?</span>,<span class="sy0">?&gt;</span> obj<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span>obj<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> args<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      ExempleClasseGenerica <span class="sy0">&lt;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+integer"><span class="kw3">Integer</span></a>, Float<span class="sy0">&gt;</span> obj1 <span class="sy0">=</span> </div></li><li class="li1"><div class="de1">         <span class="kw1">new</span> ExempleClasseGenerica <span class="sy0">&lt;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+integer"><span class="kw3">Integer</span></a>,Float<span class="sy0">&gt;</span> <span class="br0">&#40;</span><span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+integer"><span class="kw3">Integer</span></a><span class="br0">&#40;</span><span class="nu0">20</span><span class="br0">&#41;</span>, <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+float"><span class="kw3">Float</span></a><span class="br0">&#40;</span><span class="nu0">42.45</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      ExempleClasseGenerica <span class="sy0">&lt;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+double"><span class="kw3">Double</span></a>, Date<span class="sy0">&gt;</span> obj2 <span class="sy0">=</span> </div></li><li class="li1"><div class="de1">         <span class="kw1">new</span> ExempleClasseGenerica <span class="sy0">&lt;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+double"><span class="kw3">Double</span></a>,Date<span class="sy0">&gt;</span> <span class="br0">&#40;</span><span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+double"><span class="kw3">Double</span></a><span class="br0">&#40;</span><span class="nu0">4.32</span><span class="br0">&#41;</span>, <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+date"><span class="kw3">Date</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      metode<span class="br0">&#40;</span>obj1<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      metode<span class="br0">&#40;</span>obj2<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
L’execució del mètode “main()” dóna el resultat:
</p>
<pre class="code">20 - 42.45
4.32 - Mon Mar 30 07:12:00 CEST 2009</pre>

<p>
Donada una classe genèrica, podem restringir els tipus específics amb els que es creïn els seus objectes? La resposta és afirmativa: es pot declarar un tipus genèric de manera que en instanciar la classe genèrica s’hagi de proporcionar una classe que sigui subclasse d’una classe <code>X</code>. La sintaxi és:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="br0">&#91;</span><span class="kw1">public</span><span class="br0">&#93;</span> <span class="br0">&#91;</span><span class="kw1">final</span><span class="sy0">|</span><span class="kw1">abstract</span><span class="br0">&#93;</span> NomClasse <span class="sy0">&lt;</span>T1 <span class="kw1">extends</span> X, T2 <span class="kw1">extends</span> Y...<span class="sy0">&gt;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
Veiem que s’utilitza la paraula reservada <code>extends</code>.
</p>

</div>

<h4><a id="exemple_complet_de_classes_generiques" >Exemple complet de classes genèriques</a></h4>
<div class="level4">

<p>
Vegem un exemple de classe genèrica amb tipus genèric restringit i amb mètodes que reben, per paràmetre, objectes de la classe genèrica.Es tracta del disseny d’una classe que gestiona taules de valors numèrics i proporciona mètodes per calcular la mitjana dels valors emmagatzemats en la taula, la dimensió de les taules i per comparar les mitjanes i les dimensions de dues taules de valors numèrics.
</p>

<p>
La taula ha de ser genèrica perquè pugui gestionar els diversos tipus de valors numèrics possibles (<code>Integer</code>, <code>Double</code>, <code>Float</code>…), i la volem restringir perquè les taules només siguin de valors numèrics. Els mètodes de comparació necessiten rebre, com a paràmetre, un objecte de classe genèrica.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> TaulaValorsNumerics <span class="sy0">&lt;</span>T <span class="kw1">extends</span> Number<span class="sy0">&gt;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">private</span> T t<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> TaulaValorsNumerics <span class="br0">&#40;</span>T<span class="br0">&#91;</span><span class="br0">&#93;</span> obj<span class="br0">&#41;</span> <span class="br0">&#123;</span> t <span class="sy0">=</span> obj<span class="sy0">;</span> <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw4">double</span> mitja <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <span class="kw4">double</span> suma<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="kw4">int</span> valorsNoNuls<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i<span class="sy0">&lt;</span>t.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> </div></li><li class="li1"><div class="de1">    <span class="kw1">if</span> <span class="br0">&#40;</span>t<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="sy0">!=</span><span class="kw2">null</span><span class="br0">&#41;</span> </div></li><li class="li1"><div class="de1">    <span class="br0">&#123;</span>suma <span class="sy0">=</span> suma <span class="sy0">+</span> t<span class="br0">&#91;</span>i<span class="br0">&#93;</span>.<span class="me1">doubleValue</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">     valorsNoNuls<span class="sy0">++;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   <span class="kw1">if</span> <span class="br0">&#40;</span>valorsNoNuls<span class="sy0">==</span><span class="nu0">0</span><span class="br0">&#41;</span> <span class="kw1">return</span> <span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">else</span> <span class="kw1">return</span> suma <span class="sy0">/</span> valorsNoNuls<span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw4">int</span> dimensio <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> t.<span class="me1">length</span><span class="sy0">;</span> <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw4">boolean</span> mateixaMitja <span class="br0">&#40;</span>TaulaValorsNumerics <span class="sy0">&lt;?&gt;</span> obj<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">return</span> mitja<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">==</span> obj.<span class="me1">mitja</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw4">boolean</span> mateixaDimensio <span class="br0">&#40;</span>TaulaValorsNumerics <span class="sy0">&lt;?&gt;</span> obj<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">return</span> dimensio<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">==</span> obj.<span class="me1">dimensio</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> toString<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> s<span class="sy0">=</span><span class="st0">&quot;{&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i<span class="sy0">&lt;</span>t.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">if</span> <span class="br0">&#40;</span>s.<span class="me1">equals</span><span class="br0">&#40;</span><span class="st0">&quot;{&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> s <span class="sy0">=</span> s <span class="sy0">+</span> t<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">else</span> s <span class="sy0">=</span> s <span class="sy0">+</span> <span class="st0">&quot;, &quot;</span> <span class="sy0">+</span> t<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   s <span class="sy0">=</span> s <span class="sy0">+</span> <span class="st0">&quot;}&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">return</span> s<span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> args<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+integer"><span class="kw3">Integer</span></a> ti<span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="br0">&#123;</span><span class="nu0">1</span>, <span class="nu0">2</span>, <span class="kw2">null</span>, <span class="nu0">3</span>, <span class="nu0">4</span>, <span class="kw2">null</span>, <span class="nu0">5</span><span class="br0">&#125;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+double"><span class="kw3">Double</span></a> td<span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="br0">&#123;</span><span class="nu0">1.1</span>, <span class="nu0">2.2</span>, <span class="nu0">3.3</span>, <span class="kw2">null</span>, <span class="nu0">4.4</span>, <span class="nu0">5.5</span>, <span class="nu0">6.6</span><span class="br0">&#125;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> ts<span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="br0">&#123;</span> <span class="st0">&quot;Cad1&quot;</span>, <span class="st0">&quot;Cad2&quot;</span> <span class="br0">&#125;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   TaulaValorsNumerics<span class="sy0">&lt;</span>Integer<span class="sy0">&gt;</span> tvn1<span class="sy0">=</span> <span class="kw1">new</span> TaulaValorsNumerics<span class="sy0">&lt;</span>Integer<span class="sy0">&gt;</span> <span class="br0">&#40;</span>ti<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   TaulaValorsNumerics<span class="sy0">&lt;</span>Double<span class="sy0">&gt;</span> tvn2<span class="sy0">=</span> <span class="kw1">new</span> TaulaValorsNumerics<span class="sy0">&lt;</span>Double<span class="sy0">&gt;</span> <span class="br0">&#40;</span>td<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">// Les següents instruccions comentades no són compilables, per ser tipus genèric T restringit</span></div></li><li class="li1"><div class="de1"><span class="co1">// TaulaValorsNumerics tvn3 = new TaulaValorsNumerics (ts);</span></div></li><li class="li1"><div class="de1"><span class="co1">// TaulaValorsNumerics&lt;String&gt; tvn3 = new TaulaValorsNumerics&lt;String&gt; (ts);          </span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;tvn1: &quot;</span><span class="sy0">+</span>tvn1<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Mitja: &quot;</span><span class="sy0">+</span>tvn1.<span class="me1">mitja</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Dimensió: &quot;</span><span class="sy0">+</span>tvn1.<span class="me1">dimensio</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;tvn2: &quot;</span><span class="sy0">+</span>tvn2<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Mitja: &quot;</span><span class="sy0">+</span>tvn2.<span class="me1">mitja</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Dimensió: &quot;</span><span class="sy0">+</span>tvn2.<span class="me1">dimensio</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;tvn1 i tvn2 tenen la mateixa mitja?&quot;</span> <span class="sy0">+</span> tvn1.<span class="me1">mateixaMitja</span><span class="br0">&#40;</span>tvn2<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;tvn1 i tvn2 tenen la mateixa dimensió?&quot;</span> <span class="sy0">+</span> tvn1.<span class="me1">mateixaDimensio</span><span class="br0">&#40;</span>tvn2<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
L’execució del mètode “main()” mostra:
</p>
<pre class="code">tvn1: {1, 2, null, 3, 4, null, 5}
   Mitja: 3.0
   Dimensió: 7
tvn2: {1.1, 2.2, 3.3, null, 4.4, 5.5, 6.6}
   Mitja: 3.85
   Dimensió: 7
tvn1 i tvn2 tenen la mateixa mitja?false
tvn1 i tvn2 tenen la mateixa dimensió?true</pre>

</div>

<h3><a id="interficies" >Interfícies</a></h3>
<div class="level3">

<p>
Les interfícies són tipus abstractes de dades (TAD) que defineixen la funcionalitat de les col·leccions i funcionalitats de suport. En el <em>framework</em> de col·leccions cal distingir-ne dos tipus:
</p>
<ul>
<li class="level1"><div class="li"> Interfícies que constitueixen el cor del <em>framework</em> i defineixen els diferents tipus de col·leccions: <code>Collection</code>, <code>Set</code>, <code>List</code>, <code>Queue</code>, <code>SortedSet</code>, <code>Map</code> i <code>SortedMap</code>, conegudes normalment com <em>interfícies del JCF</em>. Aquest conjunt d’interfícies, al seu torn, està organitzat en dues jerarquies: una, que agrupa les col·leccions amb accés per posició (seqüencial i directe) i que té la interfície Collection per arrel, i l’altra, que defineix les col·leccions amb accés per clau i que té la interfície Map per arrel.</div>
</li>
<li class="level1"><div class="li"> Interfícies de suport: <code>Iterator</code>, <code>ListIterator</code>, <code>Comparable</code> i <code>Comparator</code>.</div>
</li>
</ul>

<p>
La <span class="figref"><a href="#Figure3"><span>figura</span></a></span> mostra les interfícies del <em>framework</em> de col·leccions de Java amb la jerarquia que hi ha entre elles.
</p>
<div class="iocfigure"><a name="Figure3"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Interfícies del framework de col·leccions de Java

</figcaption><img src="../media/ic10m03u3_03.png" alt="" /></figure>
</div>
<p>
L’explicació detallada de cadascuna de les interfícies del <em>framework</em> de col·leccions cal cercar-la en la documentació del llenguatge Java.
</p>

</div>

<h4><a id="interficie_collection" >Interfície &#039;&#039;Collection&#039;&#039;</a></h4>
<div class="level4">

<p>
La interfície <code>Collection&lt;E&gt;</code> és la interfície pare de la jerarquia de col·leccions amb accés per posició (seqüencial i directe) i comprèn col·leccions de diversos tipus:
</p>
<ul>
<li class="level1"><div class="li"> Col·leccions que permeten elements duplicats i col·leccions que no els permeten.</div>
</li>
<li class="level1"><div class="li"> Col·leccions ordenades i col·leccions desordenades.</div>
</li>
<li class="level1"><div class="li"> Col·leccions que permeten el valor <code>null</code> i col·leccions que no el permeten.</div>
</li>
</ul>

<p>
La seva definició, extreta de la documentació de Java, és força autoexplicativa atesos els noms que utilitzen:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">interface</span> Collection<span class="sy0">&lt;</span>E<span class="sy0">&gt;</span> <span class="kw1">extends</span> Iterable<span class="sy0">&lt;</span>E<span class="sy0">&gt;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1"><span class="co1">// Basic operations</span></div></li><li class="li1"><div class="de1"><span class="kw4">int</span> size<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw4">boolean</span> isEmpty<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw4">boolean</span> contains<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+object"><span class="kw3">Object</span></a> element<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw4">boolean</span> add<span class="br0">&#40;</span>E element<span class="br0">&#41;</span><span class="sy0">;</span><span class="co1">//optional</span></div></li><li class="li1"><div class="de1"><span class="kw4">boolean</span> remove<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+object"><span class="kw3">Object</span></a> element<span class="br0">&#41;</span><span class="sy0">;</span><span class="co1">//optional</span></div></li><li class="li1"><div class="de1">Iterator<span class="sy0">&lt;</span>E<span class="sy0">&gt;</span> iterator<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">// Bulk operations</span></div></li><li class="li1"><div class="de1"><span class="kw4">boolean</span> containsAll<span class="br0">&#40;</span>Collection<span class="sy0">&lt;?&gt;</span> c<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw4">boolean</span> addAll<span class="br0">&#40;</span>Collection<span class="sy0">&lt;?</span> <span class="kw1">extends</span> E<span class="sy0">&gt;</span> c<span class="br0">&#41;</span><span class="sy0">;</span><span class="co1">//optional</span></div></li><li class="li1"><div class="de1"><span class="kw4">boolean</span> removeAll<span class="br0">&#40;</span>Collection<span class="sy0">&lt;?&gt;</span> c<span class="br0">&#41;</span><span class="sy0">;</span><span class="co1">//optional</span></div></li><li class="li1"><div class="de1"><span class="kw4">boolean</span> retainAll<span class="br0">&#40;</span>Collection<span class="sy0">&lt;?&gt;</span> c<span class="br0">&#41;</span><span class="sy0">;</span><span class="co1">//optional</span></div></li><li class="li1"><div class="de1"><span class="kw4">void</span> clear<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">//optional</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">// Array operations</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+object"><span class="kw3">Object</span></a><span class="br0">&#91;</span><span class="br0">&#93;</span> toArray<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="sy0">&lt;</span>T<span class="sy0">&gt;</span> T<span class="br0">&#91;</span><span class="br0">&#93;</span> toArray<span class="br0">&#40;</span>T<span class="br0">&#91;</span><span class="br0">&#93;</span> a<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
El comentari <em>optional</em> acompanyant un mètode d’una interfície indica que el mètode pot no estar disponible en alguna de les implementacions de la interfície. Això pot passar si un mètode de la interfície no té sentit en una implementació concreta. La implementació ha de definir el mètode, però en ser cridat provoca una excepció <em>UnsupportedOperationException</em>.
</p>

<p>
El llenguatge Java no proporciona cap classe que implementi directament aquesta interfície, sinó que implementa interfícies derivades d’aquesta. Això no és un impediment per implementar directament, quan convingui, aquesta interfície, però la majoria de vegades n’hi ha prou d’implementar les interfícies derivades o, fins i tot, derivar directament de les implementacions que Java proporciona de les diverses interfícies.
</p>

<p>
El recorregut pels elements d’una col·lecció es pot efectuar, en principi, gràcies al mètode <code>iterator()</code>, que retorna una referència a la interfície <code>Iterator</code>.
</p>

</div>

<h4><a id="interficies_iterator_i_listiterator" >Interfícies &#039;&#039;Iterator&#039;&#039; i &#039;&#039;ListIterator&#039;&#039;</a></h4>
<div class="level4">

<p>
Les interfícies de suport <code>Iterator</code> i <code>ListIterator</code> utilitzades per diversos mètodes de les classes que implementen la interfície <code>Collection</code> o les seves subinterfícies permeten recórrer els elements d’una col·lecció.
</p>

<p>
La definició de la interfície <code>Iterator</code> és:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">interface</span> Iterator<span class="sy0">&lt;</span>E<span class="sy0">&gt;</span><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <span class="kw4">boolean</span> hasNext<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  E next<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="kw4">void</span> remove<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span><span class="co1">// optional</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
Així, per exemple, la referència que retorna el mètode <code>iterator()</code> de la interfície <code>Collection</code> permet recórrer la col·lecció amb els mètodes <code>next()</code> i <code>hasNext()</code>, i també permet eliminar l’element actual amb el mètode remove() sempre que la col·lecció permeti l’eliminació dels seus elements.
</p>

<p>
La interfície <code>ListIterator</code> permet recórrer els objectes que implementen la interfície <code>List</code> (subinterfície de <code>Collection</code>) en ambdues direccions (endavant i endarrere) i efectuar algunes modificacions mentre s’efectua el recorregut. Els mètodes que defineix la interfície són:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">interface</span> ListIterator<span class="sy0">&lt;</span>E<span class="sy0">&gt;</span> <span class="kw1">extends</span> Iterator<span class="sy0">&lt;</span>E<span class="sy0">&gt;</span><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <span class="kw4">boolean</span> hasNext<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  E next<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="kw4">boolean</span> hasPrevious<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  E previous<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="kw4">int</span> nextIndex<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="kw4">int</span> previousIndex<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="kw4">void</span> remove<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="kw4">void</span> set<span class="br0">&#40;</span>E e<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="kw4">void</span> add<span class="br0">&#40;</span>E e<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
El recorregut pels elements de la col·lecció (llista) s’efectua amb els mètodes <code>next()</code> i <code>previous()</code>. En una llista amb n elements, els elements es numeren de 0 a n-1, però els valors vàlids per a l’índex iterador són de 0 a n, de manera que l’índex x es troba entre els elements x-1 i x i, per tant, el mètode <code>previousIndex()</code> retorna x-1 i el mètode <code>nextIndex()</code> retorna x; si l’índex és 0, <code>previousIndex()</code> retorna -1, si l’índex és n, <code>nextIndex()</code> retorna el resultat del mètode <code>size()</code>.
</p>

</div>

<h4><a id="interficies_comparable_i_comparator" >Interfícies &#039;&#039;Comparable&#039;&#039; i &#039;&#039;Comparator&#039;&#039;</a></h4>
<div class="level4">

<p>
Les interfícies de suport <code>Comparable</code> i <code>Comparator</code> estan orientades a mantenir una relació d’ordre en les classes del <em>framework</em> de col·leccions que implementen interfícies que faciliten ordenació (<code>List</code>, <code>SortedSet</code> i <code>SortedMap</code>).
</p>

<p>
La interfície Comparable consta d’un únic mètode:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">interface</span> Comparable<span class="sy0">&lt;</span>T<span class="sy0">&gt;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <span class="kw4">int</span> compareTo<span class="br0">&#40;</span>T o<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
El mètode <code>compareTo()</code> compara l’objecte sobre el qual s’aplica el mètode amb l’objecte rebut per paràmetre i retorna un enter negatiu, zero o positiu en funció de si l’objecte sobre el qual s’aplica el mètode és menor, igual o major que l’objecte rebut per paràmetre. Si els dos objectes no són comparables, el mètode ha de generar una excepció <code>ClassCastException</code>.
</p>

<p>
El llenguatge Java proporciona un munt de classes que implementen aquesta interfície (<code>String, Character, Date, Byte, Short, Integer,Long, Float, Double, BigDecimal, BigInteger…</code>). Per tant, totes aquestes classes proporcionen una implementació del mètode <code>compareTo()</code>.
</p>

<p>

</p>

<p>
Tota implementació del mètode <code>compareTo()</code> hauria de ser compatible amb el mètode <code>equals()</code>, de manera que <code>compareTo()</code> retorni zero únicament si <code>equals()</code> retorna true i, a més, hauria de verificar la propietat transitiva, com en qualsevol relació d’ordre.
</p>

<p>
De les classes que implementen la interfície Comparable es diu que tenen un ordre natural.
</p>

<p>
Les col·leccions de classes que implementen la interfície Comparable es poden ordenar amb els mètodes <code>static Collections.sort()</code> i <code>Arrays.sort()</code>.
</p>
<div class="iocexample"><div class="ioccontent"><p class="ioctitle">Exemple d&#039;utilització de la interfície Comparable en la classe Persona</p>
<p>
Considerem la classe <code>Persona</code>. Hi tenim definit un mètode <code>equals()</code> que informa sobre la igualtat de dues persones a partir del dni. Ara ens interessa ampliar aquest concepte amb una relació d’ordre, de manera que puguem comparar persones i, per tant, puguem, per exemple, ordenar una taula de persones.
</p>

<p>
Per aconseguir-ho, cal fer que la classe Persona implementi la interfície Comparable i cal programar-hi el mètode compareTo():
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> Persona <span class="kw1">implements</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+comparable"><span class="kw3">Comparable</span></a> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">private</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> dni<span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   ...</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <span class="kw1">final</span> <span class="kw4">int</span> compareTo <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+object"><span class="kw3">Object</span></a> obj<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">if</span> <span class="br0">&#40;</span>obj <span class="kw1">instanceof</span> Persona<span class="br0">&#41;</span> <span class="kw1">return</span> dni.<span class="me1">compareTo</span><span class="br0">&#40;</span><span class="br0">&#40;</span><span class="br0">&#40;</span>Persona<span class="br0">&#41;</span>obj<span class="br0">&#41;</span>.<span class="me1">dni</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">throw</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+classcastexception"><span class="kw3">ClassCastException</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>  <span class="co1">// Instrucció que genera una excepció</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">   ...</div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
Amb aquesta versió de la classe <code>Persona</code>, podem utilitzar el mètode <code>Arrays.sort(</code>) per ordenar una taula de persones (bé, d’objectes de classes derivades perquè la classe Persona és abstracta). El programa següent ens ho demostraria:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="co1">//Fitxer ProvaPersona.java</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">import</span> <span class="co2">java.util.Arrays</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> ProvaPersona <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> args<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      Persona t<span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="kw1">new</span> Persona<span class="br0">&#91;</span><span class="nu0">6</span><span class="br0">&#93;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      t<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="kw1">new</span> Alumne<span class="br0">&#40;</span><span class="st0">&quot;99999999&quot;</span>,<span class="st0">&quot;Anna&quot;</span>,<span class="nu0">20</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      t<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="kw1">new</span> Alumne<span class="br0">&#40;</span><span class="st0">&quot;00000000&quot;</span>,<span class="st0">&quot;Pep&quot;</span>,<span class="nu0">33</span>,<span class="st0">'m'</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      t<span class="br0">&#91;</span><span class="nu0">2</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="kw1">new</span> Alumne<span class="br0">&#40;</span><span class="st0">&quot;22222222&quot;</span>,<span class="st0">&quot;Maria&quot;</span>,<span class="nu0">40</span>,<span class="st0">'s'</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      t<span class="br0">&#91;</span><span class="nu0">3</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="kw1">new</span> Alumne<span class="br0">&#40;</span><span class="st0">&quot;66666666&quot;</span>,<span class="st0">&quot;Àngel&quot;</span>,<span class="nu0">22</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      t<span class="br0">&#91;</span><span class="nu0">4</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="kw1">new</span> Alumne<span class="br0">&#40;</span><span class="st0">&quot;11111111&quot;</span>,<span class="st0">&quot;Joanna&quot;</span>,<span class="nu0">25</span>,<span class="st0">'M'</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      t<span class="br0">&#91;</span><span class="nu0">5</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="kw1">new</span> Alumne<span class="br0">&#40;</span><span class="st0">&quot;55555555&quot;</span>,<span class="st0">&quot;Teresa&quot;</span>,<span class="nu0">30</span>,<span class="st0">'S'</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Contingut inicial de la taula:&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i<span class="sy0">&lt;</span>t.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;   &quot;</span><span class="sy0">+</span>t<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+arrays"><span class="kw3">Arrays</span></a>.<span class="me1">sort</span><span class="br0">&#40;</span>t<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Contingut de la taula després d'haver estat ordenada:&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i<span class="sy0">&lt;</span>t.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;   &quot;</span><span class="sy0">+</span>t<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
La seva execució dóna el resultat:
</p>
<pre class="code">Contingut inicial de la taula:
   Dni: 99999999 - Nom: Anna - Edat: 20 - Nivell: ???
   Dni: 00000000 - Nom: Pep - Edat: 33 - Nivell: Cicle F. Mitjà
   Dni: 22222222 - Nom: Maria - Edat: 40 - Nivell: Cicle F.    Superior
   Dni: 66666666 - Nom: Àngel - Edat: 22 - Nivell: ???
   Dni: 11111111 - Nom: Joanna - Edat: 25 - Nivell: Cicle F. Mitjà
   Dni: 55555555 - Nom: Teresa - Edat: 30 - Nivell: Cicle F. Superior
Contingut de la taula després d&#039;haver estat ordenada:
   Dni: 00000000 - Nom: Pep - Edat: 33 - Nivell: Cicle F. Mitjà
   Dni: 11111111 - Nom: Joanna - Edat: 25 - Nivell: Cicle F. Mitjà
   Dni: 22222222 - Nom: Maria - Edat: 40 - Nivell: Cicle F. Superior
   Dni: 55555555 - Nom: Teresa - Edat: 30 - Nivell: Cicle F. Superior
   Dni: 66666666 - Nom: Àngel - Edat: 22 - Nivell: ???
   Dni: 99999999 - Nom: Anna - Edat: 20 - Nivell: ???</pre>
</div></div>
<p>
La interfície <code>Comparator</code> permet ordenar conjunts d’objectes que pertanyen a classes diferents. Per establir un ordre en aquests casos, el programador ha de subministrar un objecte d’una classe que implementi aquesta interfície:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">interface</span> Comparator<span class="sy0">&lt;</span>T<span class="sy0">&gt;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <span class="kw4">int</span> compare<span class="br0">&#40;</span>T o1, T o2<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="kw4">boolean</span> equals<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+object"><span class="kw3">Object</span></a> obj<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
L’objectiu del mètode <code>equals()</code> és comparar objectes <code>Comparator</code>. En canvi, l’objectiu del mètode <code>compare()</code> és comparar dos objectes de diferents classes i obtenir un enter negatiu, zero o positiu, en funció de si l’objecte rebut per primer paràmetre és menor, igual o major que l’objecte rebut per segon paràmetre.
</p>
<div class="iocexample"><div class="ioccontent"><p class="ioctitle">Exemple d&#039;utilització de la interfície Comparator</p>
<p>
La situació que presentem aquí no és gens lògica, però ens serveix per introduir un exemple d’utilització clara de la interfície <code>Comparator</code>. Suposem que tenim una taula que conté objectes de les classes <code>Persona</code>, <code>Date</code>, <code>Double</code> i <code>Short</code> i la volem ordenar. Evidentment, entre aquests elements no hi ha cap ordre natural.
</p>

<p>
Suposem que es decideix que cal ordenar una tal taula deixant, en primer lloc, els elements Date, seguits dels elements <code>Double</code>, després els elements <code>Persona</code> i, finalment, els elements <code>Short</code>. A més, entre el grup d’elements d’un mateix tipus, es demana que actuï l’ordre natural definit en aquest tipus (definit per la implementació del mètode <code>compareTo(</code>) de la interfície <code>Comparable</code>).
</p>

<p>
El programa següent mostra com es pot dissenyar una classe xComparator que implementa la interfície Comparator i permet definir un objecte que, passat al mètode <code>Arrays.sort()</code>, permet ordenar una taula com la indicada en l’ordre demanat.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="co1">//Fitxer ProvaComparator.java</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">import</span> <span class="co2">java.util.*</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> ProvaComparator <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> args<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+object"><span class="kw3">Object</span></a> t<span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+object"><span class="kw3">Object</span></a><span class="br0">&#91;</span><span class="nu0">6</span><span class="br0">&#93;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      t<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="kw1">new</span> Alumne<span class="br0">&#40;</span><span class="st0">&quot;99999999&quot;</span>,<span class="st0">&quot;Anna&quot;</span>,<span class="nu0">20</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      t<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+date"><span class="kw3">Date</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      t<span class="br0">&#91;</span><span class="nu0">2</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="kw1">new</span> Alumne<span class="br0">&#40;</span><span class="st0">&quot;22222222&quot;</span>,<span class="st0">&quot;Maria&quot;</span>,<span class="nu0">40</span>,<span class="st0">'s'</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      t<span class="br0">&#91;</span><span class="nu0">3</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+double"><span class="kw3">Double</span></a><span class="br0">&#40;</span><span class="nu0">33.33</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      t<span class="br0">&#91;</span><span class="nu0">4</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+short"><span class="kw3">Short</span></a><span class="br0">&#40;</span><span class="br0">&#40;</span><span class="kw4">short</span><span class="br0">&#41;</span><span class="nu0">22</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      t<span class="br0">&#91;</span><span class="nu0">5</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+date"><span class="kw3">Date</span></a><span class="br0">&#40;</span><span class="nu0">109</span>,<span class="nu0">0</span>,<span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Contingut inicial de la taula:&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i<span class="sy0">&lt;</span>t.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">         <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;   &quot;</span><span class="sy0">+</span>t<span class="br0">&#91;</span>i<span class="br0">&#93;</span>.<span class="me1">getClass</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">getName</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">+</span><span class="st0">&quot; - &quot;</span><span class="sy0">+</span>t<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+arrays"><span class="kw3">Arrays</span></a>.<span class="me1">sort</span><span class="br0">&#40;</span>t,<span class="kw1">new</span> MyComparator<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Contingut de la taula després d'haver estat ordenada:&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i<span class="sy0">&lt;</span>t.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> </div></li><li class="li1"><div class="de1">         <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;   &quot;</span><span class="sy0">+</span>t<span class="br0">&#91;</span>i<span class="br0">&#93;</span>.<span class="me1">getClass</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">getName</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">+</span><span class="st0">&quot; - &quot;</span><span class="sy0">+</span>t<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="co1">//Fitxer MyComparator.java</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> MyComparator <span class="kw1">implements</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+comparator"><span class="kw3">Comparator</span></a> <span class="sy0">&lt;</span>Object<span class="sy0">&gt;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <span class="kw4">int</span> compare <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+object"><span class="kw3">Object</span></a> o1, <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+object"><span class="kw3">Object</span></a> o2<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">if</span> <span class="br0">&#40;</span>o1 <span class="kw1">instanceof</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+date"><span class="kw3">Date</span></a><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">         <span class="kw1">if</span> <span class="br0">&#40;</span>o2 <span class="kw1">instanceof</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+date"><span class="kw3">Date</span></a><span class="br0">&#41;</span> <span class="kw1">return</span> <span class="br0">&#40;</span><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+date"><span class="kw3">Date</span></a><span class="br0">&#41;</span>o1<span class="br0">&#41;</span>.<span class="me1">compareTo</span><span class="br0">&#40;</span><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+date"><span class="kw3">Date</span></a><span class="br0">&#41;</span>o2<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">         <span class="kw1">else</span> <span class="kw1">return</span> <span class="sy0">-</span><span class="nu0">1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">&#40;</span>o1 <span class="kw1">instanceof</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+double"><span class="kw3">Double</span></a><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">         <span class="kw1">if</span> <span class="br0">&#40;</span>o2 <span class="kw1">instanceof</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+date"><span class="kw3">Date</span></a><span class="br0">&#41;</span> <span class="kw1">return</span> <span class="nu0">1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">         <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">&#40;</span>o2 <span class="kw1">instanceof</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+double"><span class="kw3">Double</span></a><span class="br0">&#41;</span> <span class="kw1">return</span> <span class="br0">&#40;</span><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+double"><span class="kw3">Double</span></a><span class="br0">&#41;</span>o1<span class="br0">&#41;</span>.<span class="me1">compareTo</span><span class="br0">&#40;</span><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+double"><span class="kw3">Double</span></a><span class="br0">&#41;</span>o2<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">              <span class="kw1">else</span> <span class="kw1">return</span> <span class="sy0">-</span><span class="nu0">1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">&#40;</span>o1 <span class="kw1">instanceof</span> Persona<span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">         <span class="kw1">if</span> <span class="br0">&#40;</span>o2 <span class="kw1">instanceof</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+date"><span class="kw3">Date</span></a> <span class="sy0">||</span> o2 <span class="kw1">instanceof</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+double"><span class="kw3">Double</span></a><span class="br0">&#41;</span> <span class="kw1">return</span> <span class="nu0">1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">         <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">&#40;</span>o2 <span class="kw1">instanceof</span> Persona<span class="br0">&#41;</span> <span class="kw1">return</span> <span class="br0">&#40;</span><span class="br0">&#40;</span>Persona<span class="br0">&#41;</span>o1<span class="br0">&#41;</span>.<span class="me1">compareTo</span><span class="br0">&#40;</span><span class="br0">&#40;</span>Persona<span class="br0">&#41;</span>o2<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">              <span class="kw1">else</span> <span class="kw1">return</span> <span class="sy0">-</span><span class="nu0">1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">&#40;</span>o1 <span class="kw1">instanceof</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+short"><span class="kw3">Short</span></a><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">         <span class="kw1">if</span> <span class="br0">&#40;</span>o2 <span class="kw1">instanceof</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+short"><span class="kw3">Short</span></a><span class="br0">&#41;</span> <span class="kw1">return</span> <span class="br0">&#40;</span><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+short"><span class="kw3">Short</span></a><span class="br0">&#41;</span>o1<span class="br0">&#41;</span>.<span class="me1">compareTo</span><span class="br0">&#40;</span><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+short"><span class="kw3">Short</span></a><span class="br0">&#41;</span>o2<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">         <span class="kw1">else</span> <span class="kw1">return</span> <span class="nu0">1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">else</span> <span class="kw1">throw</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+classcastexception"><span class="kw3">ClassCastException</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>  <span class="co1">// Instrucció que genera una excepció</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
L’execució del programa dóna el resultat:
</p>
<pre class="code">Contingut inicial de la taula:
   Alumne - Dni: 99999999 - Nom: Anna - Edat: 20 - Nivell: ???
   java.util.Date - Sun Apr 05 18:26:00 CEST 2009
   Alumne - Dni: 22222222 - Nom: Maria - Edat: 40 - Nivell: Cicle F. Superior
   java.lang.Short - 22
   java.lang.Double - 33.33
   java.util.Date - Thu Jan 01 00:00:00 CET 2009
Contingut de la taula després d&#039;haver estat ordenada:
   java.util.Date - Thu Jan 01 00:00:00 CET 2009
   java.util.Date - Sun Apr 05 18:26:00 CEST 2009
   java.lang.Double - 33.33
   Alumne - Dni: 22222222 - Nom: Maria - Edat: 40 - Nivell: Cicle F. Superior
   Alumne - Dni: 99999999 - Nom: Anna - Edat: 20 - Nivell: ???
   java.lang.Short - 22</pre>
</div></div>
</div>

<h4><a id="interficies_set_i_sortedset" >Interfícies &#039;&#039;Set&#039;&#039; i &#039;&#039;SortedSet&#039;&#039;</a></h4>
<div class="level4">

<p>
La interfície <code>Set&lt;E&gt;</code> és destinada a col·leccions que no mantenen cap ordre d’inserció i que no poden tenir dos o més objectes iguals. Correspon al concepte matemàtic de conjunt.
</p>

<p>
El conjunt de mètodes que defineix aquesta interfície és idèntic al conjunt de mètodes definits per la interfície <code>Collection&lt;E&gt;</code>.
</p>

<p>
Les implementacions de la interfície <code>Set&lt;E&gt;</code> necessiten el mètode <code>equals()</code> per veure si dos objectes del tipus de la col·lecció són iguals i, per tant, no permetre’n la coexistència dins la col·lecció.
</p>

<p>
La crida <code>set.equals(Object obj)</code> retorna <code>true</code> si “obj” també és una instància que implementi la interfície Set, els dos objectes (“set” i “obj”) tenen el mateix nombre d’elements i tots els elements d’“obj” estan continguts en set. Per tant, el resultat pot ser <code>true</code> malgrat que set i “obj” siguin de classes diferents però que implementen la interfície Set.
</p>

<p>
Els mètodes de la interfície Set permeten realitzar les operacions algebraiques unió, intersecció i diferència:
</p>
<ul>
<li class="level1"><div class="li"> <code>s1.containsAll(s2)</code> permet saber si “s2” està contingut en “s1”.</div>
</li>
<li class="level1"><div class="li"> <code>s1.addAll(s2)</code> permet convertir s1 en la unió d’“s1” i “s2”.</div>
</li>
<li class="level1"><div class="li"> <code>s1.retainAll(s2)</code> permet convertir “s1” en la intersecció d’“s1” i “s2”.</div>
</li>
<li class="level1"><div class="li"> <code>s1.removeAll(s2)</code> permet convertir “s1” en la diferència d’“s1” i “s2”.</div>
</li>
</ul>

<p>
La interfície <code>SortedSet</code> derivada de Set afegeix mètodes per permetre gestionar conjunts ordenats. La seva definició és:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">interface</span> SortedSet<span class="sy0">&lt;</span>E<span class="sy0">&gt;</span> <span class="kw1">extends</span> Set<span class="sy0">&lt;</span>E<span class="sy0">&gt;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <span class="co1">// Range-view</span></div></li><li class="li1"><div class="de1">  SortedSet<span class="sy0">&lt;</span>E<span class="sy0">&gt;</span> subSet<span class="br0">&#40;</span>E fromElement, E toElement<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  SortedSet<span class="sy0">&lt;</span>E<span class="sy0">&gt;</span> headSet<span class="br0">&#40;</span>E toElement<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  SortedSet<span class="sy0">&lt;</span>E<span class="sy0">&gt;</span> tailSet<span class="br0">&#40;</span>E fromElement<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="co1">// Endpoints</span></div></li><li class="li1"><div class="de1">  E first<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  E last<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="co1">// Comparator access</span></div></li><li class="li1"><div class="de1">  Comparator<span class="sy0">&lt;?</span> <span class="kw1">super</span> E<span class="sy0">&gt;</span> comparator<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
La relació d’ordre a aplicar sobre els elements d’un objecte col·lecció que implementi la interfície <code>SortedSet</code> es defineix en el moment de la seva construcció, indicant una referència a un objecte que implementi la interfície <code>Comparator</code>. En cas de no indicar cap referència, els elements de l’objecte es comparen amb l’ordre natural.
</p>

<p>
El mètode <code>comparator()</code> retorna una referència a l’objecte <code>Comparator</code> que defineix l’ordre dels elements del mètode, i retorna <code>null</code> si es tracta de l’ordre natural.
</p>

<p>
En un objecte <code>SortedSet</code>, els mètodes <code>iterator()</code>, <code>toArray()</code> i <code>toString()</code> gestionen els elements segons l’ordre establert en l’objecte.
</p>

</div>

<h4><a id="interficie_list" >Interfície &#039;&#039;List&#039;&#039;</a></h4>
<div class="level4">

<p>
La interfície <code>List&lt;E&gt;</code> es destina a col·leccions que mantenen l’ordre d’inserció i que poden tenir elements repetits. Per aquest motiu, aquesta interfície declara mètodes addicionals (als definits en la interfície <code>Collection</code>) que tenen a veure amb l’ordre i l’accés a elements o interval d’elements:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">interface</span> List<span class="sy0">&lt;</span>E<span class="sy0">&gt;</span> <span class="kw1">extends</span> Collection<span class="sy0">&lt;</span>E<span class="sy0">&gt;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <span class="co1">// Positional access</span></div></li><li class="li1"><div class="de1">  E get<span class="br0">&#40;</span><span class="kw4">int</span> index<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  E set<span class="br0">&#40;</span><span class="kw4">int</span> index, E element<span class="br0">&#41;</span><span class="sy0">;</span>    <span class="co1">//optional</span></div></li><li class="li1"><div class="de1">  <span class="kw4">void</span> add<span class="br0">&#40;</span><span class="kw4">int</span> index, E element<span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">//optional</span></div></li><li class="li1"><div class="de1">  E remove<span class="br0">&#40;</span><span class="kw4">int</span> index<span class="br0">&#41;</span><span class="sy0">;</span>            <span class="co1">//optional</span></div></li><li class="li1"><div class="de1">  <span class="kw4">boolean</span> addAll<span class="br0">&#40;</span><span class="kw4">int</span> index, Collection<span class="sy0">&lt;?</span> <span class="kw1">extends</span> E<span class="sy0">&gt;</span> c<span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">//optional</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="co1">// Search</span></div></li><li class="li1"><div class="de1">  <span class="kw4">int</span> indexOf<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+object"><span class="kw3">Object</span></a> o<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="kw4">int</span> lastIndexOf<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+object"><span class="kw3">Object</span></a> o<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="co1">// Iteration</span></div></li><li class="li1"><div class="de1">  ListIterator<span class="sy0">&lt;</span>E<span class="sy0">&gt;</span> listIterator<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  ListIterator<span class="sy0">&lt;</span>E<span class="sy0">&gt;</span> listIterator<span class="br0">&#40;</span><span class="kw4">int</span> index<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="co1">// Range-view</span></div></li><li class="li1"><div class="de1">  List<span class="sy0">&lt;</span>E<span class="sy0">&gt;</span> subList<span class="br0">&#40;</span><span class="kw4">int</span> from, <span class="kw4">int</span> to<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
La crida <code>list.equals(Object obj)</code> retorna <code>true</code> si “obj” també és una instància que implementa la interfície <code>List</code>, i els dos objectes tenen el mateix nombre d’elements i contenen elements iguals i en el mateix ordre. Per tant, el resultat pot ser <code>true</code> malgrat que “list” i “obj” siguin de classes diferents però que implementen la interfície <code>List</code>.
</p>

<p>

</p>

<p>
El mètode <code>add(E o)</code> definit en la interfície <code>Collection</code> afegeix l’element “o” pel final de la llista, i el mètode <code>remove(Object o)</code> definit en la interfície <code>Collection</code> elimina la primera aparició de l’objecte indicat.
</p>

</div>

<h4><a id="interficie_queue" >Interfície &#039;&#039;Queue&#039;&#039;</a></h4>
<div class="level4">

<p>
La interfície <code>Queue&lt;E&gt;</code> es destina a gestionar col·leccions que guarden múltiples elements abans de ser processats i, per aquest motiu, afegeix els mètodes següents als definits en la interfície <code>Collection</code>:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">interface</span> Queue<span class="sy0">&lt;</span>E<span class="sy0">&gt;</span> <span class="kw1">extends</span> Collection<span class="sy0">&lt;</span>E<span class="sy0">&gt;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  E element<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="kw4">boolean</span> offer<span class="br0">&#40;</span>E e<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  E peek<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  E poll<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  E remove<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
En informàtica, quan es parla de cues, es pensa sempre en una gestió dels elements amb un algorisme FIFO (<em>first input, first output</em> -primer en entrar, primer en sortir-), però això no és obligatòriament així en les classes que implementen la interfície Queue. Un exemple són les cues amb prioritat, en què els elements s’ordenen segons un valor per a cada element. Per tant, les implementacions d’aquesta interfície han de definir l’ordre dels seus elements si no es tracta d’implementacions FIFO.
</p>

<p>
Els mètodes típics en la gestió de cues (encuar, desencuar i inici) prenen, en la interfície <code>Queue</code>, dues formes segons la reacció davant una fallada en l’operació: mètodes que retornen una excepció i mètodes que retornen un valor especial (<code>null</code> o <code>false</code>, segons l’operació). La <span class="tabref"><a href="#Table1"><span>taula</span></a></span> ens mostra la classificació dels mètodes segons aquests criteris.
</p>
<div class="ioctable ">
<div class="titletable"><a name="Table1"><span>Taula: </span></a>Classificació dels mètodes de gestió de cues</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> Operació  </th><th class="col1 leftalign"> Mètode que provoca excepció  </th><th class="col2 leftalign"> Mètode que retorna un valor especial  </th>
	</tr>
	<tr class="row1">
		<td class="col0"> Encuar </td><td class="col1"> boolean add (E e) </td><td class="col2"> boolean offer(E e) </td>
	</tr>
	<tr class="row2">
		<td class="col0"> Desencuar </td><td class="col1"> E remove() </td><td class="col2"> E poll() </td>
	</tr>
	<tr class="row3">
		<td class="col0"> Inici </td><td class="col1"> E element() </td><td class="col2"> E peek() </td>
	</tr>
</table></div>
</div>
</div>

<h4><a id="interficies_map_i_sortedmap" >Interfícies &#039;&#039;Map&#039;&#039; i &#039;&#039;SortedMap&#039;&#039;</a></h4>
<div class="level4">

<p>
La interfície <code>Map&lt;E&gt;</code> es destina a gestionar agrupacions d’elements als quals s’accedeix mitjançant una clau, la qual ha de ser única per als diferents elements de l’agrupació. La definició és:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">interface</span> Map<span class="sy0">&lt;</span>K,V<span class="sy0">&gt;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="co1">// Basic operations</span></div></li><li class="li1"><div class="de1">  V put<span class="br0">&#40;</span>K key, V value<span class="br0">&#41;</span><span class="sy0">;</span>   <span class="co1">//optional</span></div></li><li class="li1"><div class="de1">  V get<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+object"><span class="kw3">Object</span></a> key<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  V remove<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+object"><span class="kw3">Object</span></a> key<span class="br0">&#41;</span><span class="sy0">;</span>    <span class="co1">//optional</span></div></li><li class="li1"><div class="de1">  <span class="kw4">boolean</span> containsKey<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+object"><span class="kw3">Object</span></a> key<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="kw4">boolean</span> containsValue<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+object"><span class="kw3">Object</span></a> value<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="kw4">int</span> size<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="kw4">boolean</span> isEmpty<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="co1">// Bulk operations</span></div></li><li class="li1"><div class="de1">  <span class="kw4">void</span> putAll<span class="br0">&#40;</span>Map<span class="sy0">&lt;?</span> <span class="kw1">extends</span> K, <span class="sy0">?</span> <span class="kw1">extends</span> V<span class="sy0">&gt;</span> m<span class="br0">&#41;</span><span class="sy0">;</span>  <span class="co1">// optional</span></div></li><li class="li1"><div class="de1">  <span class="kw4">void</span> clear<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>                                  <span class="co1">// optional</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="co1">// Collection Views</span></div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> Set<span class="sy0">&lt;</span>K<span class="sy0">&gt;</span> keySet<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> Collection<span class="sy0">&lt;</span>V<span class="sy0">&gt;</span> values<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> Set<span class="sy0">&lt;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+map"><span class="kw3">Map</span></a>.<span class="me1">Entry</span><span class="sy0">&lt;</span>K,V<span class="sy0">&gt;&gt;</span> entrySet<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="co1">// Interface for entrySet elements</span></div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw1">interface</span> Entry <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    K getKey<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    V getValue<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    V setValue<span class="br0">&#40;</span>V value<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
Molts d’aquests mètodes tenen un significat evident, però altres no tant.
</p>

<p>
El mètode <code>entrySet()</code> retorna una visió del <code>Map</code> com a <code>Set</code>. Els elements d’aquest Set són referències a la interfície <code>Map.Entry</code> que és una interfície interna de <code>Map</code> que permet modificar i eliminar elements del <code>Map</code>, però no afegir-hi nous elements. El mètode <code>get(key)</code> permet obtenir l’element a partir de la clau. El mètode <code>keySet()</code> retorna una visió de les claus com a <code>Set</code>. El mètode <code>values()</code> retorna una visió dels elements del <code>Map</code> com a <code>Collection</code> (perquè hi pot haver elements repetits i com a <code>Set</code> això no seria factible). El mètode <code>put()</code> permet afegir una parella clau/element mentre que <code>putAll(map)</code> permet afegir-hi totes les parelles d’un <code>Map</code> passat per paràmetre (les parelles amb clau nova s’afegeixen i, en les parelles amb clau ja existent en el Map, els elements nous substitueixen els elements existents). El mètode <code>remove(key)</code> elimina una parella clau/element a partir de la clau.
</p>

<p>
La crida <code>map.equals(Object obj)</code> retorna <code>true</code> si “obj” també és una instància que implementa la interfície <code>Map</code> i els dos objectes representen el mateix mapatge o, dit amb altres paraules, si l’expressió: 
</p>

<p>
<code>map.entrySet().equals( ( (Map) obj ).entrySet() )</code>
</p>

<p>
retorna <code>true</code>. Per tant, el resultat pot ser <code>true</code> malgrat que “map” i “obj” siguin de classes diferents però que implementen la interfície <code>Map</code>.
</p>

<p>
La interfície <code>SortedMap</code> és una interfície <code>Map</code> que permet mantenir ordenades les seves parelles en ordre ascendent segons el valor de la clau, seguint l’ordre natural o la relació d’ordre proporcionada per un objecte que implementi la interfície <code>Comparator</code> proporcionada en el moment de creació de la instància.
</p>

<p>
La seva definició, a partir de la interfície Map, és similar a la definició de la interfície <code>SortedSet</code> a partir de la interfície <code>Set</code>:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">interface</span> SortedMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> <span class="kw1">extends</span> Map<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <span class="co1">// Range-view</span></div></li><li class="li1"><div class="de1">  SortedMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> subMap<span class="br0">&#40;</span>K fromKey, K toKey<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  SortedMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> headMap<span class="br0">&#40;</span>K toKey<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  SortedMap<span class="sy0">&lt;</span>K, V<span class="sy0">&gt;</span> tailMap<span class="br0">&#40;</span>K fromKey<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="co1">// Endpoints</span></div></li><li class="li1"><div class="de1">  K firstKey<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  K lastKey<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="co1">// Comparator access</span></div></li><li class="li1"><div class="de1">  Comparator<span class="sy0">&lt;?</span> <span class="kw1">super</span> K<span class="sy0">&gt;</span> comparator<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

</div>

<h3><a id="implementacions" >Implementacions</a></h3>
<div class="level3">

<p>
El <em>framework</em> de col·leccions de Java proporciona un ampli conjunt d’implementacions de les diverses interfícies per ser utilitzades directament en el desenvolupament d’aplicacions o per crear classes derivades.
</p>

<p>
La <span class="figref"><a href="#Figure4"><span>figura</span></a></span> mostra les implementacions més conegudes i utilitzades de les interfícies que deriven de les interfícies <code>Collection</code> i <code>Map</code>.
</p>

<p>
El <em>framework</em> de col·leccions, per facilitar la feina als programadors que vulguin crear classes implementant les interfícies, proporciona un conjunt de classes abstractes que tenen parcialment o totalment implementats els mètodes de les interfícies corresponents, de manera que els programadors poden derivar les seves classes directament d’elles amb un mínim esforç de programació. La <span class="figref"><a href="#Figure4"><span>figura</span></a></span> presenta les classes no abstractes amb un fons no blanc per identificar-les de manera ràpida.
</p>
<div class="iocfigure"><a name="Figure4"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Jerarquia d’interfícies i implementacions més usuals a partir de les interfícies Collection iMap

</figcaption><img src="../media/ic10m03u3_04.png" alt="" /></figure>
</div>
<p>
Abans que aparegués el <em>framework</em>de col·leccions en la versió 1.2 de Java, ja hi havia unes classes pensades per a la gestió d’agrupacions d’objectes: <code>Vector</code>, <code>Stack</code> i <code>Hashtable</code>. Amb l’aparició del <em>framework</em>de col·leccions, aquestes classes històriques es van mantenir i incorporar al <em>fra- mework</em>, de manera que mantenen els mètodes originals i, a més, implementen les interfícies <code>List</code> (classes <code>Vector</code> i <code>Stack</code>) i Map (classe <code>Hashtable</code>). La <span class="figref"><a href="#Figure4"><span>figura</span></a></span> mostra les classes històriques amb un fons tramat grisós i incorpora la classe <code>Dictionary</code> perquè és classe base de la classe <code>Hashtable</code>.
</p>

</div>

<h4><a id="classe_historica_vector" >Classe històrica &#039;&#039;Vector&#039;&#039;</a></h4>
<div class="level4">

<p>
La classe <code>Vector&lt;E&gt;</code>, a banda de derivar de la classe <code>AbstractList</code>, implementa la interfície <code>Cloneable</code> per poder clonar objectes Vector amb el mètode clone(), i la interfície <code>Serializable</code> per poder convertir objectes <code>Vector</code> en cadenes de caràcters.
</p>

<p>

</p>

<p>
Com el seu nom indica, <code>Vector&lt;E&gt;</code> representa una taula de referències a objectes de tipus “E” que, a diferència de les taules clàssiques de Java (<em>arrays</em>), pot créixer i reduir el nombre d’elements. També permet l’accés als seus elements amb un índex, encara que no permet la utilització dels claudàtors ”[]” a diferència de les taules clàssiques de Java. Hi ha molts mètodes, entre els quals cal destacar:
</p>
<ul>
<li class="level1"><div class="li"> <strong>El mètode</strong> <strong>capacity()</strong>, que retorna la grandària o el nombre d’elements que pot tenir el vector. És el mètode equivalent a la propietatlength de les taules clàssiques de Java.</div>
</li>
<li class="level1"><div class="li"> <strong>El mètode</strong> <strong>size()</strong>, que retorna el nombre d’elements que realment conté el vector. Per tant, a diferència de les taules clàssiques de Java, no cal mantenir una variable entera com a comptador del nombre d’elements que conté el vector.</div>
</li>
<li class="level1"><div class="li"> <strong>El mètode</strong> <strong>get(int n)</strong> retorna la referència que hi ha en la posició indicada per n. Les posicions s’enumeren a partir de zero.</div>
</li>
<li class="level1"><div class="li"> <strong>El mètode</strong> <strong>add(E obj)</strong> permet afegir la referència obj després del darrer element que hi ha en el vector, i amplia automàticament la grandària del vector si aquest era ple.</div>
</li>
<li class="level1"><div class="li"> <strong>El mètode</strong> <strong>add (int n, E obj)</strong> permet inserir la referència obj a la posició indicada per n sempre que n&gt;=0 i n⇐<code>size()</code>.</div>
</li>
</ul>

<p>
Per a un coneixement profund de tots els mètodes, cal fer una ullada a la documentació que acompanya el llenguatge Java. Com a dades membres protegides d’aquesta classe cal conèixer:
</p>
<ul>
<li class="level1"><div class="li"> <strong>capacityIncrement</strong>, que indica l’increment que patirà el vector cada vegada que necessiti créixer.</div>
</li>
<li class="level1"><div class="li"> <strong>elementCount</strong>, que conté el nombre de components vàlids del vector.</div>
</li>
<li class="level1"><div class="li"> <strong>elementData[]</strong> <strong>,</strong> que és la taula de referències Object en què realment es desen els elements de l’objecte Vector.</div>
</li>
</ul>

<p>
En implementar la interfície <code>List</code>, la classe Vector hereta el mètode <code>iterator()</code>, que retorna una referència a la interfície <code>Iterator</code>, la qual permet fer un recorregut pels diferents elements de l’objecte Vector. Però la interfície <code>Iterator</code> va néixer juntament amb el <em>framework</em> de col·leccions quan la classe Vector ja existia. Per això, la classe Vector té el mètode <code>elements()</code>, que retorna una referència a la interfície <code>Enumeration</code> existent des de la versió 1.0 de Java, amb funcionalitat similar a la de la interfície <code>‘Iterator</code>.
</p>
<div class="ioctextl"><div class="ioccontent"><p class="ioctitle">Exemple d&#039;utilització de la classe Vector</p>
<p>
Aquest exemple mostra el disseny de la classe <code>VectorValorsNumerics</code> pensada per definir vectors que desin valors numèrics (valors que implementin la classe <code>Number</code>) de manera que, a més de proporcionar els mètodes típics de la classe <code>Vector</code>, proporciona mètodes com el càlcul de la mitjana dels valors continguts, comparació de mitjana, capacitat i nombre d’elements vers altres vectors i implementació del mètode <code>toString()</code>.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="co1">//Fitxer VectorValorsNumerics.java</span></div></li><li class="li1"><div class="de1"><span class="kw1">import</span> <span class="co2">java.util.Vector</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">class</span> VectorValorsNumerics <span class="kw1">extends</span> Vector<span class="sy0">&lt;</span>Number<span class="sy0">&gt;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> VectorValorsNumerics<span class="br0">&#40;</span><span class="kw4">int</span> capacitatInicial, <span class="kw4">int</span> increment<span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">super</span><span class="br0">&#40;</span>capacitatInicial, increment<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw4">double</span> mitja <span class="br0">&#40;</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <span class="kw4">double</span> suma<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="kw4">int</span> valorsNoNuls<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i<span class="sy0">&lt;</span>size<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> </div></li><li class="li1"><div class="de1">   <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    suma <span class="sy0">=</span> suma <span class="sy0">+</span> get<span class="br0">&#40;</span>i<span class="br0">&#41;</span>.<span class="me1">doubleValue</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    valorsNoNuls<span class="sy0">++;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">if</span> <span class="br0">&#40;</span>valorsNoNuls<span class="sy0">==</span><span class="br0">&#41;</span> <span class="kw1">return</span> <span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">else</span> <span class="kw1">return</span> suma <span class="sy0">/</span> valorsNoNuls<span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw4">boolean</span> mateixaMitja <span class="br0">&#40;</span>VectorValorsNumerics obj<span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">return</span> mitja<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">==</span> obj.<span class="me1">mitja</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw4">boolean</span> mateixNombreElements <span class="br0">&#40;</span>VectorValorsNumerics obj<span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">return</span> size<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">==</span> obj.<span class="me1">size</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw4">boolean</span> mateixaCapacitat <span class="br0">&#40;</span>VectorValorsNumerics obj<span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">return</span> capacity<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">==</span> obj.<span class="me1">capacity</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> toString<span class="br0">&#40;</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> s<span class="sy0">=</span><span class="st0">&quot;{&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i<span class="sy0">&lt;</span>size<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">if</span> <span class="br0">&#40;</span>s.<span class="me1">equals</span><span class="br0">&#40;</span><span class="st0">&quot;{&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> s <span class="sy0">=</span> s <span class="sy0">+</span> get<span class="br0">&#40;</span>i<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">else</span> s <span class="sy0">=</span> s <span class="sy0">+</span> <span class="st0">&quot;, &quot;</span> <span class="sy0">+</span> get<span class="br0">&#40;</span>i<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   s <span class="sy0">=</span> s <span class="sy0">+</span> <span class="st0">&quot;}&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">return</span> s<span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> args<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+integer"><span class="kw3">Integer</span></a> ti<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">=</span><span class="br0">&#123;</span><span class="nu0">1</span>,<span class="nu0">2</span>,<span class="nu0">3</span>,<span class="nu0">4</span>,<span class="nu0">5</span><span class="br0">&#125;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+double"><span class="kw3">Double</span></a> td<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">=</span><span class="br0">&#123;</span><span class="nu0">1.1</span>,<span class="nu0">2.2</span>,<span class="nu0">3.3</span>,<span class="nu0">4.4</span>,<span class="nu0">5.5</span>,<span class="nu0">6.6</span>,<span class="nu0">7.7</span>,<span class="nu0">8.8</span>,<span class="nu0">9.9</span>,<span class="nu0">10.10</span><span class="br0">&#125;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   VectorValorsNumerics vvn1 <span class="sy0">=</span> <span class="kw1">new</span> VectorValorsNumerics <span class="br0">&#40;</span><span class="nu0">5</span>,<span class="nu0">2</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   VectorValorsNumerics vvn2 <span class="sy0">=</span> <span class="kw1">new</span> VectorValorsNumerics <span class="br0">&#40;</span><span class="nu0">5</span>,<span class="nu0">3</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="kw4">int</span> i<span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">for</span> <span class="br0">&#40;</span>i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i<span class="sy0">&lt;</span>ti.<span class="me1">length</span> <span class="sy0">&amp;&amp;</span> i<span class="sy0">&lt;</span>td.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#123;</span>  vvn1.<span class="me1">add</span><span class="br0">&#40;</span>ti<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span> vvn1.<span class="me1">add</span><span class="br0">&#40;</span>td<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span> vvn2.<span class="me1">add</span><span class="br0">&#40;</span>ti<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span> vvn2.<span class="me1">add</span><span class="br0">&#40;</span>td<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span><span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">for</span> <span class="br0">&#40;</span><span class="sy0">;</span> i<span class="sy0">&lt;</span>ti.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#123;</span>  vvn1.<span class="me1">add</span><span class="br0">&#40;</span>ti<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span> vvn2.<span class="me1">add</span><span class="br0">&#40;</span>ti<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span><span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">for</span> <span class="br0">&#40;</span><span class="sy0">;</span> i<span class="sy0">&lt;</span>td.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#123;</span>  vvn1.<span class="me1">add</span><span class="br0">&#40;</span>td<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span> vvn2.<span class="me1">add</span><span class="br0">&#40;</span>td<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span><span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">   <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;vvn1: &quot;</span><span class="sy0">+</span>vvn1<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;   Mitja       : &quot;</span><span class="sy0">+</span>vvn1.<span class="me1">mitja</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;   Nre.Elements: &quot;</span><span class="sy0">+</span>vvn1.<span class="me1">size</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;   Capacitat...: &quot;</span><span class="sy0">+</span>vvn1.<span class="me1">capacity</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;vvn2: &quot;</span><span class="sy0">+</span>vvn2<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;   Mitja       : &quot;</span><span class="sy0">+</span>vvn2.<span class="me1">mitja</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;   Nre.Elements: &quot;</span><span class="sy0">+</span>vvn2.<span class="me1">size</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;   Capacitat...: &quot;</span><span class="sy0">+</span>vvn2.<span class="me1">capacity</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;vvn1 i vvn2 tenen la mateixa mitja? &quot;</span> <span class="sy0">+</span> vvn1.<span class="me1">mateixaMitja</span><span class="br0">&#40;</span>vvn2<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;vvn1 i vvn2 tenen el mateix nombre d'elements? &quot;</span> <span class="sy0">+</span> vvn1.<span class="me1">mateixNombreElements</span><span class="br0">&#40;</span>vvn2<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;vvn1 i vvn2 tenen la mateixa capacitat? &quot;</span> <span class="sy0">+</span> vvn1.<span class="me1">mateixaCapacitat</span><span class="br0">&#40;</span>vvn2<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
L’execució del mètode <code>main()</code> contingut en la classe dóna el resultat:
</p>
<pre class="code">vvn1: {1, 1.1, 2, 2.2, 3, 3.3, 4, 4.4, 5, 5.5, 6.6, 7.7, 8.8, 9.9, 10.1}
   Mitja  : 4.973333333333334
   Nre.Elements: 15
   Capacitat...: 15
vvn2: {1, 1.1, 2, 2.2, 3, 3.3, 4, 4.4, 5, 5.5, 6.6, 7.7, 8.8, 9.9, 10.1}
   Mitja  : 4.973333333333334
   Nre.Elements: 15
   Capacitat...: 17
vvn1 i vvn2 tenen la mateixa mitja? true
vvn1 i vvn2 tenen el mateix nombre d&#039;elements? true
vvn1 i vvn2 tenen la mateixa capacitat? false</pre>

<p>
Fixem-nos que, tot i que els dos vectors “vvn1” i “vvn2” s’han creat amb la mateixa capacitat inicial i s’han emplenat amb els mateixos valors, al final la capacitat de cadascun és diferent perquè s’han creat amb un increment diferent de capacitat.
</p>
</div></div>
<p>
De la classe històrica <code>Vector</code> es deriva una altra classe històrica, la classe <code>Stack</code>, pensada per a la gestió de piles. És recomanable fer-hi una ullada.
</p>

</div>

<h4><a id="classe_historica_hashtable" >Classe històrica &#039;&#039;Hashtable&#039;&#039;</a></h4>
<div class="level4">

<p>
La classe <code>Hashtable&lt;K, V&gt;</code> deriva de la classe abstracta <code>Dictionary</code> i implementa la interfície <code>Map</code>, la interfície <code>Cloneable</code> per poder clonar objectes <code>Hashtable</code> amb el mètode <code>clone()</code>, i la interfície <code>Serializable</code> per poder convertir objectes <code>Hashtable</code> en cadenes de caràcters.
</p>

<p>
Un objecte <code>Hashtable</code> és una taula que relaciona una clau amb un element, utilitzant tècniques <em>Hash</em>, en què qualsevol objecte no <code>null</code> pot ser clau i/o element. La classe a què pertanyen les claus ha d’implementar els mètodes <code>hashCode()</code> i <code>equals()</code> (heretats de la classe Object) per tal de poder fer cerques i comparacions. El mètode <code>hashCode()</code> ha de retornar un enter únic i diferent per cada clau, que sempre és el mateix dins una execució del programa però que pot canviar en diferents execucions. A més, per dues claus que resultin iguals segons el mètode <code>equals()</code>, el mètode <code>hashCode()</code> ha de retornar el mateix valor enter.
</p>

<p>
Els objectes <code>Hashtable</code> estan dissenyats per mantenir una grup de parelles clau/element, de manera que permeten la inserció i la cerca
</p>

<p>
d’una manera molt eficient i sense cap tipus d’ordenació. Cada objecte <code>Hashtable</code> té dues dades membre: “capacity” i “loadFactor” (entre 0.0 i 1.0). Quan el nombre d’elements de l’objecte <code>Hashtable</code> supera el producte “capacity*loadFactor”, l’objecte <code>Hashtable</code> creix cridant el mètode <code>rehash()</code>. Un “loadFactor” més gran apura més la memòria però és menys eficient en les cerques. És convenient partir d’una <code>Hashtable</code> suficientment gran per no estar ampliant contínuament.
</p>
<div class="ioctextl"><div class="ioccontent"><p class="ioctitle">Exemple d&#039;utilització de la classe Hashtable</p>
<p>
Aquest exemple mostra el disseny de la classe <code>HashtablePersona</code> per definir taules <code>Hashtable</code> de persones (segons el disseny de persones obtingut fins ara) considerant que el dni de la persona sigui la clau que permetrà accedir a les persones.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="co1">//Fitxer HashtablePersones.java</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">import</span> <span class="co2">java.util.Hashtable</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">import</span> <span class="co2">java.util.Enumeration</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">class</span> HashtablePersones <span class="kw1">extends</span> Hashtable<span class="sy0">&lt;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a>,Persona<span class="sy0">&gt;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">   <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> args<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      HashtablePersones htp <span class="sy0">=</span> <span class="kw1">new</span> HashtablePersones<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      Alumne a<span class="sy0">;</span></div></li><li class="li1"><div class="de1">      Enumeration<span class="sy0">&lt;</span>Persona<span class="sy0">&gt;</span> ep<span class="sy0">;</span></div></li><li class="li1"><div class="de1">      Enumeration<span class="sy0">&lt;</span>String<span class="sy0">&gt;</span> es<span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> dni<span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      a <span class="sy0">=</span> <span class="kw1">new</span> Alumne<span class="br0">&#40;</span><span class="st0">&quot;99999999&quot;</span>,<span class="st0">&quot;Anna&quot;</span>,<span class="nu0">20</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      htp.<span class="me1">put</span><span class="br0">&#40;</span>a.<span class="me1">getDni</span><span class="br0">&#40;</span><span class="br0">&#41;</span>, a<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      a <span class="sy0">=</span> <span class="kw1">new</span> Alumne<span class="br0">&#40;</span><span class="st0">&quot;00000000&quot;</span>,<span class="st0">&quot;Pep&quot;</span>,<span class="nu0">33</span>,<span class="st0">'m'</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      htp.<span class="me1">put</span><span class="br0">&#40;</span>a.<span class="me1">getDni</span><span class="br0">&#40;</span><span class="br0">&#41;</span>, a<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      a <span class="sy0">=</span> <span class="kw1">new</span> Alumne<span class="br0">&#40;</span><span class="st0">&quot;55555555&quot;</span>,<span class="st0">&quot;Teresa&quot;</span>,<span class="nu0">30</span>,<span class="st0">'S'</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      htp.<span class="me1">put</span><span class="br0">&#40;</span>a.<span class="me1">getDni</span><span class="br0">&#40;</span><span class="br0">&#41;</span>, a<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      a <span class="sy0">=</span> <span class="kw1">new</span> Alumne<span class="br0">&#40;</span><span class="st0">&quot;22222222&quot;</span>,<span class="st0">&quot;Maria&quot;</span>,<span class="nu0">40</span>,<span class="st0">'s'</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      htp.<span class="me1">put</span><span class="br0">&#40;</span>a.<span class="me1">getDni</span><span class="br0">&#40;</span><span class="br0">&#41;</span>, a<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      a <span class="sy0">=</span> <span class="kw1">new</span> Alumne<span class="br0">&#40;</span><span class="st0">&quot;66666666&quot;</span>,<span class="st0">&quot;Àngel&quot;</span>,<span class="nu0">22</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      htp.<span class="me1">put</span><span class="br0">&#40;</span>a.<span class="me1">getDni</span><span class="br0">&#40;</span><span class="br0">&#41;</span>, a<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      a <span class="sy0">=</span> <span class="kw1">new</span> Alumne<span class="br0">&#40;</span><span class="st0">&quot;11111111&quot;</span>,<span class="st0">&quot;Joanna&quot;</span>,<span class="nu0">25</span>,<span class="st0">'M'</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      htp.<span class="me1">put</span><span class="br0">&#40;</span>a.<span class="me1">getDni</span><span class="br0">&#40;</span><span class="br0">&#41;</span>, a<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      a <span class="sy0">=</span> <span class="kw1">new</span> Alumne<span class="br0">&#40;</span><span class="st0">&quot;55555555&quot;</span>,<span class="st0">&quot;Maria Teresa&quot;</span>,<span class="nu0">30</span>,<span class="st0">'S'</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      htp.<span class="me1">put</span><span class="br0">&#40;</span>a.<span class="me1">getDni</span><span class="br0">&#40;</span><span class="br0">&#41;</span>, a<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Contingut de la Hashtable via enumeracions:&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      ep <span class="sy0">=</span> htp.<span class="me1">elements</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      es <span class="sy0">=</span> htp.<span class="me1">keys</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">while</span> <span class="br0">&#40;</span>es.<span class="me1">hasMoreElements</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">         <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span> <span class="br0">&#40;</span>es.<span class="me1">nextElement</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">+</span> <span class="st0">&quot; &gt;&gt;&gt; &quot;</span> <span class="sy0">+</span> ep.<span class="me1">nextElement</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Contingut de la Hashtable cridant el mètode toString:&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span>htp<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Efectuem alguna recerca de persones per la clau <span class="es0">\&quot;</span>dni<span class="es0">\&quot;</span>:&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      dni <span class="sy0">=</span> <span class="st0">&quot;66666666&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Dni : &quot;</span> <span class="sy0">+</span> dni <span class="sy0">+</span> <span class="st0">&quot; &gt;&gt;&gt; &quot;</span> <span class="sy0">+</span> htp.<span class="me1">get</span><span class="br0">&#40;</span>dni<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      dni <span class="sy0">=</span> <span class="st0">&quot;6666&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Dni : &quot;</span> <span class="sy0">+</span> dni <span class="sy0">+</span> <span class="st0">&quot; &gt;&gt;&gt; &quot;</span> <span class="sy0">+</span> htp.<span class="me1">get</span><span class="br0">&#40;</span>dni<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">   <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
L’execució del mètode <code>main()</code> dóna el resultat:
</p>
<pre class="code">Contingut de la Hashtable via enumeracions:
66666666 &gt;&gt;&gt; Dni: 66666666 - Nom: Àngel - Edat: 22 - Nivell: ???
00000000 &gt;&gt;&gt; Dni: 00000000 - Nom: Pep - Edat: 33 - Nivell: Cicle F. Mitjà
11111111 &gt;&gt;&gt; Dni: 11111111 - Nom: Joanna - Edat: 25 - Nivell: Cicle F. Mitjà
22222222 &gt;&gt;&gt; Dni: 22222222 - Nom: Maria - Edat: 40 - Nivell: Cicle F. Superior
99999999 &gt;&gt;&gt; Dni: 99999999 - Nom: Anna - Edat: 20 - Nivell: ???
55555555 &gt;&gt;&gt; Dni: 55555555 - Nom: Maria Teresa - Edat: 30 - Nivell: Cicle F. Superior

Contingut de la Hashtable cridant el mètode toString:
{66666666=Dni: 66666666 - Nom: Àngel - Edat: 22 - Nivell: ???, 00000000=Dni: 00000000 - Nom: Pep
- Edat: 33 - Nivell: Cicle F. Mitjà, 11111111=Dni: 11111111 - Nom: Joanna - Edat: 25 - Nivell: Ci
cle F. Mitjà, 22222222=Dni: 22222222 - Nom: Maria - Edat: 40 - Nivell: Cicle F. Superior, 9999999
9=Dni: 99999999 - Nom: Anna - Edat: 20 - Nivell: ???, 55555555=Dni: 55555555 - Nom: Maria Teresa
- Edat: 30 - Nivell: Cicle F. Superior}

Efectuem alguna recerca de persones per la clau &quot;dni&quot;:
Dni : 66666666 &gt;&gt;&gt; Dni: 66666666 - Nom: Àngel - Edat: 22 - Nivell: ???
Dni : 6666 &gt;&gt;&gt; null</pre>
</div></div>
<p>
En aquest exemple veiem el funcionament de diversos mètodes de la classe <code>Hashtable:</code>
</p>
<ul>
<li class="level1"><div class="li"> <strong>El mètode</strong> <strong>put()</strong> permet afegir diversos elements a la taula i els elements queden ordenats segons l’ordre en què el mètode put () s’executa. Fixem-nos que en el moment en què s’intenta afegir una parella clau/element per a la qual ja hi ha la clau en la taula, la nova parella substitueix la parella existent i passa a ocupar el darrer lloc de la taula. Aquesta situació té lloc en efectuar la inserció d’una segona persona amb dni “55555555”, de manera que en les visualitzacions posteriors del contingut de la taula trobarem la persona anomenada Maria Teresa en la darrera posició.</div>
</li>
<li class="level1"><div class="li"> <strong>El mètode</strong> <strong>elements()</strong> proporciona una enumeració per recórrer els elements emmagatzemats en la taula, i el mètode keys()proporciona una enumeració per recórrer les claus emmagatzemades en la taula.</div>
</li>
<li class="level1"><div class="li"> <strong>El mètode</strong> <strong>toString()</strong>, sense necessitat d’implementar-lo, mostra el contingut de la taula en el format { clau=element, clau=element, … }.</div>
</li>
<li class="level1"><div class="li"> <strong>El mètode</strong> <strong>get(clau)</strong> cerca l’element corresponent a la clau i retorna valor null si no el troba.</div>
</li>
</ul>

</div>

<h3><a id="algorismes" >Algorismes</a></h3>
<div class="level3">

<p>

</p>

<p>
El <em>framework</em> de col·leccions de Java proporciona les classes <code>Collections</code> (acabada en <em>s</em>) i <code>Arrays</code>, que són una mica especials: no són abstractes, però no proporcionen cap constructor públic per crear objectes.
</p>

<p>
La classe <code>Arrays</code> és una classe que conté mètodes <code>static</code> destinats a gestionar (ordenar, omplir, realitzar cerques i comparar) les taules clàssiques de Java. També permet veure les taules clàssiques de Java com a objectes que implementen la interfície <code>List</code>.
</p>

<p>
La classe <code>Collections</code> és una classe que conté mètodes i constants <code>static</code> destinats a gestionar els objectes de les classes que implementen les interfícies <code>Collection</code> i <code>Map</code> i les subinterfícies corresponents.
</p>

<p>
La gran quantitat de mètodes que hi ha en ambdues classes (105 en la classe <code>Arrays</code> i 169 en la classe <code>Collections</code>) en fa impossible la simple enumeració en aquest material. És aconsellable fer una ullada a la documentació corresponent de Java.
</p>

<p>
La <span class="tabref"><a href="#Table2"><span>taula</span></a></span> presenta un resum d’alguns dels mètodes que ens podem trobar en les classes <code>Arrays</code> i <code>Collections</code> tenint en compte que, per als diferents mètodes, hi pot haver diverses versions (polimorfisme).
</p>
<div class="ioctable ">
<div class="titletable"><a name="Table2"><span>Taula: </span></a>Resum de mètodes d’ <code>Arrays</code> i <code>Collections</code>.</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> Mètode  </th><th class="col1 leftalign"> Objectiu  </th>
	</tr>
	<tr class="row1">
		<td class="col0"> Arrays.sort(T[]) </td><td class="col1"> Ordenar taules clàssiques de Java </td>
	</tr>
	<tr class="row2">
		<td class="col0"> Arrays.toString(T[]) </td><td class="col1"> Obtenir una representació <code>String</code> dels continguts d’una taula </td>
	</tr>
	<tr class="row3">
		<td class="col0"> Arrays.fill(T[],…) </td><td class="col1"> Emplenar totes les cel·les d’una taula amb valors determinats </td>
	</tr>
	<tr class="row4">
		<td class="col0"> Arrays.equals(T[], T[],…) </td><td class="col1"> Comparar dues taules </td>
	</tr>
	<tr class="row5">
		<td class="col0"> Arrays.binarySearch(T[], T) </td><td class="col1"> Efectuar una cerca dicotòmica en una taula ordenada </td>
	</tr>
	<tr class="row6">
		<td class="col0"> Collections.sort(List&lt;T&gt;) </td><td class="col1"> Ordenar objectes <code>List</code> </td>
	</tr>
	<tr class="row7">
		<td class="col0"> Collections.binaySearch(List&lt;T&gt;, Object) </td><td class="col1"> Efectuar una cerca dicotòmica en un objecte <code>List</code> ordenat </td>
	</tr>
	<tr class="row8">
		<td class="col0"> Collections.reverse(List&lt;T&gt;) </td><td class="col1"> Invertir l’ordre dels elements en un objecte <code>List</code> </td>
	</tr>
	<tr class="row9">
		<td class="col0"> Collections.max(Collection&lt;E&gt;) </td><td class="col1"> Trobar el màxim valor d’un objecte <code>Collection</code> </td>
	</tr>
	<tr class="row10">
		<td class="col0"> Collections.min(Collection&lt;E&gt;) </td><td class="col1"> Trobar el mínim valor d’un objecte <code>Collection</code> </td>
	</tr>
</table></div>
</div>
</div>

<h2><a id="arrays_multidimensionals" >&quot;Arrays&quot; multidimensionals</a></h2>
<div class="level2">

<p>
Quan es declara un <em>array</em>, hi ha una propietat especial, a part del seu identificador de tipus i de mida. Es tracta de la seva <strong>dimensió</strong>, el nombre d’índexs que cal usar per establir la posició que es vol tractar. Res no impedeix que el nombre d’índexs sigui més gran que 1.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
L’ordre dels índexs és important.
</p>
</div></div><div class="iocimportant"><div class="ioccontent">
<p>
Un <strong>array multidimensional</strong> és aquell en què per accedir a una posició concreta, en lloc d’usar un sol valor com a índex, s’usa una seqüència de diversos valors. Cada índex serveix com a  coordenada per a una dimensió diferent.
</p>
</div></div>
<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/ic10m03u3_05.png" class="imgB" title="Un &quot;array&quot; de dimensió 2: una taula/-20" alt="Un &quot;array&quot; de dimensió 2: una taula/-20" /></li><li><small>Un &quot;array&quot; de dimensió 2: una taula</small></li>
</ul></div>

</p>

<p>
Entre els <em>arrays</em> multidimensionals, el cas més usat és el dels <em>arrays</em> bidimensionals, de dues dimensions. Aquest és un dels més fàcils de visualitzar i és, per tant, un bon punt de partida. Com que es tracta d’un tipus d’<em>array</em> en què calen dos índexs per establir una posició, es pot considerar que el seu comportament és com el d’una matriu, taula o full de càlcul. El primer índex indicaria la fila, mentre que el segon indicaria la columna on es troba la posició a què es vol accedir.
</p>

<p>
Per exemple, suposeu que un programa per tractar notes d’estudiants ara ha de gestionar les notes individuals de cada estudiant per a un seguit d’exercicis, de manera que es poden fer càlculs addicionals: calcular la nota final segons els resultats individuals, veure l’evolució de cada estudiant al llarg del curs… En aquest cas, tota aquesta informació es pot resumir de manera eficient en una taula o en un full de càlcul, en què els estudiants es poden organitzar per files, on cada columna correspon al valor d’una prova, i la darrera columna pot ser la nota final.
</p>

</div>

<h3><a id="declaracio_d_arrays_bidimensionals" >Declaració d&#039;&quot;arrays&quot; bidimensionals</a></h3>
<div class="level3">

<p>
La sintaxi per declarar i inicialitzar un <em>array</em> de dues dimensions és semblant a la dels unidimensionals, si bé ara cal especificar que hi ha un índex addicional. Això es fa usant un parell de claus extra, <code>[]</code>, sempre que calgui especificar un nou índex. 
</p>

<p>
Per declarar-ne un d’inicialitzat amb totes les posicions dels seus valors per defecte, caldria usar la sintaxi:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">paraulaClauTipus<span class="br0">&#91;</span><span class="br0">&#93;</span> identificadorVariable <span class="sy0">=</span> <span class="kw1">new</span> paraulaClauTipus<span class="br0">&#91;</span>nombreFiles<span class="br0">&#93;</span><span class="br0">&#91;</span>nombreColumnes<span class="br0">&#93;</span><span class="sy0">;</span></div></li></ol></pre>

<p>
Com passava amb els <em>arrays</em> unidireccionals, el valor dels índexs, de les files i de les columnes, no ha de ser necessàriament un de literal. Pot ser definit d’acord amb el contingut d’una variable, diferent per a cada execució del programa. El valor del nombre de files i de columnes tampoc no ha de ser necessàriament el mateix.
</p>

<p>
La inicialització mitjançant valors concrets implica indicar tants valors com el nombre de files per columnes. Per fer-ho, primer s’enumeren els valors individuals que hi ha a cada fila de la mateixa manera que s’inicialitza un <em>array</em> unidimensional: una seqüència de valors separats per comes i envoltats per claudàtors, <code>{…}</code>. Un cop enumerades les files d’aquesta manera, aquestes s’enumeren al seu torn separades per comes i envoltades per claudàtors. Conceptualment, és com declarar un <em>array</em> de files, en què cada posició té un altre <em>array</em> de valors. Això es veu més clar amb la sintaxi, que és la següent:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">paraulaClauTipus<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="br0">&#93;</span> identificadorVariable <span class="sy0">=</span> <span class="br0">&#123;</span> </div></li><li class="li1"><div class="de1">                         <span class="br0">&#123;</span>Fila0valor1, Fila0valor2, ... , Fila0valorN<span class="br0">&#125;</span>,</div></li><li class="li1"><div class="de1">                         <span class="br0">&#123;</span>Fila1valor1, Fila1valor2, ... , Fila1valorN<span class="br0">&#125;</span>,</div></li><li class="li1"><div class="de1">                         ..., </div></li><li class="li1"><div class="de1">                         <span class="br0">&#123;</span>FilaNvalor1, FilaNvalor2, ... , FilaNvalorN<span class="br0">&#125;</span> </div></li><li class="li1"><div class="de1">                         <span class="br0">&#125;</span><span class="sy0">;</span></div></li></ol></pre>

<p>
Fixeu-vos com a l’inici i al final hi ha els claudàtors extra que tanquen la seqüència de files i després de cada fila hi ha una coma, per separar-les entre si. Per fer més clara la lectura, s’han usat diferents línies de text per indicar els valors emmagatzemats a cada fila, però res no impedeix escriure-ho tot en una sola línia molt llarga. De tota manera, és recomanable usar aquest format i intentar deixar espais on pertoqui de manera que els valors quedin alineats verticalment, ja que això facilita la comprensió del codi font.
</p>

<p>
Per exemple, la manera de declarar i d’inicialitzar amb valors concrets un <em>array</em> bidimensional de tres files per cinc columnes de valors de tipus enter seria:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw4">int</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="br0">&#93;</span> arrayBidi <span class="sy0">=</span> <span class="br0">&#123;</span> </div></li><li class="li1"><div class="de1">                    <span class="br0">&#123;</span><span class="nu0">1</span> ,<span class="nu0">2</span> ,<span class="nu0">3</span> ,<span class="nu0">4</span> ,<span class="nu0">5</span> <span class="br0">&#125;</span>,</div></li><li class="li1"><div class="de1">                    <span class="br0">&#123;</span><span class="nu0">6</span> ,<span class="nu0">7</span> ,<span class="nu0">8</span> ,<span class="nu0">9</span> ,<span class="nu0">10</span><span class="br0">&#125;</span>,</div></li><li class="li1"><div class="de1">                    <span class="br0">&#123;</span><span class="nu0">11</span>,<span class="nu0">12</span>,<span class="nu0">13</span>,<span class="nu0">14</span>,<span class="nu0">15</span><span class="br0">&#125;</span> </div></li><li class="li1"><div class="de1">                    <span class="br0">&#125;</span><span class="sy0">;</span></div></li></ol></pre>

<p>
Des del punt de vista d’una taula o matriu, la primera fila seria {1, 2, 3, 4, 5}, la segona {6 ,7 ,8 ,9 ,10} i la tercera {11,12,13,14,15}, tal com mostra la <span class="tabref"><a href="#Table3"><span>taula</span></a></span>.
</p>
<div class="ioctable ">
<div class="titletable"><a name="Table3"><span>Taula: </span></a>Resultat d’inicialitzar amb valors concrets un array bidimensional de tres files per cinc columnes.</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<td class="col0 leftalign"> 1  </td><td class="col1 leftalign"> 2  </td><td class="col2 leftalign"> 3  </td><td class="col3 leftalign"> 4  </td><td class="col4 leftalign"> 5  </td>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> 6  </td><td class="col1 leftalign"> 7  </td><td class="col2 leftalign"> 8  </td><td class="col3 leftalign"> 9  </td><td class="col4"> 10 </td>
	</tr>
	<tr class="row2">
		<td class="col0"> 11 </td><td class="col1"> 12 </td><td class="col2"> 13 </td><td class="col3"> 14 </td><td class="col4"> 15 </td>
	</tr>
</table></div>
</div>
<p>
En usar aquest tipus d’inicialització cal assegurar-se que les mides de totes les files siguin exactament iguals (que tinguin el mateix nombre de valors separats entre comes), ja que cal garantir que totes les files tenen el mateix nombre de columnes.
</p>

</div>

<h3><a id="esquemes_d_us_d_arrays_bidimensionals" >Esquemes d&#039;ús d&#039;&quot;arrays&quot; bidimensionals</a></h3>
<div class="level3">

<p>
L’accés a les posicions d’un <em>array</em> bidimensional és pràcticament idèntic a l’unidireccional, però tenint en compte que ara hi ha dos índexs per preveure referents a les dues coordenades. 
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">identificadorVariable<span class="br0">&#91;</span>índexFila<span class="br0">&#93;</span><span class="br0">&#91;</span>índexColumna<span class="br0">&#93;</span></div></li></ol></pre>

<p>
La <span class="tabref"><a href="#Table4"><span>taula</span></a></span> fa un resum de com s’accediria a les diferents posicions d’un <em>array</em> de 4 * 5 posicions. En qualsevol cas, en accedir-hi, sempre cal mantenir present que cada índex mai no pot ser igual o superior al nombre de files o de columnes, segons correspongui. En cas contrari, es produeix un error.
</p>
<div class="ioctable ">
<div class="titletable"><a name="Table4"><span>Taula: </span></a>Array bidimensional de 4 * 5 posicions.</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<td class="col0"> a[0][0] </td><td class="col1"> a[0][1] </td><td class="col2 rightalign">  a[0][2] </td><td class="col3 rightalign">  a[0][3] </td><td class="col4 rightalign">  a[0][4] </td>
	</tr>
	<tr class="row1">
		<td class="col0"> a[1][0] </td><td class="col1"> a[1][1] </td><td class="col2 rightalign">  a[1][2] </td><td class="col3 rightalign">  a[1][3] </td><td class="col4 rightalign">  a[1][4] </td>
	</tr>
	<tr class="row2">
		<td class="col0"> a[2][0] </td><td class="col1"> a[2][1] </td><td class="col2 rightalign">  a[2][2] </td><td class="col3 rightalign">  a[2][3] </td><td class="col4 rightalign">  a[2][4] </td>
	</tr>
	<tr class="row3">
		<td class="col0"> a[3][0] </td><td class="col1"> a[3][1] </td><td class="col2 rightalign">  a[3][2] </td><td class="col3 rightalign">  a[3][3] </td><td class="col4 rightalign">  a[3][4] </td>
	</tr>
</table></div>
</div><div class="iocnote"><div class="ioccontent">
<p>
Assegureu-vos d’usar variables diferents per indicar cada índex.
</p>
</div></div>
<p>
Com que ara hi ha dos índexs, tots els esquemes fonamentals per treballar amb <em>arrays</em> bidimensionals es basen en dues estructures de repetició imbricades, una per tractar cada fila i l’altra per tractar cada valor individual dins la fila. 
</p>

<p>
En el cas d’<em>arrays</em> bidimensionals, l’atribut <code>length</code> té un comportament una mica especial, ja que ara hi ha dos índexs. Per tal entendre’l, cal recordar que per inicialitzar l’<em>array</em> el que es fa és enumerar una llista de files, dins les quals hi ha els valors emmagatzemats realment. Per tant, el que diu l’atribut és el nombre de files que hi ha. Per saber el nombre de valors d’una fila heu de fer:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">identificadorVariable<span class="br0">&#91;</span>índexFila<span class="br0">&#93;</span>.<span class="me1">length</span></div></li></ol></pre>

<p>
Per exemple, si la <span class="tabref"><a href="#Table7"><span>taula</span></a></span> correspon a una variable anomenada <code>arrayBidi</code>, <code>arrayBidi.length</code> avalua a 4 (hi ha quatre files) i <code>arrayBidi[0].length</code>, <code>arrayBidi[1].length</code>, etc. tots avaluen a 5 (hi ha 5 columnes).
</p>

</div>

<h4><a id="inicialitzacio_procedural" >Inicialització procedural</a></h4>
<div class="level4">

<p>
Novament, es pot donar el cas en què vulgueu assignar a cada posició valors que cal calcular prèviament i que, per tant, calgui anar assignant un per un a totes les posicions de l’<em>array</em> bidimensional. 
</p>

<p>
A mode d’exemple, compileu i executeu el codi font següent, que emmagatzema a cada posició la suma dels índexs d’un <em>array</em> bidimensional de dimensions arbitràries i després es visualitza el resultat per pantalla, ordenat per files.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">import</span> <span class="co2">java.util.Scanner</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">//Un programa que inicialitza un array bidimensional.</span></div></li><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> InicialitzacioBidi <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a><span class="br0">&#91;</span><span class="br0">&#93;</span>  args<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    Scanner lector <span class="sy0">=</span> <span class="kw1">new</span> Scanner<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">in</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    <span class="co1">//Llegeix les files.</span></div></li><li class="li1"><div class="de1">    <span class="kw4">int</span> nombreFiles <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">while</span> <span class="br0">&#40;</span>nombreFiles <span class="sy0">&lt;=</span> <span class="nu0">0</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">print</span><span class="br0">&#40;</span><span class="st0">&quot;Quantes files tindrà la taula? &quot;</span> <span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">if</span> <span class="br0">&#40;</span>lector.<span class="me1">hasNextInt</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">        nombreFiles <span class="sy0">=</span> lector.<span class="me1">nextInt</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">        lector.<span class="me1">next</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">        <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">print</span><span class="br0">&#40;</span><span class="st0">&quot;Aquest valor no és correcte. &quot;</span> <span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">    lector.<span class="me1">nextLine</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    <span class="co1">//Llegeix les columnes.</span></div></li><li class="li1"><div class="de1">    <span class="kw4">int</span> nombreColumnes <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">while</span> <span class="br0">&#40;</span>nombreColumnes <span class="sy0">&lt;=</span> <span class="nu0">0</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">print</span><span class="br0">&#40;</span><span class="st0">&quot;Quantes files tindrà la taula? &quot;</span> <span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">if</span> <span class="br0">&#40;</span>lector.<span class="me1">hasNextInt</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">        nombreColumnes <span class="sy0">=</span> lector.<span class="me1">nextInt</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">        lector.<span class="me1">next</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">        <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">print</span><span class="br0">&#40;</span><span class="st0">&quot;Aquest valor no és correcte. &quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">    lector.<span class="me1">nextLine</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    <span class="co1">//Inicialització amb valors per defecte.</span></div></li><li class="li1"><div class="de1">    <span class="kw4">int</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="br0">&#93;</span> arrayBidi <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw4">int</span><span class="br0">&#91;</span>nombreFiles<span class="br0">&#93;</span><span class="br0">&#91;</span>nombreColumnes<span class="br0">&#93;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    <span class="co1">//Observeu l'ús de l'atribut &quot;length&quot;.</span></div></li><li class="li1"><div class="de1">    <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Hi ha &quot;</span> <span class="sy0">+</span> arrayBidi.<span class="me1">length</span> <span class="sy0">+</span> <span class="st0">&quot; files.&quot;</span> <span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Hi ha &quot;</span> <span class="sy0">+</span> arrayBidi<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>.<span class="me1">length</span> <span class="sy0">+</span> <span class="st0">&quot;columnes.&quot;</span> <span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    <span class="co1">//Bucle per recórrer cada fila.</span></div></li><li class="li1"><div class="de1">    <span class="co1">//&quot;i&quot; indica el número de fila.</span></div></li><li class="li1"><div class="de1">    <span class="kw1">for</span><span class="br0">&#40;</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> nombreFiles<span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      <span class="co1">//Bucle per recórrer cada posició dins la fila (columnes de la fila).</span></div></li><li class="li1"><div class="de1">      <span class="co1">//&quot;j&quot; indica el número de fila.</span></div></li><li class="li1"><div class="de1">      <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> j <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> j <span class="sy0">&lt;</span> nombreColumnes<span class="sy0">;</span> j<span class="sy0">++</span><span class="br0">&#41;</span>  <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">        <span class="co1">//Valor assignat a la posició: suma dels índex de fila i columna.</span></div></li><li class="li1"><div class="de1">        arrayBidi<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#91;</span>j<span class="br0">&#93;</span> <span class="sy0">=</span> i <span class="sy0">+</span> j<span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">    <span class="co1">//Es visualitza el resultat, també calen dos bucles.</span></div></li><li class="li1"><div class="de1">    <span class="kw1">for</span><span class="br0">&#40;</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> nombreFiles<span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <span class="co1">//Inici de fila, obrim claudàtors.</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">print</span><span class="br0">&#40;</span><span class="st0">&quot;Fila &quot;</span> <span class="sy0">+</span> i <span class="sy0">+</span> <span class="st0">&quot; { &quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> j <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> j <span class="sy0">&lt;</span> nombreColumnes<span class="sy0">;</span> j<span class="sy0">++</span> <span class="br0">&#41;</span>  <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">        <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">print</span><span class="br0">&#40;</span>arrayBidi<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#91;</span>j<span class="br0">&#93;</span> <span class="sy0">+</span> <span class="st0">&quot; &quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">      <span class="co1">//Al final de cada fila es tanquen claudàtors i es fa un salt de línia.</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;}&quot;</span> <span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

</div>

<h4><a id="recorregut" >Recorregut</a></h4>
<div class="level4">

<p>
En el cas d’<em>arrays</em> bidimensionals, també pot passar que sigui necessari efectuar càlculs fent un recorregut per tots els valors continguts. Novament, cal anar fila per fila, mirant totes les posicions de cadascuna.
</p>

<p>
Per exemple, suposeu que hi ha un programa en què es desa a cada fila el valor de les notes dels estudiants d’un curs. Es demana calcular la nota final de cada estudiant i emmagatzemar-la a la darrera columna, i també saber la mitjana de totes les notes finals. El codi es mostra tot seguit; analitzeu-lo i proveu que funciona. En aquest cas, per facilitar-ne l’execució, els valors de les notes estan inicialitzats per a valors concrets. En el cas de la nota final de cada estudiant, inicialment es deixa a 0 i serà el programa qui la calculi.
</p>

<p>
Ara sí: observeu atentament l’ús de l’atribut <code>length</code> per controlar els índexs en recórrer l’<em>array</em> i saber quin és el nombre de valors en una fila o el nombre de files.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="co1">//Un programa que calcula notes mitjanes en un array bidimensional.</span></div></li><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> RecorregutBidi <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a><span class="br0">&#91;</span><span class="br0">&#93;</span> args<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <span class="co1">//Dades de les notes.</span></div></li><li class="li1"><div class="de1">    <span class="kw4">float</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="br0">&#93;</span> arrayBidiNotes <span class="sy0">=</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">                                 <span class="br0">&#123;</span> 4.5f, 6f  , 5f  , 8f  , 0f  <span class="br0">&#125;</span>,</div></li><li class="li1"><div class="de1">                                 <span class="br0">&#123;</span> 10f , 8f  , 7.5f, 9.5f, 0f  <span class="br0">&#125;</span>,</div></li><li class="li1"><div class="de1">                                 <span class="br0">&#123;</span> 3f  , 2.5f, 4.5f, 6f  , 0f  <span class="br0">&#125;</span>,</div></li><li class="li1"><div class="de1">                                 <span class="br0">&#123;</span> 6f  , 8.5f, 6f  , 4f  , 0f  <span class="br0">&#125;</span>,</div></li><li class="li1"><div class="de1">                                 <span class="br0">&#123;</span> 9f  , 7.5f, 7f  , 8f  , 0f  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">                                 <span class="br0">&#125;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="co1">//Mitjana aritmètica del curs per a tots els estudiants.</span></div></li><li class="li1"><div class="de1">    <span class="kw4">float</span> sumaFinals <span class="sy0">=</span> 0f<span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">//Es fa tractant fila per fila, indicada per &quot;i&quot;. Cada fila és un estudiant.</span></div></li><li class="li1"><div class="de1">    <span class="co1">//&quot;arrayBidiNotes.length&quot; avalua el nombre de files.</span></div></li><li class="li1"><div class="de1">    <span class="kw1">for</span><span class="br0">&#40;</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> arrayBidiNotes.<span class="me1">length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <span class="co1">//Aquí s'acumulen les notes de l'estudiant tractat.</span></div></li><li class="li1"><div class="de1">      <span class="kw4">float</span> sumaNotes <span class="sy0">=</span> 0f<span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      <span class="co1">//Tractem cada fila (cada estudiant). Cada nota la indexa &quot;j&quot;.</span></div></li><li class="li1"><div class="de1">      <span class="co1">//&quot;arrayBidiNotes[i].length avalua el nombre de posicions a la fila.</span></div></li><li class="li1"><div class="de1">      <span class="kw1">for</span><span class="br0">&#40;</span><span class="kw4">int</span> j <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> j <span class="sy0">&lt;</span> arrayBidiNotes<span class="br0">&#91;</span>i<span class="br0">&#93;</span>.<span class="me1">length</span><span class="sy0">;</span> j<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">          <span class="co1">//Estem a la darrera posició de la fila?</span></div></li><li class="li1"><div class="de1">        <span class="kw1">if</span><span class="br0">&#40;</span>j <span class="sy0">!=</span> <span class="br0">&#40;</span>arrayBidiNotes<span class="br0">&#91;</span>i<span class="br0">&#93;</span>.<span class="me1">length</span> <span class="sy0">-</span> <span class="nu0">1</span><span class="br0">&#41;</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">          <span class="co1">//Si no és la darrera posició, anem acumulant valors.</span></div></li><li class="li1"><div class="de1">          sumaNotes <span class="sy0">=</span> sumaNotes <span class="sy0">+</span> arrayBidiNotes<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#91;</span>j<span class="br0">&#93;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">        <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">          <span class="co1">//Si ho és, cal escriure la mitjana.</span></div></li><li class="li1"><div class="de1">          <span class="co1">//Hi ha tantes notes com la mida d'una fila − 1.</span></div></li><li class="li1"><div class="de1">          <span class="kw4">float</span> notaFinal <span class="sy0">=</span>  sumaNotes<span class="sy0">/</span><span class="br0">&#40;</span>arrayBidiNotes<span class="br0">&#91;</span>i<span class="br0">&#93;</span>.<span class="me1">length</span> <span class="sy0">-</span> <span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">          arrayBidiNotes<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#91;</span>j<span class="br0">&#93;</span> <span class="sy0">=</span> notaFinal<span class="sy0">;</span></div></li><li class="li1"><div class="de1">          <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;L'estudiant &quot;</span> <span class="sy0">+</span> i <span class="sy0">+</span> <span class="st0">&quot; ha tret &quot;</span> <span class="sy0">+</span> notaFinal <span class="sy0">+</span> <span class="st0">&quot;.&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">          <span class="co1">//S'actualitza la suma de mitjanes de tots els estudiants.</span></div></li><li class="li1"><div class="de1">          sumaFinals <span class="sy0">=</span> sumaFinals <span class="sy0">+</span> notaFinal<span class="sy0">;</span></div></li><li class="li1"><div class="de1">        <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">      <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">      <span class="co1">//Fi del tractament d'una fila.</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">    <span class="co1">//Fi del tractament de totes les files.</span></div></li><li class="li1"><div class="de1">    <span class="co1">//Es calcula la mitjana: suma de notes finals dividit entre nombre d'estudiants.</span></div></li><li class="li1"><div class="de1">    <span class="kw4">float</span> mitjanaFinal <span class="sy0">=</span> sumaFinals <span class="sy0">/</span> arrayBidiNotes.<span class="me1">length</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;La nota mitjana del curs és &quot;</span> <span class="sy0">+</span> mitjanaFinal<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

</div>

<h4><a id="cerca" >Cerca</a></h4>
<div class="level4">

<p>
En <em>arrays</em> bidimensionals la cerca també implica haver de gestionar dos índexs per anar avançant per files i per columnes. Ara bé, aquest cas és especialment interessant, ja que en assolir l’objectiu cal sortir de les dues estructures de repetició imbricades. Per tant, no es pot usar simplement una sentència <code>break</code>, ja que només serveix per sortir d’un únic bucle. Cal tenir un semàfor que s’avaluï en tots dos bucles.
</p>

<p>
Per exemple, suposeu que el programa de gestió de notes vol cercar si algun estudiant ha tret un 0 en algun dels exercicis al llarg del curs. Caldrà anar mirant fila per fila totes les notes de cada estudiant, i quan es trobi un 0, acabar immediatament la cerca. El codi per fer-ho, basant-se exclusivament en un semàfor que diu si ja s’ha trobat el valor, seria el següent. Proveu-lo al vostre entorn de treball.
</p>

<p>

</p>

<p>
En un cas com aquest, cal anar amb molt de compte a inicialitzar i incrementar correctament l’índex per recórrer la posició de cada fila (és a dir, que mira cada columna), ja que en usar una sentència <code>while</code> en lloc de <code>for</code> no es fa automàticament. Si us despisteu i no ho feu, el valor serà incorrecte per a successives iteracions del bucle que recorre les files i el programa no actuarà correctament.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="co1">//Un programa que cerca un 0 entre els valors d'un array bidimensional.</span></div></li><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> CercaBidi <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a><span class="br0">&#91;</span><span class="br0">&#93;</span> args<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <span class="co1">//Dades de les notes.</span></div></li><li class="li1"><div class="de1">    <span class="kw4">float</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="br0">&#93;</span> arrayBidiNotes <span class="sy0">=</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">                               <span class="br0">&#123;</span> 4.5f, 6f  , 5f  , 8f  <span class="br0">&#125;</span>,</div></li><li class="li1"><div class="de1">                               <span class="br0">&#123;</span> 10f , 8f  , 7.5f, 9.5f<span class="br0">&#125;</span>,</div></li><li class="li1"><div class="de1">                               <span class="br0">&#123;</span> 3f  , 2.5f, 0f  , 6f  <span class="br0">&#125;</span>,</div></li><li class="li1"><div class="de1">                               <span class="br0">&#123;</span> 6f  , 8.5f, 6f  , 4f  <span class="br0">&#125;</span>,</div></li><li class="li1"><div class="de1">                               <span class="br0">&#123;</span> 9f  , 7.5f, 7f  , 8f  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">                               <span class="br0">&#125;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    <span class="co1">//Mirarem quin estudiant ha tret el 0.</span></div></li><li class="li1"><div class="de1">    <span class="co1">//Inicialitzem a un valor invàlid (de moment, cap estudiant té un 0)</span></div></li><li class="li1"><div class="de1">    <span class="co1">//Aquest valor fa de semàfor. Si pren un valor diferent, cal acabar la cerca.</span></div></li><li class="li1"><div class="de1">    <span class="kw4">int</span> estudiant <span class="sy0">=</span> <span class="sy0">-</span><span class="nu0">1</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    <span class="co1">//&quot;i indica la fila.</span></div></li><li class="li1"><div class="de1">    <span class="kw4">int</span> i <span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    <span class="co1">//Es va fila per fila.</span></div></li><li class="li1"><div class="de1">    <span class="co1">//S'acaba si s'ha trobat un 0 o si ja s'ha cercat a totes les files.</span></div></li><li class="li1"><div class="de1">    <span class="kw1">while</span> <span class="br0">&#40;</span><span class="br0">&#40;</span>estudiant <span class="sy0">==</span> <span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">&amp;&amp;</span><span class="br0">&#40;</span>i <span class="sy0">&lt;</span> arrayBidiNotes.<span class="me1">length</span><span class="br0">&#41;</span> <span class="br0">&#41;</span><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <span class="co1">//&quot;j indica la &quot;columna&quot;.</span></div></li><li class="li1"><div class="de1">      <span class="kw4">int</span> j <span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      <span class="co1">//Se cerca en una fila.</span></div></li><li class="li1"><div class="de1">      <span class="co1">//S'acaba si s'ha trobat un 0 o si ja s'ha cercat a totes les posicions.</span></div></li><li class="li1"><div class="de1">      <span class="kw1">while</span> <span class="br0">&#40;</span><span class="br0">&#40;</span>estudiant <span class="sy0">==</span> <span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">&amp;&amp;</span><span class="br0">&#40;</span>j <span class="sy0">&lt;</span> arrayBidiNotes<span class="br0">&#91;</span>i<span class="br0">&#93;</span>.<span class="me1">length</span><span class="br0">&#41;</span> <span class="br0">&#41;</span><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">        <span class="co1">//Aquesta nota és un 0?</span></div></li><li class="li1"><div class="de1">        <span class="kw1">if</span>  <span class="br0">&#40;</span>arrayBidiNotes<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#91;</span>j<span class="br0">&#93;</span> <span class="sy0">==</span> 0f<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">          <span class="co1">//L'índex que diu l'estudiant és el de la fila.</span></div></li><li class="li1"><div class="de1">          estudiant <span class="sy0">=</span> i<span class="sy0">;</span></div></li><li class="li1"><div class="de1">        <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">        <span class="co1">//S'avança a la posició següent dins de la fila.</span></div></li><li class="li1"><div class="de1">        j<span class="sy0">++;</span></div></li><li class="li1"><div class="de1">      <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">      <span class="co1">//Fi del tractament d'una fila.</span></div></li><li class="li1"><div class="de1">      <span class="co1">//S'avança a la fila següent.</span></div></li><li class="li1"><div class="de1">      i<span class="sy0">++;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">    <span class="co1">//Fi del tractament de totes les files.</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span>estudiant <span class="sy0">==</span> <span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Cap estudiant no té un 0.&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;L'estudiant &quot;</span> <span class="sy0">+</span> estudiant <span class="sy0">+</span> <span class="st0">&quot; té un 0.&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

</div>

<h3><a id="arrays_de_mes_de_dues_dimensions" >&quot;Arrays&quot; de més de dues dimensions</a></h3>
<div class="level3">

<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/ic10m03u3_06.png" class="imgB" title="Un &quot;array&quot; amb tres dimensions: el cub de Rubik" alt="Un &quot;array&quot; amb tres dimensions: el cub de Rubik" /></li><li><small>Un &quot;array&quot; amb tres dimensions: el cub de Rubik</small></li>
</ul></div>

</p>

<p>
El cas dels <em>arrays</em> bidimensionals és el més comú, però res no impedeix que el nombre d’índexs necessaris per situar una posició sigui també més gran de dos, d’un valor arbitrari. Un <em>array</em> de tres dimensions encara es pot visualitzar com una estructura tridimensional en forma de cub, però dimensions superiors ja requereixen més grau d’abstracció, i per això només es presentaran, sense entrar en més detall. 
</p>

<p>
Conceptualment, es pot considerar que defineixen una estructura d’<em>arrays</em> imbricats a diferents nivells com el que es mostra a la <span class="figref"><a href="#Figure5"><span>figura</span></a></span>. Cada nivell correspon a una dimensió diferent.
</p>
<div class="iocfigure"><a name="Figure5"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Un “array” multidimensional: “arrays” dins “arrays” dins “arrays”…

</figcaption><img src="../media/ic10m03u3_07.png" alt="" /></figure>
</div>
<p>
Cada índex individual identifica una casella de l’<em>array</em> triat d’una dimensió determinada, de manera que el conjunt d’índexs serveix com a coordenada per establir el valor final (que ja no serà un altre <em>array</em>) al qual es vol accedir. La <span class="figref"><a href="#Figure6"><span>figura</span></a></span> en mostra un exemple de quatre dimensions.
</p>
<div class="iocfigure"><a name="Figure6"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Accés a un “array” de quatre dimensions (calen 4 índexs)

</figcaption><img src="../media/ic10m03u3_08.png" alt="" /></figure>
</div>
<p>
Tot i que aquesta estructura sembla força complexa, no és gaire diferent d’una estructura de carpetes i de fitxers, en què les carpetes prenen el paper dels <em>arrays</em> i els fitxers, el de les dades que es volen desar. Podeu tenir una única carpeta per emmagatzemar totes les fotos, que seria el cas d’un únic nivell d’<em>array</em> (o sigui, els <em>arrays</em> tal com s’han vist fins ara). Però també les podríeu organitzar en una carpeta que al seu torn conté altres carpetes, dins les quals es desen diferents fotos. Això seria equivalent a disposar de dos nivells d’<em>arrays</em>. I així podríeu anar creant una estructura de carpetes amb tants nivells com volguéssiu. Per triar un fitxer n’hi ha prou a saber en quin ordre cal anar obrint les carpetes fins arribar a la carpeta final, on ja només us cal l’ordre del fitxer.
</p>

<p>
Estenem les restriccions que compleixen els <em>arrays</em> bidireccionals al cas dels <em>arrays</em> multidimensionals:
</p>
<ul>
<li class="level1"><div class="li"> En una mateixa dimensió, tots els <em>arrays</em> tindran <strong>exactament</strong> la mateixa mida.</div>
</li>
<li class="level1"><div class="li"> El tipus de dada que es desa a les posicions de la darrera dimensió serà el mateix per a tots. Per exemple, no es poden tenir reals i enters barrejats.</div>
</li>
</ul>

<p>
En llenguatge Java, per afegir noves dimensions per sobre de la segona, cal anar afegint claus <code>[]</code> addicionals a la declaració, una per a cada dimensió. 
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">paraulaClauTipus<span class="br0">&#91;</span><span class="br0">&#93;</span>...<span class="br0">&#91;</span><span class="br0">&#93;</span> identificadorVariable <span class="sy0">=</span> <span class="kw1">new</span> paraulaClauTipus<span class="br0">&#91;</span>midaDim1<span class="br0">&#93;</span>...<span class="br0">&#91;</span>midaDimN<span class="br0">&#93;</span><span class="sy0">;</span></div></li></ol></pre>

<p>
Per exemple, per declarar amb valors per defecte un <em>array</em> de quatre dimensions, la primera de mida 5, la segona de 10, la tercera de 4 i la quarta de 20, caldria la instrucció:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">  ...</div></li><li class="li1"><div class="de1">  <span class="kw4">int</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="br0">&#93;</span> arrayQuatreDimensions <span class="sy0">=</span> <span class="kw1">new</span> <span class="kw4">int</span><span class="br0">&#91;</span><span class="nu0">5</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="nu0">10</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="nu0">4</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="nu0">20</span><span class="br0">&#93;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">  ...</div></li></ol></pre>

<p>
L’accés seria anàleg als <em>arrays</em> bidimensionals, però usant quatre índexs envoltats per parells de claus.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">  ...</div></li><li class="li1"><div class="de1">  <span class="kw4">int</span> valor <span class="sy0">=</span> arrayQuatreDimensions<span class="br0">&#91;</span><span class="nu0">2</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="nu0">20</span><span class="br0">&#93;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">  ...</div></li></ol></pre>

<p>
En qualsevol cas, es tracta d’estructures complexes que no se solen usar, excepte en casos molt específics.
</p>

</div>

<h2><a id="tractament_de_fitxers_xml" >Tractament de fitxers XML</a></h2>
<div class="level2">

<p>
Una de les problemàtiques més importants amb què haureu de tractar quan utilitzeu fitxers per desar o recuperar les dades dels vostres programes és escollir de quina manera s’estructuren dins el fitxer. En quin format i en quin ordre estan escrites les dades, de manera que sempre que es llegeixin o s’escriguin és imprescindible seguir exactament aquest format. En cas contrari, en el millor dels casos, es produirà un error, i en el pitjor, les dades llegides o escrites seran totalment incorrectes. Això és un problema ja que, a menys que es disposi de documentació detallada, és molt difícil que, només amb un fitxer donat, es pugui esbrinar amb detall quina mena de dades conté. Per intentar pal·liar aquest problema, va sorgir el llenguatge XML.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
<strong>XML</strong> són les inicials en anglès d’<strong>eXtensible Markup Language</strong> o llenguatge de marques extensible.
</p>
</div></div><div class="iocnote"><div class="ioccontent">
<p>
Aquests materials han estan generats usant un llenguatge de marcat.
</p>
</div></div>
<p>
Un llenguatge de marques és un conjunt de paraules i de símbols per descriure la identitat o la funció dels components d’un document (per exemple, “aquest és un paràgraf”, “aquesta és una llista”, “això és el títol d’aquesta figura”…). Aquestes marques permeten facilitar el processament de les dades a tractar dins el fitxer. Per exemple, transformar el document a diferents formats de la sortida de pantalla, mitjançant un full d’estil.
</p>

<p>
Alguns llenguatges de marques (especialment els utilitzats en processadors de text) només descriuen les aparences al seu lloc (“això és cursiva”, “això és negreta”…), de manera que aquests sistemes només es poden utilitzar per a la visualització, i per poca cosa més. Un dels llenguatges més populars de marcat, d’acord a aquesta definició, és <acronym title="HyperText Markup Language">HTML</acronym>, el llenguatge emprat per codificar pàgines web. XML permet dur aquesta idea més enllà de la visualització i facilitar la comprensió de qualsevol document de dades en els vostres programes, independentment de la seva funció, no només per indicar com s’han de representar visualment.
</p>

<p>
Per veure clarament aquest fet, el millor és mostrar ja directament un exemple d’un mateix conjunt de dades relatives a un objecte estructurades sense XML i amb XML, sense ni tan sols haver presentat abans com s’estructura un document XML. D’aquesta manera, sense cap coneixement previ, encara queden més patents els seus objectius i quins avantatges presenta. En el primer cas, s’ha triat representar els valors de l’objecte com a text separat per comes:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1">Sense XML:</div></li><li class="li1"><div class="de1">  Producte 1, 1, 10.0, 4, true</div></li><li class="li1"><div class="de1">Amb XML:</div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;Producte</span> <span class="re0">id</span>=<span class="st0">&quot;1&quot;</span> <span class="re0">aLaVenda</span>=<span class="st0">&quot;true&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">  <span class="sc3"><span class="re1">&lt;Nom<span class="re2">&gt;</span></span></span>Producte 1<span class="sc3"><span class="re1">&lt;/Nom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">  <span class="sc3"><span class="re1">&lt;Preu<span class="re2">&gt;</span></span></span>10.0<span class="sc3"><span class="re1">&lt;/Preu<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">  <span class="sc3"><span class="re1">&lt;Estoc<span class="re2">&gt;</span></span></span>4<span class="sc3"><span class="re1">&lt;/Estoc<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/Producte<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Atès el primer cas, sense tenir cap documentació prèvia, ¿és possible esbrinar a què es refereixen exactament els valors “4” o “1”? Quin és el nom de la classe a què pertany l’objecte? La veritat és que caldria tenir molta imaginació, per no dir directament que és impossible. XML es basa en la idea que a cada dada dins el document se li afegeix una informació extra (les marques) que, si s’ha triat estratègicament, permet saber exactament el seu propòsit. El document generat és autoexplicatiu.
</p>

<p>

</p>

<p>
Com es pot veure de l’exemple anterior, XML i <acronym title="HyperText Markup Language">HTML</acronym> són molt semblants. Si mai heu vist el codi font d’una pàgina web, XML us pot resultar familiar, encara que sigui el primer cop que veieu un document XML. Això no és casualitat, ja que ambdós són variacions d’un llenguatge de marcat més genèric anomenat SGML (<em>Standard Generalized Markup Language</em>, o llenguatge de marques estàndard generalitzat). Ara bé, entre <acronym title="HyperText Markup Language">HTML</acronym> i XML hi ha algunes diferències importants. Entre les més destacades hi ha les següents:
</p>
<ul>
<li class="level1"><div class="li"> <acronym title="HyperText Markup Language">HTML</acronym> serveix únicament per indicar com representar visualment unes dades (normalment a navegadors web). XML serveix per a qualsevol tipus de processament de dades.</div>
</li>
<li class="level1"><div class="li"> En <acronym title="HyperText Markup Language">HTML</acronym> la llista de marques possibles ja està prefixada. En XML no; vosaltres us podeu inventar les que vulgueu.</div>
</li>
<li class="level1"><div class="li"> <acronym title="HyperText Markup Language">HTML</acronym> sol tenir una sintaxi més laxa, on alguns errors en el format de les marques no afecten el seu processament. XML és molt més estricte.</div>
</li>
</ul>

</div>

<h3><a id="estructura_d_un_document_xml" >Estructura d&#039;un document XML</a></h3>
<div class="level3">

<p>
Un document XML emmagatzema un conjunt de dades d’acord a un seguit de marques que permeten identificar de manera senzilla el propòsit d’aquestes dades. Ara bé, les marques són definides pel seu creador, d’acord a la mena d’informació que vol emmagatzemar. Cada aplicació usarà documents XML amb marques diferents segons el que li resulti més convenient. Per tant, serà vostra la tasca de definir-les, usant noms adients que permetin identificar amb claredat la funció de les dades emmagatzemades.
</p>

<p>
Tot i que documents d’aplicacions diferents, com és d’esperar, tindran un format diferent, la seva estructura serà semblant, ja que tots han de seguir l’estructura i les regles bàsiques que marca el llenguatge XML. Des d’un punt de vista genèric, tot document XML es correspon a una estructura jeràrquica (en forma d’arbre), on es parteix d’un node arrel i d’aquest sorgeixen nodes fills que es van propagant fins arribar a nodes fulla, o els darrers dins la jerarquia. Els tipus de nodes més importants són els següents:
</p>
<ul>
<li class="level1"><div class="li"> De text, que contenen la informació final a emmagatzemar. La majoria de nodes fulla solen ser d’aquest tipus. Es representen dins el document directament usant una cadena de text que representa les dades en qüestió.</div>
</li>
<li class="level1"><div class="li"> Elements, que defineixen agrupacions lògiques de continguts caracteritzades per un nom. Es representen usant una parella de marques d’inici i de fi, amb format <code>&lt;NomElement&gt;…&lt;/NomElement&gt;</code>. </div>
</li>
<li class="level1"><div class="li"> Atributs, parelles de nom i de valor, sempre associades a un element concret. S’escriuen dins la marca d’inici de l’element, usant el format <code>nom=“valor”</code>. Si, en un element, n’hi ha més d’un, se separen amb un espai en blanc. </div>
</li>
<li class="level1"><div class="li"> Sovint, a l’inici del document, s’hi afegeix pròleg, en realitat opcional, que dóna certa informació sobre el format del fitxer (versió, codificació…).</div>
</li>
</ul>

<p>
Els nodes d’un document XML han de seguir unes normes en la seva estructura perquè es consideri que el document és correcte (o ben format). Primer de tot, només hi pot haver un únic element arrel. D’altra banda, atès qualsevol element, dins seu, entre el símbol d’inici i final, només hi poden haver, o altres elements complets, ja sigui un o molts, o text. De fet, aquesta inclusió és el que defineix la relació jeràrquica entre elements (pare = qui inclou, fills = els que estan inclosos). Finalment, les marques d’inici i de final dels diferents elements sempre han d’estar correctament niuades. Per exemple, el següent cas seria incorrecte d’acord a aquesta darrera norma:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;Producte<span class="re2">&gt;</span></span><span class="re1">&lt;Nom<span class="re2">&gt;</span></span><span class="re1">&lt;/Producte<span class="re2">&gt;</span></span><span class="re1">&lt;/Nom<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Bàsicament, les normes es poden resumir així: que tots els elements han de conformar sempre una estructura jeràrquica correcta. La <span class="figref"><a href="#Figure7"><span>figura</span></a></span> mostra la representació jeràrquica del document XML que es mostra tot seguit.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">&quot;1.0&quot;</span> <span class="re0">encoding</span>=<span class="st0">&quot;UTF-8&quot;</span> <span class="re0">standalone</span>=<span class="st0">&quot;no&quot;</span><span class="re2">?&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;LlistaProductes</span> <span class="re0">data</span>=<span class="st0">&quot;23/11/2011&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;Producte</span> <span class="re0">id</span>=<span class="st0">&quot;1&quot;</span> <span class="re0">aLaVenda</span>=<span class="st0">&quot;true&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">  <span class="sc3"><span class="re1">&lt;Nom<span class="re2">&gt;</span></span></span>Producte 1<span class="sc3"><span class="re1">&lt;/Nom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">  <span class="sc3"><span class="re1">&lt;Preu<span class="re2">&gt;</span></span></span>10.0<span class="sc3"><span class="re1">&lt;/Preu<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">  <span class="sc3"><span class="re1">&lt;Estoc<span class="re2">&gt;</span></span></span>4<span class="sc3"><span class="re1">&lt;/Estoc<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/Producte<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;Producte</span> <span class="re0">id</span>=<span class="st0">&quot;2&quot;</span> <span class="re0">aLaVenda</span>=<span class="st0">&quot;true&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">  <span class="sc3"><span class="re1">&lt;Nom<span class="re2">&gt;</span></span></span>Producte 2<span class="sc3"><span class="re1">&lt;/Nom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">  <span class="sc3"><span class="re1">&lt;Preu<span class="re2">&gt;</span></span></span>15.0<span class="sc3"><span class="re1">&lt;/Preu<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">  <span class="sc3"><span class="re1">&lt;Estoc<span class="re2">&gt;</span></span></span>10<span class="sc3"><span class="re1">&lt;/Estoc<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/Producte<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;Producte</span> <span class="re0">id</span>=<span class="st0">&quot;3&quot;</span> <span class="re0">aLaVenda</span>=<span class="st0">&quot;false&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">  <span class="sc3"><span class="re1">&lt;Nom<span class="re2">&gt;</span></span></span>Producte 3<span class="sc3"><span class="re1">&lt;/Nom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">  <span class="sc3"><span class="re1">&lt;Preu<span class="re2">&gt;</span></span></span>25.0<span class="sc3"><span class="re1">&lt;/Preu<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">  <span class="sc3"><span class="re1">&lt;Estoc<span class="re2">&gt;</span></span></span>0<span class="sc3"><span class="re1">&lt;/Estoc<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/Producte<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/LlistaProductes<span class="re2">&gt;</span></span></span></div></li></ol></pre>
<div class="iocfigure"><a name="Figure7"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Estructura jeràrquica dels nodes d’un document XML

</figcaption><img src="../media/ic10m03u3_09.png" alt="" /></figure>
</div>
<p>
Algú una mica observador pot adonar-se que, tot plegat, és molt semblant a un mapa d’objectes. I és que XML i orientació a objectes són dos temes que, tot i que en realitat de manera casual, semblen fets l’un per l’altre.
</p>

</div>

<h3><a id="lectura_de_fitxers_xml" >Lectura de fitxers XML</a></h3>
<div class="level3">

<p>
Atès que l’estructura i la sintaxi d’un document XML és sempre la mateixa exactament, només varia el nom i els valors dels nodes, és possible dissenyar mecanismes genèrics per llegir-lo. El codi no ha de ser <em>ad hoc</em> depenent de cada tipus d’aplicació. Això és un gran avantatge a l’hora de fer programes.
</p>

<p>
Existeixen diferents mètodes per fer el tractament de documents XML. Aquest apartat se centra només en l’anomenat DOM (<em>Document Object Model</em>, o model d’objectes de document), que sol ser el més popular i senzill d’usar quan la quantitat de dades contingudes al document és moderada. Per tractar documents molt grans és preferible usar altres sistemes, com per exemple l’anomenat SAX (<em>Simple <acronym title="Application Programming Interface">API</acronym> for XML</em>, o <acronym title="Application Programming Interface">API</acronym> simple per a XML).
</p>

<p>
La senzillesa del DOM recau en el fet que es basa a llegir qualsevol document XML i processar-lo per convertir-lo en una estructura d’objectes a memòria, el model DOM, idèntica a l’estructura del document original, exactament tal com s’ha presentat. Diferents objectes de tipus <code>Node</code> estan entrellaçats entre si, contenint un seguit de mètodes que permeten consultar els seus noms, valors o altres nodes dins l’estructura, de manera que és possible fer-hi recorreguts. El procés de creació d’aquest model sempre és igual independentment del contingut del fitxer XML, pel que es pot generalitzar. Ara bé, un cop es disposa del model, ja és tasca vostra fer recorreguts i indicar què cal cercar, ja que això dependrà de cada aplicació concreta.
</p>

</div>

<h4><a id="creacio_i_invocacio_del_parser_dom_java" >Creació i invocació del parser DOM Java</a></h4>
<div class="level4">

<p>
Dins les darreres versions, Java ja incorpora un seguit de classes auxiliars que permeten processar un document XML automàticament usant el model DOM. No és necessari que vosaltres tracteu el text que hi ha dins un fitxer XML. El resultat d’aquest procés proporciona una estructura d’objectes d’acord al model DOM, que sí que haureu de recórrer i analitzar per dur a terme la tasca encomanada. Normalment, extreure’n certa informació.
</p>

<p>
Per poder començar a treballar, per tant, primer cal llegir el fitxer i processar-lo, mitjançant un processador XML. Dins el <em>package</em> <code>javax.xml.parsers</code> es poden trobar les classes que permeten dur a terme aquesta tasca. Per al cas del model DOM, la classe que us interessa és <code>DocumentBuilder</code> (constructor de documents). Aquesta classe té la particularitat, però, que no es pot instanciar directament, sinó que cal emprar una classe auxiliar anomenada <code>DocumentBuilderFactory</code> per obtenir-ne objectes.
</p>

<p>
Un cop conegudes les classes que hi intervenen, el codi per poder obtenir un processador i llegir un fitxer XML sempre ve a ser el mateix, que es mostra tot seguit:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">import</span> <span class="co2">javax.xml.parsers.*</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">import</span> <span class="co2">org.w3c.dom.*</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="co1">//...</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  DocumentBuilderFactory builderFactory <span class="sy0">=</span> DocumentBuilderFactory.<span class="me1">newInstance</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+document"><span class="kw3">Document</span></a> document <span class="sy0">=</span> <span class="kw2">null</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">try</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    DocumentBuilder  builder <span class="sy0">=</span> builderFactory.<span class="me1">newDocumentBuilder</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+file"><span class="kw3">File</span></a> f <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+file"><span class="kw3">File</span></a> <span class="br0">&#40;</span><span class="st0">&quot;elMeuFitxer.xml&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    document <span class="sy0">=</span> builder.<span class="me1">parse</span><span class="br0">&#40;</span>f<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span> <span class="kw1">catch</span> <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+exception"><span class="kw3">Exception</span></a> ex<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Error en la lectura del document: &quot;</span> <span class="sy0">+</span> ex<span class="br0">&#41;</span><span class="sy0">;</span>  </div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li></ol></pre>
<div class="iocnote"><div class="ioccontent">
<p>
Estrictament, <code>Document</code> és una interfície. La instància creada pertany a la classe <code>Node</code>.
</p>
</div></div>
<p>
A l’hora de llegir un document XML, és molt important controlar excepcions, ja que a part dels possibles errors que poden succeir en accedir al sistema de fitxers (el fitxer no existeix, hi ha un error al sistema d’entrada/sortida, el fitxer està protegit…), també cal afegir aquells vinculats a la sintaxi del mateix document. Si el document no és un fitxer XML o no en segueix de manera estricta la sintaxi, també es produeix una excepció i se n’interromp el processament.
</p>

<p>
Si no ha succeït cap error, a la variable “document” es disposa d’un objecte de la classe <code>org.w3c.dom.Document</code>, a partir del qual es pot accedir a tota l’estructura d’objectes (nodes i atributs) que conformen les diferents parts d’un document XML.
</p>

</div>

<h4><a id="objectes_dins_el_model_dom_java" >Objectes dins el model DOM Java</a></h4>
<div class="level4">

<p>
L’objecte <code>Document</code> representa un document complet XML. Ara bé, per analitzar el contingut del fitxer, s’ha d’obtenir el contingut dels seus nodes. Cal tenir en compte que tot objecte DOM pot contenir una gran quantitat de diferents nodes connectats en una estructura d’arbre. De totes maneres, el primer pas sempre és l’obtenció de l’element arrel, a partir del qual es poden iniciar els recorreguts:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+element"><span class="kw3">Element</span></a> arrel <span class="sy0">=</span> document.<span class="me1">getDocumentElement</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>
<div class="iocnote"><div class="ioccontent">
<p>
A la documentació oficial de Java podeu trobar la llista detallada de tots els mètodes disponibles als elements DOM.
</p>
</div></div>
<p>
Fixeu-vos que aquesta crida retorna un objecte de tipus <code>Element</code> (un element del document XML). Sobre un element es poden cridar diversos mètodes. Els més típics són:
</p>
<ul>
<li class="level1"><div class="li"> <code>String getTagName()</code>, consulta el nom de l’element.</div>
</li>
<li class="level1"><div class="li"> <code>String getAttribute(String name)</code>, donat un nom d’un atribut, si aquest existeix a l’element, retorna el seu valor.</div>
</li>
<li class="level1"><div class="li"> <code>NodeList getElementsByTagName(String name)</code>, proporciona una llista de tots els elements descendents (fills, néts…), partint des d’aquest element, donat nom concret. Es pot usar “*” com a comodí per cercar-los tots. Si no n’hi ha cap, la llista és buida. </div>
</li>
</ul>

<p>
A l’hora de treballar amb un model DOM és important anar amb compte amb la jerarquia d’herència de les diferents classes que el conformen, ja que si bé tots els nodes de l’arbre són objectes <code>Node</code> (superclasse), només alguns són <code>Element</code> (subclasse). Els nodes que són atributs o text no pertanyen a aquesta classe. 
</p>
<div class="iocnote"><div class="ioccontent">
<p>
La llista completa de constants amb tipus de node la trobareu a la documentació de la classe <code>Node</code>
</p>
</div></div>
<p>
En el cas de la classe <code>Node</code>, alguns mètodes interessants per manipular-los són:
</p>
<ul>
<li class="level1"><div class="li"> <code>getNodeType()</code>, retorna el tipus de node (element, text, atribut…). La classe <code>Node</code> disposa de tot un seguit de constants amb les quals es pot comparar el resultat d’invocar aquest mètode per discriminar un node per tipus. Per exemple, <code>Node.ATTRIBUTE_NODE</code> indica que és un node del tipus atribut.</div>
</li>
<li class="level1"><div class="li"> <code>NodeList getChildNodes(String name)</code>, proporciona una llista de nodes fill d’aquest element amb un nom concret. Si no n’hi ha cap, la llista és buida. Cal anar amb molt de compte amb aquest mètode, ja que la llista és de nodes, no d’elements, per la qual cosa també pot incloure atributs i nodes de text.</div>
</li>
</ul>

<p>
Recordeu que <code>Element</code> hereta de <code>Node</code> i, per tant, tots aquests mètodes també es poden invocar des d’un objecte d’aquest tipus. També val la pena fer èmfasi en una diferència important entre <code>getChildNodes</code> i <code>getElementsByTagName</code> que sovint es passa per alt. El primer només consulta els nodes fills immediatament inferiors, mentre que el segon recorre tot el subarbre cercant elements amb un nom concret, no només els fills. Aquest comportament s’esquematitza a la <span class="figref"><a href="#Figure8"><span>figura</span></a></span>, on es mostra el resultat d’invocar els dos mètodes sobre l’element arrel del document.
</p>
<div class="iocfigure"><a name="Figure8"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Diferències d’invocar getChildNodes i getElementsByTagName.

</figcaption><img src="../media/ic10m03u3_10.png" alt="" /></figure>
</div>
<p>
A mode d’exemple, el següent codi permet recórrer un fitxer XML amb una llista de productes i comptar quants n’hi ha a la venda. Per veure les particularitats dels mètodes <code>getElementsByTagName</code> i <code>getChildNodes</code>, es mostra com fer-ho amb cadascun dels mètodes. Fixeu-vos com, en el primer cas, es pot garantir que els nodes recuperats a la llista són sempre objectes <code>Element</code>, mentre que en el segon cas no es pot donar per segur, ja que l’element LlistaProductes també té un atribut, i cal discriminar.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">  <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+element"><span class="kw3">Element</span></a> e <span class="sy0">=</span> document.<span class="me1">getDocumentElement</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  NodeList l <span class="sy0">=</span> e.<span class="me1">getElementsByTagName</span><span class="br0">&#40;</span><span class="st0">&quot;Producte&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> l.<span class="me1">getLength</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+element"><span class="kw3">Element</span></a> elem <span class="sy0">=</span> <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+element"><span class="kw3">Element</span></a><span class="br0">&#41;</span>l.<span class="me1">item</span><span class="br0">&#40;</span>i<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> venda <span class="sy0">=</span> elem.<span class="me1">getAttribute</span><span class="br0">&#40;</span><span class="st0">&quot;aLaVenda&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="st0">&quot;true&quot;</span>.<span class="me1">equals</span><span class="br0">&#40;</span> venda<span class="br0">&#41;</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      nreArticles<span class="sy0">++;</span>  </div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Articles a la venda: &quot;</span> <span class="sy0">+</span> nreArticles<span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>
<pre class="code java"><ol><li class="li1"><div class="de1">  <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+element"><span class="kw3">Element</span></a> e <span class="sy0">=</span> document.<span class="me1">getDocumentElement</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="kw4">int</span> nreArticles <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  NodeList l <span class="sy0">=</span> e.<span class="me1">getChildNodes</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> l.<span class="me1">getLength</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    Node n <span class="sy0">=</span> l.<span class="me1">item</span><span class="br0">&#40;</span>i<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">if</span> <span class="br0">&#40;</span>n.<span class="me1">getNodeType</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">==</span> Node.<span class="me1">ELEMENT_NODE</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+element"><span class="kw3">Element</span></a> elem <span class="sy0">=</span> <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+element"><span class="kw3">Element</span></a><span class="br0">&#41;</span>n<span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> venda <span class="sy0">=</span> elem.<span class="me1">getAttribute</span><span class="br0">&#40;</span><span class="st0">&quot;aLaVenda&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">if</span> <span class="br0">&#40;</span><span class="st0">&quot;true&quot;</span>.<span class="me1">equals</span><span class="br0">&#40;</span> venda<span class="br0">&#41;</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">        nreArticles<span class="sy0">++;</span>  </div></li><li class="li1"><div class="de1">      <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Articles a la venda: &quot;</span> <span class="sy0">+</span> nreArticles<span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>

</div>

<h4><a id="extraccio_de_text_d_un_element_dom" >Extracció de text d&#039;un element DOM</a></h4>
<div class="level4">

<p>
De fet, la manera com s’estructuren els diferents tipus de nodes en un model DOM fa que el mecanisme per obtenir el text que hi ha dins un element DOM sigui una mica més complicat del que pot semblar a simple vista, o si més no del que ens agradaria que fos. Val la pena estudiar aquest fet amb detall. El punt més important és que un text dins un element pot estar dispers en diversos nodes de tipus textos dins el model DOM. Per tant, per obtenir tot el text, cal obtenir tots els nodes fill d’un element (usant <code>getChildNodes</code>), veure quins són de text, i concatenar el contingut de cadascun d’ells. 
</p>
<div class="iocnote"><div class="ioccontent">
<p>
Dins la classe <code>Node</code>, les constants que identifiquen nodes que contenen text són <code>CDATA_NODE</code> i <code>TEXT_NODE</code>.
</p>
</div></div>
<p>
Vegem-ne un exemple, en què es llisten els noms dels productes que hi ha al document.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">  <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+element"><span class="kw3">Element</span></a> e <span class="sy0">=</span> document.<span class="me1">getDocumentElement</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="co1">//Obtenir tots els nodes del document anomenats &quot;nom&quot;</span></div></li><li class="li1"><div class="de1">  NodeList llistaElems <span class="sy0">=</span> e.<span class="me1">getElementsByTagName</span><span class="br0">&#40;</span><span class="st0">&quot;Nom&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="co1">//Recorregut d'elements anomenats &quot;Nom&quot;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> llistaElems.<span class="me1">getLength</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+element"><span class="kw3">Element</span></a> elem <span class="sy0">=</span> <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+element"><span class="kw3">Element</span></a><span class="br0">&#41;</span>llistaElems.<span class="me1">item</span><span class="br0">&#40;</span>i<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    NodeList llistaFills <span class="sy0">=</span> elem.<span class="me1">getChildNodes</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="co1">//Recorregut de nodes fill d'un element (text, atributs, etc.)</span></div></li><li class="li1"><div class="de1">    <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> text <span class="sy0">=</span> <span class="st0">&quot;&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> j <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> j <span class="sy0">&lt;</span> llistaFills.<span class="me1">getLength</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> j<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      Node n <span class="sy0">=</span> llistaFills.<span class="me1">item</span><span class="br0">&#40;</span>j<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="co1">//Mirar si els nodes són de text</span></div></li><li class="li1"><div class="de1">      <span class="kw1">if</span> <span class="br0">&#40;</span> <span class="br0">&#40;</span>n.<span class="me1">getNodeType</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">==</span> Node.<span class="me1">TEXT_NODE</span><span class="br0">&#41;</span><span class="sy0">||</span></div></li><li class="li1"><div class="de1">          <span class="br0">&#40;</span>n.<span class="me1">getNodeType</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">==</span> Node.<span class="me1">CDATA_SECTION_NODE</span><span class="br0">&#41;</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">        text <span class="sy0">+=</span> n.<span class="me1">getNodeValue</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span>text<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li></ol></pre>

</div>

<h3><a id="generacio_de_fitxers_xml" >Generació de fitxers XML</a></h3>
<div class="level3">

<p>
D’entrada, atès que un fitxer XML no és més que text, sempre es pot generar usant qualsevol mecanisme ofert per Java que permeti escriure cadenes de text en un fitxer. Ara bé, si es vol garantir la seva correctesa abans d’escriure’l, el més convenient és fer exactament el pas invers que en el procediment de lectura. Primer es genera un model DOM, usant les classes corresponents, i tot seguit aquest model s’escriu sobre un fitxer.
</p>

</div>

<h4><a id="creacio_del_model_dom_java" >Creació del model DOM Java</a></h4>
<div class="level4">

<p>
La creació del model DOM parteix de la generació de l’objecte que representa el document, mitjançant la classe <code>DocumentBuilder</code>, i després usa crides als mètodes adients per anar-hi afegint els nodes que correspongui. Primer caldrà afegir l’element arrel al document (només un), i a partir d’aquí caldrà anar afegint tots els elements fills que calgui, amb els seus atributs i el text corresponents, fins a tenir l’estructura finalitzada. La classe Element proporciona tres mètodes amb els quals afegir atributs, text i crear relacions pare-fill entre dos elements:
</p>
<ul>
<li class="level1"><div class="li"> <code>void setAttribute(String name, String value)</code>.</div>
</li>
<li class="level1"><div class="li"> <code>void setTextContent(String text)</code>.</div>
</li>
<li class="level1"><div class="li"> <code>void appendChild(Node n)</code>.</div>
</li>
</ul>

<p>
Un fet important al llarg d’aquest procés és que la classe <code>Element</code> tampoc no es pot instanciar directament amb una sentència <code>new</code>. Per crear un element nou cal cridar el mètode <code>createElement(String nom)</code>, que ofereix l’objecte document generat. Això es deu al fet que, internament, un document ha de controlar tots els nodes que conté, i per tant, ha de controlar el procés de generació de tot node que hi pertanyi.
</p>

<p>
El codi següent serveix d’exemple de tot aquest procés. En aquest codi, es genera una part del document XML on s’enumeren productes. Només hi ha un producte, però afegir-ne més consistiria, simplement, a repetir el mateix els cops que fes falta.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">import</span> <span class="co2">javax.xml.parsers.*</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">import</span> <span class="co2">org.w3c.dom.*</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="co1">//...</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="co1">//Creació del document</span></div></li><li class="li1"><div class="de1">  DocumentBuilderFactory builderFactory <span class="sy0">=</span> DocumentBuilderFactory.<span class="me1">newInstance</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  DocumentBuilder  builder <span class="sy0">=</span> builderFactory.<span class="me1">newDocumentBuilder</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+document"><span class="kw3">Document</span></a> doc <span class="sy0">=</span> builder.<span class="me1">newDocument</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="co1">//Element arrel</span></div></li><li class="li1"><div class="de1">  <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+element"><span class="kw3">Element</span></a> arrel <span class="sy0">=</span> doc.<span class="me1">createElement</span><span class="br0">&#40;</span><span class="st0">&quot;LlistaProductes&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  doc.<span class="me1">appendChild</span><span class="br0">&#40;</span>arrel<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="co1">//Element fill de l'arrel</span></div></li><li class="li1"><div class="de1">  <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+element"><span class="kw3">Element</span></a> prod <span class="sy0">=</span> doc.<span class="me1">createElement</span><span class="br0">&#40;</span><span class="st0">&quot;Producte&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  prod.<span class="me1">setAttribute</span><span class="br0">&#40;</span><span class="st0">&quot;id&quot;</span>, <span class="st0">&quot;1&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  prod.<span class="me1">setAttribute</span><span class="br0">&#40;</span><span class="st0">&quot;aLaVenda&quot;</span>, <span class="st0">&quot;true&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="co1">//Elements fill de l'anterior</span></div></li><li class="li1"><div class="de1">  <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+element"><span class="kw3">Element</span></a> fill <span class="sy0">=</span> doc.<span class="me1">createElement</span><span class="br0">&#40;</span><span class="st0">&quot;Nom&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  fill.<span class="me1">setTextContent</span><span class="br0">&#40;</span><span class="st0">&quot;Producte 1&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  prod.<span class="me1">appendChild</span><span class="br0">&#40;</span>fill<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  fill <span class="sy0">=</span> doc.<span class="me1">createElement</span><span class="br0">&#40;</span><span class="st0">&quot;Preu&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  fill.<span class="me1">setTextContent</span><span class="br0">&#40;</span><span class="st0">&quot;10.0&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  prod.<span class="me1">appendChild</span><span class="br0">&#40;</span>fill<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  fill <span class="sy0">=</span> doc.<span class="me1">createElement</span><span class="br0">&#40;</span><span class="st0">&quot;Estoc&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  fill.<span class="me1">setTextContent</span><span class="br0">&#40;</span><span class="st0">&quot;4&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  prod.<span class="me1">appendChild</span><span class="br0">&#40;</span>fill<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  arrel.<span class="me1">appendChild</span><span class="br0">&#40;</span>prod<span class="br0">&#41;</span><span class="sy0">;</span> </div></li></ol></pre>

</div>

<h4><a id="escriptura_del_model_a_fitxer" >Escriptura del model a fitxer</a></h4>
<div class="level4">

<p>
Java ofereix un mecanisme genèric per enviar un document generat usant un model DOM al sistema de sortida de l’aplicació. Mitjançant aquest mecanisme és possible desar el document a fitxer. Ara bé, al tractar-se d’un mecanisme genèric també és possible triar altres destinacions per a les dades, com la sortida estàndard, de manera que també es pot imprimir el resultat per pantalla.
</p>

<p>
La classe que s’encarrega de gestionar aquesta tasca principalment és l’anomenada <code>Transformer</code>, dins el <em>package</em> <code>javax.xml.transform</code>. Com en el cas de la construcció de documents, aquesta classe no es pot instanciar directament, sinó que cal l’ajut d’una classe auxiliar anomenada <code>TransformerFactory</code>.
</p>

<p>
El codi per desar el document a fitxer és sempre el mateix, i és el següent:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">import</span> <span class="co2">javax.xml.transform.*</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">import</span> <span class="co2">javax.xml.transform.dom.DOMSource</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">import</span> <span class="co2">javax.xml.transform.stream.StreamResult</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">try</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  TransformerFactory tf <span class="sy0">=</span> TransformerFactory.<span class="me1">newInstance</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  Transformer transformer <span class="sy0">=</span> tf.<span class="me1">newTransformer</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  DOMSource source <span class="sy0">=</span> <span class="kw1">new</span> DOMSource<span class="br0">&#40;</span>doc<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+file"><span class="kw3">File</span></a> f <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+file"><span class="kw3">File</span></a><span class="br0">&#40;</span><span class="st0">&quot;nouDoc.xml&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  StreamResult result <span class="sy0">=</span> <span class="kw1">new</span> StreamResult<span class="br0">&#40;</span>f<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  transformer.<span class="me1">transform</span><span class="br0">&#40;</span>source, result<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span> <span class="kw1">catch</span> <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+exception"><span class="kw3">Exception</span></a> ex<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;Error desant fitxer: &quot;</span> <span class="sy0">+</span> ex<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
Per enviar el document a la sortida estàndard, n’hi ha prou de canviar la instanciació de l’objecte <code>StreamResult</code>, i, en lloc d’usar un fitxer, la variable “f” en aquest cas, escriure-hi “System.out” (sense les cometes).
</p>

<p>
Si proveu aquest codi i obriu el document resultant, veureu un fet que potser us resulta curiós: tot està escrit en una sola línia de text i l’ordre d’alguns atributs no es correspon amb l’ordre d’invocació dels mètodes durant la creació del document.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">&quot;1.0&quot;</span> <span class="re0">encoding</span>=<span class="st0">&quot;UTF-8&quot;</span> <span class="re0">standalone</span>=<span class="st0">&quot;no&quot;</span><span class="re2">?&gt;</span><span class="re1">&lt;LlistaProductes<span class="re2">&gt;</span></span><span class="re1">&lt;Producte</span> <span class="re0">aLaVenda</span>=<span class="st0">&quot;true&quot;</span> <span class="re0">id</span>=<span class="st0">&quot;1&quot;</span><span class="re2">&gt;</span><span class="re1">&lt;Nom<span class="re2">&gt;</span></span></span>Producte 1<span class="sc3"><span class="re1">&lt;/Nom<span class="re2">&gt;</span></span><span class="re1">&lt;Preu<span class="re2">&gt;</span></span></span>10.0<span class="sc3"><span class="re1">&lt;/Preu<span class="re2">&gt;</span></span><span class="re1">&lt;Estoc<span class="re2">&gt;</span></span></span>4<span class="sc3"><span class="re1">&lt;/Estoc<span class="re2">&gt;</span></span><span class="re1">&lt;/Producte<span class="re2">&gt;</span></span><span class="re1">&lt;/LlistaProductes<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Aquest fet no us ha d’alarmar, ja que una de les propietats del processament de dades en XML és que els salts de línia o sagnats en el text no tenen cap influència. Només se solen posar per tal de millorar la llegibilitat, però des del punt de vista de discriminar els nodes dins l’estructura, són irrellevants. El processador els ignora. Per això, en escriure el document, ja directament no es tenen en compte. A més a més, cal considerar que en un document XML l’ordre d’aparició d’atributs o elements no modifica la semàntica de les dades (quan se cerqui una informació, estarà allà igualment), i per tant, tampoc no és un problema.
</p>

</div>

<h2><a id="expressions_regulars" >Expressions regulars</a></h2>
<div class="level2">

<p>
En moltes aplicacions, una bona part de les dades que cal processar pot prendre la forma de cadenes de text, ja que les persones utilitzem paraules per identificar-nos o comunicar informació, ja siguin estrictament amb lletres (noms, adreces…) o amb xifres. En el cas d’aquestes últimes, s’emmagatzemen també com cadenes de text, ja que no es vol realment fer cap operació matemàtica sobre elles (telèfons, DNI, codis identificadors, ISBN…). Atès aquest fet, una tasca no gaire infreqüent és haver de fer cerques sobre aquestes dades, cercant un element que conté una cadena de text en concret.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
ISBN són les inicials de “International Standard Book Number”, o estàndard internacional de la numeració de llibres.
</p>
</div></div>
<p>

</p>

<p>
En Java, les cadenes de text es representen usant objectes de la classe <code>String</code>. Dins aquesta classe hi ha un seguit de mètodes que es poden usar per veure si un text s’avé a cert criteri, i per tant fer cerques sobre un conjunt de cadenes de text. El mètode més simple i directe seria <code>equals</code>, que mira si dues cadenes de text són idèntiques caràcter a caràcter, mentre que entre els mètodes que permeten dur a terme accions més imaginatives es podrien trobar <code>startsWith</code>, per veure si comença amb una cadena de text concreta, o <code>indexOf</code>, per veure si conté una altra cadena de text. Si es volen fer cerques d’acord a criteris més complicats dels que permeten els mètodes de classe <code>String</code>, cal fer un bocí de codi que els combini per assolir la fita. Ara bé, com que totes les comparacions són exactament lletra per lletra, sovint hi ha casos especials on, si es volen tenir en compte totes les possibilitats el codi es pot arribar a fer molt feixuc, com és el cas dels accents (per exemple, fer cerques independentment d’accents o no).
</p>

<p>
Afortunadament, Java ofereix un mecanisme genèric per veure si una cadena de text compleix un seguit de normes de complexitat arbitrària, anomenades expressions regulars, de manera que és més fàcil fer cerques complexes sobre una gran quantitat de cadenes de text.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
Una <strong>expressió regular</strong> és un conjunt de regles de coincidència de patrons codificats com una cadena de text, d’acord a determinades regles de sintaxi de certa complexitat.
</p>
</div></div>
</div>

<h3><a id="format_de_les_expressions_regulars" >Format de les expressions regulars</a></h3>
<div class="level3">

<p>
El concepte d’expressió regular genèric s’usa en molts llenguatges de programació (com Perl), no està vinculat exclusivament a Java. Per tant, abans de poder entrar en detall en quines classes permeten utilitzar-les, cal tenir clar com generar una expressió regular d’acord als criteris que us interessi. 
</p>
<div class="iocnote"><div class="ioccontent">
<p>
Podeu trobar la llista completa de tots els caràcters especials a la documentació de la classe <code>Pattern</code> a l’<acronym title="Application Programming Interface">API</acronym> del Java.
</p>
</div></div>
<p>
Una expressió regular es codifica com una cadena de text d’acord a certes normes de format: es va comparant caràcter a caràcter, des de l’inici fins al final, amb la cadena de text que es vol avaluar. Si tots els caràcters coincideixen, l’avaluació retorna cert, mentre que si algun és diferent, retorna fals. La particularitat està en el fet que, dins les expressions regulars, es poden incloure caràcters especials amb diferents significats que van més enllà de comparar només un caràcter concret. El nombre de caràcters especials és molt gran, per la qual cosa ens centrarem només en una part petita.
</p>

<p>
L’expressió regular més simple és un literal, o sigui un text directament, com “abc” o “Hola”. En aquest cas, avaluar l’expressió regular seria exactament igual que comparar-la amb la cadena de text, com es faria invocant el mètode <code>equals</code>. Dins d’aquest literal, un punt (”.”) equival a un comodí per dir “qualsevol lletra”. Per tant, l’expressió ”.ola” avalua a cert tant per “Hola” com per “hola”.
</p>

<p>
A la posició d’un caràcter dins l’expressió regular també s’hi pot posar, en lloc de només un caràcter, un conjunt de caràcters entre claus ([…]), anomenats símbols de coincidència (<em>matching symbols</em>). En aquest cas, el caràcter que es troba en aquella posició a la cadena a avaluar es compara amb tots els caràcters entre les claus seguint certes condicions. 
</p>
<ul>
<li class="level1"><div class="li"> <code>[…]</code>, Una llista de caràcters consecutius. Es mira si el caràcter a avaluar és algun de la llista.</div>
</li>
<li class="level1"><div class="li"> <code>[^…]</code>, Una llista de caràcters consecutius iniciats amb “^”. Es mira si el caràcter a avaluar NO és algun de la llista.</div>
</li>
<li class="level1"><div class="li"> <code>[.-.]</code>, Dos caràcters separats amb un guió. Es mira si el caràcter a avaluar està entre els dos caràcters.</div>
</li>
<li class="level1"><div class="li"> <code>[.-.-[…]]</code>, Es mira si el caràcter a avaluar està entre els dos caràcters separats pel guió, però no entre els que marca el segon bloc <code>[…]</code>, que pot usar qualsevol de les regles anteriors.</div>
</li>
</ul>

<p>
Aquestes regles es poden combinar indefinidament per fer regles més complexes. Cal fer èmfasi, però, en el fet que aquest conjunt de caràcters entre claus es compara només amb un únic caràcter de la cadena a avaluar, seguint ordenadament ambdues cadenes, tal com mostra la <span class="figref"><a href="#Figure9"><span>figura</span></a></span>.
</p>
<div class="iocfigure"><a name="Figure9"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Avaluació d’una expressió regular amb símbols de coincidència.

</figcaption><img src="../media/ic10m03u3_11.png" alt="" /></figure>
</div>
<p>
Com sempre, vegem-ho més clar amb els exemples de la <span class="tabref"><a href="#Table5"><span>taula</span></a></span>.
</p>
<div class="ioctable ">
<div class="titletable"><a name="Table5"><span>Taula: </span></a>Exemples d’expressions regulars.</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> Símbol                        </th><th class="col1 leftalign"> Resultat                                                                           </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> [abc]                         </td><td class="col1 leftalign"> Es mira si el caràcter és a, b o c.                                                </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> [^abc]       </td><td class="col1 leftalign"> Negació. Es mira si el caràcter no és ni a, ni b, ni c.                            </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> [a-z]                         </td><td class="col1 leftalign"> Es mira si és un caràcter entre a-z.                                               </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> [a-z-[bc]]                    </td><td class="col1 leftalign"> Es mira si el caràcter està entre a-z però no compleix ”…”.                      </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> [a-zA-Z]                      </td><td class="col1 leftalign"> Unió dels casos 1 i 3. Es mira si és un caràcter entre a-z o A-Z.                  </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> [a-z-[m-p]]                   </td><td class="col1 leftalign"> Unió dels casos 4 i 3. Es mira si el caràcter està entre a-z però no entre m i p.  </td>
	</tr>
	<tr class="row7">
		<td class="col0"> [a-z-[^def]] </td><td class="col1 leftalign"> Unió dels casos 4 i 2. És d, e o f.                                                </td>
	</tr>
</table></div>
</div>
<p>
Donada aquesta sintaxi, les expressions regulars de la <span class="tabref"><a href="#Table6"><span>taula</span></a></span> avaluarien a cert o fals per a la cadena de text “Hola amic”.
</p>
<div class="ioctable ">
<div class="titletable"><a name="Table6"><span>Taula: </span></a>Exemples d’avaluació d’expressions regulars.</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> Expressió                           </th><th class="col1 leftalign"> Resultat                                                                            </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> Hola ami                            </td><td class="col1 leftalign"> fals, falta la c final.                                                             </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> Ho[bfl]a amic                       </td><td class="col1 leftalign"> cert, el 3er caràcter és b, f o l.                                                  </td>
	</tr>
	<tr class="row3">
		<td class="col0"> Ho[bfl]a ami[^cdf] </td><td class="col1 leftalign"> fals, el darrer és c (i no hauria de ser ni c, ni d, ni f).                         </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> H[m-z]la a[m-z]ic                   </td><td class="col1 leftalign"> cert, en els dos casos el caràcter està entre m i z.                                </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> H[m-z-[opq]]la a[m-z]ic             </td><td class="col1"> fals, el 2on caràcter hauria d’estar entre m i z, però no pot ser ni o, ni p, ni q. </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> [a-mA-M]ola [a-mA-M]mic             </td><td class="col1 leftalign"> cert, en els dos casos el caràcter està entre a i m, o A i M.                       </td>
	</tr>
</table></div>
</div>
<p>
Un altre conjunt de símbols amb una semàntica especial dins una expressió regular són aquells que permeten controlar repeticions de caràcters. Aquests s’escriuen immediatament després de qualsevol símbol (ja sigui un caràcter normal o un símbol de coincidència) i actuen associats a ell (vegeu la <span class="tabref"><a href="#Table7"><span>taula</span></a></span>).
</p>
<div class="ioctable ">
<div class="titletable"><a name="Table7"><span>Taula: </span></a>Llistat de símbols amb significats especials.</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0"> Símbol </th><th class="col1 leftalign"> Resultat                                                       </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> *      </td><td class="col1"> El símbol associat es repeteix de 0 a N vegades (N no fitada). </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> +      </td><td class="col1"> El símbol associat es repeteix de 1 a N vegades (N no fitada). </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> ?      </td><td class="col1 leftalign"> El símbol associat apareix de 0 o 1 vegada.                    </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> {X}    </td><td class="col1 leftalign"> El símbol associat apareix X vegades.                          </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> {X,Y}  </td><td class="col1 leftalign"> El símbol associat apareix entre X i Y vegades.                </td>
	</tr>
</table></div>
</div>
<p>
La seva principal particularitat és que, quan s’apliquen sobre la cadena a avaluar, aquests símbols actuen sobre més d’un caràcter, de manera que ja no hi ha una correspondència 1 a 1 entre els caràcters de la cadena i de l’expressió, com s’ha vist fins ara. Per seguir l’avaluació d’una expressió regular d’aquest tipus cal considerar que aquesta és qui porta la batuta del procés, i cada símbol dins seu es consumeix cada cop que es troba una coincidència dins el text a avaluar, sigui del nombre de caràcters que sigui (que pot ser 0, pel cas “*”). El procés avaluarà a cert només si, en acabar el procés, tots els caràcters de la cadena de text han concordat amb algun símbol de l’expressió, i no en queda cap sense aparellar. Aquest fet s’esquematitza a l’exemple de la <span class="figref"><a href="#Figure10"><span>figura</span></a></span>.
</p>
<div class="iocfigure"><a name="Figure10"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Tractament de l’expressió regular amb símbols per controlar repeticions.

</figcaption><img src="../media/ic10m03u3_12.png" alt="" /></figure>
</div>
<p>
A la <span class="tabref"><a href="#Table8"><span>taula</span></a></span> es mostren alguns exemples d’ús d’aquests símbols.
</p>
<div class="ioctable ">
<div class="titletable"><a name="Table8"><span>Taula: </span></a>Exemples d’ús de símbols especials a expressions regulars.</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0"> Cadena a avaluar </th><th class="col1 leftalign"> Expressió     </th><th class="col2 leftalign"> Resultat                                                                                                                                                                                                                                                       </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> Una miiiica      </td><td class="col1 leftalign"> Una mi*ca     </td><td class="col2 leftalign"> cert, a partir de la 6a posició hi ha 0 o més caràcters ‘i’, i al final un “ca”.                                                                                                                                                                               </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> Una mca          </td><td class="col1 leftalign"> Una mi*ca     </td><td class="col2 leftalign"> cert, a partir de la 6a posició hi ha 0 o més caràcters ‘i’.                                                                                                                                                                                                   </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> Una miiiica      </td><td class="col1 leftalign"> Una mi+ca     </td><td class="col2 leftalign"> cert, a partir de la 6a posició hi ha 1 o més caràcters ‘i’.                                                                                                                                                                                                   </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> Una mca          </td><td class="col1 leftalign"> Una mi+ca     </td><td class="col2 leftalign"> fals, a partir de la 6a posició no hi ha 1 o més caràcters ‘i’.                                                                                                                                                                                                </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> Una miiiica      </td><td class="col1 leftalign"> Una mi?ca     </td><td class="col2 leftalign"> fals, a partir de la 6a posició hi ha més de 0 o 1 caràcter ‘i’.                                                                                                                                                                                               </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> Una mica         </td><td class="col1"> Una m[a-f]+ca </td><td class="col2 leftalign"> fals, a partir de la 6a posició hi ha 1 o més caràcters entre a i f (hi ha una i).                                                                                                                                                                             </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> Una mica         </td><td class="col1"> Una m[a-f]*ca </td><td class="col2"> fals, ara bé, la condició ”[a-f]*” sí que es compleix, ja que a partir de la posició 6 no hi ha cap caràcter entre a i f (per tant, n’hi ha entre 0 i N), però la ‘i’ de la cadena de text no encaixa amb cap part de l’expressió regular (que acaba en “ca”). </td>
	</tr>
</table></div>
</div>
</div>

<h3><a id="aplicacio_d_expressions_regulars" >Aplicació d&#039;expressions regulars</a></h3>
<div class="level3">

<p>
Un cop s’és capaç de generar cadenes de text que codifiquen expressions regulars correctes, Java ofereix dues vies diferents per fer-ne ús dins els vostres programes, usant uns pocs mètodes que aporta la classe <code>String</code>, per a tasques simples, o mitjançant classes específicament creades per fer aquesta mena de tasques. 
</p>

</div>

<h4><a id="aplicacio_directa_sobre_objectes_string" >Aplicació directa sobre objectes String</a></h4>
<div class="level4">

<p>
La manera més directa d’aplicar expressions regulars sobre cadenes de text en Java és mitjançant el mètode <code>matches</code> que ofereix la classe <code>String</code>. El seu paràmetre és una cadena de text que codifica una expressió regular que segueixi correctament les regles de sintaxi. La dificultat a l’hora d’usar-lo recau molt més en el fet de generar una expressió regular correcta que no pas en la seva invocació, ja que és molt senzill d’usar. Per exemple, suposem que es vol comprovar si un BIF està en format correcte (7 xifres i una lletra majúscula):
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> text <span class="sy0">=</span> <span class="st0">&quot;1234567B&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> regex <span class="sy0">=</span> <span class="st0">&quot;[0-9]{7}[A-Z]&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span>text.<span class="me1">matches</span><span class="br0">&#40;</span>regex<span class="br0">&#41;</span> <span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>

<p>
Si reflexioneu sobre quin seria el codi usant altres mètodes de la classe <code>String</code> que no es basen en expressions regulars, de ben segur que us adonareu que resultaria molt més complex. Només per veure si al final hi ha una lletra, caldria comparar el caràcter amb totes les lletres de l’abecedari, una a una. Mitjançant <code>matches</code>, s’ha fet amb una sola línia.
</p>

<p>
La classe <code>String</code> proporciona dos mètodes addicionals que operen partint d’expressions regulars, si bé el seu objectiu no és veure si aquesta avalua a cert o fals. El seu comportament és una mica diferent, ja que no intenta encaixar l’expressió amb tota la cadena de text, sinó que cerca aparicions de l’expressió dins la cadena i opera sobre aquestes subcadenes trobades. 
</p>

<p>
Per una banda, <code>replaceAll (String expressió, String substitució)</code> reemplaça totes les coincidències d’expressions regulars dins la cadena de text que invoca el mètode amb la cadena de text indicada amb el paràmetre “substitució”. Qualsevol part de la cadena que coincideix amb l’expressió se substitueix. El mètode retorna la nova cadena resultant (ja que els objectes <code>String</code> en Java són immutables). Cada grup de lletres sencer que coincideix amb l’expressió és reemplaçat i, si passa més d’un cop, hi haurà diversos canvis dins la cadena original.
</p>

<p>

</p>

<p>
Per exemple, en el codi següent, aquest mètode s’usa per reemplaçar tots els grups de lletres <code>t</code> i <code>s</code> precedides per 4 lletres qualsevol per una <code>x</code>. El resultat final és “Ha x molt poc x”, ja que els grups de lletres que compleixen aquesta condició són “estat” i “temps”. 
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> text <span class="sy0">=</span> <span class="st0">&quot;Ha estat molt poc temps&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> regex <span class="sy0">=</span> <span class="st0">&quot;[a-z]{4}[ts]&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> res <span class="sy0">=</span> text.<span class="me1">replaceAll</span><span class="br0">&#40;</span>regex, <span class="st0">&quot;x&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>

<p>
D’altra banda, <code>String[] split (String expressió)</code> divideix la cadena en parts d’acord amb la coindicència de l’expressió regular. El mètode retorna un <em>array</em> de cadenes on cada element és una part de l’original. Les parts coincidents amb l’expressió no s’inclouen enlloc. Per exemple, seguint l’exemple anterior, el següent codi retorna l’<em>array</em> {“Ha ”, ” molt poc ”}.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> text <span class="sy0">=</span> <span class="st0">&quot;Ha estat molt poc temps&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> regex <span class="sy0">=</span> <span class="st0">&quot;[a-z]{4}[ts]&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a><span class="br0">&#91;</span><span class="br0">&#93;</span> res <span class="sy0">=</span> text.<span class="me1">split</span><span class="br0">&#40;</span>regex<span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>

</div>

<h4><a id="aplicacio_mitjancant_classes_dedicades" >Aplicació mitjançant classes dedicades</a></h4>
<div class="level4">
<div class="iocnote"><div class="ioccontent">
<p>
Les opcions d’operació possibles s’enumeren en forma de constants a la classe <code>Pattern</code>. Podeu consultar-ne la documentació.
</p>
</div></div>
<p>
Una manera més sofisticada de treballar amb expressions regulars és usant les classes incloses dins el <em>package</em> <code>java.util.regex</code>, <code>Pattern</code> i <code>Matcher</code>, que han estat creades amb aquest propòsit específic. La primera serveix per establir una expressió regular (concretament per compilar-la), mentre que la segona és l’encarregada de processar-la i indicar si troba coincidències. La principal particularitat d’aquestes classes és que permeten cercar coincidències ja siguin parcials o totals dins la cadena de text, així com identificar exactament on han succeït. Això atorga un nivell de detall molt superior al que proporcionen els mètodes de la classe <code>String</code>.
</p>

<p>
El procés per usar aquestes dues classes sempre és el següent:
</p>
<ol>
<li class="level1"><div class="li"> Instanciar un objecte <code>Pattern</code> usant el seu mètode estàtic <code>compile(String regex)</code>. No es pot fer usant <code>new</code>. </div>
</li>
<li class="level1"><div class="li"> Obtenir un objecte <code>Matcher</code> associat al text a processar, invocant <code>matcher(CharSequence input)</code>. Com a paràmetre, es pot usar un <code>String</code> també.</div>
</li>
<li class="level1"><div class="li"> A partir de l’objecte <code>Matcher</code>, es pot processar el text de diverses maneres invocant els diferents mètodes que ofereix aquesta classe. </div>
</li>
</ol>

<p>
La classe <code>Matcher</code> permet anar cercant coincidències dins la cadena de text, una a una, a poc a poc (en lloc de totes de cop), de manera semblant, fins a cert punt, a com s’aniria recorrent una llista on els elements són els blocs de text que coincideixen amb l’expressió regular. Els seus mètodes més rellevants són:
</p>
<ul>
<li class="level1"><div class="li"> <code>boolean find()</code>, cerca si hi ha alguna coincidència dins la cadena de text a processar. Successives invocacions van retornant cert mentre es trobi alguna coincidència. Un cop s’han esgotat totes les coincidències possibles, retorna fals.</div>
</li>
<li class="level1"><div class="li"> <code>int start()</code>, indica quin és l’índex del caràcter on s’inicia la darrera coincidència trobada (el darrer cop que s’ha cridat <code>find</code> i ha retornat cert).</div>
</li>
<li class="level1"><div class="li"> <code>int end()</code>, indica quin és l’índex del primer caràcter <strong>posterior</strong> a la darrera coincidència.</div>
</li>
<li class="level1"><div class="li"> <code>String group()</code>, indica quina és la cadena de text exacta que ha provocat la darrera coincidència.</div>
</li>
<li class="level1"><div class="li"> <code>Matcher reset()</code>, reinicialitza l’objecte, de manera que es torna a començar des de zero el procés de detecció de coincidències (crides al mètode <code>find</code>).</div>
</li>
</ul>

<p>
Novament, la millor manera de veure com funciona aquesta classe és mitjançant un exemple. El codi següent va cercant dins una cadena de text tots aquells casos on hi ha una lletra “t” o “s” precedida de grups de 3 a 6 lletres minúscula qualsevol. Si analitzeu aquesta condició vosaltres mateixos, es pot veure que hi ha quatre casos on això succeeix: “estat” (t precedida de 4 lletres), “molt” (t precedida de 3 lletres), “emps” (s precedida de 4 lletres, la “T” no entra ja que és majúscula) i “dedicat” (t precedida de 6 lletres). El cas de la cadena “has” no coincideix, per exemple, ja que està precedida només per dues lletres. Per tant, es poden fer 4 successives invocacions a <code>find</code> que s’avaluïn a cert.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1"><span class="kw1">import</span> java.<span class="me1">util</span>.<span class="me1">regex</span><span class="sy0">:*;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">public</span> <span class="kw1">class</span> Cercador <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> main<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a><span class="br0">&#91;</span><span class="br0">&#93;</span> args<span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> text <span class="sy0">=</span> <span class="st0">&quot;Ha estat molt poc Temps el que hi has dedicat.&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> regex <span class="sy0">=</span> <span class="st0">&quot;[a-z]{3,6}[ts]&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    Pattern p <span class="sy0">=</span> Pattern.<span class="me1">compile</span><span class="br0">&#40;</span>regex<span class="br0">&#41;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">    Matcher m <span class="sy0">=</span> p.<span class="me1">matcher</span><span class="br0">&#40;</span>text<span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">while</span> <span class="br0">&#40;</span>m.<span class="me1">find</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">==</span> <span class="kw2">true</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">print</span><span class="br0">&#40;</span><span class="st0">&quot;Cadena: &quot;</span> <span class="sy0">+</span> m.<span class="me1">group</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">print</span><span class="br0">&#40;</span><span class="st0">&quot; (Inici: &quot;</span> <span class="sy0">+</span> m.<span class="me1">start</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">&#40;</span><span class="st0">&quot;, Fi: &quot;</span> <span class="sy0">+</span> m.<span class="me1">end</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">+</span> <span class="st0">&quot;)&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
El resultat de la seva execució és la següent. Fixeu-vos en els valors d’inici i de final obtinguts a partir de les crides a <code>start</code> i <code>end</code>. Per exemple, la cadena “estat” comença a la posició 3 del text complet, i el caràcter que hi ha a continuació (l’espai en blanc entre “estat” i “poc”) es troba a la posició 8.
</p>
<pre class="code">Cadena: estat (Inici: 3, Fi: 8)
Cadena: molt (Inici: 9, Fi: 13)
Cadena: emps (Inici: 19, Fi: 23)
Cadena: dedicat (Inici: 35, Fi: 42)</pre>

</div>

	 </article>
     <div class="pnpage">
      <div class="left-corner"></div>
      <div id="prevpage">Anar a la p&agrave;gina anterior:<br /><a href="../../../WebContent/u3/referencies.html">Referències</a></div>
      <div id="nextpage">Anar a la p&agrave;gina seg&uuml;ent:<br /><a href="../../../WebContent/u3/a1/activitats.html">Activitats</a></div>
      <div class="right-corner"></div>
     </div>
    </div>
    <footer class="footer">
      <div><small>Aquest document està subjecte a una llicència oberta de Creative Commons, es reserva el dret de reconeixement de l'autoria, d'exigir que no se'n faci cap mena d'ús comercial. Si altereu o transformeu aquesta obra, o en genereu obres derivades, només podeu distribuir l'obra generada amb una llicència idèntica a aquesta.</small></div>
    </footer>
 </div>
 <div id="back_preview" class="hidden"></div>
 <div id="preview" class="hidden">
  <div class="prevcontent"></div>
 </div>
 <div id="help-tooltips">
  <div id="help-toc" class="hidden tooltip"><span>Taula de continguts:</span> Ofereix una vista general de l&#39;estructura del m&ograve;dul, que us facilitar&agrave; la navegaci&oacute; a trav&eacute;s dels seus continguts.<span class="arrow-left"></span></div> 
  <div id="help-settings" class="hidden tooltip"><span>Opcions de format:</span> Permet configurar el format de lectura a partir de les vostres prefer&egrave;ncies, modificant la mida de la lletra, el color del fons, l&#39;amplada de la p&agrave;gina o l&#39;ocultaci&oacute; dels continguts complementaris, entre d&#39;altres.<span class="arrow-left"></span></div>
  <div id="help-printer" class="hidden tooltip"><span>Imprimir:</span>  Envia el contingut seleccionat a la impressora.<span class="arrow-left"></span></div>
  <div id="help-favorites" class="hidden tooltip"><span>Prefereits:</span> Permet desar aquelles parts del contingut a les que us interessi accedir en un moment posterior; us permetr&agrave; anar creant un repositori personalitzat de les seccions que considereu m&eacute;s rellevants. Un cop l&#39;hageu començat a fer servir se us mostrar&agrave; a sota un comptador que us informar&agrave; del nombre de preferits que s&#39;hagin emmagatzemat fins al moment.<span class="arrow-left"></span></div>
  <div id="help-favcounter" class="hidden tooltip"><span>Comptador i llistat de preferits:</span> Indica el nombre de preferits que s&#39;han desat fins el moment; clicant damunt seu accedireu al llistat de preferits, i a trav&eacute;s d&#39;aquest podreu accedir directament als continguts que hageu emmagatzemat.<span class="arrow-left"></span></div>
  <div id="help-help_icon" class="hidden tooltip"><span>Ajuda:</span> Aquesta opci&oacute; activa la informaci&oacute; de les funcionalitats del web tot situant el punter del ratol&iacute; al damunt dels diferents &iacute;tems.<span class="arrow-left"></span></div>
  <div id="help-sidebar-hide" class="hidden tooltip"><span>Mostrar/Ocultar barra lateral:</span>  Deshabilita la barra d&#39;opcions, permetent la seva recuperaci&oacute; quan es desitgi.<span class="arrow-left"></span></div>
  <div id="help-search" class="hidden tooltip"><span>Cerca:</span>  Introdu&iuml;u les paraules clau sobre aquells conceptes que desitgeu localitzar en els continguts del m&ograve;dul. Tamb&eacute; podeu excloure un terme de la cerca tot afegint-hi el signe &#8220;-&#8221; al davant.<span class="arrow-top"></span></div>
  <div id="help-header" class="hidden tooltip"><span>Cap&ccedil;alera:</span>  Indica l&#39;apartat o secci&oacute; que es mostra en pantalla. Tingueu present que les capçaleres de segon, tercer i quart nivell tamb&eacute; es poden desar com a marcadors.<span class="arrow-left"></span></div>
</div> 
</body>
</html>
