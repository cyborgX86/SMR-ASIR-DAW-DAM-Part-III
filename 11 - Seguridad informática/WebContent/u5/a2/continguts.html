<!doctype html>

<!--[if lt IE 7 ]> <html class="ie ie6 no-js" lang="ca"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie ie7 no-js" lang="ca"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie ie8 no-js" lang="ca"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie ie9 no-js" lang="ca"> <![endif]-->
<!--[if gt IE 9]><!--><html class="no-js" lang="ca"><!--<![endif]-->
<!-- the "no-js" class is for Modernizr. -->

<head id="www-sitename-com" data-template-set="html5-reset">

	<meta charset="utf-8">
	
	<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>Seguretat informàtica</title>
	
<!-- <meta name="title" content=""> --> 
	<meta name="description" content="">
	<!-- Google will often use this as its description of your page/site. Make it good. -->
	
	<meta name="google-site-verification" content="">
	<!-- Speaking of Google, don't forget to set your site up: http://google.com/webmasters -->
	
	<meta name="author" content="Institut Obert de Catalunya">
	<meta name="Copyright" content="Copyright Institut Obert de Catalunya 2011. All Rights Reserved.">

	<!-- Dublin Core Metadata : http://dublincore.org/ -->
	<meta name="DC.title" content="Seguretat informàtica">
	<meta name="DC.subject" content="Informàtica i comunicacions">
	<meta name="DC.creator" content="Institut Obert de Catalunya">
	
	<!--  Mobile Viewport Fix
	j.mp/mobileviewport & davidbcalhoun.com/2010/viewport-metatag 
	device-width : Occupy full width of the screen in its current orientation
	initial-scale = 1.0 retains dimensions instead of zooming out if page height > device height
	maximum-scale = 1.0 retains dimensions instead of zooming in if page width < device width
	-->
	<!-- Uncomment to use � use thoughtfully!
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	-->

	<link rel="shortcut icon" href="../../../img/favicon.ico">
	<!-- This is the traditional favicon.
		 - size: 16x16 or 32x32
		 - transparency is OK
		 - see wikipedia for info on browser support: http://mky.be/favicon/ -->
		 
	<link rel="apple-touch-icon" href="../../../img/apple-touch-icon.png">
	<!-- The is the icon for iOS's Web Clip.
		 - size: 57x57 for older iPhones, 72x72 for iPads, 114x114 for iPhone4's retina display (IMHO, just go ahead and use the biggest one)
		 - To prevent iOS from applying its styles to the icon name it thusly: apple-touch-icon-precomposed.png
		 - Transparency is not recommended (iOS will put a black BG behind the icon) -->
	
	<!-- CSS: screen, mobile & print are all in the same file -->
	<link rel="stylesheet" href="../../../_/css/style.css">

	<!-- CSS: jQuery UI -->
	<link rel="stylesheet" href="../../../_/css/jquery-ui.css">
	
	<!-- all our JS is at the bottom of the page, except for Modernizr. -->
	<script src="../../../_/js/modernizr-1.7.min.js"></script>
	<script src="../../../_/js/Hyphenator.js" type="text/javascript"></script>
	<script type="text/javascript">
	   Hyphenator.config({
		minwordlength : 4
	   });
	   Hyphenator.run();
	</script>
    <script src="../../../_/js/build.js" type="text/javascript"></script>
</head>

<body class="style-newspaper">

<div class="wrapper"><!-- not needed? up to you: http://camendesign.com/code/developpeurs_sans_frontieres -->

	<header id="header">
		<div class="head"><a href="http://ioc.gencat.cat"><img src="../../../img/logo.png" alt="Institut Obert de Catalunya"/></a><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/es/deed.ca"><img src="../../../img/license.png" alt="Llic&egrave;ncia" class="license"/></a></div>
		<div class="headdocument"><a href="../../../index.html">Seguretat informàtica</a></div>
        <div id="search" class="search" name="search">
         <form id="frmsearch" action="../../../search.html" method="get">
          <input type="text" name="q"/>
        </form>
        </div>
	</header>
   <div id="upbutton" class="upbutton" style="display:none;"><img src="../../../img/uparrow.png" alt="Pujar a l'inici de p&agrave;gina"/></div>
   <aside id="aside">
    <div id="menu">
      <ul>
       <li name="toc"><div><img src="../../../img/toc.png" alt="&Iacute;ndex"/></div></li>
       <li name="settings"><div><img src="../../../img/settings.png" alt="Configuraci&oacute;"/></div></li>
       <li name="printer"><div><img src="../../../img/printer.png" alt="Imprimir"/></div></li>
       <li name="favorites"><div><img src="../../../img/favorites.png" alt="Favorits"/></div></li>
       <li name="help_icon" class="help_icon"><div><img src="../../../img/help_icon.png" alt="Ajuda"/></div></li>
      </ul>
     </div>
   </aside>
   <div id="sidebar-hide" name="sidebar-hide"><img src="../../../img/arrows.png"/></div>
   <section>
     <div id="toc" class="hidden">
      <div class="menucontent">
        <ul>
        <li id="u5" class="parentnode"><p><a class="unit" href="../../../WebContent/u5/introduccio.html">5. Tallafocs i monitoratge de xarxes</a></p><ul class="expander"><li id="u5introduccio"><a href="../../../WebContent/u5/introduccio.html">Introducció</a></li><li id="u5resum"><a href="../../../WebContent/u5/resum.html">Resum</a></li><li id="u5resultats"><a href="../../../WebContent/u5/resultats.html">Resultats d'aprenentatge</a></li><li id="u5mapa"><a href="../../../WebContent/u5/mapa.html">Mapa conceptual</a></li><li id="u5referencies"><a href="../../../WebContent/u5/referencies.html">Més informació</a></li><li id="u5a1" class="tocsection"><p id='u5a1continguts'><a class="section" href="../../../WebContent/u5/a1/continguts.html">Monitoratge de xarxes</a><span class="buttonexp"></span></p><ul><li id="u5a1activitats"><a href="../../../WebContent/u5/a1/activitats.html">Activitats</a></li><li id="u5a1exercicis"><a href="../../../WebContent/u5/a1/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><li id="u5a2" class="tocsection"><p id='u5a2continguts'><a class="section" href="../../../WebContent/u5/a2/continguts.html">Tallafocs</a><span class="buttonexp"></span></p><ul><li id="u5a2activitats"><a href="../../../WebContent/u5/a2/activitats.html">Activitats</a></li><li id="u5a2exercicis"><a href="../../../WebContent/u5/a2/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li></ul></li><li id="" class="indexnode"><p><a href="../../../index.html">Anar a l&#39;&iacute;ndex general</a></p></li>
        </ul>
      </div>
    </div>
   </section>
   <section>
   <div id="settings" class="hidden">
    <div class="menucontent">
     <div class="allsettings">
     <div class="settings">
      <label>Font i Color</label>
		<div class="setting-option">
	        <ul class="fontBackground">
				<li id="style-newspaper" title="Newspaper" class="appearance-style-newspaper"><span>Newspaper</span></li>
                <li id="style-novel" title="Novel" class="appearance-style-novel"><span>Novel</span></li>
                <li id="style-ebook" title="eBook" class="appearance-style-ebook"><span>eBook</span></li>
				<li id="style-inverse" title="Inverse" class="appearance-style-inverse active"><span>Inverse</span></li>
				<li id="style-athelas" title="Athelas" class="appearance-style-athelas"><span>Athelas</span></li>
			</ul>
		</div>
     </div>
	<div class="settings">
      <label>Amplada</label>
		<div class="setting-option">
	        <div id="slider-width"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
		<div class="setting-option">
	        <div id="slider-font"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
	  <div class="setting-option">
       <form action="" class="sett-options">
		<ul>
		    <li><input type="checkbox" id="secondary-content" /><label for="secondary-content">Mostra recursos complementaris</label></li>
		    <li><input type="checkbox" id="main-images" /><label for="main-images">Mostra imatges</label></li>
		    <li><input type="checkbox" id="text-alignment" /><label for="text-alignment">Text justificat</label></li>
			<li><input type="checkbox" id="text-hyphen" /><label for="text-hyphen">Partici&oacute; sil·l&agrave;bica</label></li>
		</ul>
       </form>
	  </div>
     </div>
     </div>
    </div>
   </div>
   </section>
 <section>
 <div id="favorites" class="hidden"></div>
 </section>   
 <div id="bridge" class="hidden"></div>
 <div id="help" class="hidden">
  <div class="helptitle">Dreceres del teclat<hr></div>
  <div class="helpsection"><span>General</span>
   <ul>
    <li><span class="shortcut">g</span>: Anar al men&uacute; de navegaci&oacute;</li>
    <li><span class="shortcut">o</span>: Anar a opcions</li>
    <li><span class="shortcut">s</span>: Guardar la p&agrave;gina actual a favorits</li>
    <li><span class="shortcut">p</span>: Imprimir la p&agrave;gina actual</li>
    <li><span class="shortcut">?</span>: Mostrar/Ocultar l&#39;ajuda</li>
   </ul>
  </div>
  <div class="helpsection"><span>Navegaci&oacute;</span>
   <ul>
    <li><span class="shortcut">i</span>: Anar a l&#39;&iacute;ndex general</li>
    <li><span class="shortcut">t</span>: Anar a l&#39;inici de p&agrave;gina</li>
    <li><span class="shortcut">b</span>: Anar al final de p&agrave;gina</li>
    <li><span class="shortcut">j</span>: Anar cap endavant dintre la p&agrave;gina</li>
    <li><span class="shortcut">k</span>: Anar cap enrere dintre la p&agrave;gina</li>
    <li><span class="shortcut">h</span>: Anar a la p&agrave;gina anterior:</li>
    <li><span class="shortcut">l</span>: Anar a la p&agrave;gina seg&uuml;ent:</li>
   </ul>
   </div>
 </div>
 <div id="favcounter" name="favcounter" class="hidden"><span></span></div>
 <div id="navmenu" class="navmenu"><ul class="webnav"><li><a href="../../../index.html" title="Anar a l&#39;&iacute;ndex general">Inici</a></li><li><a href="../introduccio.html">Tallafocs i monitoratge de xarxes</a></li><li>Tallafocs</li></ul></div>
	<div id="content" lang="ca" class="hyphenate text">
     <article lang="ca" class="sheet">
        <h1><a id="tallafocs"> Tallafocs </a></h1>
    	
<p>
Hi ha molts mecanismes per gestionar la seguretat en les xarxes. Un d’aquests mecanismes consisteix a utilitzar els tallafocs, que permeten definir visibilitats entre els equips que componen la xarxa. D’altra banda, mitjançant programari específic es pot conèixer l’estat de la xarxa i els intents d’intrusió que s’hi poden produir. En cas que finalment s’arribi a produir la intrusió, caldrà tenir a punt un procediment d’acció per evitar mals majors com la destrucció de pistes o que es torni a produir el problema.
</p>

<h2><a id="utilitzacio_d_eines_de_control_del_monitoratge_en_xarxes" >Utilització d&#039;eines de control del monitoratge en xarxes</a></h2>
<div class="level2">

<p>
Per a un monitoratge i un control complets de la xarxa i els sistemes que integra, cal fer servir un conjunt d’eines diferents que permeti tenir-ne una visió segons les necessitats de cada moment: no és el mateix intentar veure el patró que ha seguit un atacant per intentar descobrir els serveis de xarxa que trobar un atac de denegació de servei en la xarxa.
</p>

</div>

<h3><a id="alertes_del_funcionament_de_la_xarxa_i_els_sistemes_que_integra" >Alertes del funcionament de la xarxa i els sistemes que integra</a></h3>
<div class="level3">

<p>
Una primera eina imprescindible per controlar les xarxes és un sistema que avisa quan hi ha algun problema, sia per un mal funcionament del sistema o per un atac extern. Per tal que resulti una eina eficaç, cal configurar-la amb cura. D’aquesta manera, s’evitaran les notificacions errònies (falsos positius), la falta de notificació (falsos negatius) i les notificacions massives (la fallada d’un sistema fa saltar les notificacions de tota la resta). En general, aquest sistema d’avisos hauria de permetre, almenys, els tres nivells següents:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Correcte</strong>: el sistema opera dins els paràmetres normals.</div>
</li>
<li class="level1"><div class="li"> <strong>Avís</strong>: el sistema s’ha desviat dels paràmetres normals i això pot comportar un problema en el servei.</div>
</li>
<li class="level1"><div class="li"> <strong>Alerta</strong>: el sistema es troba degradat o inoperatiu.</div>
</li>
</ul>

<p>
Per evitar les notificacions massives hi ha dos escenaris possibles:
</p>
<ol>
<li class="level1"><div class="li"> Si un element que deixa passar les comprovacions o les realitza per si mateix deixés de respondre, s’<strong>enviarien les notificacions</strong> no només de l’element que ha deixat de funcionar, sinó <strong>de tots els elements de què el servidor de monitoratge perd la visibilitat</strong>. Per evitar aquest cas, s’implementen dependències entres les comprovacions, de manera que abans d’enviar una notificació, cal verificar que l’element de què depèn funciona adequadament. Per tant, si falla un element determinat, només envia la notificació d’aquest element i no pas de tots els altres elements que en depenen.</div>
</li>
<li class="level1"><div class="li"> Si un equip s’atura, <strong>tots els serveis que estiguin en aquest equip deixen de respondre</strong>. Per poder enviar una modificació que indiqui que el servidor està apagat i que no tots els serveis han deixat de respondre, normalment es defineix una comprovació que, si falla, notifica que tot l’equip està apagat i no envia les notificacions de tots els serveis que conté.</div>
</li>
</ol>
<div class="iocfigure"><a name="Figura5"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Nagios en funcionament

</figcaption><img src="../media/smxm6uf4u5_im11.png" alt="" /></figure>
</div><div class="iocimportant"><div class="ioccontent">
<p>
El <strong>Nagios</strong> és una eina de codi lliure que permet monitorar serveis.
</p>
</div></div>
</div>

<h3><a id="grafics_de_l_estat_de_la_xarxa_i_els_sistemes_al_llarg_del_temps" >Gràfics de l&#039;estat de la xarxa i els sistemes al llarg del temps</a></h3>
<div class="level3">

<p>
Un atac acostuma a generar un trànsit inusual en la xarxa. Per tant, és important mantenir un registre per tal de comparar l’estat actual amb l’anterior. No té gaire sentit elaborar gràfics amb les dades binàries (estat correcte / estat alerta). Tanmateix, pot ser molt útil elaborar-ne un que mostri dades com el trànsit, les sessions concurrents o la càrrega del sistema.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
Una eina de codi lliure molt utilitzada per fer gràfics, tant de trànsit com d’altres tipus de dades, és el <strong>Cacti</strong>.
</p>
</div></div><div class="iocfigure"><a name="Figura6"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Gràfics amb el Cacti

</figcaption><img src="../media/smxm6uf4u5_im12.png" alt="" /></figure>
</div>
</div>

<h3><a id="detall_de_l_estat_de_la_xarxa_a_l_instant" >Detall de l&#039;estat de la xarxa a l&#039;instant</a></h3>
<div class="level3">

<p>
En cas que hi hagi algun problema en la xarxa, pot resultar molt útil disposar d’una eina que permeti veure què hi passa en un moment determinat. És important disposar d’una eina que agrupi les dades i les mostri de manera que amb una ullada puguem veure com funciona la xarxa, quin tipus de dades hi ha, quin n’és l’origen i quina n’és la destinació.
</p>

<p>
Si les dades estan agrupades, és fàcil deduir si hi ha cap problema i, en cas que n’hi hagi algun, identificar-lo per mitigar-lo.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
<strong>Ntop</strong> és una eina de codi lliure que fa aquesta anàlisi instantània de l’estat de la xarxa.
</p>
</div></div><div class="iocfigure"><a name="Figura7"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Estat de la xarxa amb Ntop

</figcaption><img src="../media/smxm6uf4u5_im13.png" alt="" /></figure>
</div>
</div>

<h3><a id="gestio_i_analisi_de_registres" >Gestió i anàlisi de registres</a></h3>
<div class="level3">

<p>
Els registres (<em>logs</em>) que deixen les aplicacions són la millor font d’informació a l’hora de detectar un atac i prendre mesures per evitar-lo. Per detectar la manipulació dels registres, es pot fer servir un sistema que s’encarregui de recollir totes les dades. A aquest sistema es pot afegir la data de recepció per poder correlacionar les dades, emmagatzemar-les i signar-les electrònicament per tal de detectar si s’alteren.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
Hi ha moltes maneres de centralitzar els registres de les aplicacions, però en sistemes UNIX se sol utilitzar el dimoni <strong>Syslog</strong>.
</p>
</div></div>
<p>
Els passos que se segueixen per configurar un sistema d’emmagatzematge de registres amb Syslog són els següents:
</p>
<ol>
<li class="level1"><div class="li"> Es configura un dimoni de Syslog a escala local perquè rebi els registres de les aplicacions i en conservi una còpia local durant un període de temps determinat. D’aquesta manera, es poden consultar directament des del sistema mateix.</div>
</li>
<li class="level1"><div class="li"> Es configura un dimoni de Syslog en un sistema remot que accepti dades i les emmagatzemi ordenades per data.</div>
</li>
<li class="level1"><div class="li"> El dimoni de Syslog del sistema en què hi ha l’aplicació va enviant una còpia dels registres al dimoni de Syslog remot.</div>
</li>
<li class="level1"><div class="li"> Quan els registres es troben en el sistema remot, es fa una signatura electrònica per poder detectar si s’alteren.</div>
</li>
</ol>

</div>

<h4><a id="analisi_de_registres" >Anàlisi de registres</a></h4>
<div class="level4">

<p>
Quan les dades ja estan emmagatzemades, s’hi poden aplicar eines que permetin agregar-les a un informe sobre l’estat del programari o el sistema. Per exemple, mitjançant l’aplicació <em>LogWatch,</em> les dades d’un sistema Linux es poden agrupar. D’aquesta manera, es pot enviar un informe sobre l’activitat a l’administrador de sistemes.
</p>

<p>
També hi ha programari de caràcter més específic, com l’AWStats, que permet analitzar els registres de servidors web. Amb aquest programa es poden extreure dades molt importants si l’atacant no ha pogut alterar el sistema d’emmagatzematge de registres.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
L’AWStats és un programari d’anàlisi de registres d’activitat de servidors web, correu i <acronym title="File Transfer Protocol">FTP</acronym>.
</p>
</div></div><div class="iocfigure"><a name="Figura8"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Una llista d’errors 404 amb l’AWStats pot oferir molta informació

</figcaption><img src="../media/smxm6uf4u5_im14.png" title="Figura 8. Una llista d&#039;errors 404 amb l&#039;AWStats pot oferir molta informació" alt="Figura 8. Una llista d&#039;errors 404 amb l&#039;AWStats pot oferir molta informació" /></figure>
</div>
</div>

<h4><a id="activitat_a_investigar" >Activitat a investigar</a></h4>
<div class="level4">

<p>
En general, el que cal buscar en els registres són les anomalies, ja que és molt complicat fer encaixar l’activitat que es genera en fer un atac amb el funcionament normal del sistema. Quan busquem anomalies, també es detecten falsos positius, activitat legítima que sembla il·lícita. Així doncs, convé actuar amb cautela per no treure conclusions precipitades.
</p>

<p>
Per exemple, en el cas d’analitzar els registres d’un servidor web, es podria començar a analitzar l’activitat buscant els punts següents:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Els fitxers més consultats</strong>: entre els fitxers més populars és possible trobar contingut il·lícit si el servidor web s’està fent servir per distribuir-lo.</div>
</li>
<li class="level1"><div class="li"> <strong>Evolució del trànsit</strong>: en cas que hi hagi un increment sobtat del trànsit de dades, seria factible que es tractés d’un intent de denegació de servei o bé que s’hi hagués introduït algun contingut fraudulent. Així doncs, per poder valorar què passa en el servidor web, caldria estimar l’evolució de bytes enviats, les consultes per unitat de temps i els totals de consultes per IP.</div>
</li>
<li class="level1"><div class="li"> <strong>Consultes a fitxers que no existeixen</strong> (404): és possible que, per tal de comprometre un servidor web, s’hagi d’intentar diverses vegades. Algun d’aquests intents pot generar l’error 404 (<em>not found</em>), que queda registrat en els registres del servidor web. Si els errors 404 es comproven periòdicament, és possible tenir una idea del tipus d’atacs que pateix el servidor web en qüestió per prendre mesures.</div>
</li>
</ul>

</div>

<h3><a id="ids_ips" >IDS/IPS</a></h3>
<div class="level3">

<p>
La sigla <strong>IDS</strong> correspon a <em>intrusion detection-system</em>. Es tracta d’un sistema que detecta intrusions o intents d’intrusió i en notifica, però no els evita. D’altra banda, la sigla <strong>IPS</strong> correspon a <em>intrusion prevention-system</em>. El sistema, quan detecta un intent d’intrusió, es pot configurar per bloquejar-lo o bé pot afegir el sistema originant a una llista negra per evitar l’atac que ha detectat i intents futurs.
</p>

<p>
Hi ha diversos tipus d’IDS/IPS de caràcter general:
</p>
<ul>
<li class="level1"><div class="li"> <strong>IDS/IPS de xarxa</strong>: basa la detecció d’intrusions en l’anàlisi dels paquets que circulen per la xarxa. Un exemple de codi obert (<em>open source</em>) seria l’Snort.</div>
</li>
<li class="level1"><div class="li"> <strong>IDS/IPS de sistema</strong>: basa la detecció d’intrusions en l’anàlisi del conjunt del sistema. Un exemple de codi obert podria ser el Tripwire.</div>
</li>
</ul>
<div class="iocnote"><div class="ioccontent">
<p>
Els principals fabricants de sistemes IDS/IPS són els següents: TippingPoint, Radware, IntruShield, CISCO, Fortinet i Juniper.
</p>
</div></div>
<p>
També es poden implementar sistemes IDS/IPS més especialitzats que, com a contrapartida, consumeixen més recursos:
</p>
<ul>
<li class="level1"><div class="li"> <strong>IDS/IPS basat en el protocol</strong>: el sistema entén el protocol pensat per detectar i evitar que se’n faci un mal ús. Força que es compleixi adequadament.</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <strong>IDS/IPS basat en la lògica de l’aplicació</strong>: entén el protocol de comunicació i va més enllà. El sistema ha d’entendre la lògica de l’aplicació per fer que es compleixi. És el sistema més específic i, per tant, cal que s’adapti amb molta cura a l’entorn en què es desplega.</div>
</li>
</ul>

</div>

<h4><a id="configuracio_d_un_ids_ips" >Configuració d&#039;un IDS/IPS</a></h4>
<div class="level4">

<p>
Un sistema IDS/IPS es pot desplegar en maneres de funcionament diferents:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Encaminament</strong> (<em>routing</em>): s’afegeix com un punt més de salt entre l’origen i la destinació del paquet. Com que per encaminar els paquets el sistema ha de tenir una IP, el fa més vulnerable als atacs.</div>
</li>
<li class="level1"><div class="li"> <strong>Passarel·la</strong> (<em>bridge</em>): el sistema IDS/IPS es configura per analitzar els paquets, però de manera que no esdevingui un salt més en la transmissió. D’aquesta manera, l’IDS/IPS és més complicat de detectar i no és possible accedir-hi directament, ja que no té una IP en el segment de xarxa pel qual passen els paquets.</div>
</li>
<li class="level1"><div class="li"> <strong>Port de còpia</strong> (<em>network tap</em> o <em>port mirroring/spanning</em>): l’IDS veu tot el que circula per un port determinat des d’un port diferent. Això fa que, malgrat que pot informar sobre tot el que veu, no hi pugui intervenir, ja que no es tracta de trànsit real, sinó d’una còpia. Pot ser molt útil per provar l’IDS/IPS abans de passar-lo a producció o bé per deixar-lo només en mode avís (IDS).</div>
</li>
</ul>

</div>

<h4><a id="instal_lacio_d_un_ids_de_xarxa" >Instal·lació d&#039;un IDS de xarxa</a></h4>
<div class="level4">

<p>
L’<strong>Snort</strong> és un dels sistemes de detecció d’intrusions de codi lliure més populars. A continuació, es veurà com instal·lar-lo i configurar-lo mitjançant el conjunt de regles lliures anomenades <strong>Emerging Threads</strong>.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
Un port de còpia conté el mateix trànsit que passa pel port d’origen.
</p>
</div></div>
<p>
En aquest apartat es detallen els passos generals per fer una instal·lació del sistema IDS Snort en qualsevol sistema Linux. El mètode d’instal·lació pot tenir petites variacions al llarg del temps, de manera que sempre convé comprovar la documentació del sistema abans de començar.
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"><span class="co0"># wget http://dl.snort.org/snort-current/snort-2.8.5.1.tar.gz</span></div></li><li class="li1"><div class="de1"><span class="co0"># tar xzf snort-2.8.5.1.tar.gz</span></div></li><li class="li1"><div class="de1"><span class="co0"># cd snort-2.8.5.1</span></div></li><li class="li1"><div class="de1"><span class="co0"># wget http://www.emergingthreats.net/rules/emerging.rules.tar.gz</span></div></li><li class="li1"><div class="de1"><span class="co0"># tar xzf emerging.rules.tar.gz</span></div></li><li class="li1"><div class="de1"><span class="co0"># ./configure --prefix=/usr/local/ --exec-prefix=/usr/local/ --enable-dynamicplugin --with-mysql</span></div></li><li class="li1"><div class="de1"><span class="co0"># make all install</span></div></li><li class="li1"><div class="de1"><span class="co0"># mkdir -p /usr/local/etc/snort/rules</span></div></li><li class="li1"><div class="de1"><span class="co0"># mkdir -p /var/log/snort</span></div></li><li class="li1"><div class="de1"><span class="co0"># cp -pr /usr/local/src/snort-2.8.5.1/rules/* /usr/local/etc/snort/rules/</span></div></li><li class="li1"><div class="de1"><span class="co0"># cp -pr /usr/local/src/snort-2.8.5.1/etc/* /usr/local/etc/snort/</span></div></li></ol></pre>

<p>
A continuació, caldrà crear una base de dades MySQL per emmagatzemar les alertes.
</p>
<pre class="code sql"><ol><li class="li1"><div class="de1">mysql<span class="sy0">&gt;</span> <span class="kw1">CREATE</span> <span class="kw1">DATABASE</span> snort;</div></li><li class="li1"><div class="de1">Query OK<span class="sy0">,</span> <span class="nu0">1</span> <span class="kw1">ROW</span> affected <span class="br0">&#40;</span><span class="nu0">0.00</span> sec<span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">mysql<span class="sy0">&gt;</span> <span class="kw1">GRANT</span> <span class="kw1">SELECT</span><span class="sy0">,</span> <span class="kw1">INSERT</span><span class="sy0">,</span> <span class="kw1">UPDATE</span><span class="sy0">,</span> <span class="kw1">DELETE</span><span class="sy0">,</span> <span class="kw1">CREATE</span><span class="sy0">,</span> <span class="kw1">DROP</span><span class="sy0">,</span> <span class="kw1">REFERENCES</span><span class="sy0">,</span> <span class="kw1">ALTER</span><span class="sy0">,</span> <span class="kw1">EXECUTE</span><span class="sy0">,</span> <span class="kw1">CREATE</span> <span class="kw1">ROUTINE</span><span class="sy0">,</span> </div></li><li class="li1"><div class="de1"><span class="kw1">ALTER</span> <span class="kw1">ROUTINE</span><span class="sy0">,</span> USAGE <span class="kw1">ON</span> snort<span class="sy0">.*</span> <span class="kw1">TO</span> snort@localhost <span class="kw1">IDENTIFIED</span> <span class="kw1">BY</span> <span class="st0">'snortsecret'</span>;</div></li><li class="li1"><div class="de1">Query OK<span class="sy0">,</span> <span class="nu0">0</span> <span class="kw1">ROWS</span> affected <span class="br0">&#40;</span><span class="nu0">0.02</span> sec<span class="br0">&#41;</span></div></li></ol></pre>

<p>
Seguidament, s’haurà d’emplenar la base de dades amb la definició de les taules que hi ha en el directori <em>schemas</em> del codi font de l’Snort.
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"><span class="co0"># cd /usr/local/src/snort-2.8.5.1/schemas/</span></div></li><li class="li1"><div class="de1"><span class="co0"># cat create_mysql | mysql snort -u root -p</span></div></li></ol></pre>

<p>
Tot seguit, caldrà configurar l’Snort adequadament. Per ser pràctics, es pot fer servir la plantilla que proporciona la distribució de l’Snort, però primer caldrà eliminar-ne unes quantes parts amb l’expressió regular següent:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"><span class="co0"># cd /usr/local/etc/snort/</span></div></li><li class="li1"><div class="de1"><span class="kw2">sed</span> <span class="st_h">'s@^\(include.*ules\)$@#@'</span> <span class="re5">-i</span> <span class="sy0">/</span>usr<span class="sy0">/</span>local<span class="sy0">/</span>etc<span class="sy0">/</span>snort<span class="sy0">/</span>snort.conf</div></li></ol></pre>

<p>
Per adequar la configuració de l’Snort, cal editar el fitxer <em>snort.conf</em> amb algun editor de text i configurar-hi els paràmetres següents:
</p>
<ul>
<li class="level1"><div class="li"> <strong>HOME_NET</strong>: indica a l’Snort les xarxes que s’intenten protegir. Les xarxes hi apareixen separades per comes.</div>
</li>
<li class="level1"><div class="li"> <strong>EXTERNAL_NET</strong>: indica a quines xarxes externes estem connectats. Normalment es fa servir la inversa de la variable HOME_NET.</div>
</li>
<li class="level1"><div class="li"> <strong>output</strong>: indica on s’emmagatzemen els registres i els paràmetres per fer-ho. En cas de fer servir una base de dades MySQL, cal especificar-hi el nom d’usuari, la contrasenya, el servidor de bases de dades i el nom de la base de dades.</div>
</li>
<li class="level1"><div class="li"> <strong>include</strong>: permet indicar un fitxer auxiliar de configuració. Per exemple, pot servir per incloure còmodament totes les regles de la distribució <strong>Emerging Threads</strong>.</div>
</li>
</ul>
<div class="iocnote"><div class="ioccontent">
<p>
Emerging Threads es distribueix sota llicència BSD.
</p>
</div></div><pre class="code bash"><ol><li class="li1"><div class="de1">var HOME_NET <span class="br0">&#91;</span>192.168.1.0<span class="sy0">/</span><span class="nu0">32</span>,10.0.0.0<span class="sy0">/</span><span class="nu0">8</span><span class="br0">&#93;</span></div></li><li class="li1"><div class="de1">var EXTERNAL_NET <span class="sy0">!</span><span class="re1">$HOME_NET</span></div></li><li class="li1"><div class="de1">var RULE_PATH rules</div></li><li class="li1"><div class="de1">output database: log, mysql, <span class="re2">user</span>=snort <span class="re2">password</span>=snortsecret <span class="re2">dbname</span>=snort <span class="re2">host</span>=localhost</div></li><li class="li1"><div class="de1">include <span class="re1">$RULE_PATH</span><span class="sy0">/</span>emerging.conf</div></li></ol></pre>

</div>

<h4><a id="base_basic_analysis_and_security_engine" >BASE (basic analysis and security engine)</a></h4>
<div class="level4">

<p>
<strong>BASE</strong> és una interfície web que permet agrupar les dades de les alertes i generar-ne informes fàcilment. A continuació, es veurà com instal·lar-la.
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"><span class="co0"># mkdir /var/www/admin/snortbase/htdocs -p</span></div></li><li class="li1"><div class="de1"><span class="co0"># mkdir /var/www/admin/snortbase/logs -p</span></div></li><li class="li1"><div class="de1"><span class="co0"># mkdir /var/www/admin/adodb -p</span></div></li><li class="li1"><div class="de1"><span class="co0"># cd /var/www/admin/adodb</span></div></li><li class="li1"><div class="de1"><span class="co0"># wget http://downloads.sourceforge.net/project/adodb/adodb-php5-only/adodb-510-for-php5/</span></div></li><li class="li1"><div class="de1">adodb510.tgz?<span class="re2">use_mirror</span>=ovh</div></li><li class="li1"><div class="de1"><span class="co0"># tar xzf adodb510.tgz</span></div></li><li class="li1"><div class="de1"><span class="co0"># mv adodb5/* .</span></div></li><li class="li1"><div class="de1"><span class="co0"># rmdir adodb5</span></div></li><li class="li1"><div class="de1"><span class="co0"># cd /var/www/admin/snortbase/htdocs</span></div></li><li class="li1"><div class="de1"><span class="co0"># wget http://downloads.sourceforge.net/project/secureideas/BASE/base-1.4.4/base-</span></div></li><li class="li1"><div class="de1">1.4.4.tar.gz?<span class="re2">use_mirror</span>=ovh</div></li><li class="li1"><div class="de1"><span class="co0"># tar xzf base-1.4.4.tar.gz</span></div></li><li class="li1"><div class="de1"><span class="co0"># mv base-1.4.4/* .</span></div></li><li class="li1"><div class="de1"><span class="co0"># rmdir base-1.4.4</span></div></li><li class="li1"><div class="de1"><span class="co0"># chmod 757 /var/www/admin/snortbase/htdocs/</span></div></li></ol></pre>

<p>
Amb el codi font de BASE descomprimit caldrà configurar un <em>virtual host</em> en un servidor web que disposi de PHP. En el cas de l’Apache, per exemple, la configuració seria la següent:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"><span class="sy0">&lt;</span>VirtualHost <span class="sy0">*</span>:<span class="nu0">80</span><span class="sy0">&gt;</span></div></li><li class="li1"><div class="de1"> ServerAdmin webmaster<span class="sy0">@</span>exemple.com</div></li><li class="li1"><div class="de1"> DocumentRoot <span class="st0">&quot;/var/www/admin/snortbase/htdocs&quot;</span></div></li><li class="li1"><div class="de1"> ServerName snort.exemple.com</div></li><li class="li1"><div class="de1"> DirectoryIndex index.php</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="sy0">&lt;</span>Directory <span class="sy0">/</span>var<span class="sy0">/</span>www<span class="sy0">/</span>admin<span class="sy0">/</span>snortbase<span class="sy0">/</span>htdocs<span class="sy0">&gt;</span></div></li><li class="li1"><div class="de1">   Options FollowSymLinks</div></li><li class="li1"><div class="de1">   AllowOverride None</div></li><li class="li1"><div class="de1">   Order deny,allow</div></li><li class="li1"><div class="de1">   Allow from all</div></li><li class="li1"><div class="de1">  <span class="sy0">&lt;/</span>Directory<span class="sy0">&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"> ErrorLog <span class="st0">&quot;| /usr/local/sbin/cronolog -S /var/www/admin/snortbase/logs/current.error.log /var/www/</span></div></li><li class="li1"><div class="de1"><span class="st0">admin/snortbase/logs/%Y/%m/%d/error.log&quot;</span></div></li><li class="li1"><div class="de1"> CustomLog <span class="st0">&quot;| /usr/local/sbin/cronolog -S /var/www/admin/snortbase/logs/current.custom.log /var/www/</span></div></li><li class="li1"><div class="de1"><span class="st0">admin/snortbase/logs/%Y/%m/%d/custom.log&quot;</span> combined</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sy0">&lt;/</span>VirtualHost<span class="sy0">&gt;</span></div></li></ol></pre>

<p>
Un cop el servidor web ha llegit la configuració nova, cal accedir amb el navegador a l’adreça en què es troba la BASE per continuar la instal·lació. Les dades que demana són les següents:
</p>
<ul>
<li class="level1"><div class="li"> Seleccionar l’idioma i indicar la posició en el sistema de fitxer de l’ADODB. A l’exemple s’ha instal·lat a /var/www/admin/adodb.</div>
</li>
<li class="level1"><div class="li"> Introduir les dades de connexió al MySQL que s’han definit en els passos anteriors.</div>
</li>
<li class="level1"><div class="li"> Opcionalment, permet definir una contrasenya d’accés a la BASE.</div>
</li>
</ul>

<p>
Per generar gràfics amb la BASE, s’ha de disposar d’un conjunt de <strong>mòduls PEAR</strong>. Per instal·lar-los, farem servir les ordres següents:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">pear <span class="kw2">install</span> Image_Color</div></li><li class="li1"><div class="de1">pear <span class="kw2">install</span> Image_Canvas-alpha</div></li><li class="li1"><div class="de1">pear <span class="kw2">install</span> Image_Graph-alpha</div></li></ol></pre>

<p>
Finalment, caldrà aixecar el dimoni Snort per començar a recollir informació. Per fer-ho, utilitzarem l’ordre següent:
</p>
<pre class="code">/usr/local/bin/snort -c /usr/local/etc/snort/snort.conf -D</pre>

</div>

<h3><a id="atacs_comuns" >Atacs comuns</a></h3>
<div class="level3">

<p>
Amb el conjunt d’eines IDS/IPS és possible detectar els diferents atacs que pot patir una xarxa. Els més comuns són els que es detallen a continuació:
</p>
<div class="iocnote"><div class="ioccontent">
<p>
Malware és el conjunt de programari maliciós. S’hi inclouen els virus, els cucs, els cavalls de Troia, les eines d’intrusió (rootkits) i el programari de publicitat (adware), entre altres.
</p>
</div></div><ul>
<li class="level1"><div class="li"> <strong>Correu brossa</strong>. Actualment els virus, els cavalls de Troia i altres programes maliciosos (<em>malware</em>), un cop tenen el sistema infectat acostumen a enviar <em>correu brossa</em>. Per detectar aquest problema de seguretat, caldrà buscar sistemes que estiguin generant trànsit amb destinació al port 25 d’altres sistemes d’Internet.</div>
</li>
<li class="level1"><div class="li"> <strong>Denegacions de servei (DoS)</strong>. Es tracta d’un problema de seguretat que busca deshabilitar un servei determinat. Hi ha moltes maneres de causar una denegació de servei. La més coneguda, perquè és la més complicada d’aturar, és llançar una gran quantitat de connexions simultànies. Això fa que els recursos del servidor s’esgotin o bé que, simplement, el trànsit legítim es redueixi com a conseqüència del trànsit de l’atac. Tot i això, aquesta no és l’única manera de provocar una denegació de servei. Per exemple, un paquet manipulat de manera especial pot fer que un dimoni produeixi un error intern i, consegüentment, el servei s’apagui. Si el dimoni en qüestió no disposa d’un sistema d’arrencada automàtic, es produeix una denegació de servei fins que un operador del sistema hi intervé.</div>
</li>
<li class="level1"><div class="li"> <strong>P2P/Programari piratejat</strong>. Actualment, en cas d’intrusió en un servidor, el més comú és que s’hi instal·li programari per enviar <em>correu brossa</em>. Anteriorment, els sistemes infectats se solien fer servir per distribuir programari piratejat (<em>warez</em>). En aquests casos, el trànsit d’<acronym title="File Transfer Protocol">FTP</acronym> o de protocols P2P sol incrementar. Així doncs, per detectar aquest tipus d’incident, cal revisar l’increment d’aquests protocols mitjançant un IDS/IPS o bé un sistema d’anàlisi del trànsit.</div>
</li>
<li class="level1"><div class="li"> <strong>Pesca.</strong> Un altre efecte dels virus és la instal·lació de programari per robar informació. Un cop instal·lat, aquest atac pot ser complicat de detectar: cal analitzar els canvis en el sistema de fitxers, analitzar els fitxers de registre de tots els dimonis o bé fer captures del trànsit de la xarxa. En cas que la pesca faci servir un nom de domini diferent del nom propi del sistema, es podria analitzar el trànsit HTTP buscant la capçalera <em>Host</em> per detectar-lo. Si utilitzem <em>tcpdump</em> en Linux, ho podríem fer mitjançant les ordres següents:</div>
</li>
</ul>
<div class="iocnote"><div class="ioccontent">
<p>
El warez és un programari amb drets d’autor que es distribueix il·lícitament.
</p>
</div></div><pre class="code bash"><ol><li class="li1"><div class="de1"><span class="co4"># </span>tcpdump <span class="re5">-nni</span> eth0 <span class="re5">-s</span> <span class="nu0">0</span> <span class="re5">-w</span> <span class="sy0">/</span>tmp<span class="sy0">/</span>captura <span class="st_h">'port 80'</span></div></li></ol></pre>

<p>
Si tinguéssim una mostra prou gran del trànsit, les peticions web es podrien analitzar mitjançant l’ordre següent:
</p>
<div class="iocnote"><div class="ioccontent">
<p>
L’ordre strings extreu les cadenes de text d’un fitxer binari.
</p>
</div></div><pre class="code bash"><ol><li class="li1"><div class="de1"><span class="kw2">strings</span> <span class="sy0">/</span>tmp<span class="sy0">/</span>exemple <span class="sy0">|</span> <span class="kw2">grep</span> Host: <span class="sy0">|</span> <span class="kw2">awk</span> <span class="st_h">'{ print $NF }'</span> <span class="sy0">|</span> <span class="kw2">sort</span> <span class="sy0">|</span> <span class="kw2">uniq</span> <span class="re5">-c</span> <span class="sy0">|</span> <span class="kw2">sort</span> <span class="re5">-n</span></div></li></ol></pre>

</div>

<h4><a id="distribucio_de_virus" >Distribució de virus</a></h4>
<div class="level4">

<p>
Per poder fer els atacs que s’han descrit més amunt, és imprescindible propagar, mínimament, el programa maliciós. D’aquesta manera, en general, un equip infectat, independentment de la resta d’accions que se li poden fer emprendre, es converteix en un altre punt de propagació d’aquest programa. És imprescindible, doncs, analitzar periòdicament els equips per buscar-hi virus i altres tipus de programes maliciosos.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
En el cas de Linux, es pot fer servir l’antivirus de codi lliure ClamAV per analitzar els sistemes.
</p>
</div></div>
</div>

<h2><a id="tallafocs_en_equips_i_servidorsinstal_lacio_configuracio_i_utilitzacio" >Tallafocs en equips i servidors: instal·lació, configuració i utilització</a></h2>
<div class="level2">

<p>
Un tallafoc (<em>firewall</em>) és un sistema dissenyat per controlar l’accés a les xarxes i els sistemes. Aquest dispositiu pot funcionar com a element de xarxa i gestionar els permisos d’accés entre xarxes diferents i els nivells de confiança o bé com a aplicació en els amfitrions (<em>hosts</em>) per protegir tant les connexions entrants com sortints del sistema, concretament de la resta de la xarxa.
</p>

</div>

<h3><a id="ambit_de_la_proteccio_del_tallafoc" >Àmbit de la protecció del tallafoc</a></h3>
<div class="level3">

<p>
Es pot fer una primera classificació dels tallafocs segons el que han de protegir:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Tallafocs de xarxa</strong>: es tracta d’un element en la xarxa que regula les connexions entre els diferents segments de la xarxa. A part de les possibles connexions cap al tallafoc mateix, la funció principal que té és filtrar el trànsit que hi passa.</div>
</li>
</ul>
<div class="iocnote"><div class="ioccontent">
<p>
Els fabricants principals de tallafocs són Juniper, CISCO, CheckPoint, Fortinet i Stonesoft.
</p>
</div></div><ul>
<li class="level1"><div class="li"> <strong>Tallafocs personals</strong> (o de sistema): s’instal·la com una altra aplicació del sistema i la funció que té és filtrar el trànsit que s’hi dirigeix, tant connexions entrants (connexions que provenen d’altres sistemes) com connexions sortints (connexions que s’originen en el mateix sistema), que poden ser causades per altres aplicacions.</div>
</li>
</ul>

<p>
Preferentment, s’hauria d’aplicar un tallafoc de xarxa en lloc d’instal·lar un tallafoc de sistema a cada màquina. Els motius, que són diversos, són els següents:
</p>
<ul>
<li class="level1"><div class="li"> Es permet centralitzar la política de seguretat: un canvi d’adreçament global o d’un amfitrió implicaria accedir a tots els sistemes per reconfigurar els tallafocs.</div>
</li>
<li class="level1"><div class="li"> Si es desactiva el tallafoc d’un sistema, s’evita que tingui accés a la informació que circula per la xarxa.</div>
</li>
</ul>

</div>

<h3><a id="base_del_filtratge" >Base del filtratge</a></h3>
<div class="level3">

<p>
També podem diferenciar els tallafocs en funció de les dades que fan servir per decidir si permeten o deneguen un determinat paquet:
</p>
<ul>
<li class="level1"><div class="li"> Tallafocs de <strong>filtratge de paquets sense estat</strong> (<em>stateless</em>): les dades que fan servir són, estrictament, les que conté el paquet. Normalment, les dades que s’utilitzen són l’origen, la destinació, el protocol i, si el protocol de transport ho suporta, el port d’origen i el de destinació.</div>
</li>
<li class="level1"><div class="li"> Tallafocs de <strong>filtratge de paquets amb estat</strong> (<em>stateful</em>): no només es basa en les dades que proporciona el paquet, sinó que també manté una taula interna d’estat. D’aquesta manera, permet identificar si un determinat paquet inicia una connexió nova, si és d’una connexió existent o si és un paquet invàlid. Això permet evitar atacs que injecten paquets amb un origen invàlid (passarien per un tallafoc sense estat) i provoquen denegacions de servei, però sense que estiguin relacionats amb cap connexió.</div>
</li>
<li class="level1"><div class="li"> Tallafocs a <strong>escala d’aplicació</strong> (<em>proxy</em>): aquesta classe de tallafocs no es limita a inspeccionar els paquets que passen per la xarxa, sinó que entén el protocol d’aplicació. Això permet que aquests tallafocs detectin si s’intenta fer servir el protocol d’alguna manera que pugui provocar algun tipus de comportament no desitjat o, fins i tot, filtrar segons el contingut. Evidentment, inspeccionar amb més profunditat el trànsit que circula implica un cost més gran.</div>
</li>
</ul>

</div>

<h3><a id="politica_per_defecte_de_restriccions" >Política per defecte de restriccions</a></h3>
<div class="level3">

<p>
És possible configurar tots els tallafocs per tal que tinguin dues intencions, denegar només un part del trànsit o bé permetre’n només una part:
</p>
<ul>
<li class="level1"><div class="li"> Política <strong>restrictiva</strong>: denega tot el trànsit, tret del que se li indica (equival a una llista blanca).</div>
</li>
<li class="level1"><div class="li"> Política <strong>permissiva</strong>: permet tot el trànsit, tret del que se li indica (equival a una llista negra).</div>
</li>
</ul>

<p>
Aparentment, el matís és molt subtil, però implica una gran diferència. Si s’implementa una política restrictiva, el que es necessita saber és què circula lícitament per la xarxa per permetre aquest trànsit. En canvi, si s’implementa una política permissiva, el que es necessita saber és quin trànsit no volem que circuli per la xarxa. Segons l’entorn, pot interessar més una política per defecte o l’altra. Preferentment, però, s’hauria de fer servir la política restrictiva, perquè com que només deixa circular el trànsit permès, s’evita la possibilitat d’haver oblidat algun trànsit potencialment perillós pel sistema.
</p>

<p>
A continuació, es mostren uns quants exemples d’aplicació d’aquestes polítiques. Són els següents:
</p>
<ul>
<li class="level1"><div class="li"> Si disposem d’un tallafoc i de dos servidors que només tenen un servidor SMTP, el més adequat seria aplicar-hi una política restrictiva i permetre, només, el trànsit amb destinació al port 25.</div>
</li>
<li class="level1"><div class="li"> La política permissiva podria ser adequada en cas de tenir un entorn de confiança en què, considerant la quantitat de tràfic que s’hi genera, no es vol penalitzar l’intercanvi de paquets, però sí restringir alguns ports administratius a un segment determinat de la xarxa.</div>
</li>
</ul>

</div>

<h3><a id="diferencia_entre_filtratge_per_rang_o_per_adreca" >Diferència entre filtratge per rang o per adreça</a></h3>
<div class="level3">

<p>
El filtratge dels paquets es pot fer tant per rang (segment de xarxa) com per IP (sistema). En general, els sistemes s’haurien de separar en diferents segments segons la funció que fan. Preferentment, també caldria especificar la visibilitat per a cada segment en el tallafoc. Si, per algun motiu, es vol introduir una regla per a un sistema específic, cal valorar, abans de fer-ho, si aquest sistema és prou diferent per tenir un segment independent.
</p>

</div>

<h3><a id="tipus_de_bloqueig" >Tipus de bloqueig</a></h3>
<div class="level3">

<p>
Els tallafocs també es poden classificar segons la política que segueixen en bloquejar una transmissió. La divisió és la següent:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Descarta</strong> (<em>DROP</em>): descarta el paquet completament sense notificar-ho a qui l’ha enviat.</div>
</li>
<li class="level1"><div class="li"> <strong>Rebutja</strong> (<em>REJECT</em>): descarta el paquet i ho notifica a qui l’ha enviat.</div>
</li>
</ul>

<p>
És més recomanable fer servir una política per defecte de descartar, ja que s’evita que un possible atacant esbrini si el tallafoc ha passat el paquet o l’ha filtrat. Tot i així, per facilitar l’administració de xarxes, és interessant fer servir la política de rebutjar en les xarxes internes, ja que ajuda a diagnosticar problemes de connectivitat.
</p>

</div>

<h4><a id="comparacio_entre_descartar_i_rebutjar" >Comparació entre descartar i rebutjar</a></h4>
<div class="level4">

<p>
Un atacant podria intentar esbrinar si un dimoni escolta o no un port UDP. El protocol de transport UDP no estableix cap connexió. Per tant, a l’hora de fer un escaneig de ports UDP, s’espera rebre un paquet ICMP de tipus 3 (<em>unreachable</em>). Si no es rep, se suposa que el port és obert. Podem comprovar-ho mitjançant l’eina <em>nc</em> i <em>tcpdump</em>.
</p>

<p>
Primer de tot, des d’una consola Linux, cal executar el <em>tcpdump</em> i limitar-ne la sortida al port UDP/53 o missatges ICMP:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"><span class="co0"># tcpdump -nni eth0 'udp port 53 or icmp'</span></div></li><li class="li1"><div class="de1">tcpdump: verbose output suppressed, use <span class="re5">-v</span> or <span class="re5">-vv</span> <span class="kw1">for</span> full protocol decode</div></li><li class="li1"><div class="de1">listening on eth0, link-type EN10MB <span class="br0">&#40;</span>Ethernet<span class="br0">&#41;</span>, capture <span class="kw2">size</span> <span class="nu0">96</span> bytes</div></li></ol></pre>

<p>
A continuació, en una altra consola amb l’<em>nc</em> (<em>netcat</em>), es pot fer la prova en qualsevol servidor d’Internet. Podrem comprovar que, en cas que tinguin una política de rebutjar o bé no tinguin cap tallafoc, no ens sortirà cap missatge.
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"><span class="co4"># </span>nc <span class="re5">-uz</span> giktal.systemadmin.es <span class="nu0">53</span></div></li></ol></pre>

<p>
Tanmateix, en la consola del <em>tpcdump</em> veurem una sortida similar a la següent:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"><span class="nu0">10</span>:04:<span class="nu0">24.542583</span> IP 10.10.1.59.34084 <span class="sy0">&gt;</span> 10.10.17.159.53: <span class="br0">&#91;</span><span class="sy0">|</span>domain<span class="br0">&#93;</span></div></li><li class="li1"><div class="de1"><span class="nu0">10</span>:04:<span class="nu0">24.542614</span> IP 10.10.1.59.34084 <span class="sy0">&gt;</span> 10.10.17.159.53: <span class="br0">&#91;</span><span class="sy0">|</span>domain<span class="br0">&#93;</span></div></li><li class="li1"><div class="de1"><span class="nu0">10</span>:04:<span class="nu0">24.542783</span> IP 10.10.1.15 <span class="sy0">&gt;</span> 10.10.1.59: ICMP 10.10.17.159 udp port <span class="nu0">53</span> unreachable, length <span class="nu0">37</span></div></li><li class="li1"><div class="de1"><span class="nu0">10</span>:04:<span class="nu0">24.542785</span> IP 10.10.1.15 <span class="sy0">&gt;</span> 10.10.1.59: ICMP 10.10.17.159 udp port <span class="nu0">53</span> unreachable, length <span class="nu0">37</span></div></li></ol></pre>

<p>
En cas que el servidor sí que tingui habilitat el <acronym title="Domain Name System">DNS</acronym> o bé tingui la política de descartar el paquet en el tallafoc, l’<em>nc</em> mostrarà el missatge següent:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"><span class="co0"># nc -uz giktal.systemadmin.es 53</span></div></li><li class="li1"><div class="de1">Connection to giktal.systemadmin.es <span class="nu0">53</span> port <span class="br0">&#91;</span>udp<span class="sy0">/</span>domain<span class="br0">&#93;</span> succeeded<span class="sy0">!</span></div></li></ol></pre>

<p>
En la terminal del <em>tcpdump</em> es veuran diversos enviaments sense cap resposta:
</p>
<pre class="code">10:09:22.117146 IP 10.10.1.59.48166 &gt; 84.88.0.3.53: [|domain]
10:09:22.117577 IP 10.10.1.59.48166 &gt; 84.88.0.3.53: [|domain]
10:09:23.117871 IP 10.10.1.59.48166 &gt; 84.88.0.3.53: [|domain]
10:09:24.118217 IP 10.10.1.59.48166 &gt; 84.88.0.3.53: [|domain]
10:09:25.118552 IP 10.10.1.59.48166 &gt; 84.88.0.3.53: [|domain]</pre>

<p>
En resum, es pot veure que si s’envia un paquet UDP a un sistema, poden passar dues coses:
</p>
<ul>
<li class="level1"><div class="li"> Si <strong>retorna un paquet ICMP</strong>: el port UDP està filtrat amb una política de rebutjar o bé no hi ha cap dimoni que escolti en el port.</div>
</li>
<li class="level1"><div class="li"> Si <strong>no retorna res</strong>: el port UDP està filtrat amb una política de descartar o bé hi ha un dimoni que escolta en aquest port.</div>
</li>
</ul>

<p>
Per diferenciar si és un filtratge o si, realment, s’arriba en un port en què hi ha un procés que escolta, el comportament del sistema es pot verificar amb la resta de ports UDP.
</p>

</div>

<h3><a id="configuracio_del_tallafoc" >Configuració del tallafoc</a></h3>
<div class="level3">

<p>
Com en el cas de l’IDS/IPS, hi ha dues maneres diferents de configurar un tallafoc.
</p>
<ul>
<li class="level1"><div class="li"> <strong>Passarel·la</strong> (<em>bridge</em>): com en el cas d’un IDS/IPS, el tallafoc és transparent a la xarxa. No disposa d’una adreça i, per tant, no s’hi pot accedir directament per mitjà de les xarxes que protegeix. La instal·lació del tallafoc consisteix a recollir els paquets d’una interfície i, sense modificar-los, injectar-los en una altra interfície de xarxa segons les regles de filtratge.</div>
</li>
<li class="level1"><div class="li"> <strong>Encaminament</strong> (<em>routing</em>): es tracta del mètode més comú. Es configura el tallafoc de manera que actuï com a porta d’enllaç (<em>gateway</em>) de les xarxes que protegeix. Així, totes les connexions que s’estableixen entre xarxes diferents hi han de passar.</div>
</li>
</ul>

<p>
Si es tracta d’un IDS, configurar-lo en un port de còpia té sentit. Tanmateix, en un tallafoc només tindria sentit en cas de voler fer una prova per verificar-ne la configuració abans d’aplicar-la al tallafoc real.
</p>

</div>

<h3><a id="altres_caracteristiques_dels_tallafocs" >Altres característiques dels tallafocs</a></h3>
<div class="level3">

<p>
Hi ha altres característiques que, tot i no ser pròpies dels tallafocs, es troben en la majoria.
</p>
<ul>
<li class="level1"><div class="li"> <strong>NAT/PAT</strong>. El NAT (traductor d’adreces de xarxa, <em>network address translator</em>) és un sistema de traducció de l’adreçament. Quan el paquet arriba al tallafoc, l’adreçament es tradueix a un altre adreçament diferent. Normalment es fa servir per comunicar un conjunt de sistemes (normalment amb adreçament privat amb la resta d’Internet fent servir una sola IP pública). Així doncs, tota una xarxa queda amagada rere una IP. Segons l’adreça que es modifica, es parla d’SNAT (modificar l’adreça origen) o bé de DNAT (modificar l’adreça destinació).<br/>
El terme <em>PAT</em> (<em>port address translation</em>) implica no només una redefinició de l’adreçament, sinó també del port.</div>
</li>
</ul>
<div class="iocnote"><div class="ioccontent">
<p>
L’adreçament privat es defineix en l’<acronym title="Request for Comments">RFC</acronym>-1918 i són les xarxes 10.0.0.0/8, 172.16.0.0/12 i 192.168.0.0/16.
</p>
</div></div><ul>
<li class="level1"><div class="li"> <strong>VPN.</strong> El VPN (xarxa privada virtual, <em>virtual private network</em>) és una xarxa implementada sobre una capa de <em>programari</em> (que normalment xifra el trànsit). A la vegada, la capa de programari està implementada sobre una altra capa ja existent de xarxa. Això permet crear xarxes sobre xarxes que ja existeixen. Normalment es fa servir per connectar a la xarxa interna des d’un punt remot per mitjà de la xarxa pública d’Internet.<br/>
Hi ha targetes amb unitats de procés especialitzades a fer el xifratge. Per tant, en general, no ho fa la unitat de procés del tallafoc, sinó una targeta amb una unitat de procés especialitzada a fer aquesta operació.</div>
</li>
<li class="level1"><div class="li"> <strong>IDS/IPS</strong>. Tot i que no és la funció que fa, un tallafoc també pot actuar com a IDS/IPS. Normalment, per afegir-hi aquesta càrrega extra, s’afegeix una altra targeta al sistema. D’aquesta manera, s’aconsegueix que reparteixi la càrrega de la feina extra que ha de fer en inspeccionar els paquets per cercar-hi signatures.</div>
</li>
</ul>

</div>

<h3><a id="limitacions_dels_tallafocs" >Limitacions dels tallafocs</a></h3>
<div class="level3">

<p>
Els tallafocs són una eina imprescindible per garantir la seguretat en les xarxes. De totes maneres, no són infranquejables i tenen limitacions com les següents:
</p>
<ul>
<li class="level1"><div class="li"> No protegeixen d’errors de seguretat dels serveis a què permet el trànsit. Per exemple, si a causa de l’entrada d’una cadena manipulada de manera especial a un formulari web, s’accedeix a dades confidencials, el tallafoc no serà capaç de detectar-ho.</div>
</li>
<li class="level1"><div class="li"> No protegeix d’atacs entre equips connectats en el mateix segment perquè el trànsit no passa pel tallafoc.</div>
</li>
<li class="level1"><div class="li"> És possible encapsular trànsit dins altres protocols (<strong>ICMP</strong>, <strong><acronym title="Domain Name System">DNS</acronym></strong>, etc.), cosa que permet crear túnels que comuniquen dos extrems per mitjà d’un tallafoc.</div>
</li>
<li class="level1"><div class="li"> Si s’obre un port en el tallafoc, no és possible assegurar que el protocol que <em>a priori</em> hauria de circular per aquest port sigui, forçosament, el protocol que hi passa en realitat. Per detectar aquesta situació, seria necessari inspeccionar els paquets.</div>
</li>
</ul>

</div>

<h3><a id="sistema_tallafoc_de_linux" >Sistema tallafoc de Linux</a></h3>
<div class="level3">

<p>
Les iptables són una eina que permet configurar les regles de filtratge del tallafoc que implementa el Kernel Linux. L’entorn que implementa efectivament les regles de filtratge s’anomena <em>netfilter.</em> Per fer-ho, utilitza lligams (<em>hooks</em>) en el sistema de procés d’un paquet. Com que tots dos estan tan relacionats, sovint, per fer referència a aquest conjunt, s’utilitza simplement el terme <em>iptables</em>.
</p>

<p>
Per poder fer operacions amb les <em>iptables</em> és necessari tenir privilegis d’administració del sistema, o fent servir l’usuari primari (<em>root user</em>) o fent servir permisos donats per l’administrador de l’equip mitjançant <em>sudo</em>.
</p>

</div>

<h4><a id="taules" >Taules</a></h4>
<div class="level4">

<p>
El mode de funcionament de les <em>iptables</em> agrupa les regles de filtratge de paquets en taules segons la funció i el punt de processament:
</p>
<ul>
<li class="level1"><div class="li"> <strong>filter</strong> (taula per defecte): defineix la política que defineix com un paquet, generat per un procés local del sistema, entra en un procés (entrada, <em>INPUT</em>), passa pel sistema (avançament, <em>FORWARD</em>) o en surt (sortida, <em>OUTPUT</em>). En els lligams que té en comú amb la resta de les taules, aquesta és la taula menys prioritària.</div>
</li>
<li class="level1"><div class="li"> <strong>nat</strong>: defineix com es modifiquen i es redirigeixen els paquets quan es crea una nova connexió, segons si surten del sistema des d’un procés local (<em>OUTPUT</em>), entren per la interfície de xarxa (<em>PREROUTING</em>) o estan a punt de sortir per la interfície de xarxa (<em>POSTROUTING</em>).</div>
</li>
<li class="level1"><div class="li"> <strong>mangle</strong>: defineix com es modifica un paquet que entra per la interfície de xarxa (<em>PREROUTING</em>), travessa el sistema (<em>FORWARD</em>) i està a punt de sortir per la targeta de xarxa (<em>POSTROUTING</em>) o bé entra (<em>INPUT</em>) o surt (<em>OUTPUT</em>) d’un procés local del sistema. En els <em>lligams</em> que té en comú amb la taula <em>nat</em>, aquesta taula té més prioritat.</div>
</li>
<li class="level1"><div class="li"> <strong>raw</strong>: aquesta taula té més prioritat que la resta. Defineix dos lligams amb més prioritat que la resta de taules. I això abans que s’apliqui el mòdul <em>conntrack</em>. Es fa servir, doncs, per afegir regles sense estat. Els paquets que entren per una interfície de xarxa (<em>PREROUTING</em>) o que surten (<em>OUTPUT</em>) d’un procés local, es poden filtrar amb aquesta taula.</div>
</li>
</ul>

</div>

<h4><a id="cadenes_chains" >Cadenes (chains)</a></h4>
<div class="level4">

<p>
Hi ha dos tipus de cadenes o <em>chains</em>: les que estan predefinides i les que crea l’usuari. Pel que fa a les predefinides, n’hi ha una per cada <em>lligam</em> i taula. Per exemple, en la taula <em>filter</em> hi ha tres cadenes predefinides: INPUT, OUTPUT i FORWARD.
</p>

<p>
Per evitar repetir regles en cada cadena predefinida, l’usuari en pot crear de pròpies i les pot agrupar com convingui. Mitjançant l’opció <em>-N</em> es pot crear una regla nova:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">iptables <span class="re5">-N</span> exemple</div></li></ol></pre>

<p>
A continuació, aquesta cadena es pot afegir a la resta de cadenes per tal que quan un paquet passi per algun dels <em>lligams,</em> també passi per aquesta cadena nova:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">iptables <span class="re5">-A</span> INPUT <span class="re5">-t</span> nat <span class="re5">-j</span> exemple</div></li></ol></pre>

</div>

<h4><a id="ordre_de_processament_d_un_paquet" >Ordre de processament d&#039;un paquet</a></h4>
<div class="level4">

<p>
Tal com es pot veure en la <span class="tabref"><a href="#Table1"><span>taula</span></a></span>, l’ordre que seguiria un paquet per aquestes taules i lligams depèn de l’origen i la destinació que tingui.
</p>
<div class="ioctable ">
<div class="titletable"><a name="Table1"><span>Taula: </span></a>Lligams depenent de l’origen i la destinació</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> Origen i destinació                                          </th><th class="col1 leftalign"> Ordre                                                                                                                                     </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> <strong>D’una interfície de xarxa a un procés local</strong>              </td><td class="col1 leftalign"> 1. mangle (PREROUTING)<br/>
2. nat (PREROUTING)<br/>
3. mangle (INPUT)<br/>
4. filter (INPUT)                                                      </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> <strong>D’un procés local a una interfície de xarxa</strong>              </td><td class="col1 leftalign"> 1. mangle (OUTPUT)<br/>
2. nat (OUTPUT)<br/>
3. filter (OUTPUT)<br/>
4. mangle (POSTROUTING)<br/>
5. nat (POSTROUTING)                                </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <strong>D’un procés local a un altre procés local</strong>                </td><td class="col1 leftalign"> 1. mangle (OUTPUT)<br/>
2. nat (OUTPUT)<br/>
3. filter (OUTPUT)                                                                                 </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <strong>El paquet no va dirigit al sistema, sinó que el travessa</strong> </td><td class="col1"> 1. mangle (PREROUTING)<br/>
2. nat (PREROUTING)<br/>
3. mangle (FORWARD)<br/>
4. filter (FORWARD)<br/>
5. mangle (POSTROUTING)<br/>
6. nat (POSTROUTING) </td>
	</tr>
</table></div>
</div>
<p>
Un paquet parteix d’un lligam i va travessant seqüencialment les regles de cada cadena fins que passa el següent:
</p>
<ul>
<li class="level1"><div class="li"> Una regla concorda i fa una crida a alguna acció (<em>target</em>).</div>
</li>
<li class="level1"><div class="li"> Es crida a l’acció <em>RETURN</em> explícitament mitjançant <em>-j RETURN</em> o bé implícitament en no haver-hi més regles en la cadena.</div>
</li>
</ul>

</div>

<h4><a id="accions_targets" >Accions (targets)</a></h4>
<div class="level4">

<p>
Les accions per defecte són les següents:
</p>
<ul>
<li class="level1"><div class="li"> <strong>ACCEPT</strong>: permet el pas del paquet.</div>
</li>
<li class="level1"><div class="li"> <strong>DROP</strong>: descarta el paquet.</div>
</li>
<li class="level1"><div class="li"> <strong>QUEUE</strong>: passa el paquet a l’espai d’usuari perquè una aplicació el processi. Si no hi ha cap aplicació, es descarta.</div>
</li>
<li class="level1"><div class="li"> <strong>RETURN</strong>: acaba el processament de la cadena i torna a la cadena anterior. És útil per deixar de processar una cadena si ja sabem que no coincidirà amb les regles següents. Per exemple, si veiem que és un paquet UDP i les regles de la cadena són totes per a TCP.</div>
</li>
</ul>

<p>
A més a més, una acció molt utilitzada, tot i que és un mòdul independent, és <strong>REJECT</strong>, que en lloc de descartar el paquet, el rebutja i envia un paquet <strong>ICMP</strong> com a resposta.
</p>

</div>

<h4><a id="opcions_generals_per_aplicar_un_filtre" >Opcions generals per aplicar un filtre</a></h4>
<div class="level4">

<p>
Per filtrar el paquet hi ha moltes opcions disponibles, tant opcions que estan incloses per defecte en les <em>iptables</em> com altres que estan desenvolupades com a mòduls. A continuació, s’exposen les més comunes:
</p>
<ul>
<li class="level1"><div class="li"> <strong>-s</strong> (IP origen) / <strong>-d</strong> (IP destinació): permet especificar tant la IP d’origen coma la IP de destinació. Si una opció no s’especifica, se suposa que s’indica una IP qualsevol.</div>
</li>
<li class="level1"><div class="li"> <strong>-i</strong> (interfície d’entrada) / <strong>-o</strong> (interfície de sortida): pot set tant una interfície física com un túnel o una passarel·la. A més, permet especificar expressions regulars per indicar totes les interfícies d’un tipus concret.</div>
</li>
<li class="level1"><div class="li"> <strong>-p</strong> (protocol): permet separar entre trànsit <strong>TCP</strong>, <strong>UDP</strong> i <strong>ICMP</strong> o tots els trànsits (mitjançant <em>all</em>).</div>
</li>
<li class="level1"><div class="li"> <strong>-sport</strong> / <strong>-dport</strong>: permet especificar tant el port d’origen (<em>sport</em>) com el port de destinació (<em>dport</em>) si el protocol de transport deixa utilitzar ports. Passa el mateix que amb les IP d’origen i de destinació: si no s’especifica, se suposa que pot ser qualsevol.</div>
</li>
<li class="level1"><div class="li"> <strong>–state</strong>: en totes les taules, excepte la <strong>RAW</strong>, es pot fer servir l’estat de la connexió. Els estats possibles són els següents:</div>
<ul>
<li class="level2"><div class="li"> <strong>INVALID</strong>: el paquet no s’ha pogut identificar amb cap connexió ja existent. Independentment de possibles atacs, és possible que es produeixi aquest estat si hi ha poca memòria per mantenir la taula d’estats de les connexions.</div>
</li>
<li class="level2"><div class="li"> <strong>NEW</strong>: el paquet ha establert una connexió nova.</div>
</li>
<li class="level2"><div class="li"> <strong>ESTABLISHED</strong>: el paquet pertany a una connexió ja establerta.</div>
</li>
<li class="level2"><div class="li"> <strong>RELATED</strong>: el paquet és una connexió nova, però està relacionada amb una connexió que ja està establerta. Un exemple podria ser la connexió de dades d’<strong><acronym title="File Transfer Protocol">FTP</acronym></strong> o bé un paquet <strong>ICMP</strong>.</div>
</li>
</ul>
</li>
</ul>

</div>

<h4><a id="politica_per_defecte_de_la_cadena" >Política per defecte de la cadena</a></h4>
<div class="level4">

<p>
Amb el paràmetre <em>-P</em> es pot definir la política per defecte d’una cadena. Per exemple, per definir com a política per defecte que la cadena <strong>INPUT</strong> sigui descartar, la de <strong>FORWARD</strong> rebutjar i la d’<strong>OUT</strong> acceptar s’haurien d’executar les ordres següents:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">iptables <span class="re5">-P</span> INPUT DROP</div></li><li class="li1"><div class="de1">iptables <span class="re5">-P</span> FORWARD REJECT</div></li><li class="li1"><div class="de1">iptables <span class="re5">-P</span> OUTPUT ACCEPT</div></li></ol></pre>

</div>

<h4><a id="exemples_de_regles" >Exemples de regles</a></h4>
<div class="level4">

<p>
En una política de filtratge restrictiva. Per permetre tots els paquets UDP des d’una xarxa (10.0.0.0/8) cap a un equip que els escolti en el port 138, caldria aplicar la regla següent:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">iptables <span class="re5">-A</span> INPUT <span class="re5">-s</span> 10.0.0.0<span class="sy0">/</span><span class="nu0">8</span> <span class="re5">-p</span> udp <span class="re5">--dport</span> <span class="nu0">138</span> <span class="re5">-j</span> ACCEPT</div></li></ol></pre>

<p>
D’altra banda, en una política permissiva, per rebutjar un determinat paquet per port destinació, independentment del protocol, caldria aplicar la regla següent:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">iptables <span class="re5">-A</span> INPUT <span class="re5">--dport</span> <span class="nu0">53</span> <span class="re5">-j</span> REJECT</div></li></ol></pre>

<p>
En una porta d’enllaç, per fer <em>nat</em> sortint per una interfície de xarxa amb IP estàtica, es pot fer mitjançant l’acció <em>SNAT</em>:
</p>
<pre class="code">iptables -t nat -A POSTROUTING -o eth1 -j SNAT</pre>

<p>
En cas de disposar d’una IP dinàmica, cal afegir la lògica encarregada del cas què la IP canvia (el temps durant el qual la interfície no està disponible i el mateix canvi d’IP). L’acció <em>MASQUERADE</em> s’encarrega de gestionar-ho a un cost de procés per petició més gran.
</p>
<div class="iocfigure"><a name="Figura9"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Exemple regles amb FWBuilder

</figcaption><img src="../media/smxm6uf4u5_im15.png" alt="" /></figure>
</div>
</div>

<h4><a id="interficies_grafiques_per_a_tallafocs" >Interfícies gràfiques per a tallafocs</a></h4>
<div class="level4">

<p>
Hi ha una gran quantitat d’interfícies gràfiques que permeten gestionar tant <em>iptables</em> com altres sistemes tallafoc.
</p>

<p>
Generalment, cada distribució inclou la seva pròpia interfície gràfica per al tallafoc. Generalment, aquesta interfície està pensada per habilitar i desactivar conjunts de regles predefinides. Per fer configuracions més complexes, cal fer servir la línia d’ordres o programari específic, que és molt més complex.
</p>

<p>
Un exemple d’interfícies gràfiques per a configuracions complexes és l’<em>Fwbuilder</em>, que, a més de permetre configurar <em>iptables,</em> permet configurar encaminadors CISCO, Firewalls CISCO PIX i diferents tallafocs de sistemes BSD: ipfilter, pf i ipfw.
</p>
<div class="iocfigure"><a name="Figura10"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Configurador del tallafoc de MacOSX Server

</figcaption><img src="../media/smxm6uf4u5_im16.png" alt="" /></figure>
</div>
</div>

<h2><a id="interpretacio_i_utilitzacio_com_a_ajuda_de_documentacio_tecnica" >Interpretació i utilització com a ajuda de documentació tècnica</a></h2>
<div class="level2">

<p>
Per considerar un sistema en producció primer caldria que el sistema passi pels entorns de proves, preproducció i producció. A més, cal generar documentació per poder fer el procés repetible, els procediments associats al servei segons sigui necessari i un sistema de monitoratge perquè les fallades del servei siguin detectades.
</p>

</div>

<h3><a id="instal_lacio_i_posada_en_marxa_d_un_sistema" >Instal·lació i posada en marxa d&#039;un sistema</a></h3>
<div class="level3">

<p>
Des del punt de vista de la seguretat, un sistema hauria de passar per tres fases abans de posar-se en funcionament. Aquestes fases han de correspondre a l’estat de la instal·lació del sistema per evitar que una mala configuració d’un sistema de proves pugui ser la porta d’entrada d’un intrús.
</p>
<ol>
<li class="level1"><div class="li"> <strong>Entorn de proves</strong>. Primer de tot, caldria que es posés en un entorn adequat per poder fer les primeres proves de funcionament del sistema. Convé que aquest entorn estigui al més aïllat possible, ja que, en una fase inicial de proves, no es pot esperar que els serveis estiguin configurats correctament ni que els usuaris no hagin de fer servir contrasenyes fortes.<br/>
Cal evitar que un entorn de proves estigui exposat a atacs externs per mitjà de la publicació de serveis.</div>
</li>
<li class="level1"><div class="li"> <strong>Entorn de preproducció</strong>. En una segona fase, el sistema ja està configurat com si estigués a punt de posar-se en producció. En aquesta fase, és possible que personal extern de l’organització hagi de poder accedir al sistema per fer-hi unes primeres proves abans de validar-lo i passar-lo a producció. Així doncs, caldria poder tenir el sistema amb els serveis definitius, ja configurats correctament, publicats, però amb l’accés limitat.<br/>
Un cop el sistema està validat com a correcte, la documentació del sistema, els procediments per operar-hi i les degudes mesures de seguretat aplicades, es pot passar a l’entorn de producció.</div>
</li>
<li class="level1"><div class="li"> <strong>Entorn de producció</strong>. Un cop superades les fases anteriors, el sistema està llest per posar-se en funcionament. Això el farà més sensible a atacs, ja que tindrà menys restriccions d’accés. En aquest punt, s’hi ha de limitar l’accés i els registres s’han de controlar de manera periòdica per verificar-ne el funcionament sense incidències.<br/>
Un entorn de producció ha d’estar <strong>documentat</strong> i <strong>monitorat</strong> correctament. Igualment, ha de tenir les polítiques de seguretat adequades.</div>
</li>
</ol>

</div>

<h3><a id="documentacio_del_sistema" >Documentació del sistema</a></h3>
<div class="level3">

<p>
Per tal d’instal·lar el sistema correctament, cal consultar la documentació del producte mateix. Sol estar en anglès.
</p>

<p>
És molt normal fer cerques amb cercadors per trobar configuracions predefinides. D’aquesta manera, no s’ha de començar de zero. Tot i que la informació que es pot trobar a Internet pot ser molt útil, sempre cal comprovar-la i contrastar-la. És possible que les dades que es trobin continguin problemes de seguretat accidentals o intencionats. Si són intencionats, l’atacant espera que algú faci servir les dades i, després, aprofita la mala configuració per accedir al sistema.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
L’anglès s’ha convertit en la llengua més utilitzada per a la documentació tècnica.
</p>
</div></div>
<p>
Durant el procés, cal documentar-ho tot, però especialment les fonts que utilitzem. Si emmagatzemem les dades en un sistema de gestió del coneixement, evitarem haver de repetir tot l’esforç que hem fet per posar el sistema en funcionament. D’aquesta manera, podrem repetir el procés seguint la documentació que hem generat prèviament.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
<strong>MediaWiki</strong> és un programari de codi lliure que pot funcionar com a sistema gestor del coneixement.
</p>
</div></div><div class="iocfigure"><a name="Figura11"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

MediaWiki, sistema de gestió del coneixement

</figcaption><img src="../media/smxm6uf4u5_im17.png" alt="" /></figure>
</div>
</div>

<h3><a id="procediments_del_sistema" >Procediments del sistema</a></h3>
<div class="level3">

<p>
Un cop el sistema s’ha instal·lat correctament, també cal documentar com cal operar-lo per mantenir-lo en funcionament. A continuació, s’exposen uns quants procediments bàsics que permeten operar qualsevol sistema.
</p>
<ol>
<li class="level1"><div class="li"> <strong>Arrencada</strong>. Un dels procediments més importants és saber com cal arrencar un servei determinat. Alguns sistemes poden ser tan simples que només faci falta prémer el botó d’arrencada per fer-los funcionar. Tanmateix, en altres sistemes, el procediment pot ser més complex. Per exemple, per arrencar un clúster compost per un conjunt de balanceigs de càrrega, un conjunt de servidors web i un conjunt de servidors de bases de dades, primer s’haurien d’arrencar les bases de dades, després els servidors web i finalment els balancejos. Si es fes a l’inrevés, les primeres capes saturarien les segones, que encara no estarien preparades, i l’arrencada podria fallar o trigar molt més temps.</div>
</li>
<li class="level1"><div class="li"> <strong>Comprovació del funcionament</strong>. Un cop arrencat el sistema, cal poder validar que funciona correctament. S’ha de comprovar que els components funcionen separadament i conjuntament. Per exemple, es pot comprovar separadament el funcionament d’un servidor web i el de la base de dades, però no es pot estar segur que funcionen en conjunt si no es fa una petició a la base de dades amb el servidor web.</div>
</li>
<li class="level1"><div class="li"> <strong>Comprovació de la configuració</strong>. En l’operació de qualsevol servei, el més normal és que s’hagin d’aplicar canvis en la configuració o que calgui afegir-hi entrades a mesura que passi el temps. Per això, cal saber com verificar la configuració abans d’aplicar-la.<br/>
Aplicar una configuració sense cap verificació (error d’operació) sol ser una de les causes de caiguda en dels serveis. Per això és important tenir ben documentats els passos que s’han de seguir per modificar-ne les configuracions i la manera adequada de verificar-hi els canvis.</div>
</li>
<li class="level1"><div class="li"> <strong>Aturada</strong>. L’aturada d’un servei, com l’arrencada, pot ser molt simple en la majoria dels casos, però, quan l’entorn és complex, pot ser més complicat. Seguim l’exemple del clúster: si primer s’apaga la base de dades i els servidors web continuen rebent peticions, aquestes peticions inacabables els poden saturar perquè no hi ha base de dades. Així doncs, en un entorn com aquest, el més adequat seria redirigir primer les peticions a un altre entorn en els balanceig de càrrega, apagar els servidors web i, finalment, les bases de dades.</div>
</li>
</ol>
<div class="iocimportant"><div class="ioccontent">
<p>
No es pot considerar que un <strong>sistema complex</strong> funciona correctament només pel bon funcionament, separadament, de les parts que l’integren, ja que el programari que fa interactuar aquests components també pot fallar.
</p>
</div></div>
</div>

<h3><a id="monitoratge_del_sistema" >Monitoratge del sistema</a></h3>
<div class="level3">

<p>
És important que un sistema estigui monitorat constantment abans que passi a producció. D’aquesta manera, les fallades es detectaran quan es produeixin i es podran solucionar al més aviat possible.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
El monitoratge dels serveis és important per assegurar que es troben dins els paràmetres del nivell de servei establert (SLA: acord de nivell de servei, <em>service level agreement</em>).
</p>
</div></div>
</div>

<h4><a id="disponibilitat_del_sistema" >Disponibilitat del sistema</a></h4>
<div class="level4">

<p>
La disponibilitat del sistema es calcula mitjançant el percentatge del temps durant el qual el servei ha estat disponible. En cas de càlcul anual, per als percentatges de disponibilitat que es mostren a continuació, el temps d’aturada seria el següent:
</p>
<ul>
<li class="level1"><div class="li"> 99%: 87 hores anuals (7 hores mensuals) d’aturada</div>
</li>
<li class="level1"><div class="li"> 99,9%: 8 hores anuals (43 minuts mensuals) d’aturada</div>
</li>
<li class="level1"><div class="li"> 99,99%: 52 minuts anuals (4 minuts mensuals) d’aturada</div>
</li>
<li class="level1"><div class="li"> 99,999%: 5 minuts anuals (26 segons mensuals) d’aturada</div>
</li>
<li class="level1"><div class="li"> 99,9999%: 30 segons anuals d’aturada</div>
</li>
</ul>

</div>

<h4><a id="supervisio_i_monitors_reactius" >Supervisió i monitors reactius</a></h4>
<div class="level4">

<p>
Per millorar la disponibilitat del sistema, és una pràctica força comuna disposar d’un programari que supervisi els dimonis que hi pugui haver, sia en un clúster o només en un node.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
<strong>Daemontools</strong> és un programari de codi lliure que reinicia automàticament els dimonis si s’han aturat.
</p>
</div></div>
<p>
Aquest tipus de supervisió dels dimonis acostuma a reduir considerablement el temps de caiguda dels serveis, ja que, en alguns casos, el problema se soluciona quan, simplement, el dimoni es torna a aixecar.
</p>

<p>
Si el problema no és simplement un dimoni que té un error intern i s’atura, sinó que es tracta d’un procés que, tot i estar actiu, ha deixat de respondre, cal tenir un monitor configurat amb una acció definida que ha de dur a terme en cas que passi.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
<strong>MONIT</strong> és un programari de codi lliure dedicat a la gestió de processos i sistemes de fitxers que permet fer tasques de manteniment de manera automàtica: permet configurar monitors reactius.
</p>
</div></div>
</div>

<h2><a id="realitzacio_d_informes_d_incidencies_de_seguretat" >Realització d&#039;informes d&#039;incidències de seguretat</a></h2>
<div class="level2">

<p>
Quan hi ha un incident de seguretat, primer cal notificar l’incident als responsables dels sistemes involucrats i procedir amb cautela.
</p>

<p>
Una de les tendències més comunes és entrar als equips involucrats i començar a buscar-hi sense saber exactament què passa. D’aquesta manera, es poden destruir pistes que poden ajudar a entendre què ha passat. Per tant, el primer que s’ha de fer és conservar la calma i seguir els punts següents:
</p>
<ul>
<li class="level1"><div class="li"> S’ha d’informar del possible incident de seguretat al responsable corresponent.</div>
</li>
<li class="level1"><div class="li"> Cal esbrinar si es tracta realment d’un incident de seguretat. Moltes vegades, un mal funcionament d’un sistema pot ser degut a una sobrecàrrega legítima o a una mala programació.</div>
</li>
<li class="level1"><div class="li"> Si realment és un incident, cal obtenir tota la informació possible per si pot servir de prova.</div>
</li>
<li class="level1"><div class="li"> S’ha d’intentar contenir l’incident per evitar que es propagui, sempre s’ha d’intentar reduir els danys que es pugin produir. Si és necessari, pot arribar a ser imprescindible bloquejar l’accés a l’equip o conjunt d’equips involucrats.</div>
</li>
<li class="level1"><div class="li"> Cal aplicar un pla per reduir o eliminar el risc que l’incident es torni a produir.</div>
</li>
<li class="level1"><div class="li"> Finalment, cal documentar tant l’incident com el procés i la metodologia seguida.</div>
</li>
</ul>

<p>
Per tal d’elaborar un informe complet sobre l’incident, cal que tingui els punts següents:
</p>

<p>
<strong>1) Descripció</strong>. El document ha de començar amb una introducció sobre l’incident i un conjunt de dades bàsiques. Són les següents:
</p>
<ul>
<li class="level1"><div class="li"> Breu descripció de l’incident a manera de títol.</div>
</li>
<li class="level1"><div class="li"> Personal implicat.</div>
</li>
<li class="level1"><div class="li"> Data i hora de l’inici de l’incident.</div>
</li>
<li class="level1"><div class="li"> Data i hora en què es dóna per finalitzat l’incident.</div>
</li>
<li class="level1"><div class="li"> Nivell d’afectació: es poden tenir diferents nivells amb diferents criteris, però això depèn de l’organització. De manera genèrica, es poden fer servir els nivells següents:</div>
<ul>
<li class="level2"><div class="li"> <strong>Greu</strong>: implica un problema de seguretat que ha causat danys en els sistemes afectats. Per tant, cal resoldre’l al més aviat possible i de manera ininterrompuda. Per exemple, si la base de dades principal de l’entitat queda fora de línia, farà falta que hi hagi una implicació total per resoldre-ho.</div>
</li>
<li class="level2"><div class="li"> <strong>Moderada</strong>: implica un problema que només ha degradat el servei o ha afectat parts no crítiques. Això sol indicar que la resolució s’ha de dur a terme durant la jornada laboral següent. Per exemple, si arran d’un atac de denegació de servei un sistema intern queda aturat, es pot resoldre quan la jornada laboral es reprengui.</div>
</li>
<li class="level2"><div class="li"> <strong>Lleu</strong>: implica un problema que s’ha detectat, però no ha tingut cap impacte en els sistemes. Sol demanar un temps de resolució més llarg, per exemple, durant la setmana següent a la detecció. Quan apareix un error de programació en algun programari que s’utilitza i, per això, cal aplicar els pedaços adients durant els dies següents.</div>
</li>
</ul>
</li>
</ul>
<div class="iocfigure"><a name="Figura12"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Els pics de trànsit poden ser tant atacs com enllaços d’altres webs

</figcaption><img src="../media/smxm6uf4u5_im18.png" alt="" /></figure>
</div>
<p>
<strong>2) Resum</strong>. A continuació de la descripció, cal fer un resum breu del problema, l’afectació, les causes i la solució perquè no es repeteixi. Mitjançant aquest resum, una persona no tècnica hauria de ser capaç d’entendre què ha passat i quines mesures s’han pres per evitar el mateix incident en un futur.
</p>

<p>
<strong>3) Anàlisi</strong>. L’anàlisi de l’incident ha de ser el cos del document i s’hi ha de poder seguir, pas a pas, què ha passat i com s’ha solucionat. Per això cal dividir aquesta anàlisi en tres parts diferenciades. Són les següents:
</p>

<p>
<strong>a) Procediment i metodologia</strong>. És important definir com s’ha actuat envers l’incident per tal de poder entendre, posteriorment, les decisions que s’han pres durant l’actuació. Tot i que el resultat pot ser el mateix, el mètode utilitzat pot invalidar les conclusions. Per exemple, si no s’ha comprovat la integritat d’un fitxer de registre, aquest fitxer pot haver estat alterat.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
Un cop recollides les dades, cal poder verificar la validesa de totes les dades recollides.
</p>
</div></div>
<p>
Per poder estar segurs que les dades que mostra el sistema són reals, convé tenir el conjunt d’eines que siguin necessàries compilades estàticament (sense llibreries del sistema que hagin pogut ser manipulades). Aquests fitxers s’han de transmetre al sistema d’una manera que impedeixi que es puguin modificar, per exemple, mitjançant un CD-ROM.
</p>

<p>
Amb aquests fitxers d’anàlisi cal anar escrivint els resultats en un sistema remot que tingui un sistema de comprovació, per exemple, l’<strong>MD5</strong> o l’<strong>SHA1</strong>.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">MD5 i SHA1...</p>
<p>
… són dos algorismes que generen un número de longitud fixa, que permet detectar si un fitxer ha estat modificat respecte del moment de generació.
</p>
</div></div>
<p>
Per conservar l’estat del sistema adequadament, és útil obtenir la informació següent:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Hora del sistema</strong>: permet identificar l’hora real dels registres. Si el sistema tingués una hora diferent de la real, els fitxers de registre també la tindrien modificada.</div>
</li>
<li class="level1"><div class="li"> <strong>Taules amb informació volàtil</strong>: per exemple, pot ser interessant obtenir la taula ARP i la taula d’encaminament del sistema.</div>
</li>
<li class="level1"><div class="li"> <strong>Connexions de xarxa</strong>: si l’atacant està connectat al sistema o envia ordres asincrònicament (sense mantenir una connexió activa) pot ser important tenir el conjunt de connexions actives i pendents.</div>
</li>
</ul>
<div class="iocnote"><div class="ioccontent">
<p>
La taula ARP conté les adreces físiques dels equips als que el sistema està directament connectat.
</p>
</div></div>
<p>
A continuació, caldria obtenir una còpia de totes les dades que puguin tenir alguna pista, com les dades i les metadades en disc. Convindria obtenir aquesta informació mitjançant una imatge completa del disc.
</p>

<p>
Seguidament, es poden investigar els processos del sistema. Així doncs, primer de tot cal esbrinar els mòduls que té carregats per si n’hi ha algun que pugui interferir en l’anàlisi. A continuació, pot ser útil verificar els processos actius, quins fitxers tenen oberts i quines crides al sistema estan fent.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
El sistema de fitxers proc de Linux pot ajudar a fer una anàlisi dels processos actius.
</p>
</div></div>
<p>
Mitjançant totes aquestes dades, es pot obtenir una imatge bastant clara de l’estat d’un sistema.
</p>

<p>
<strong>b) Documentació</strong>. Durant la resolució d’un incident, el més normal és consultar documentació sobre el tema en qüestió, ja que és impossible tenir totes les dades al cap per poder actuar. Convé, doncs, apuntar tota la documentació, tant interna com externa.
</p>

<p>
En cas que sigui documentació interna, és especialment recomanable identificar quina s’ha fet servir per, després, poder-la corregir o adequar si és necessari.
</p>

<p>
Contràriament, si s’ha fet servir documentació externa, posteriorment es podrà contrastar la informació per veure si s’ha procedit adequadament i generar, després, documentació interna per poder actuar més ràpidament i no haver de dependre de tercers.
</p>

<p>
<strong>c) Incidències detectades</strong>. Finalment, cal destacar la incidència o conjunt d’incidències detectades. Quan s’investiga un incident determinat, no és estrany detectar altres possibles punts d’accés al sistema.
</p>
<div class="iocfigure"><a name="Figura13"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Web infectada

</figcaption><img src="../media/smxm6uf4u5_im19.png" alt="" /></figure>
</div>
<p>
<strong>4) Pla d’acció</strong>. Un cop s’ha entès el problema, convé prendre mesures per evitar que es repeteixi en un futur. En determinar un pla d’acció, és possible trobar diverses situacions. A continuació, se n’exposen unes quantes.
</p>
<ul>
<li class="level1"><div class="li"> <strong>Una mala configuració</strong>. Si el problema ha estat una configuració deficient, caldrà verificar tota la configuració del servei implicat, ja que s’hi podrien detectar altres problemes de configuració.</div>
</li>
<li class="level1"><div class="li"> <strong>Un error</strong> (bug) <strong>sense cap pedaç disponible</strong>. Si el problema detectat és un error en la programació del servei que necessita un pedaç que encara no ha estat disponible, convindrà considerar diverses opcions:<br/>
Si és possible desactivar el servei fins que se solucioni el problema, es pot deixar desactivat per evitar futures intrusions mentre els desenvolupadors corregeixen el problema. En cas contrari, si el servei no es pot desactivar, caldrà veure si és possible mitigar el risc mitjançant alguna tècnica.<br/>
Generalment, s’utilitza una gàbia mitjançant el <em>chroot</em> per evitar que una fallada en un servei afecti tot el sistema.</div>
</li>
</ul>
<div class="iocnote"><div class="ioccontent">
<p>
El <em>chroot</em> permet aïllar un servei de la resta del sistema.
</p>
</div></div><ul>
<li class="level1"><div class="li"> <strong>Un error amb un pedaç disponible</strong>. És possible que un cop investigat un incident, es detecti que cal aplicar un pedaç al sistema per corregir la porta d’entrada que s’ha fet servir per atacar-lo.<br/>
En aquest cas, cal deixar especificat el pedaç que s’hi ha d’aplicar per comprovar-lo en un entorn de proves abans d’aplicar-lo al sistema de producció.</div>
</li>
<li class="level1"><div class="li"> <strong>Un mal ús dels serveis de xarxa</strong>. També és possible que es tracti d’un mal ús dels serveis publicats. Per tant, en aquest cas convindrà veure si és possible establir una política d’ús màxim del recurs per evitar que, en un futur, el mal ús del recurs per part d’un usuari provoqui la fallada del sistema per a tots els usuaris.<br/>
En alguns casos, és possible que el problema no sigui un mal ús de la xarxa ni un abús per part de l’usuari, sinó que el protocol mateix permeti comportaments no desitjats. Un exemple molt clar és el protocol SMTP i el problema del correu no desitjat. L’entrega d’un correu electrònic es basa en els dominis que té el servidor destinació i no hi ha manera de comprovar l’autenticitat de l’emissor. Per l’arquitectura del correu electrònic, un servidor qualsevol no es pot saber <em>a priori</em> si és un intermediari legítim o un servidor que envia correu no desitjat.<br/>
El problema se sol mitigar mitjançant llistes de servidors coneguts que envien correu no desitjat i un sistema de puntuacions heurístiques.</div>
</li>
</ul>

<p>
<strong>5) Annexos</strong>. Finalment, en els annexos es fan constar totes les dades que es creguin rellevants per entendre l’informe, com parts dels registres o ordres que s’han executat que puguin ser útils de cara a una anàlisi posterior.
</p>

<p>
Sol ser útil incloure-hi el registre complet de la sessió, perquè la resta de personal implicat en la resolució de la incidència la pugui veure.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
Un <strong>guió</strong> (<em>script</em> en anglès) és una eina present en la majoria de distribucions Linux que permet enregistrar una sessió de consola.
</p>
</div></div>
</div>

	 </article>
     <div class="pnpage">
      <div class="left-corner"></div>
      <div id="prevpage">Anar a la p&agrave;gina anterior:<br /><a href="../../../WebContent/u5/a1/exercicis.html">Exercicis d'autoavaluació</a></div>
      <div id="nextpage">Anar a la p&agrave;gina seg&uuml;ent:<br /><a href="../../../WebContent/u5/a2/activitats.html">Activitats</a></div>
      <div class="right-corner"></div>
     </div>
    </div>
    <footer class="footer">
      <div><small>Aquest document està subjecte a una llicència oberta de Creative Commons, es reserva el dret de reconeixement de l'autoria, d'exigir que no se'n faci cap mena d'ús comercial. Si altereu o transformeu aquesta obra, o en genereu obres derivades, només podeu distribuir l'obra generada amb una llicència idèntica a aquesta.</small></div>
    </footer>
 </div>
 <div id="back_preview" class="hidden"></div>
 <div id="preview" class="hidden">
  <div class="prevcontent"></div>
 </div>
 <div id="help-tooltips">
  <div id="help-toc" class="hidden tooltip"><span>Taula de continguts:</span> Ofereix una vista general de l&#39;estructura del m&ograve;dul, que us facilitar&agrave; la navegaci&oacute; a trav&eacute;s dels seus continguts.<span class="arrow-left"></span></div> 
  <div id="help-settings" class="hidden tooltip"><span>Opcions de format:</span> Permet configurar el format de lectura a partir de les vostres prefer&egrave;ncies, modificant la mida de la lletra, el color del fons, l&#39;amplada de la p&agrave;gina o l&#39;ocultaci&oacute; dels continguts complementaris, entre d&#39;altres.<span class="arrow-left"></span></div>
  <div id="help-printer" class="hidden tooltip"><span>Imprimir:</span>  Envia el contingut seleccionat a la impressora.<span class="arrow-left"></span></div>
  <div id="help-favorites" class="hidden tooltip"><span>Prefereits:</span> Permet desar aquelles parts del contingut a les que us interessi accedir en un moment posterior; us permetr&agrave; anar creant un repositori personalitzat de les seccions que considereu m&eacute;s rellevants. Un cop l&#39;hageu començat a fer servir se us mostrar&agrave; a sota un comptador que us informar&agrave; del nombre de preferits que s&#39;hagin emmagatzemat fins al moment.<span class="arrow-left"></span></div>
  <div id="help-favcounter" class="hidden tooltip"><span>Comptador i llistat de preferits:</span> Indica el nombre de preferits que s&#39;han desat fins el moment; clicant damunt seu accedireu al llistat de preferits, i a trav&eacute;s d&#39;aquest podreu accedir directament als continguts que hageu emmagatzemat.<span class="arrow-left"></span></div>
  <div id="help-help_icon" class="hidden tooltip"><span>Ajuda:</span> Aquesta opci&oacute; activa la informaci&oacute; de les funcionalitats del web tot situant el punter del ratol&iacute; al damunt dels diferents &iacute;tems.<span class="arrow-left"></span></div>
  <div id="help-sidebar-hide" class="hidden tooltip"><span>Mostrar/Ocultar barra lateral:</span>  Deshabilita la barra d&#39;opcions, permetent la seva recuperaci&oacute; quan es desitgi.<span class="arrow-left"></span></div>
  <div id="help-search" class="hidden tooltip"><span>Cerca:</span>  Introdu&iuml;u les paraules clau sobre aquells conceptes que desitgeu localitzar en els continguts del m&ograve;dul. Tamb&eacute; podeu excloure un terme de la cerca tot afegint-hi el signe &#8220;-&#8221; al davant.<span class="arrow-top"></span></div>
  <div id="help-header" class="hidden tooltip"><span>Cap&ccedil;alera:</span>  Indica l&#39;apartat o secci&oacute; que es mostra en pantalla. Tingueu present que les capçaleres de segon, tercer i quart nivell tamb&eacute; es poden desar com a marcadors.<span class="arrow-left"></span></div>
</div> 
</body>
</html>
