<!doctype html>

<!--[if lt IE 7 ]> <html class="ie ie6 no-js" lang="ca"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie ie7 no-js" lang="ca"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie ie8 no-js" lang="ca"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie ie9 no-js" lang="ca"> <![endif]-->
<!--[if gt IE 9]><!--><html class="no-js" lang="ca"><!--<![endif]-->
<!-- the "no-js" class is for Modernizr. -->

<head id="www-sitename-com" data-template-set="html5-reset">

	<meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html">
        
	<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>Desenvolupament web en l'entorn client</title>
	
<!-- <meta name="title" content=""> --> 
	<meta name="description" content="">
	<!-- Google will often use this as its description of your page/site. Make it good. -->
	
	<meta name="google-site-verification" content="">
	<!-- Speaking of Google, don't forget to set your site up: http://google.com/webmasters -->
	
	<meta name="author" content="Institut Obert de Catalunya">
	<meta name="Copyright" content="Copyright Institut Obert de Catalunya 2011. All Rights Reserved.">

	<!-- Dublin Core Metadata : http://dublincore.org/ -->
	<meta name="DC.title" content="Desenvolupament web en l'entorn client">
	<meta name="DC.subject" content="Informàtica i comunicacions">
	<meta name="DC.creator" content="Institut Obert de Catalunya">
	
	<!--  Mobile Viewport Fix
	j.mp/mobileviewport & davidbcalhoun.com/2010/viewport-metatag 
	device-width : Occupy full width of the screen in its current orientation
	initial-scale = 1.0 retains dimensions instead of zooming out if page height > device height
	maximum-scale = 1.0 retains dimensions instead of zooming in if page width < device width
	-->
	<!-- Uncomment to use � use thoughtfully!
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	-->

	<link rel="shortcut icon" href="../../../img/favicon.ico">
	<!-- This is the traditional favicon.
		 - size: 16x16 or 32x32
		 - transparency is OK
		 - see wikipedia for info on browser support: http://mky.be/favicon/ -->
		 
	<link rel="apple-touch-icon" href="../../../img/apple-touch-icon.png">
	<!-- The is the icon for iOS's Web Clip.
		 - size: 57x57 for older iPhones, 72x72 for iPads, 114x114 for iPhone4's retina display (IMHO, just go ahead and use the biggest one)
		 - To prevent iOS from applying its styles to the icon name it thusly: apple-touch-icon-precomposed.png
		 - Transparency is not recommended (iOS will put a black BG behind the icon) -->
	
	<!-- CSS: screen, mobile & print are all in the same file -->
	<link rel="stylesheet" href="../../../_/css/style.css">

	<!-- CSS: jQuery UI -->
	<link rel="stylesheet" href="../../../_/css/jquery-ui.css">
	
	<!-- all our JS is at the bottom of the page, except for Modernizr. -->
	<script src="../../../_/js/modernizr-1.7.min.js"></script>
	<script src="../../../_/js/Hyphenator.js" type="text/javascript"></script>
	<script type="text/javascript">
	   Hyphenator.config({
		minwordlength : 4
	   });
	   Hyphenator.run();
	</script>
    <script src="../../../_/js/build.js" type="text/javascript"></script>
</head>

<body class="style-newspaper">

<div class="wrapper"><!-- not needed? up to you: http://camendesign.com/code/developpeurs_sans_frontieres -->

	<header id="header">
		<div class="head"><a href="http://ioc.gencat.cat"><img src="../../../img/logo.png" alt="Institut Obert de Catalunya"/></a><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/es/deed.ca"><img src="../../../img/license.png" alt="Llic&egrave;ncia" class="license"/></a></div>
		<div class="headdocument"><a href="../../../index.html">Desenvolupament web en l'entorn client</a></div>
        <div id="search" class="search" name="search">
         <form id="frmsearch" action="../../../search.html" method="get">
          <input type="text" name="q"/>
        </form>
        </div>
	</header>
   <div id="upbutton" class="upbutton" style="display:none;"><img src="../../../img/uparrow.png" alt="Pujar a l'inici de p&agrave;gina"/></div>
   <aside id="aside">
    <div id="menu">
      <ul>
       <li name="toc"><div><img src="../../../img/toc.png" alt="&Iacute;ndex"/></div></li>
       <li name="settings"><div><img src="../../../img/settings.png" alt="Configuraci&oacute;"/></div></li>
       <li name="printer"><div><img src="../../../img/printer.png" alt="Imprimir"/></div></li>
       <li name="favorites"><div><img src="../../../img/favorites.png" alt="Favorits"/></div></li>
       <li name="help_icon" class="help_icon"><div><img src="../../../img/help_icon.png" alt="Ajuda"/></div></li>
      </ul>
     </div>
   </aside>
   <div id="sidebar-hide" name="sidebar-hide"><img src="../../../img/arrows.png"/></div>
   <section>
     <div id="toc" class="hidden">
      <div class="menucontent">
        <ul>
        <li id="u7" class="parentnode"><p><a class="unit" href="../../../WebContent/u7/introduccio.html">7. Desenvolupament de casos pràctics</a></p><ul class="expander"><li id="u7introduccio"><a href="../../../WebContent/u7/introduccio.html">Introducció</a></li><li id="u7resum"><a href="../../../WebContent/u7/resum.html">Resum</a></li><li id="u7resultats"><a href="../../../WebContent/u7/resultats.html">Resultats d'aprenentatge</a></li><li id="u7referencies"><a href="../../../WebContent/u7/referencies.html">Referències</a></li><li id="u7a1" class="tocsection"><p id='u7a1continguts'><a class="section" href="../../../WebContent/u7/a1/continguts.html">Desenvolupament de casos pràctics</a><span class="buttonexp"></span></p><ul><li id="u7a1activitats"><a href="../../../WebContent/u7/a1/activitats.html">Activitats</a></li><li id="u7a1exercicis"><a href="../../../WebContent/u7/a1/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u7a1' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u7/a1/continguts.html#desenvolupament_amb_nodejs">Desenvolupament amb Node.js</a></li><li><a href="../../../WebContent/u7/a1/continguts.html#aplicacions_amb_la_biblioteca_leaflet">Aplicacions amb la biblioteca Leaflet</a></li><li><a href="../../../WebContent/u7/a1/continguts.html#desenvolupament_de_jocs_amb_html5">Desenvolupament de jocs amb HTML5</a></li></ul></div></div></ul></li><li id="" class="indexnode"><p><a href="../../../index.html">Anar a l&#39;&iacute;ndex general</a></p></li>
        </ul>
      </div>
    </div>
   </section>
   <section>
   <div id="settings" class="hidden">
    <div class="menucontent">
     <div class="allsettings">
     <div class="settings">
      <label>Font i Color</label>
		<div class="setting-option">
	        <ul class="fontBackground">
				<li id="style-newspaper" title="Newspaper" class="appearance-style-newspaper"><span>Newspaper</span></li>
                <li id="style-novel" title="Novel" class="appearance-style-novel"><span>Novel</span></li>
                <li id="style-ebook" title="eBook" class="appearance-style-ebook"><span>eBook</span></li>
				<li id="style-inverse" title="Inverse" class="appearance-style-inverse active"><span>Inverse</span></li>
				<li id="style-athelas" title="Athelas" class="appearance-style-athelas"><span>Athelas</span></li>
			</ul>
		</div>
     </div>
	<div class="settings">
      <label>Amplada</label>
		<div class="setting-option">
	        <div id="slider-width"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
		<div class="setting-option">
	        <div id="slider-font"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
	  <div class="setting-option">
       <form action="" class="sett-options">
		<ul>
		    <li><input type="checkbox" id="secondary-content" /><label for="secondary-content">Mostra recursos complementaris</label></li>
		    <li><input type="checkbox" id="main-images" /><label for="main-images">Mostra imatges</label></li>
		    <li><input type="checkbox" id="text-alignment" /><label for="text-alignment">Text justificat</label></li>
			<li><input type="checkbox" id="text-hyphen" /><label for="text-hyphen">Partici&oacute; sil·l&agrave;bica</label></li>
		</ul>
       </form>
	  </div>
     </div>
     </div>
    </div>
   </div>
   </section>
 <section>
 <div id="favorites" class="hidden"></div>
 </section>   
 <div id="bridge" class="hidden"></div>
 <div id="help" class="hidden">
  <div class="helptitle">Dreceres del teclat<hr></div>
  <div class="helpsection"><span>General</span>
   <ul>
    <li><span class="shortcut">g</span>: Anar al men&uacute; de navegaci&oacute;</li>
    <li><span class="shortcut">o</span>: Anar a opcions</li>
    <li><span class="shortcut">s</span>: Guardar la p&agrave;gina actual a favorits</li>
    <li><span class="shortcut">p</span>: Imprimir la p&agrave;gina actual</li>
    <li><span class="shortcut">?</span>: Mostrar/Ocultar l&#39;ajuda</li>
   </ul>
  </div>
  <div class="helpsection"><span>Navegaci&oacute;</span>
   <ul>
    <li><span class="shortcut">i</span>: Anar a l&#39;&iacute;ndex general</li>
    <li><span class="shortcut">t</span>: Anar a l&#39;inici de p&agrave;gina</li>
    <li><span class="shortcut">b</span>: Anar al final de p&agrave;gina</li>
    <li><span class="shortcut">j</span>: Anar cap endavant dintre la p&agrave;gina</li>
    <li><span class="shortcut">k</span>: Anar cap enrere dintre la p&agrave;gina</li>
    <li><span class="shortcut">h</span>: Anar a la p&agrave;gina anterior:</li>
    <li><span class="shortcut">l</span>: Anar a la p&agrave;gina seg&uuml;ent:</li>
   </ul>
   </div>
 </div>
 <div id="favcounter" name="favcounter" class="hidden"><span></span></div>
 <div id="navmenu" class="navmenu"><ul class="webnav"><li><a href="../../../index.html" title="Anar a l&#39;&iacute;ndex general">Inici</a></li><li><a href="../introduccio.html">Mecanismes de programació asíncrona client-servidor</a></li><li><a href="continguts.html">Comunicació asíncrona amb JavaScript</a></li><li>Activitats</li></ul></div>
	<div id="content" lang="ca" class="hyphenate text">
     <article lang="ca" class="sheet">
        <h1><a id="activitats"> Activitats </a></h1>
    	
<p>

<h2><a id="peticio_ajax_i_processament_de_resposta_xml" >Petició AJAX i processament de resposta XML</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és aprendre a enviar peticions AJAX i processar la resposta rebuda en format XML.
</p>

<p>
A partir del fitxer de dades que s’obté de l’<acronym title="Uniform Resource Locator">URL</acronym> “<a href="https://analisi.transparenciacatalunya.cat/resource/amca-cgrp.xml" class="urlextern" title="https://analisi.transparenciacatalunya.cat/resource/amca-cgrp.xml"  rel="nofollow">https://analisi.transparenciacatalunya.cat/resource/amca-cgrp.xml</a>”, us demanen que implementeu una aplicació que el llegeixi i el processi per afegir una taula amb aquesta informació a la seva pàgina web. No cal que us preocupeu per l’estil perquè vindrà donat per la pàgina on s’incrustarà. Podeu afegir la taula directament al cos del document <acronym title="HyperText Markup Language">HTML</acronym> (<code>document.body</code>).
</p>

<p>
<form action=""><div class="solution ioccontent"><pre class="code html4strict"><ol><li class="li1"><div class="de1">&lt;!DOCTYPE html&gt;</div></li><li class="li1"><div class="de1">&lt;html&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&lt;head&gt;</div></li><li class="li1"><div class="de1">&lt;meta charset=&quot;utf-8&quot;&gt;</div></li><li class="li1"><div class="de1">&lt;script&gt;</div></li><li class="li1"><div class="de1">carregarDades('https://analisi.transparenciacatalunya.cat/resource/amca-cgrp.xml?municipi=Barcelona');</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">function carregarDades(url) {</div></li><li class="li1"><div class="de1">  if (window.XMLHttpRequest) { // Mozilla, Safari, IE7+</div></li><li class="li1"><div class="de1">    httpRequest = new XMLHttpRequest();</div></li><li class="li1"><div class="de1">  } else if (window.ActiveXObject) { // IE 6 i anteriors</div></li><li class="li1"><div class="de1">    httpRequest = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</div></li><li class="li1"><div class="de1">  } else {</div></li><li class="li1"><div class="de1">    console.error(&quot;Error: Aquest navegador no admet AJAX.&quot;);</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  httpRequest.onload = processarResposta;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  httpRequest.open('GET', url, true);</div></li><li class="li1"><div class="de1">  httpRequest.send(null);</div></li><li class="li1"><div class="de1">}</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">function processarResposta() {</div></li><li class="li1"><div class="de1">  let resposta = httpRequest.responseXML;</div></li><li class="li1"><div class="de1">  let organismes = resposta.querySelectorAll('row');</div></li><li class="li1"><div class="de1">  let taula = generarTaula();</div></li><li class="li1"><div class="de1">  for (let i = 0; i &lt; organismes.length; i++) {</div></li><li class="li1"><div class="de1">    let fila = generarFila(organismes[i]);</div></li><li class="li1"><div class="de1">    taula.appendChild(fila);</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  document.body.appendChild(taula);</div></li><li class="li1"><div class="de1">}</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">function generarTaula() {</div></li><li class="li1"><div class="de1">  let taula = document.createElement('table');</div></li><li class="li1"><div class="de1">  taula.setAttribute('border','1');</div></li><li class="li1"><div class="de1">  let capcalera = document.createElement('tr');</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  let colNom = generarColumna(&quot;Nom&quot;, true);</div></li><li class="li1"><div class="de1">  capcalera.appendChild(colNom);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  let colCognom = generarColumna(&quot;Cognom&quot;, true);</div></li><li class="li1"><div class="de1">  capcalera.appendChild(colCognom);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  let colNota = generarColumna(&quot;Nota&quot;, true);</div></li><li class="li1"><div class="de1">  capcalera.appendChild(colNota);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  let colConvocatoria = generarColumna(&quot;Convocatoria&quot;, true);</div></li><li class="li1"><div class="de1">  capcalera.appendChild(colConvocatoria);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  taula.appendChild(capcalera);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  return taula;</div></li><li class="li1"><div class="de1">}</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">function generarFila(node) {</div></li><li class="li1"><div class="de1">  let fila = document.createElement('tr');</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  let nom = node.getElementsByTagName('organisme')[0].textContent;</div></li><li class="li1"><div class="de1">  let municipi = node.getElementsByTagName('municipi')[0].textContent;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  let adresa = node.getElementsByTagName('adre_a')[0];</div></li><li class="li1"><div class="de1">  if(adresa){</div></li><li class="li1"><div class="de1">	  adresa = adresa.textContent;</div></li><li class="li1"><div class="de1">  }  else{</div></li><li class="li1"><div class="de1">	  adresa = &quot;&quot;;</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  let mail = node.getElementsByTagName('email')[0];</div></li><li class="li1"><div class="de1">  if(mail){</div></li><li class="li1"><div class="de1">	  mail = mail.textContent;</div></li><li class="li1"><div class="de1">  }  else{</div></li><li class="li1"><div class="de1">	  mail = &quot;&quot;;</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  let colNom = generarColumna(nom);</div></li><li class="li1"><div class="de1">  fila.appendChild(colNom);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  let colMun = generarColumna(municipi);</div></li><li class="li1"><div class="de1">  fila.appendChild(colMun);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  let colAdr = generarColumna(adresa);</div></li><li class="li1"><div class="de1">  fila.appendChild(colAdr);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  let colMail = generarColumna(mail);</div></li><li class="li1"><div class="de1">  fila.appendChild(colMail);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  return fila;</div></li><li class="li1"><div class="de1">}</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">function generarColumna(contingut, esCapcalera) {</div></li><li class="li1"><div class="de1">  let columna;</div></li><li class="li1"><div class="de1">  if (esCapcalera) {</div></li><li class="li1"><div class="de1">    columna = document.createElement('th');</div></li><li class="li1"><div class="de1">  } else {</div></li><li class="li1"><div class="de1">    columna = document.createElement('td');</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  columna.innerHTML = contingut;</div></li><li class="li1"><div class="de1">  return columna;</div></li><li class="li1"><div class="de1">}</div></li><li class="li1"><div class="de1">&lt;/script&gt;</div></li><li class="li1"><div class="de1">&lt;/head&gt;</div></li><li class="li1"><div class="de1">&lt;/html&gt;</div></li></ol></pre>

<p>
Podeu veure aquest exemple en l’enllaç següent: <a href="https://codepen.io/ioc-daw-m06/pen/Mbegdx?editors=1011" class="urlextern" title="https://codepen.io/ioc-daw-m06/pen/Mbegdx?editors=1011"  rel="nofollow">codepen.io/ioc-daw-m06/pen/Mbegdx?editors=1011</a>. 
</p>

<p>
Com es pot apreciar, s’ha aplicat el disseny descendent per descompondre la tasca. Per una banda, la funció <code>carregarDades()</code> permet especificar l’<acronym title="Uniform Resource Locator">URL</acronym> on s’enviarà la petició i l’envia. Una vegada es rep la resposta s’invoca automàticament el mètode <code>processarResposta()</code>.
</p>

<p>
Com que es tracta d’una resposta en format XML, es pot navegar i consultar utilitzant les interfícies del DOM. Així que es pot invocar <code>querySelectorAll()</code> per obtenir una col·lecció de nodes amb la informació dels alumnes. Una vegada s’han obtingut les dades, només cal crear la taula i recórrer aquestes dades per afegir les files i les columnes. S’han fet servir les funcions <code>generarTaula()</code>, <code>generarFila()</code> i <code>generarColumna()</code> per generar la taula d’una manera més entenedora.
</p>

<p>
Fixeu-vos també que com les etiquetes <em>email</em> i <em>adre_a</em> són opcionals, és a dir, hi ha organismes que la tenen i altres que no, s’ha hagut de fer una comprovació extra a l’hora d’obtenir el seu valor.
</p>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

</p>

<p>

<h2><a id="peticio_ajax_i_processament_de_resposta_json" >Petició AJAX i processament de resposta JSON</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és aprendre a enviar peticions AJAX i processar la resposta rebuda en format JSON utilitzant la biblioteca jQuery.
</p>

<p>
Us demanen que implementeu una aplicació que llegeixi el fitxer de dades JSON que retorna la següent <acronym title="Uniform Resource Locator">URL</acronym> “<a href="https://api.scryfall.com/cards/random" class="urlextern" title="https://api.scryfall.com/cards/random"  rel="nofollow">https://api.scryfall.com/cards/random</a>” mitjançant una crida AJAX i el processi per afegir una filera a una taula amb aquesta informació a la seva pàgina web. No cal que us preocupeu per l’estil, perquè vindrà donat per la pàgina on s’incrustarà. Podeu afegir la taula directament al cos del document <acronym title="HyperText Markup Language">HTML</acronym>. Fixeu-vos bé en la informació que es retorna i com aconseguir-la.
</p>

<p>
<form action=""><div class="solution ioccontent"><pre class="code html4strict"><ol><li class="li1"><div class="de1">&lt;!DOCTYPE html&gt;</div></li><li class="li1"><div class="de1">&lt;html&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&lt;head&gt;</div></li><li class="li1"><div class="de1">  &lt;meta charset=&quot;utf-8&quot;&gt;</div></li><li class="li1"><div class="de1">&lt;/head&gt;</div></li><li class="li1"><div class="de1">&lt;body&gt;</div></li><li class="li1"><div class="de1">&lt;/body&gt;</div></li><li class="li1"><div class="de1">&lt;script&gt;</div></li><li class="li1"><div class="de1">  carregarDades('https://api.scryfall.com/cards/random');</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  function carregarDades(url) {</div></li><li class="li1"><div class="de1">    if (window.XMLHttpRequest) { // Mozilla, Safari, IE7+</div></li><li class="li1"><div class="de1">      httpRequest = new XMLHttpRequest();</div></li><li class="li1"><div class="de1">    } else if (window.ActiveXObject) { // IE 6 i anteriors</div></li><li class="li1"><div class="de1">      httpRequest = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</div></li><li class="li1"><div class="de1">    } else {</div></li><li class="li1"><div class="de1">      console.error(&quot;Error: Aquest navegador no admet AJAX.&quot;);</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    httpRequest.onload = processarResposta;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    httpRequest.open('GET', url, true);</div></li><li class="li1"><div class="de1">    httpRequest.send(null);</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  function processarResposta(dades) {</div></li><li class="li1"><div class="de1">    let resposta = JSON.parse(httpRequest.responseText);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    let taula = generarTaula();</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    let fila = generarFila(resposta);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    taula.appendChild(fila);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    document.body.appendChild(taula);</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  function generarTaula() {</div></li><li class="li1"><div class="de1">    let taula = document.createElement('table');</div></li><li class="li1"><div class="de1">    taula.setAttribute('border','1');</div></li><li class="li1"><div class="de1">    let capcalera = document.createElement('tr');</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    let colNom = generarColumna(&quot;Nom&quot;, true);</div></li><li class="li1"><div class="de1">    capcalera.appendChild(colNom);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    let colImatge = generarColumna(&quot;Imatge&quot;, true);</div></li><li class="li1"><div class="de1">    capcalera.appendChild(colImatge);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    let colData = generarColumna(&quot;Data Sortida&quot;, true);</div></li><li class="li1"><div class="de1">    capcalera.appendChild(colData);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    let colText = generarColumna(&quot;Text Carta&quot;, true);</div></li><li class="li1"><div class="de1">    capcalera.appendChild(colText);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    taula.appendChild(capcalera);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    return taula;</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">function generarFila(node) {</div></li><li class="li1"><div class="de1">  let fila = document.createElement('tr');</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  let nom = node.name;</div></li><li class="li1"><div class="de1">  let imat = node.image_uris.small;</div></li><li class="li1"><div class="de1">  let data = node.released_at;</div></li><li class="li1"><div class="de1">  let textCarta = node.oracle_text;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  let colNom = generarColumna(nom);</div></li><li class="li1"><div class="de1">  fila.appendChild(colNom);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  let imatge = document.createElement('img');</div></li><li class="li1"><div class="de1">  imatge.setAttribute('src',imat);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  let colImat = generarColumna(&quot;&quot;);</div></li><li class="li1"><div class="de1">  colImat.appendChild(imatge);</div></li><li class="li1"><div class="de1">  fila.appendChild(colImat);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  let colData = generarColumna(data);</div></li><li class="li1"><div class="de1">  fila.appendChild(colData);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  let colText = generarColumna(textCarta);</div></li><li class="li1"><div class="de1">  fila.appendChild(colText);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  return fila;</div></li><li class="li1"><div class="de1">}</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">function generarColumna(contingut, esCapcalera) {</div></li><li class="li1"><div class="de1">let columna;</div></li><li class="li1"><div class="de1">if (esCapcalera) {</div></li><li class="li1"><div class="de1">columna = document.createElement('th');</div></li><li class="li1"><div class="de1">} else {</div></li><li class="li1"><div class="de1">columna = document.createElement('td');</div></li><li class="li1"><div class="de1">}</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">columna.innerHTML = contingut;</div></li><li class="li1"><div class="de1">return columna;</div></li><li class="li1"><div class="de1">}</div></li><li class="li1"><div class="de1">&lt;/script&gt;</div></li><li class="li1"><div class="de1">&lt;/head&gt;</div></li><li class="li1"><div class="de1">&lt;/html&gt;</div></li></ol></pre>

<p>
Podeu veure aquest exemple en l’enllaç següent: <a href="https://codepen.io/ioc-daw-m06/pen/NbrWWB?editors=1011" class="urlextern" title="https://codepen.io/ioc-daw-m06/pen/NbrWWB?editors=1011"  rel="nofollow">codepen.io/ioc-daw-m06/pen/NbrWWB?editors=1011</a>.  
</p>

<p>
Com es pot apreciar, en aquest cas s’ha hagut d’usar l’atribut <code>responseText</code> en l’objecte <code>XMLHttpRequest</code> i donar-li format a aquesta resposta JSON amb <code>JSON.parse()</code>.
</p>

<p>
Finalment, la tasca de generar la taula, les columnes i les files s’ha descompost en tres funcions diferents per fer el codi més entenedor.
</p>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

</p>

<h2><a id="cerca_de_dades_obertes_per_utilitzar_en_aplicacions_web" >Cerca de dades obertes per utilitzar en aplicacions web</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és descobrir fonts de dades obertes que poden ser utilitzades per aplicacions web.
</p>

<p>
Cerqueu a internet una font de dades obertes a la qual sigui possible connectar mitjançant CORS o JSONP i justifiqueu per què és possible accedir-hi des d’una aplicació web qualsevol. 
</p>

<p>
<form action=""><div class="solution ioccontent">
<p>
Com que no es demana una temàtica concreta, només cal cercar a Google el terme <em>Open Data</em>, escollir un dels resultats i comprovar si exposen una <acronym title="Application Programming Interface">API</acronym> que permeti realitzar peticions. Per exemple, un d’aquests resultats és el portal de dades obertes de la Generalitat de Catalunya (<a href="http://dadesobertes.gencat.cat/" class="urlextern" title="http://dadesobertes.gencat.cat/"  rel="nofollow">www.dadesobertes.gencat.cat</a>), que ofereix dades en diferents formats.
</p>

<p>
Si dintre d’aquest portal feu una cerca per al terme <em><acronym title="Application Programming Interface">API</acronym></em>, trobareu un llistat de serveis web que ofereixen diferents informacions. En fer clic sobre alguns dels enllaços us redirigiran a la pàgina del servei web amb la documentació per realitzar les consultes, per exemple, el Calendari de difusió de resultats de l’Idescat (<a href="http://dadesobertes.gencat.cat/ca/cercador/detall-cataleg/?id=1091" class="urlextern" title="http://dadesobertes.gencat.cat/ca/cercador/detall-cataleg/?id=1091"  rel="nofollow">bit.ly/2obTV3R</a>).
</p>

<p>
Des d’aquesta pàgina es pot obtenir la informació desitjada en diferents formats i consultar la documentació exhaustiva sobre l’<acronym title="Application Programming Interface">API</acronym>.
</p>

<p>
Cal destacar que si examineu les capçaleres d’una petició qualsevol al servei web (per exemple, <a href="http://api.idescat.cat/cal/v1/dades.txt?t=20121022-20121028" class="urlextern" title="http://api.idescat.cat/cal/v1/dades.txt?t=20121022-20121028"  rel="nofollow">bit.ly/2myJ08n</a>), veureu que el servidor implementa mecanismes CORS, ja que la resposta inclou el paràmetre <code>Access-Control-Allow-Origin: *</code>. És a dir, accepta peticions de qualsevol altre domini i, per tant, podrà ser utilitzat per realitzar peticions AJAX des de qualsevol aplicació web.
</p>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

<h2><a id="enviament_de_peticions_ajax_amb_parametres_a_servidors_que_admeten_cors" >Enviament de peticions AJAX amb paràmetres a servidors que admeten CORS</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és aprendre a enviar peticions AJAX amb paràmetres a un servidor que implementa mecanismes CORS.
</p>

<p>
Us han demanat la implementació d’una funció que permeti carregar la descripció i el resum de les enquestes que facilita l’Institut d’Estadística de Catalunya (<a href="http://www.idescat.cat/dev/api/cal" class="urlextern" title="http://www.idescat.cat/dev/api/cal"  rel="nofollow">www.idescat.cat/dev/api/cal</a>). Aquesta funció ha d’acceptar per paràmetre l’<acronym title="Uniform Resource Locator">URL</acronym> i un objecte JavaScript amb les propietats <code>t</code> i <code>id</code> corresponents a l’any que es vol consultar i l’identificador d’estadística respectivament.
</p>

<p>
Per demostrar el correcte funcionament, es demana que la taula mostri la informació de les enquestes de població activa (identificador <code>EPA</code>) per a l’any 2012.
</p>

<p>
<form action=""><div class="solution ioccontent"><pre class="code html4strict"><ol><li class="li1"><div class="de1">&lt;!DOCTYPE html&gt;</div></li><li class="li1"><div class="de1">&lt;html&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&lt;head&gt;</div></li><li class="li1"><div class="de1">  &lt;meta charset=&quot;utf-8&quot;&gt;</div></li><li class="li1"><div class="de1">  &lt;script&gt;</div></li><li class="li1"><div class="de1">    carregarDades('https://api.idescat.cat/cal/v1/dades.json', {</div></li><li class="li1"><div class="de1">      t: 2020,</div></li><li class="li1"><div class="de1">      id: &quot;epa&quot;</div></li><li class="li1"><div class="de1">    });</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    function carregarDades(url, parametres) {</div></li><li class="li1"><div class="de1">      if (window.XMLHttpRequest) { // Mozilla, Safari, IE7+ </div></li><li class="li1"><div class="de1">        httpRequest = new XMLHttpRequest();</div></li><li class="li1"><div class="de1">      } else if (window.ActiveXObject) { // IE 6 i anteriors</div></li><li class="li1"><div class="de1">        httpRequest = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</div></li><li class="li1"><div class="de1">      } else {</div></li><li class="li1"><div class="de1">        console.error(&quot;Error: Aquest navegador no admet AJAX.&quot;);</div></li><li class="li1"><div class="de1">      }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      httpRequest.onload = processarResposta;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      let urlAmbParametres = url + convertirEnParametres(parametres)</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      httpRequest.open('GET', urlAmbParametres, true);</div></li><li class="li1"><div class="de1">      httpRequest.send(null);</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    function processarResposta() {</div></li><li class="li1"><div class="de1">      let dades = JSON.parse(httpRequest.responseText).vevent;</div></li><li class="li1"><div class="de1">      let taula = generarTaula();</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      for (let i = 0; i &lt; dades.length; i++) {</div></li><li class="li1"><div class="de1">        let fila = generarFila(dades[i].description, dades[i].summary);</div></li><li class="li1"><div class="de1">        taula.appendChild(fila);</div></li><li class="li1"><div class="de1">      }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      document.body.appendChild(taula);</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    function convertirEnParametres(dades) {</div></li><li class="li1"><div class="de1">      let params = '?';</div></li><li class="li1"><div class="de1">      for (let dada in dades) {</div></li><li class="li1"><div class="de1">        if (params.length &gt; 1) {</div></li><li class="li1"><div class="de1">          params += '&amp;'</div></li><li class="li1"><div class="de1">        }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">        params += encodeURIComponent(dada);</div></li><li class="li1"><div class="de1">        params += '=';</div></li><li class="li1"><div class="de1">        params += encodeURIComponent(dades[dada]);</div></li><li class="li1"><div class="de1">      }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      return params;</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    function generarTaula() {</div></li><li class="li1"><div class="de1">      let taula = document.createElement('table');</div></li><li class="li1"><div class="de1">      let capcalera = document.createElement('tr');</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      let colNom = generarColumna(&quot;Descripció&quot;, true);</div></li><li class="li1"><div class="de1">      capcalera.appendChild(colNom);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      let colCognom = generarColumna(&quot;Resum&quot;, true);</div></li><li class="li1"><div class="de1">      capcalera.appendChild(colCognom);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      taula.appendChild(capcalera);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      return taula;</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    function generarFila(descripcio, resum) {</div></li><li class="li1"><div class="de1">      let fila = document.createElement('tr');</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      let colDescripcio = generarColumna(descripcio);</div></li><li class="li1"><div class="de1">      fila.appendChild(colDescripcio);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      let colResum = generarColumna(resum);</div></li><li class="li1"><div class="de1">      fila.appendChild(colResum);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      return fila;</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    function generarColumna(contingut, esCapcalera) {</div></li><li class="li1"><div class="de1">      let columna;</div></li><li class="li1"><div class="de1">      if (esCapcalera) {</div></li><li class="li1"><div class="de1">        columna = document.createElement('th');</div></li><li class="li1"><div class="de1">      } else {</div></li><li class="li1"><div class="de1">        columna = document.createElement('td');</div></li><li class="li1"><div class="de1">      }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      columna.innerHTML = contingut;</div></li><li class="li1"><div class="de1">      return columna;</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">  &lt;/script&gt;</div></li><li class="li1"><div class="de1">&lt;/head&gt;</div></li><li class="li1"><div class="de1">&lt;/html&gt;</div></li></ol></pre>

<p>
Podeu veure aquest exemple en l’enllaç següent: <a href="https://codepen.io/ioc-daw-m06/pen/jVrOJO?editors=1011" class="urlextern" title="https://codepen.io/ioc-daw-m06/pen/jVrOJO?editors=1011"  rel="nofollow">codepen.io/ioc-daw-m06/pen/jVrOJO0?editors=1011</a>. 
</p>

<p>
Fixeu-vos que no cal sobreescriure el tipus multimèdia perquè el servidor ja l’indica: <code>application/json</code>.
</p>

<p>
Cal destacar que els paràmetres s’han de codificar abans de poder enviar-se, i com que es tracta d’una petició que utilitza el mètode <code>GET</code>, els paràmetres han d’afegir-se a l’<acronym title="Uniform Resource Locator">URL</acronym>. Per fer aquesta tasca s’ha implementat la funció <code>convertirEnParametres()</code>, que recorre les propietats de l’objecte passat com a argument i el codifica per utilitzar-lo a l’<acronym title="Uniform Resource Locator">URL</acronym>.
</p>

<p>
Una vegada es rep la resposta només cal analitzar-la amb <code>JSON.parse</code>, extreure’n les dades que us interessen, l’<em>array</em> referenciat per la propietat <code>vevent</code> i generar una taula amb aquesta informació.
</p>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

<p>

<h2><a id="enviament_de_peticions_utilitzant_jsonp" >Enviament de peticions utilitzant JSONP</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és aprendre a enviar peticions a servidors que admetin JSONP.
</p>

<p>
Us han demanat crear un cercador d’adreces IP que utilitzi la informació proporcionada per GeoJS (<a href="https://www.geojs.io/docs/v1/endpoints/geo/" class="urlextern" title="https://www.geojs.io/docs/v1/endpoints/geo/"  rel="nofollow">www.geojs.io/docs/v1/endpoints/geo/</a>) utilitzant la tècnica JSONP. Aquesta <acronym title="Application Programming Interface">API</acronym> proporciona dades d’una IP concreta. Podeu consultar tota la documentació necessària a la mateixa pàgina.
</p>

<p>
La vostra aplicació haurà d’incloure un quadre de text per escriure la IP que cal cercar i, una vegada es retorni el resultat, haurà de substituir qualsevol resultat anterior pel nou, mostrant com a mínim: l’organització, el país i les coordenades.
</p>

<p>
<form action=""><div class="solution ioccontent">
<p>
A la documentació es pot trobar fàcilment que el nom del paràmetre per realitzar cerques mitjançant JSONP és afegint al final de la <acronym title="Uniform Resource Locator">URL</acronym> aquesta ip seguit de la cadena <em>.js</em> , i el nom per especificar la funció que cal cridar amb el resultat és <code>callback()</code>. Així doncs, s’haurà de carregar un script amb un <acronym title="Uniform Resource Locator">URL</acronym> semblant a <code><a href="https://get.geojs.io/v1/ip/geo/ip_de_cerca.js?callback=processarResposta" class="urlextern" title="https://get.geojs.io/v1/ip/geo/ip_de_cerca.js?callback=processarResposta"  rel="nofollow">https://get.geojs.io/v1/ip/geo/ip_de_cerca.js?callback=processarResposta</a></code> on <code>ip_de_cerca</code> es correspon amb el contingut del quadre de text i <code>processarResposta()</code> és el nom de la funció que processarà la resposta. S’ha optat per utilitzar el format JSON perquè és més simple, però es pot fer servir qualsevol altre entre els que admet l’<acronym title="Application Programming Interface">API</acronym>.
</p>
<pre class="code html4strict"><ol><li class="li1"><div class="de1">&lt;!DOCTYPE html&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&lt;head&gt;</div></li><li class="li1"><div class="de1">  &lt;meta charset=&quot;utf-8&quot;&gt;</div></li><li class="li1"><div class="de1">&lt;/head&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&lt;body&gt;</div></li><li class="li1"><div class="de1">  &lt;h1&gt;Cercador d'informació sobre IPs&lt;/h1&gt;</div></li><li class="li1"><div class="de1">  &lt;input type=&quot;text&quot; id=&quot;textACercar&quot; placeholder=&quot;8.8.8.8&quot; /&gt;&lt;button id=&quot;botoCercar&quot;&gt;Cercar&lt;/button&gt;</div></li><li class="li1"><div class="de1">  &lt;div id=&quot;resultats&quot;&gt;</div></li><li class="li1"><div class="de1">  &lt;/div&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  &lt;script&gt;</div></li><li class="li1"><div class="de1">  let botoCercar = document.getElementById('botoCercar');</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  botoCercar.onclick = () =&gt; {</div></li><li class="li1"><div class="de1">    let ipACercar = document.getElementById('textACercar').value;</div></li><li class="li1"><div class="de1">    let script = document.createElement('script');</div></li><li class="li1"><div class="de1">    script.src = generarURL(ipACercar, 'processarResposta', 'json');</div></li><li class="li1"><div class="de1">    document.body.appendChild(script);</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  function generarURL(textACercar, funcio, format) {</div></li><li class="li1"><div class="de1">    return &quot;https://get.geojs.io/v1/ip/geo/&quot; // Url del servei web</div></li><li class="li1"><div class="de1">      + textACercar + &quot;.js&quot; //IP de la que cercar informació</div></li><li class="li1"><div class="de1">      + &quot;?callback=&quot; + funcio; // Nom de la funció a cridar</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  function processarResposta(dades) {</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    let resultats = document.getElementById('resultats');</div></li><li class="li1"><div class="de1">    resultats.innerHTML = ''; // S'elimina el contingut anterior</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    resultats.appendChild(adjuntarInfo(dades))</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  function adjuntarInfo(dades) {</div></li><li class="li1"><div class="de1">    let llistaDades = document.createElement('ul');</div></li><li class="li1"><div class="de1">    let org = document.createElement('li');</div></li><li class="li1"><div class="de1">    org.innerHTML = &quot;&lt;b&gt;Organització&lt;/b&gt;: &quot; + dades.organization_name;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    let pais = document.createElement('li');</div></li><li class="li1"><div class="de1">    pais.innerHTML = &quot;&lt;b&gt;País&lt;/b&gt;: &quot; + dades.country;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    let coord = document.createElement('li');</div></li><li class="li1"><div class="de1">    coord.innerHTML = &quot;&lt;b&gt;Lat&lt;/b&gt;: &quot; + dades.latitude +&quot;&lt;b&gt;/Lon&lt;/b&gt;: &quot; + dades.longitude  ;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    llistaDades.appendChild(org);</div></li><li class="li1"><div class="de1">    llistaDades.appendChild(pais);</div></li><li class="li1"><div class="de1">    llistaDades.appendChild(coord);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    return llistaDades;</div></li><li class="li1"><div class="de1">  }  </div></li><li class="li1"><div class="de1">  &lt;/script&gt;</div></li><li class="li1"><div class="de1">&lt;/body&gt;</div></li></ol></pre>

<p>
Podeu veure aquest exemple en l’enllaç següent: <a href="https://codepen.io/ioc-daw-m06/pen/dNmjYN?editors=1010" class="urlextern" title="https://codepen.io/ioc-daw-m06/pen/dNmjYN?editors=1010"  rel="nofollow">codepen.io/ioc-daw-m06/pen/dNmjYN?editors=1010</a>.
</p>

<p>
Com es pot apreciar, en fer clic al botó de cerca es crea un nou element de tipus script al qual se li assigna com a propietat <code>src</code> l’<acronym title="Uniform Resource Locator">URL</acronym> generat que inclou el text que cal cercar. Una vegada s’afegeix al cos del document, es carregarà automàticament i, una vegada finalitzada la càrrega, invocarà la funció <code>processarResposta()</code> amb les dades.
</p>

<p>
Així doncs, només cal recórrer la llista i generar els elements del DOM pertinents per a cadascun. En aquest cas s’ha optat per crear una llista que inclou l’organització, el país i les coordenades.
</p>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

</p>

</div>

	 </article>
     <div class="pnpage">
      <div class="left-corner"></div>
      <div id="prevpage">Anar a la p&agrave;gina anterior:<br /><a href="../../../WebContent/u6/a1/continguts.html">Comunicació asíncrona amb JavaScript</a></div>
      <div id="nextpage">Anar a la p&agrave;gina seg&uuml;ent:<br /><a href="../../../WebContent/u6/a1/exercicis.html">Exercicis d'autoavaluació</a></div>
      <div class="right-corner"></div>
     </div>
    </div>
    <footer class="footer">
      <div><small>Aquest document està subjecte a una llicència oberta de Creative Commons, es reserva el dret de reconeixement de l'autoria, d'exigir que no se'n faci cap mena d'ús comercial. Si altereu o transformeu aquesta obra, o en genereu obres derivades, només podeu distribuir l'obra generada amb una llicència idèntica a aquesta.</small></div>
    </footer>
 </div>
 <div id="back_preview" class="hidden"></div>
 <div id="preview" class="hidden">
  <div class="prevcontent"></div>
 </div>
 <div id="help-tooltips">
  <div id="help-toc" class="hidden tooltip"><span>Taula de continguts:</span> Ofereix una vista general de l&#39;estructura del m&ograve;dul, que us facilitar&agrave; la navegaci&oacute; a trav&eacute;s dels seus continguts.<span class="arrow-left"></span></div> 
  <div id="help-settings" class="hidden tooltip"><span>Opcions de format:</span> Permet configurar el format de lectura a partir de les vostres prefer&egrave;ncies, modificant la mida de la lletra, el color del fons, l&#39;amplada de la p&agrave;gina o l&#39;ocultaci&oacute; dels continguts complementaris, entre d&#39;altres.<span class="arrow-left"></span></div>
  <div id="help-printer" class="hidden tooltip"><span>Imprimir:</span>  Envia el contingut seleccionat a la impressora.<span class="arrow-left"></span></div>
  <div id="help-favorites" class="hidden tooltip"><span>Prefereits:</span> Permet desar aquelles parts del contingut a les que us interessi accedir en un moment posterior; us permetr&agrave; anar creant un repositori personalitzat de les seccions que considereu m&eacute;s rellevants. Un cop l&#39;hageu començat a fer servir se us mostrar&agrave; a sota un comptador que us informar&agrave; del nombre de preferits que s&#39;hagin emmagatzemat fins al moment.<span class="arrow-left"></span></div>
  <div id="help-favcounter" class="hidden tooltip"><span>Comptador i llistat de preferits:</span> Indica el nombre de preferits que s&#39;han desat fins el moment; clicant damunt seu accedireu al llistat de preferits, i a trav&eacute;s d&#39;aquest podreu accedir directament als continguts que hageu emmagatzemat.<span class="arrow-left"></span></div>
  <div id="help-help_icon" class="hidden tooltip"><span>Ajuda:</span> Aquesta opci&oacute; activa la informaci&oacute; de les funcionalitats del web tot situant el punter del ratol&iacute; al damunt dels diferents &iacute;tems.<span class="arrow-left"></span></div>
  <div id="help-sidebar-hide" class="hidden tooltip"><span>Mostrar/Ocultar barra lateral:</span>  Deshabilita la barra d&#39;opcions, permetent la seva recuperaci&oacute; quan es desitgi.<span class="arrow-left"></span></div>
  <div id="help-search" class="hidden tooltip"><span>Cerca:</span>  Introdu&iuml;u les paraules clau sobre aquells conceptes que desitgeu localitzar en els continguts del m&ograve;dul. Tamb&eacute; podeu excloure un terme de la cerca tot afegint-hi el signe &#8220;-&#8221; al davant.<span class="arrow-top"></span></div>
  <div id="help-header" class="hidden tooltip"><span>Cap&ccedil;alera:</span>  Indica l&#39;apartat o secci&oacute; que es mostra en pantalla. Tingueu present que les capçaleres de segon, tercer i quart nivell tamb&eacute; es poden desar com a marcadors.<span class="arrow-left"></span></div>
</div> 
</body>
</html>
