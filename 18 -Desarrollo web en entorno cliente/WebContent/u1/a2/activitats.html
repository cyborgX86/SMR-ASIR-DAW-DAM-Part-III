<!doctype html>

<!--[if lt IE 7 ]> <html class="ie ie6 no-js" lang="ca"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie ie7 no-js" lang="ca"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie ie8 no-js" lang="ca"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie ie9 no-js" lang="ca"> <![endif]-->
<!--[if gt IE 9]><!--><html class="no-js" lang="ca"><!--<![endif]-->
<!-- the "no-js" class is for Modernizr. -->

<head id="www-sitename-com" data-template-set="html5-reset">

	<meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html">
        
	<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>Desenvolupament web en l'entorn client</title>
	
<!-- <meta name="title" content=""> --> 
	<meta name="description" content="">
	<!-- Google will often use this as its description of your page/site. Make it good. -->
	
	<meta name="google-site-verification" content="">
	<!-- Speaking of Google, don't forget to set your site up: http://google.com/webmasters -->
	
	<meta name="author" content="Institut Obert de Catalunya">
	<meta name="Copyright" content="Copyright Institut Obert de Catalunya 2011. All Rights Reserved.">

	<!-- Dublin Core Metadata : http://dublincore.org/ -->
	<meta name="DC.title" content="Desenvolupament web en l'entorn client">
	<meta name="DC.subject" content="Informàtica i comunicacions">
	<meta name="DC.creator" content="Institut Obert de Catalunya">
	
	<!--  Mobile Viewport Fix
	j.mp/mobileviewport & davidbcalhoun.com/2010/viewport-metatag 
	device-width : Occupy full width of the screen in its current orientation
	initial-scale = 1.0 retains dimensions instead of zooming out if page height > device height
	maximum-scale = 1.0 retains dimensions instead of zooming in if page width < device width
	-->
	<!-- Uncomment to use � use thoughtfully!
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	-->

	<link rel="shortcut icon" href="../../../img/favicon.ico">
	<!-- This is the traditional favicon.
		 - size: 16x16 or 32x32
		 - transparency is OK
		 - see wikipedia for info on browser support: http://mky.be/favicon/ -->
		 
	<link rel="apple-touch-icon" href="../../../img/apple-touch-icon.png">
	<!-- The is the icon for iOS's Web Clip.
		 - size: 57x57 for older iPhones, 72x72 for iPads, 114x114 for iPhone4's retina display (IMHO, just go ahead and use the biggest one)
		 - To prevent iOS from applying its styles to the icon name it thusly: apple-touch-icon-precomposed.png
		 - Transparency is not recommended (iOS will put a black BG behind the icon) -->
	
	<!-- CSS: screen, mobile & print are all in the same file -->
	<link rel="stylesheet" href="../../../_/css/style.css">

	<!-- CSS: jQuery UI -->
	<link rel="stylesheet" href="../../../_/css/jquery-ui.css">
	
	<!-- all our JS is at the bottom of the page, except for Modernizr. -->
	<script src="../../../_/js/modernizr-1.7.min.js"></script>
	<script src="../../../_/js/Hyphenator.js" type="text/javascript"></script>
	<script type="text/javascript">
	   Hyphenator.config({
		minwordlength : 4
	   });
	   Hyphenator.run();
	</script>
    <script src="../../../_/js/build.js" type="text/javascript"></script>
</head>

<body class="style-newspaper">

<div class="wrapper"><!-- not needed? up to you: http://camendesign.com/code/developpeurs_sans_frontieres -->

	<header id="header">
		<div class="head"><a href="http://ioc.gencat.cat"><img src="../../../img/logo.png" alt="Institut Obert de Catalunya"/></a><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/es/deed.ca"><img src="../../../img/license.png" alt="Llic&egrave;ncia" class="license"/></a></div>
		<div class="headdocument"><a href="../../../index.html">Desenvolupament web en l'entorn client</a></div>
        <div id="search" class="search" name="search">
         <form id="frmsearch" action="../../../search.html" method="get">
          <input type="text" name="q"/>
        </form>
        </div>
	</header>
   <div id="upbutton" class="upbutton" style="display:none;"><img src="../../../img/uparrow.png" alt="Pujar a l'inici de p&agrave;gina"/></div>
   <aside id="aside">
    <div id="menu">
      <ul>
       <li name="toc"><div><img src="../../../img/toc.png" alt="&Iacute;ndex"/></div></li>
       <li name="settings"><div><img src="../../../img/settings.png" alt="Configuraci&oacute;"/></div></li>
       <li name="printer"><div><img src="../../../img/printer.png" alt="Imprimir"/></div></li>
       <li name="favorites"><div><img src="../../../img/favorites.png" alt="Favorits"/></div></li>
       <li name="help_icon" class="help_icon"><div><img src="../../../img/help_icon.png" alt="Ajuda"/></div></li>
      </ul>
     </div>
   </aside>
   <div id="sidebar-hide" name="sidebar-hide"><img src="../../../img/arrows.png"/></div>
   <section>
     <div id="toc" class="hidden">
      <div class="menucontent">
        <ul>
        <li id="u1" class="parentnode"><p><a class="unit" href="../../../WebContent/u1/introduccio.html">1. Sintaxi del llenguatge. Objectes predefinits del llenguatge</a></p><ul class="expander"><li id="u1introduccio"><a href="../../../WebContent/u1/introduccio.html">Introducció</a></li><li id="u1resum"><a href="../../../WebContent/u1/resum.html">Resum</a></li><li id="u1resultats"><a href="../../../WebContent/u1/resultats.html">Resultats d'aprenentatge</a></li><li id="u1referencies"><a href="../../../WebContent/u1/referencies.html">Referències</a></li><li id="u1a1" class="tocsection"><p id='u1a1continguts'><a class="section" href="../../../WebContent/u1/a1/continguts.html">Execució de programes al costat client. Introducció a JavaScript</a><span class="buttonexp"></span></p><ul><li id="u1a1activitats"><a href="../../../WebContent/u1/a1/activitats.html">Activitats</a></li><li id="u1a1exercicis"><a href="../../../WebContent/u1/a1/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u1a1' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u1/a1/continguts.html#introduccio_al_llenguatge_javascript">Introducció al llenguatge JavaScript</a></li><li><a href="../../../WebContent/u1/a1/continguts.html#llenguatges_compilats_i_interpretats_llenguatges_de_guions">Llenguatges compilats i interpretats. Llenguatges de guions</a></li><li><a href="../../../WebContent/u1/a1/continguts.html#el_motor_de_javascript_execucio_de_javascript_en_linia_d_ordres">El motor de JavaScript. Execució de JavaScript en línia d'ordres</a></li><li><a href="../../../WebContent/u1/a1/continguts.html#aplicatius_webarquitectura_client-servidor">Aplicatius web: arquitectura client-servidor</a></li><li><a href="../../../WebContent/u1/a1/continguts.html#beneficis_d_utilitzar_javascript_en_les_pagines_web">Beneficis d'utilitzar JavaScript en les pàgines web</a></li><li><a href="../../../WebContent/u1/a1/continguts.html#desavantatges_de_javascript">Desavantatges de JavaScript</a></li><li><a href="../../../WebContent/u1/a1/continguts.html#integracio_del_codi_javascript_en_el_codi_html_primer_exemple">Integració del codi JavaScript en el codi HTML. Primer exemple</a></li><li><a href="../../../WebContent/u1/a1/continguts.html#javascriptprogramacio_dirigida_per_esdeveniments">JavaScript: programació dirigida per esdeveniments</a></li><li><a href="../../../WebContent/u1/a1/continguts.html#eines_i_entorns_per_al_desenvolupament_web">Eines i entorns per al desenvolupament web</a></li><li><a href="../../../WebContent/u1/a1/continguts.html#sintaxi_del_llenguatge_javascript">Sintaxi del llenguatge JavaScript</a></li></ul></div></div><li id="u1a2" class="tocsection"><p id='u1a2continguts'><a class="section" href="../../../WebContent/u1/a2/continguts.html">Introducció. Objectes predefinits i objectes del client web</a><span class="buttonexp"></span></p><ul><li id="u1a2activitats"><a href="../../../WebContent/u1/a2/activitats.html">Activitats</a></li><li id="u1a2exercicis"><a href="../../../WebContent/u1/a2/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u1a2' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u1/a2/continguts.html#objectes_predifinits_de_javascript">Objectes predifinits de JavaScript</a></li><li><a href="../../../WebContent/u1/a2/continguts.html#bom_browser_object_model">BOM (Browser Object Model)</a></li></ul></div></div><li id="u1a3" class="tocsection"><p id='u1a3continguts'><a class="section" href="../../../WebContent/u1/a3/continguts.html">Programació amb galetes, finestres i marcs</a><span class="buttonexp"></span></p><ul><li id="u1a3activitats"><a href="../../../WebContent/u1/a3/activitats.html">Activitats</a></li><li id="u1a3exercicis"><a href="../../../WebContent/u1/a3/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u1a3' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u1/a3/continguts.html#programacio_amb_galetes_cookies">Programació amb galetes ('cookies')</a></li><li><a href="../../../WebContent/u1/a3/continguts.html#emmagatzemar_informacio_amb_local_storage">Emmagatzemar informació amb Local Storage</a></li><li><a href="../../../WebContent/u1/a3/continguts.html#comunicacio_entre_finestres">Comunicació entre finestres</a></li><li><a href="../../../WebContent/u1/a3/continguts.html#marcs_frames_iframes">Marcs (frames/iframes)</a></li></ul></div></div></ul></li><li id="" class="indexnode"><p><a href="../../../index.html">Anar a l&#39;&iacute;ndex general</a></p></li>
        </ul>
      </div>
    </div>
   </section>
   <section>
   <div id="settings" class="hidden">
    <div class="menucontent">
     <div class="allsettings">
     <div class="settings">
      <label>Font i Color</label>
		<div class="setting-option">
	        <ul class="fontBackground">
				<li id="style-newspaper" title="Newspaper" class="appearance-style-newspaper"><span>Newspaper</span></li>
                <li id="style-novel" title="Novel" class="appearance-style-novel"><span>Novel</span></li>
                <li id="style-ebook" title="eBook" class="appearance-style-ebook"><span>eBook</span></li>
				<li id="style-inverse" title="Inverse" class="appearance-style-inverse active"><span>Inverse</span></li>
				<li id="style-athelas" title="Athelas" class="appearance-style-athelas"><span>Athelas</span></li>
			</ul>
		</div>
     </div>
	<div class="settings">
      <label>Amplada</label>
		<div class="setting-option">
	        <div id="slider-width"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
		<div class="setting-option">
	        <div id="slider-font"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
	  <div class="setting-option">
       <form action="" class="sett-options">
		<ul>
		    <li><input type="checkbox" id="secondary-content" /><label for="secondary-content">Mostra recursos complementaris</label></li>
		    <li><input type="checkbox" id="main-images" /><label for="main-images">Mostra imatges</label></li>
		    <li><input type="checkbox" id="text-alignment" /><label for="text-alignment">Text justificat</label></li>
			<li><input type="checkbox" id="text-hyphen" /><label for="text-hyphen">Partici&oacute; sil·l&agrave;bica</label></li>
		</ul>
       </form>
	  </div>
     </div>
     </div>
    </div>
   </div>
   </section>
 <section>
 <div id="favorites" class="hidden"></div>
 </section>   
 <div id="bridge" class="hidden"></div>
 <div id="help" class="hidden">
  <div class="helptitle">Dreceres del teclat<hr></div>
  <div class="helpsection"><span>General</span>
   <ul>
    <li><span class="shortcut">g</span>: Anar al men&uacute; de navegaci&oacute;</li>
    <li><span class="shortcut">o</span>: Anar a opcions</li>
    <li><span class="shortcut">s</span>: Guardar la p&agrave;gina actual a favorits</li>
    <li><span class="shortcut">p</span>: Imprimir la p&agrave;gina actual</li>
    <li><span class="shortcut">?</span>: Mostrar/Ocultar l&#39;ajuda</li>
   </ul>
  </div>
  <div class="helpsection"><span>Navegaci&oacute;</span>
   <ul>
    <li><span class="shortcut">i</span>: Anar a l&#39;&iacute;ndex general</li>
    <li><span class="shortcut">t</span>: Anar a l&#39;inici de p&agrave;gina</li>
    <li><span class="shortcut">b</span>: Anar al final de p&agrave;gina</li>
    <li><span class="shortcut">j</span>: Anar cap endavant dintre la p&agrave;gina</li>
    <li><span class="shortcut">k</span>: Anar cap enrere dintre la p&agrave;gina</li>
    <li><span class="shortcut">h</span>: Anar a la p&agrave;gina anterior:</li>
    <li><span class="shortcut">l</span>: Anar a la p&agrave;gina seg&uuml;ent:</li>
   </ul>
   </div>
 </div>
 <div id="favcounter" name="favcounter" class="hidden"><span></span></div>
 <div id="navmenu" class="navmenu"><ul class="webnav"><li><a href="../../../index.html" title="Anar a l&#39;&iacute;ndex general">Inici</a></li><li><a href="../introduccio.html">Sintaxi del llenguatge. Objectes predefinits del llenguatge</a></li><li><a href="continguts.html">Introducció. Objectes predefinits i objectes del client web</a></li><li>Activitats</li></ul></div>
	<div id="content" lang="ca" class="hyphenate text">
     <article lang="ca" class="sheet">
        <h1><a id="activitats"> Activitats </a></h1>
    	
<h2><a id="propietat_prototype" >Propietat prototype</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és treballar amb la propietat <code>prototype</code> de l’objecte <code>String</code>.
</p>

<p>
La propietat <code>prototype</code> és comuna a tots els objectes predefinits i permet afegir propietats i mètodes a tots els objectes del mateix tipus. En farem ara un cas pràctic.
</p>

<p>
Programeu el mètode <code>separar_caracters(cad)</code>, on passem un caràcter que farà de separador com a argument. Aquest mètode ha de tornar la mateixa cadena amb els caràcters separats pel caràcter separador. Per exemple, si el caràcter separador és un asterisc (<em>*</em>), aleshores:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">let cad = &quot;IOC&quot;;</div></li><li class="li1"><div class="de1">console.log(cad.separarCaracters('*')); //retorna I*O*C</div></li></ol></pre>

<p>
<form action=""><div class="solution ioccontent">
<p>

<p>
Podeu veure i provar la solució a: <a href="https://codepen.io/ioc-daw-m06/pen/pobaZqN?editors=0012" class="urlextern" title="https://codepen.io/ioc-daw-m06/pen/pobaZqN?editors=0012"  rel="nofollow">codepen.io/ioc-daw-m06/pen/pobaZqN?editors=0012</a>.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">String.prototype.separarCaracters = function(strSeparador) {</div></li><li class="li1"><div class="de1">	let characterArray = this.split( &quot;&quot; );</div></li><li class="li1"><div class="de1">	let strTemp = &quot;&quot;;	</div></li><li class="li1"><div class="de1">	for (let i=0; i&lt;this.length-1;i++) {</div></li><li class="li1"><div class="de1">		strTemp += characterArray[i] + strSeparador;</div></li><li class="li1"><div class="de1">	}</div></li><li class="li1"><div class="de1">  strTemp += characterArray[characterArray.length-1];</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">	return strTemp;</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

</p>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

<h2><a id="reutilitzacio_de_codi_javascript" >Reutilització de codi JavaScript</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és reutilitzar un codi JavaScript codificat per altri i que podeu aprofitar i adaptar per als vostres projectes. Així mateix, un altre objectiu és utilitzar l’objecte Math, objecte que normalment no s’utilitza en projectes web.
</p>

<p>
L’etiqueta <code>&lt;canvas&gt;</code> d’<acronym title="HyperText Markup Language">HTML</acronym> es pot utilitzar per dibuixar gràfics (normalment utilitzant JavaScript com a llenguatge de script). En aquest exercici dibuixareu funcions trigonomètriques sobre el <code>canvas</code>, i d’aquesta manera demostrareu les possibilitats de l’objecte <code>Math</code>.
</p>

<p>
Utilitzareu el tag <code>&lt;canvas&gt;</code> com a llençol per dibuixar el gràfic. El codi que hi ha en la solució és bastant intuïtiu. Si voleu aprofundir més en l’ús del <code>canvas</code> podeu mirar-vos el següent <a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial" class="urlextern" title="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial"  rel="nofollow">tutorial</a>.
</p>

<p>
El que l’activitat proposa és representar funcions trigonomètriques sobre el <code>canvas</code>. Concretament, pintareu una sobre de l’altra les funcions trigonomètriques <code>sin(x)</code> i <code>cos(3x)</code>, la primera de color blau i la segona de color vermell.
</p>

<p>
<form action=""><div class="solution ioccontent">
<p>
Aquesta solució s’ha tret de Javascripter: <a href="http://www.javascripter.net/faq/plotafunctiongraph.htm" class="urlextern" title="http://www.javascripter.net/faq/plotafunctiongraph.htm"  rel="nofollow">Plot a function graph</a>.
</p>

<p>
<pre class="code html4strict"><ol><li class="li1"><div class="de1">&lt;!DOCTYPE html&gt;</div></li><li class="li1"><div class="de1">&lt;html&gt;</div></li><li class="li1"><div class="de1">    &lt;head&gt;</div></li><li class="li1"><div class="de1">        &lt;title&gt;Canvas code example&lt;/title&gt;</div></li><li class="li1"><div class="de1">        &lt;script type=&quot;text/javascript&quot;&gt;</div></li><li class="li1"><div class="de1">            function fun1(x) {</div></li><li class="li1"><div class="de1">              return Math.sin(x);</div></li><li class="li1"><div class="de1">            }</div></li><li class="li1"><div class="de1">            function fun2(x) {</div></li><li class="li1"><div class="de1">              return Math.cos(3 * x);</div></li><li class="li1"><div class="de1">            }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">            function draw() {</div></li><li class="li1"><div class="de1">              let canvas = document.getElementById(&quot;canvas&quot;);</div></li><li class="li1"><div class="de1">              if (null == canvas || !canvas.getContext) return;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">              let axes = {},</div></li><li class="li1"><div class="de1">                ctx = canvas.getContext(&quot;2d&quot;);</div></li><li class="li1"><div class="de1">              axes.x0 = 0.5 + 0.5 * canvas.width; // x0 pixels from left to x=0</div></li><li class="li1"><div class="de1">              axes.y0 = 0.5 + 0.5 * canvas.height; // y0 pixels from top to y=0</div></li><li class="li1"><div class="de1">              axes.scale = 40; // 40 pixels from x=0 to x=1</div></li><li class="li1"><div class="de1">              axes.doNegativeX = true;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">              showAxes(ctx, axes);</div></li><li class="li1"><div class="de1">              funGraph(ctx, axes, fun1, &quot;rgb(255,0,0)&quot;, 1);</div></li><li class="li1"><div class="de1">              funGraph(ctx, axes, fun2, &quot;rgb(0,0,255)&quot;, 2);</div></li><li class="li1"><div class="de1">            }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">            function funGraph(ctx, axes, func, color, thick) {</div></li><li class="li1"><div class="de1">              let xx,</div></li><li class="li1"><div class="de1">                yy,</div></li><li class="li1"><div class="de1">                dx = 4,</div></li><li class="li1"><div class="de1">                x0 = axes.x0,</div></li><li class="li1"><div class="de1">                y0 = axes.y0,</div></li><li class="li1"><div class="de1">                scale = axes.scale;</div></li><li class="li1"><div class="de1">              let iMax = Math.round((ctx.canvas.width - x0) / dx);</div></li><li class="li1"><div class="de1">              let iMin = axes.doNegativeX ? Math.round(-x0 / dx) : 0;</div></li><li class="li1"><div class="de1">              ctx.beginPath();</div></li><li class="li1"><div class="de1">              ctx.lineWidth = thick;</div></li><li class="li1"><div class="de1">              ctx.strokeStyle = color;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">              for (let i = iMin; i &lt;= iMax; i++) {</div></li><li class="li1"><div class="de1">                xx = dx * i;</div></li><li class="li1"><div class="de1">                yy = scale * func(xx / scale);</div></li><li class="li1"><div class="de1">                if (i == iMin) ctx.moveTo(x0 + xx, y0 - yy);</div></li><li class="li1"><div class="de1">                else ctx.lineTo(x0 + xx, y0 - yy);</div></li><li class="li1"><div class="de1">              }</div></li><li class="li1"><div class="de1">              ctx.stroke();</div></li><li class="li1"><div class="de1">            }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">            function showAxes(ctx, axes) {</div></li><li class="li1"><div class="de1">              let x0 = axes.x0,</div></li><li class="li1"><div class="de1">                w = ctx.canvas.width;</div></li><li class="li1"><div class="de1">              let y0 = axes.y0,</div></li><li class="li1"><div class="de1">                h = ctx.canvas.height;</div></li><li class="li1"><div class="de1">              let xmin = axes.doNegativeX ? 0 : x0;</div></li><li class="li1"><div class="de1">              ctx.beginPath();</div></li><li class="li1"><div class="de1">              ctx.strokeStyle = &quot;rgb(128,128,128)&quot;;</div></li><li class="li1"><div class="de1">              ctx.moveTo(xmin, y0);</div></li><li class="li1"><div class="de1">              ctx.lineTo(w, y0); // X axis</div></li><li class="li1"><div class="de1">              ctx.moveTo(x0, 0);</div></li><li class="li1"><div class="de1">              ctx.lineTo(x0, h); // Y axis</div></li><li class="li1"><div class="de1">              ctx.stroke();</div></li><li class="li1"><div class="de1">            }</div></li><li class="li1"><div class="de1">        &lt;/script&gt;</div></li><li class="li1"><div class="de1">    &lt;/head&gt;</div></li><li class="li1"><div class="de1">    &lt;body onload=&quot;draw()&quot;&gt;</div></li><li class="li1"><div class="de1">        &lt;canvas id=&quot;canvas&quot; width=&quot;502&quot; height=&quot;108&quot;&gt;&lt;/canvas&gt;</div></li><li class="li1"><div class="de1">    &lt;/body&gt;</div></li><li class="li1"><div class="de1">&lt;/html&gt;</div></li></ol></pre>

<p>
Podeu veure i provar la solució a: <a href="https://codepen.io/ioc-daw-m06/pen/LYZQBaJ?editors=1010" class="urlextern" title="https://codepen.io/ioc-daw-m06/pen/LYZQBaJ?editors=1010"  rel="nofollow">codepen.io/ioc-daw-m06/pen/LYZQBaJ?editors=1010</a>.
</p>

</p>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

<h2><a id="temps_d_execucio_d_un_script" >Temps d&#039;execució d&#039;un script</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és calcular el temps que triga un script a executar-se. Per fer-ho, utilitzarem la funció <code>Date()</code>, que té precisió de mil·lisegons.
</p>

<p>
A <a href="http://p-nand-q.com/programming/obfuscation/js/index.html" class="urlextern" title="http://p-nand-q.com/programming/obfuscation/js/index.html"  rel="nofollow">Calculating PI to an arbitrary number of digits</a> teniu un algorisme per trobar els decimals de PI que és fàcil de reutilitzar en el vostre codi. No haureu només de calcular els primers 60 números de PI (cosa bastant evident a partir del codi disponible), sinó veure què triga a calcular-los. No només quant triga a calcular els 60 dígits, sinó calcular quant triga a calcular el primer, el segon, etc. i així anirem veient que cada cop li costa més (tot i que l’algorisme és molt ràpid).
</p>

<p>
<form action=""><div class="solution ioccontent">
<p>
La tècnica que aquí es proposa s’utilitza sovint per calcular lapses de temps amb una resolució de mil·lisegons. Recordeu que l’objecte <code>Date</code> té una precisió de mil·lisegons.
</p>

<p>
<pre class="code html4strict"><ol><li class="li1"><div class="de1">&lt;!DOCTYPE html&gt;</div></li><li class="li1"><div class="de1">&lt;html&gt;</div></li><li class="li1"><div class="de1">    &lt;head&gt;</div></li><li class="li1"><div class="de1">        &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;</div></li><li class="li1"><div class="de1">        &lt;title&gt;Número PI&lt;/title&gt;</div></li><li class="li1"><div class="de1">    &lt;/head&gt;</div></li><li class="li1"><div class="de1">    &lt;body&gt;</div></li><li class="li1"><div class="de1">        &lt;script&gt;</div></li><li class="li1"><div class="de1">            // &lt;copyright file=&quot;CalculatePi.js&quot; company=&quot;p-nand-q.com&quot;&gt;</div></li><li class="li1"><div class="de1">            // Copyright (c) 20xx All Right Reserved Or Not, http://p-nand-q.com/</div></li><li class="li1"><div class="de1">            //</div></li><li class="li1"><div class="de1">            // This source is subject to the p-nand-q.com Permissive License or not.</div></li><li class="li1"><div class="de1">            // Please ignore the License.txt file for less information or not.</div></li><li class="li1"><div class="de1">            // All other rights preserved or not.</div></li><li class="li1"><div class="de1">            //</div></li><li class="li1"><div class="de1">            // THIS CODE AND INFORMATION ARE PROVIDED &quot;AS IS&quot; WITHOUT WARRANTY OF ANY</div></li><li class="li1"><div class="de1">            // KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE</div></li><li class="li1"><div class="de1">            // IMPLIED WARRANTIES OF MERCHANTABILITY AND/OR FITNESS FOR A</div></li><li class="li1"><div class="de1">            // PARTICULAR PURPOSE. EXCEPT FOR THURSDAYS.</div></li><li class="li1"><div class="de1">            //</div></li><li class="li1"><div class="de1">            // This class calculates Pi. In Javascript. Main Features:</div></li><li class="li1"><div class="de1">            //</div></li><li class="li1"><div class="de1">            // - calculate pi</div></li><li class="li1"><div class="de1">            // - to an arbitrary number of digits</div></li><li class="li1"><div class="de1">            // - it is functional code in that it functions well.</div></li><li class="li1"><div class="de1">            // - it is object oriented code in that it objects to very few things.</div></li><li class="li1"><div class="de1">            // - it is procedural call in that it has a license that people proceed to ignore</div></li><li class="li1"><div class="de1">            // - it is overall a great and refreshing experience</div></li><li class="li1"><div class="de1">            //</div></li><li class="li1"><div class="de1">            // Example:</div></li><li class="li1"><div class="de1">            //</div></li><li class="li1"><div class="de1">            //  console.log(new CalculatePi(100).name);</div></li><li class="li1"><div class="de1">            //</div></li><li class="li1"><div class="de1">            // &lt;/copyright&gt;</div></li><li class="li1"><div class="de1">            function CalculatePi(NumberOfDigits) {</div></li><li class="li1"><div class="de1">              this.data = {};</div></li><li class="li1"><div class="de1">              this.name = &quot;&quot;;</div></li><li class="li1"><div class="de1">              let $ = this;</div></li><li class="li1"><div class="de1">              this._ = [</div></li><li class="li1"><div class="de1">                function (x, y) {</div></li><li class="li1"><div class="de1">                  return this._[6](x, this._[9](x) + this._[9](y));</div></li><li class="li1"><div class="de1">                }.bind($),</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">                function (x, y) {</div></li><li class="li1"><div class="de1">                  return this._[8](x, this._[9](y));</div></li><li class="li1"><div class="de1">                }.bind($),</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">                function (x, y) {</div></li><li class="li1"><div class="de1">                  return this._[8](this._[9](x), y);</div></li><li class="li1"><div class="de1">                }.bind($),</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">                function (x, y) {</div></li><li class="li1"><div class="de1">                  return this._[6](x, this._[9](x) / this._[9](y));</div></li><li class="li1"><div class="de1">                }.bind($),</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">                function (x, y) {</div></li><li class="li1"><div class="de1">                  return this._[6](x, this._[9](x) - this._[9](y));</div></li><li class="li1"><div class="de1">                }.bind($),</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">                function (x, y) {</div></li><li class="li1"><div class="de1">                  return this._[9](x) != this._[9](y);</div></li><li class="li1"><div class="de1">                }.bind($),</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">                function (x, y) {</div></li><li class="li1"><div class="de1">                  this.data[-x] = Math.floor(y);</div></li><li class="li1"><div class="de1">                }.bind($),</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">                function (x, y) {</div></li><li class="li1"><div class="de1">                  return this._[6](x, this._[9](x) % this._[9](y));</div></li><li class="li1"><div class="de1">                }.bind($),</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">                function (x, y) {</div></li><li class="li1"><div class="de1">                  this.data[-x] = this._[9](y);</div></li><li class="li1"><div class="de1">                }.bind($),</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">                function (x) {</div></li><li class="li1"><div class="de1">                  return this.data[-x] == undefined ? 0 : this.data[-x];</div></li><li class="li1"><div class="de1">                }.bind($),</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">                function (x, y) {</div></li><li class="li1"><div class="de1">                  return (this.name += this._[9](-6));</div></li><li class="li1"><div class="de1">                }.bind($),</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">                function (x, y) {</div></li><li class="li1"><div class="de1">                  return this._[6](x, this._[9](x) * this._[9](y));</div></li><li class="li1"><div class="de1">                }.bind($),</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">                function (x, y) {</div></li><li class="li1"><div class="de1">                  return this._[9](x) &lt; this._[9](y);</div></li><li class="li1"><div class="de1">                }.bind($),</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">                function (x, y) {</div></li><li class="li1"><div class="de1">                  return this._[9](x) &gt; this._[9](y);</div></li><li class="li1"><div class="de1">                }.bind($),</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">                function (y, n) {</div></li><li class="li1"><div class="de1">                  let x = &quot;dermatoglyphics!?&quot;,</div></li><li class="li1"><div class="de1">                    m;</div></li><li class="li1"><div class="de1">                  for (let $ = 0; $ &lt; y.length; ++$) {</div></li><li class="li1"><div class="de1">                    if ($ % 3 == 0) m = this._[x.indexOf(y[$])];</div></li><li class="li1"><div class="de1">                    else if ($ % 3 == 1) a = -x.length + x.indexOf(y[$]);</div></li><li class="li1"><div class="de1">                    else m = m(a, -x.length + x.indexOf(y[$]));</div></li><li class="li1"><div class="de1">                  }</div></li><li class="li1"><div class="de1">                  return m;</div></li><li class="li1"><div class="de1">                }.bind($),</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">                function (x, y) {</div></li><li class="li1"><div class="de1">                  return this._[14](x, y) ? this._[14](y, x) : undefined;</div></li><li class="li1"><div class="de1">                }.bind($),</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">                function (x, y) {</div></li><li class="li1"><div class="de1">                  return this._[14](x, y) ? undefined : this._[14](y, x);</div></li><li class="li1"><div class="de1">                }.bind($),</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">                function (x, y) {</div></li><li class="li1"><div class="de1">                  return this._[14](x, y)</div></li><li class="li1"><div class="de1">                    ? (this._[14](y, x), this._[17](x, y))</div></li><li class="li1"><div class="de1">                    : undefined;</div></li><li class="li1"><div class="de1">                }.bind($),</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">                function (x, z) {</div></li><li class="li1"><div class="de1">                  for (let $ in x) {</div></li><li class="li1"><div class="de1">                    this._[x[$][0]](x[$][1], x[$][2]);</div></li><li class="li1"><div class="de1">                  }</div></li><li class="li1"><div class="de1">                }.bind($),</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">                function (x, y) {</div></li><li class="li1"><div class="de1">                  this._[18](</div></li><li class="li1"><div class="de1">                    [</div></li><li class="li1"><div class="de1">                      [14, &quot;lcmlglhgtmgr&quot;, &quot;csm&quot;],</div></li><li class="li1"><div class="de1">                      [17, &quot;cgs&quot;, &quot;logaoaeoohotlpchpgdoplpghpeapalcomcpgoplpgaparpoaga&quot;],</div></li><li class="li1"><div class="de1">                      [14, &quot;lhilicmitdiylycgyt&quot;, &quot;csm&quot;],</div></li><li class="li1"><div class="de1">                      [16, &quot;tit&quot;, &quot;limdha&quot;],</div></li><li class="li1"><div class="de1">                      [15, &quot;t?m&quot;, &quot;p?h&quot;],</div></li><li class="li1"><div class="de1">                      [14, &quot;d?a&quot;, &quot;csm&quot;]</div></li><li class="li1"><div class="de1">                    ],</div></li><li class="li1"><div class="de1">                    undefined</div></li><li class="li1"><div class="de1">                  );</div></li><li class="li1"><div class="de1">                }.bind($),</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">                function (x, y) {</div></li><li class="li1"><div class="de1">                  return this._[x](-1, -9)</div></li><li class="li1"><div class="de1">                    ? (this._[y](-1, -2), this._[y + 1](x, y))</div></li><li class="li1"><div class="de1">                    : undefined;</div></li><li class="li1"><div class="de1">                }.bind($),</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">                function (x, y) {</div></li><li class="li1"><div class="de1">                  for (let $ in x) {</div></li><li class="li1"><div class="de1">                    this._[x[$][0]](x[$][1], x[$][2]);</div></li><li class="li1"><div class="de1">                  }</div></li><li class="li1"><div class="de1">                }.bind($)</div></li><li class="li1"><div class="de1">              ];</div></li><li class="li1"><div class="de1">              this._[21](</div></li><li class="li1"><div class="de1">                [</div></li><li class="li1"><div class="de1">                  [6, -9, NumberOfDigits],</div></li><li class="li1"><div class="de1">                  [6, -12, 10],</div></li><li class="li1"><div class="de1">                  [6, -13, 1],</div></li><li class="li1"><div class="de1">                  [6, -14, 0],</div></li><li class="li1"><div class="de1">                  [6, -15, 3],</div></li><li class="li1"><div class="de1">                  [14, &quot;leraeal?mlslhstmsr&quot;, &quot;csm&quot;],</div></li><li class="li1"><div class="de1">                  [17, &quot;csm&quot;, &quot;l!sa!ar!easa&quot;],</div></li><li class="li1"><div class="de1">                  [20, 12, 19],</div></li><li class="li1"><div class="de1">                  [18, -1, -2]</div></li><li class="li1"><div class="de1">                ],</div></li><li class="li1"><div class="de1">                undefined</div></li><li class="li1"><div class="de1">              );</div></li><li class="li1"><div class="de1">            }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">            let d1, d2;</div></li><li class="li1"><div class="de1">            let ms1, ms2;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">            d1 = new Date();</div></li><li class="li1"><div class="de1">            ms1 = d1.getTime();</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">            // Execució del càlcul dels primer 100 digits, mostrant el temps en ms necessari per completar el càlcul</div></li><li class="li1"><div class="de1">            for (let i = 0; i &lt; 100; i++) {</div></li><li class="li1"><div class="de1">              document.write(&quot;&lt;p&gt;&quot;);</div></li><li class="li1"><div class="de1">              document.write(new CalculatePi(i).name);</div></li><li class="li1"><div class="de1">              document.write(&quot;&lt;br /&gt;&quot;);</div></li><li class="li1"><div class="de1">              d2 = new Date();</div></li><li class="li1"><div class="de1">              ms2 = d2.getTime();</div></li><li class="li1"><div class="de1">              document.write((ms2 - ms1) + &quot;ms&quot;);</div></li><li class="li1"><div class="de1">              document.write(&quot;&lt;/p&gt;&quot;);</div></li><li class="li1"><div class="de1">              ms1 = ms2;</div></li><li class="li1"><div class="de1">            }</div></li><li class="li1"><div class="de1">        &lt;/script&gt;</div></li><li class="li1"><div class="de1">    &lt;/body&gt;</div></li><li class="li1"><div class="de1">&lt;/html&gt;</div></li></ol></pre>

<p>
Podeu veure i provar la solució a: <a href="https://codepen.io/ioc-daw-m06/pen/LYZQBaJ?editors=1010" class="urlextern" title="https://codepen.io/ioc-daw-m06/pen/LYZQBaJ?editors=1010"  rel="nofollow">codepen.io/ioc-daw-m06/pen/LYZQBaJ?editors=1010</a>.
</p>

</p>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

<h2><a id="us_de_biblioteques" >Ús de biblioteques</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és utilitzar i integrar una biblioteca en el nostre projecte que ens doni una funcionalitat avançada que necessitem. En aquesta activitat concreta, volem incloure rellotges analògics en les nostres web.
</p>

<p>
Hi ha una dita catalana que diu que les capitals del món són Reus, París i Londres. Aquesta dita es remunta al s. XVIII quan els aiguardents que es feien al camp de Tarragona s’exportaven arreu. Posem per cas, però, que les capitals del món avui dia són Reus, París, Londres, Nova York i Tòquio.
</p>

<p>
En aquesta activitat pintarem rellotges analògics que mostrin l’hora en cadascuna d’aquestes ciutats. Pot semblar una tasca molt difícil, però no ho serà tant. Bàsicament perquè no hem de programar des de zero tota la funcionalitat dels rellotges. Hem de buscar suport en alguna llibreria o codi que ja faci aquesta funció. Però després haurem de saber incorporar aquest codi a la nostra aplicació.
</p>

<p>
El primer és trobar una llibreria que ens faci el gruix de la feina. Fent una cerca ràpida per la xarxa trobem el projecte <em>CoolClock - The Javascript Analog Clock</em> (<a href="http://randomibis.com/coolclock/" class="urlextern" title="http://randomibis.com/coolclock/"  rel="nofollow">CoolClock</a>). Mirem els exemples i és precisament això el que necessitem. Tot seguit, important, hem de mirar la llicència. En la mateixa pàgina web diu textualment:
</p>
<pre class="code">License

CoolClock is published under a BSD OpenSourceLicense that gives you the freedom to use it pretty much however you want, including for commercial purposes, as long as you keep my copyright notice. </pre>

<p>
Per tant, sembla que hem fet una bona tria. Mirem la documentació per veure si és fàcil d’implementar. La documentació està en anglès. No hauríeu de tenir problema en llegir-la. Segons sembla, és prou fàcil. Creem el fitxer <em>capitals.html</em>.
</p>

<p>
Cal tenir en compte el següent:
</p>

<p>
<strong>1.</strong> Cal copiar a la carpeta <em>js</em> els fitxers externs <em>excanvas.js</em>, <em>coolclock.js</em> i <em>moreskins.js</em>.
</p>

<p>
<strong>2.</strong> Cal incloure el següent a la capçalera:
</p>
<pre class="code html4strict"><ol><li class="li1"><div class="de1">&lt;!--[if IE]&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;excanvas.js&quot;&gt;&lt;/script&gt;&lt;![endif]--&gt;</div></li><li class="li1"><div class="de1">&lt;script type=&quot;text/javascript&quot; src=&quot;js/coolclock.js&quot;&gt;&lt;/script&gt;</div></li><li class="li1"><div class="de1">&lt;script type=&quot;text/javascript&quot; src=&quot;js/moreskins.js&quot;&gt;&lt;/script&gt;</div></li></ol></pre>

<p>
<strong>3.</strong> Com que no utilitzem <em>jQuery</em> cal definir el <em>body</em> de la següent manera:
</p>
<pre class="code html4strict"><ol><li class="li1"><div class="de1">&lt;body onload=&quot;CoolClock.findAndCreateClocks()&quot;&gt;</div></li></ol></pre>

<p>
<strong>4.</strong> Dins del <em>body</em> cal posar un <em>canvas</em> que inclourà el rellotge. Caldrà indicar-hi el radi del rellotge, si volem o no l’agulla dels segons i l’offset del fus horari. Per exemple:
</p>
<pre class="code html4strict"><ol><li class="li1"><div class="de1">&lt;canvas id=&quot;clockid&quot; class=&quot;CoolClock:Skin:Radius:noSeconds:GMTOffset&quot;&gt;&lt;/canvas&gt;</div></li></ol></pre>

<p>
En aquesta línia hem de definir un disseny (<em>skin</em>), un radi del rellotge, dir si volem o no l’agulla dels segons i l’<em>offset</em> del fus horari. Per exemple:
</p>
<pre class="code html4strict"><ol><li class="li1"><div class="de1">&lt;canvas id=&quot;clockid1&quot; class=&quot;CoolClock:swissRail:85::+2&quot;&gt;&lt;/canvas&gt;</div></li></ol></pre>

<p>
Si posem diversos rellotges, haurem de tenir en compte que els <em>id</em> de cada <em>canvas</em> hauran de ser diferents: els identificadors sempre han de ser unívocs (no es poden repetir).
</p>

<p>
Per saber l’hora a les diferents ciutats, hem de mirar un mapa de fusos horaris, i hem de tenir en compte si estem en horari d’estiu o d’hivern.
</p>

<p>
Escriviu un programa que dibuixi els cinc rellotges, de Reus, París, Londres, Nova York i Tòquio tot utilitzant la biblioteca que s’ha esmentat abans. Podeu consultar la solució al final de l’activitat, a més d’una anàlisi acurada d’alguns aspectes del codi, un cop el tinguem a la vista.
</p>

<p>
<form action=""><div class="solution ioccontent"><pre class="code html4strict"><ol><li class="li1"><div class="de1">&lt;!DOCTYPE html&gt;</div></li><li class="li1"><div class="de1">&lt;html&gt;</div></li><li class="li1"><div class="de1">    &lt;head&gt;</div></li><li class="li1"><div class="de1">        &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;      </div></li><li class="li1"><div class="de1">        &lt;title&gt;Capitals del món&lt;/title&gt;</div></li><li class="li1"><div class="de1">        &lt;style&gt;</div></li><li class="li1"><div class="de1">            table, th, td {</div></li><li class="li1"><div class="de1">              border: 0px solid black;</div></li><li class="li1"><div class="de1">              font: bold 30px Verdana, serif;</div></li><li class="li1"><div class="de1">            	text-align: center;</div></li><li class="li1"><div class="de1">            	padding: 5px;</div></li><li class="li1"><div class="de1">            }</div></li><li class="li1"><div class="de1">            h1 {</div></li><li class="li1"><div class="de1">            	font: bold 30px Verdana, serif;</div></li><li class="li1"><div class="de1">            }</div></li><li class="li1"><div class="de1">        &lt;/style&gt;</div></li><li class="li1"><div class="de1">        &lt;!--[if IE]&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;js/excanvas.js&quot;&gt;&lt;/script&gt;&lt;![endif]--&gt;</div></li><li class="li1"><div class="de1">        &lt;script type=&quot;text/javascript&quot; src=&quot;js/coolclock.js&quot;&gt;&lt;/script&gt;</div></li><li class="li1"><div class="de1">        &lt;script type=&quot;text/javascript&quot; src=&quot;js/moreskins.js&quot;&gt;&lt;/script&gt;</div></li><li class="li1"><div class="de1">    &lt;/head&gt;</div></li><li class="li1"><div class="de1">    &lt;body onload=&quot;CoolClock.findAndCreateClocks()&quot;&gt;</div></li><li class="li1"><div class="de1">        &lt;h1&gt;Capitals del món&lt;/h1&gt;</div></li><li class="li1"><div class="de1">        &lt;table&gt;</div></li><li class="li1"><div class="de1">            &lt;tr&gt;</div></li><li class="li1"><div class="de1">                &lt;td&gt;&lt;canvas id=&quot;clockid1&quot; class=&quot;CoolClock:swissRail:85::+2&quot;&gt;&lt;/canvas&gt;&lt;/td&gt;</div></li><li class="li1"><div class="de1">                &lt;td&gt;&lt;canvas id=&quot;clockid2&quot; class=&quot;CoolClock:swissRail:85::+2&quot;&gt;&lt;/canvas&gt;&lt;/td&gt;</div></li><li class="li1"><div class="de1">                &lt;td&gt;&lt;canvas id=&quot;clockid3&quot; class=&quot;CoolClock:swissRail:85::+1&quot;&gt;&lt;/canvas&gt;&lt;/td&gt;</div></li><li class="li1"><div class="de1">                &lt;td&gt;&lt;canvas id=&quot;clockid4&quot; class=&quot;CoolClock:swissRail:85::-4&quot;&gt;&lt;/canvas&gt;&lt;/td&gt;</div></li><li class="li1"><div class="de1">                &lt;td&gt;&lt;canvas id=&quot;clockid5&quot; class=&quot;CoolClock:swissRail:85::+10&quot;&gt;&lt;/canvas&gt;&lt;/td&gt;</div></li><li class="li1"><div class="de1">            &lt;/tr&gt;</div></li><li class="li1"><div class="de1">            &lt;tr&gt;</div></li><li class="li1"><div class="de1">                &lt;td&gt;Reus&lt;/td&gt;</div></li><li class="li1"><div class="de1">                &lt;td&gt;Paris&lt;/td&gt;</div></li><li class="li1"><div class="de1">                &lt;td&gt;Londres&lt;/td&gt;</div></li><li class="li1"><div class="de1">                &lt;td&gt;Nova York&lt;/td&gt;</div></li><li class="li1"><div class="de1">                &lt;td&gt;Tokyo&lt;/td&gt;</div></li><li class="li1"><div class="de1">            &lt;/tr&gt;</div></li><li class="li1"><div class="de1">        &lt;/table&gt;</div></li><li class="li1"><div class="de1">    &lt;/body&gt;</div></li><li class="li1"><div class="de1">&lt;/html&gt;</div></li></ol></pre>

<p>
Un cop tenim una solució correcta, aprofundirem més en el codi. És el moment d’endinsar-nos sense por en l’script <em>coolclock.js</em>, que tindrem obert en el nostre editor de text preferit.
</p>

<p>
Les tres agulles es mouen un cert angle cada vegada. Sens dubte s’hauran d’utilitzar funcions trigonomètriques per determinar el moviment. Identifiquem-ne les parts rellevants.
</p>

<p>
A la línia 241 de l’script <em>coolclock.js</em> trobem:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">// Draw the hands</div></li><li class="li1"><div class="de1">if (skin.hourHand)</div></li><li class="li1"><div class="de1">this.radialLineAtAngle(this.tickAngle(((hour%12)*5 + min/12.0)),skin.hourHand);</div></li></ol></pre>

<p>
Tenint en compte que <em>hand</em> és l’agulla del rellotge, aquest tros de codi mou l’agulla de les hores. La funció que ho fa possible és <code>radialLineAtAngle()</code>, que dibuixa una línia radial a un angle concret. Aquesta funció la trobem definida a la línia 190 i, com era d’esperar, en algun punt s’havia d’utilitzar la constant matemàtica <code>pi</code>. Concretament, a la línia 193:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">this.ctx.rotate(Math.PI * (2.0 * angleFraction - 0.5));</div></li></ol></pre>

<p>
Aquesta línia ens dóna la idea de la quantitat que ha de girar una agulla per obtenir una nova posició.
</p>

<p>
Evidentment, no cal que entengueu tot el codi, però sí que és un bon exercici llegir el codi i mirar d’entendre què fa cada part, bloc o funció. Així com fixar-se en les bones praxis de programació.
</p>

<p>
En algun tros del codi hem de saber quina és l’hora del sistema. Aquesta és més fàcil, a la línia 258 trobem:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">let now = new Date();</div></li></ol></pre>

<p>
I en algun moment s’ha de dir que el rellotge s’ha d’actualitzar a períodes regulars de temps. S’ha vist que existeix a JavaScript la funció <code>setTimeout()</code>. Anem a buscar-la, a veure si la trobem… Efectivament, a la línia 270 tenim:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">  // Set timeout to trigger a tick in the future</div></li><li class="li1"><div class="de1">  nextTick: function() {</div></li><li class="li1"><div class="de1">		setTimeout(&quot;CoolClock.config.clockTracker['&quot;+this.canvasId+&quot;'].tick()&quot;,this.tickDelay);</div></li><li class="li1"><div class="de1">	},</div></li></ol></pre>

<p>
Que s’actualitza cada <code>this.tickDelay</code> de temps. <code>this</code> fa referència a les agulles d’hora, minut o segon, i la propietat <code>tickDelay</code> valdrà 1 hora, 60 minuts o 1 segon.
</p>

<p>
Com a conclusió, aquest exercici ens ha servit per incloure una funcionalitat d’alt nivell en la nostra aplicació, i també per fer enginyeria inversa estudiant codi escrit per altres persones.
</p>

<p>
Recordem que no hem de reinventar la roda, podem reutilitzar el que avui dia es pot trobar fàcilment a la xarxa. Això és el que també fem quan volem incorporar en els nostres formularis una funció per validar el NIF, o per validar que un correu electrònic tingui el format correcte.
</p>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

	 </article>
     <div class="pnpage">
      <div class="left-corner"></div>
      <div id="prevpage">Anar a la p&agrave;gina anterior:<br /><a href="../../../WebContent/u1/a2/continguts.html">Introducció. Objectes predefinits i objectes del client web</a></div>
      <div id="nextpage">Anar a la p&agrave;gina seg&uuml;ent:<br /><a href="../../../WebContent/u1/a2/exercicis.html">Exercicis d'autoavaluació</a></div>
      <div class="right-corner"></div>
     </div>
    </div>
    <footer class="footer">
      <div><small>Aquest document està subjecte a una llicència oberta de Creative Commons, es reserva el dret de reconeixement de l'autoria, d'exigir que no se'n faci cap mena d'ús comercial. Si altereu o transformeu aquesta obra, o en genereu obres derivades, només podeu distribuir l'obra generada amb una llicència idèntica a aquesta.</small></div>
    </footer>
 </div>
 <div id="back_preview" class="hidden"></div>
 <div id="preview" class="hidden">
  <div class="prevcontent"></div>
 </div>
 <div id="help-tooltips">
  <div id="help-toc" class="hidden tooltip"><span>Taula de continguts:</span> Ofereix una vista general de l&#39;estructura del m&ograve;dul, que us facilitar&agrave; la navegaci&oacute; a trav&eacute;s dels seus continguts.<span class="arrow-left"></span></div> 
  <div id="help-settings" class="hidden tooltip"><span>Opcions de format:</span> Permet configurar el format de lectura a partir de les vostres prefer&egrave;ncies, modificant la mida de la lletra, el color del fons, l&#39;amplada de la p&agrave;gina o l&#39;ocultaci&oacute; dels continguts complementaris, entre d&#39;altres.<span class="arrow-left"></span></div>
  <div id="help-printer" class="hidden tooltip"><span>Imprimir:</span>  Envia el contingut seleccionat a la impressora.<span class="arrow-left"></span></div>
  <div id="help-favorites" class="hidden tooltip"><span>Prefereits:</span> Permet desar aquelles parts del contingut a les que us interessi accedir en un moment posterior; us permetr&agrave; anar creant un repositori personalitzat de les seccions que considereu m&eacute;s rellevants. Un cop l&#39;hageu començat a fer servir se us mostrar&agrave; a sota un comptador que us informar&agrave; del nombre de preferits que s&#39;hagin emmagatzemat fins al moment.<span class="arrow-left"></span></div>
  <div id="help-favcounter" class="hidden tooltip"><span>Comptador i llistat de preferits:</span> Indica el nombre de preferits que s&#39;han desat fins el moment; clicant damunt seu accedireu al llistat de preferits, i a trav&eacute;s d&#39;aquest podreu accedir directament als continguts que hageu emmagatzemat.<span class="arrow-left"></span></div>
  <div id="help-help_icon" class="hidden tooltip"><span>Ajuda:</span> Aquesta opci&oacute; activa la informaci&oacute; de les funcionalitats del web tot situant el punter del ratol&iacute; al damunt dels diferents &iacute;tems.<span class="arrow-left"></span></div>
  <div id="help-sidebar-hide" class="hidden tooltip"><span>Mostrar/Ocultar barra lateral:</span>  Deshabilita la barra d&#39;opcions, permetent la seva recuperaci&oacute; quan es desitgi.<span class="arrow-left"></span></div>
  <div id="help-search" class="hidden tooltip"><span>Cerca:</span>  Introdu&iuml;u les paraules clau sobre aquells conceptes que desitgeu localitzar en els continguts del m&ograve;dul. Tamb&eacute; podeu excloure un terme de la cerca tot afegint-hi el signe &#8220;-&#8221; al davant.<span class="arrow-top"></span></div>
  <div id="help-header" class="hidden tooltip"><span>Cap&ccedil;alera:</span>  Indica l&#39;apartat o secci&oacute; que es mostra en pantalla. Tingueu present que les capçaleres de segon, tercer i quart nivell tamb&eacute; es poden desar com a marcadors.<span class="arrow-left"></span></div>
</div> 
</body>
</html>
