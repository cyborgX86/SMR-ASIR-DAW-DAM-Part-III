<!doctype html>

<!--[if lt IE 7 ]> <html class="ie ie6 no-js" lang="ca"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie ie7 no-js" lang="ca"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie ie8 no-js" lang="ca"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie ie9 no-js" lang="ca"> <![endif]-->
<!--[if gt IE 9]><!--><html class="no-js" lang="ca"><!--<![endif]-->
<!-- the "no-js" class is for Modernizr. -->

<head id="www-sitename-com" data-template-set="html5-reset">

	<meta charset="utf-8">
	
	<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title></title>
	
<!-- <meta name="title" content=""> --> 
	<meta name="description" content="">
	<!-- Google will often use this as its description of your page/site. Make it good. -->
	
	<meta name="google-site-verification" content="">
	<!-- Speaking of Google, don't forget to set your site up: http://google.com/webmasters -->
	
	<meta name="author" content="Institut Obert de Catalunya">
	<meta name="Copyright" content="Copyright Institut Obert de Catalunya 2011. All Rights Reserved.">

	<!-- Dublin Core Metadata : http://dublincore.org/ -->
	<meta name="DC.title" content="">
	<meta name="DC.subject" content="Informàtica i comunicacions">
	<meta name="DC.creator" content="Institut Obert de Catalunya">
	
	<!--  Mobile Viewport Fix
	j.mp/mobileviewport & davidbcalhoun.com/2010/viewport-metatag 
	device-width : Occupy full width of the screen in its current orientation
	initial-scale = 1.0 retains dimensions instead of zooming out if page height > device height
	maximum-scale = 1.0 retains dimensions instead of zooming in if page width < device width
	-->
	<!-- Uncomment to use � use thoughtfully!
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	-->

	<link rel="shortcut icon" href="../../../img/favicon.ico">
	<!-- This is the traditional favicon.
		 - size: 16x16 or 32x32
		 - transparency is OK
		 - see wikipedia for info on browser support: http://mky.be/favicon/ -->
		 
	<link rel="apple-touch-icon" href="../../../img/apple-touch-icon.png">
	<!-- The is the icon for iOS's Web Clip.
		 - size: 57x57 for older iPhones, 72x72 for iPads, 114x114 for iPhone4's retina display (IMHO, just go ahead and use the biggest one)
		 - To prevent iOS from applying its styles to the icon name it thusly: apple-touch-icon-precomposed.png
		 - Transparency is not recommended (iOS will put a black BG behind the icon) -->
	
	<!-- CSS: screen, mobile & print are all in the same file -->
	<link rel="stylesheet" href="../../../_/css/style.css">

	<!-- CSS: jQuery UI -->
	<link rel="stylesheet" href="../../../_/css/jquery-ui.css">
	
	<!-- all our JS is at the bottom of the page, except for Modernizr. -->
	<script src="../../../_/js/modernizr-1.7.min.js"></script>
	<script src="../../../_/js/Hyphenator.js" type="text/javascript"></script>
	<script type="text/javascript">
	   Hyphenator.config({
		minwordlength : 4
	   });
	   Hyphenator.run();
	</script>
    <script src="../../../_/js/build.js" type="text/javascript"></script>
</head>

<body class="style-newspaper">

<div class="wrapper"><!-- not needed? up to you: http://camendesign.com/code/developpeurs_sans_frontieres -->

	<header id="header">
		<div class="head"><a href="http://ioc.gencat.cat"><img src="../../../img/logo.png" alt="Institut Obert de Catalunya"/></a><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/es/deed.ca"><img src="../../../img/license.png" alt="Llic&egrave;ncia" class="license"/></a></div>
		<div class="headdocument"><a href="../../../index.html"></a></div>
        <div id="search" class="search" name="search">
         <form id="frmsearch" action="../../../search.html" method="get">
          <input type="text" name="q"/>
        </form>
        </div>
	</header>
   <div id="upbutton" class="upbutton" style="display:none;"><img src="../../../img/uparrow.png" alt="Pujar a l'inici de p&agrave;gina"/></div>
   <aside id="aside">
    <div id="menu">
      <ul>
       <li name="toc"><div><img src="../../../img/toc.png" alt="&Iacute;ndex"/></div></li>
       <li name="settings"><div><img src="../../../img/settings.png" alt="Configuraci&oacute;"/></div></li>
       <li name="printer"><div><img src="../../../img/printer.png" alt="Imprimir"/></div></li>
       <li name="favorites"><div><img src="../../../img/favorites.png" alt="Favorits"/></div></li>
       <li name="help_icon" class="help_icon"><div><img src="../../../img/help_icon.png" alt="Ajuda"/></div></li>
      </ul>
     </div>
   </aside>
   <div id="sidebar-hide" name="sidebar-hide"><img src="../../../img/arrows.png"/></div>
   <section>
     <div id="toc" class="hidden">
      <div class="menucontent">
        <ul>
        <li id="u1" class="parentnode"><p><a href="../../../WebContent/u1/resum.html">1. Llenguatges de guions de servidor</a></p><ul class="expander"><li id="u1resum"><a href="../../../WebContent/u1/resum.html">Resum</a></li><li id="u1resultats"><a href="../../../WebContent/u1/resultats.html">Resultats d'aprenentatge</a></li><li id="u1referencies"><a href="../../../WebContent/u1/referencies.html">Referències</a></li><li id="u1a1" class="tocsection"><p id="u1a1continguts"><a href="../../../WebContent/u1/a1/continguts.html">Instal·lació de servidors d'aplicacions web</a><span class="buttonexp"></span></p><ul><li id="u1a1activitats"><a href="../../../WebContent/u1/a1/activitats.html">Activitats</a></li><li id="u1a1exercicis"><a href="../../../WebContent/u1/a1/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><li id="u1a2" class="tocsection"><p id="u1a2continguts"><a href="../../../WebContent/u1/a2/continguts.html">Programació web de servidor</a><span class="buttonexp"></span></p><ul><li id="u1a2activitats"><a href="../../../WebContent/u1/a2/activitats.html">Activitats</a></li><li id="u1a2exercicis"><a href="../../../WebContent/u1/a2/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><li id="u1a3" class="tocsection"><p id="u1a3continguts"><a href="../../../WebContent/u1/a3/continguts.html">Accés a bases de dades des de PHP</a><span class="buttonexp"></span></p><ul><li id="u1a3activitats"><a href="../../../WebContent/u1/a3/activitats.html">Activitats</a></li><li id="u1a3exercicis"><a href="../../../WebContent/u1/a3/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li></ul></li><li id="" class="indexnode"><p><a href="../../../index.html">Anar a l&#39;&iacute;ndex general</a></p></li>
        </ul>
      </div>
    </div>
   </section>
   <section>
   <div id="settings" class="hidden">
    <div class="menucontent">
     <div class="allsettings">
     <div class="settings">
      <label>Font i Color</label>
		<div class="setting-option">
	        <ul class="fontBackground">
				<li id="style-newspaper" title="Newspaper" class="appearance-style-newspaper"><span>Newspaper</span></li>
                <li id="style-novel" title="Novel" class="appearance-style-novel"><span>Novel</span></li>
                <li id="style-ebook" title="eBook" class="appearance-style-ebook"><span>eBook</span></li>
				<li id="style-inverse" title="Inverse" class="appearance-style-inverse active"><span>Inverse</span></li>
				<li id="style-athelas" title="Athelas" class="appearance-style-athelas"><span>Athelas</span></li>
			</ul>
		</div>
     </div>
	<div class="settings">
      <label>Amplada</label>
		<div class="setting-option">
	        <div id="slider-width"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
		<div class="setting-option">
	        <div id="slider-font"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
	  <div class="setting-option">
       <form action="" class="sett-options">
		<ul>
		    <li><input type="checkbox" id="secondary-content" /><label for="secondary-content">Mostra recursos complementaris</label></li>
		    <li><input type="checkbox" id="main-images" /><label for="main-images">Mostra imatges</label></li>
		    <li><input type="checkbox" id="text-alignment" /><label for="text-alignment">Text justificat</label></li>
			<li><input type="checkbox" id="text-hyphen" /><label for="text-hyphen">Partici&oacute; sil·l&agrave;bica</label></li>
		</ul>
       </form>
	  </div>
     </div>
     </div>
    </div>
   </div>
   </section>
 <section>
 <div id="favorites" class="hidden"></div>
 </section>   
 <div id="bridge" class="hidden"></div>
 <div id="help" class="hidden">
  <div class="helptitle">Dreceres del teclat<hr></div>
  <div class="helpsection"><span>General</span>
   <ul>
    <li><span class="shortcut">g</span>: Anar al men&uacute; de navegaci&oacute;</li>
    <li><span class="shortcut">o</span>: Anar a opcions</li>
    <li><span class="shortcut">s</span>: Guardar la p&agrave;gina actual a favorits</li>
    <li><span class="shortcut">p</span>: Imprimir la p&agrave;gina actual</li>
    <li><span class="shortcut">?</span>: Mostrar/Ocultar l&#39;ajuda</li>
   </ul>
  </div>
  <div class="helpsection"><span>Navegaci&oacute;</span>
   <ul>
    <li><span class="shortcut">i</span>: Anar a l&#39;&iacute;ndex general</li>
    <li><span class="shortcut">t</span>: Anar a l&#39;inici de p&agrave;gina</li>
    <li><span class="shortcut">b</span>: Anar al final de p&agrave;gina</li>
    <li><span class="shortcut">j</span>: Anar cap endavant dintre la p&agrave;gina</li>
    <li><span class="shortcut">k</span>: Anar cap enrere dintre la p&agrave;gina</li>
    <li><span class="shortcut">h</span>: Anar a la p&agrave;gina anterior:</li>
    <li><span class="shortcut">l</span>: Anar a la p&agrave;gina seg&uuml;ent:</li>
   </ul>
   </div>
 </div>
 <div id="favcounter" name="favcounter" class="hidden"><span></span></div>
 <div id="navmenu" class="navmenu"><ul class="webnav"><li><a href="../../../index.html" title="Anar a l&#39;&iacute;ndex general">Inici</a></li><li><a href="../resum.html">Llenguatges de guions de servidor</a></li><li>Accés a bases de dades des de PHP</li></ul></div>
	<div id="content" lang="ca" class="hyphenate text">
     <article lang="ca" class="sheet">
        <h1><a id="acces_a_bases_de_dades_des_de_php"> Accés a bases de dades des de PHP </a></h1>
    	
<p>
El major benefici de treballar amb pàgines dinàmiques és que podeu agafar la informació que s’hi mostrarà d’una base de dades, en lloc d’haver de tenir-la dins del codi o a un fitxer extern. L’ús de MySQL amb PHP és molt popular en el desenvolupament d’aplicacions web. 
</p>

<h2><a id="gestors_de_bases_de_dades_mes_usats" >Gestors de bases de dades més usats</a></h2>
<div class="level2">

<p>
Existeixen diferents bases de dades al mercat que podeu fer servir per crear la vostra pàgina web amb bases de dades. És important conèixer-ne les més populars per tal de poder decidir en cada cas quina serà l’òptima per vosaltres. 
</p>
<ul>
<li class="level1"><div class="li"> MySQL: és una plataforma gratuïta i molt adequada per aprendre. És possiblement una de les bases de dades més ràpides que podem trobar, a més de consumir pocs recursos de la màquina on està instal·lada. Es tracta d’un sistema relativament fàcil d’instal·lar i administrar enfront d’altres productes del mercat. Es recomana per iniciar-se en el món de les bases de dades, ja que disposa de moltes utilitats, manuals i documentació que la immensa comunitat d’usuaris s’ha encarregat de realitzar desinteresadament. La gestió de la base de dades utilitza l’SQL (<em>Structured Query Language</em>), a més d’utilitzar protocols de comunicació de bases de dades desenvolupades per Microsoft, mitjançant ODBC o ADO. </div>
</li>
</ul>
<div class="iocnote"><div class="ioccontent">
<p>
ORDBMS (<em>Object-Relational Database Management System</em>, sistema de gestió de bases de dades objecte-relacionals) és un sistema gestor de bases de dades similar als relacionals, però amb un model de bases de dades objecte-relacionals amb objectes, classes i herència. 
</p>
</div></div><ul>
<li class="level1"><div class="li"> PostgreSQL: és un gestor de bases de dades usat principalment per grans organitzacions en aplicacions crítiques o importants. PostgreSQL és la segona base de dades més popular implantada en el mercat GNU/Linux. El PostgreSQL es va dissenyar com una base de dades orientada a objectes, és a dir, una ORDBMS, amb la qual el concepte de <em>taules</em> el substituïm per <em>objectes</em>, i es permet crear nous tipus de dades, fer herències entre objectes, etc. El PostgreSQL és, sens dubte, una de les bases de dades que ha aportat més implementacions per als experts. Disposa d’allò que al MySQL li falta, però també li falta tot allò que el MySQL té. El PostgreSQL té transaccions, integritat referencial, vistes i un gran nombre de funcionalitats, a canvi de convertir-se en un motor més lent i pesat que MySQL. </div>
</li>
<li class="level1"><div class="li"> Oracle: és un dels sistemes de gestió de bases de dades relacional més importants. Està disponible en una varietat de configuracions, des de petites versions personals fins a versions empresarials. </div>
</li>
<li class="level1"><div class="li"> Microsoft Access: és un sistema de pagament que permet fer un disseny de la base de dades mitjançant una eina gràfica. Té certes limitacions importants (com ara el número de connexions concurrents que pot tractar) i hi ha pocs sistemes operatius sobre els quals pot funcionar.</div>
</li>
<li class="level1"><div class="li"> Microsoft SQL Server: està dissenyat per crear webs i sistemes de bases de dades empresarials d’escriptori. Permet emmagatzemar grans quantitats d’informació comparat amb l’Access. </div>
</li>
</ul>

<p>
Farem servir MySQL perquè: és ideal per aplicacions petites, encara que al ser escalable també es pot fer servir per aplicacions grans; és molt ràpid, confiable i fàcil d’usar; fa servir SQL estàndard; compila una gran quantitat de plataformes; i, finalment, perquè és gratuit de descarregar i usar. 
</p>

</div>

<h2><a id="gestio_de_bases_de_dades_amb_phpmyadmin" >Gestió de bases de dades amb PHPMyAdmin</a></h2>
<div class="level2">

<p>
PHPMyAdmin és una eina lliure i gratuïta escrita en PHP que permet controlar l’administració de MySQL des d’un navegador web. Permet realitzar diferents tasques com ara crear, modificar o esborrar bases de dades, taules, camps o files… executant ordres SQL. 
</p>

<p>
Si s’hi accedeix amb un usuari que sigui administrador del MySQL, el phpMyAdmin permet gestionar totes les bases de dades existents del servidor. Altrament, només es mostren les bases de dades a les quals es té accés. 
Els usuaris administradors tenen accés a una base de dades anomenada <em>mysql</em> (base de dades de control) que serveix per configurar el motor de bases de dades. És molt important no tocar-la ni fer-hi canvis a no ser que es sàpiga perfectament el que s’està fent. En cas contrari, el MySQL podria deixar de funcionar o quedar inoperatiu. 
</p>

<p>
Per accedir-hi heu d’entrar des del navegador a l’adreça <code>http://localhost/phpmyadmin</code>.
</p>

<p>
Una vegada introduïdes les dades d’accés (nom i contrasenya) heu de veure una pantalla com la de la <span class="figref"><a href="#Figura 1"><span>figura<span class=refId> Figura 1</span></span></a></span>. 
</p>
<div class="iocfigure"><a name="Figura 1"></a>
<p>
<figure>
<figcaption><span class="figuretitle">Figura</span>

Pantalla inicial de PHPMyAdmin

</figcaption><img src="../media/001_u1a3.png" alt="" /></figure>

</p>
</div>
<p>
El phpMyAdmin divideix la finestra en dos marcs. El de l’esquerra ofereix un menú desplegable amb les bases de dades a les quals es té accés (si són més d’una) i les taules de la base de dades seleccionada. 
El marc de la dreta és el lloc en el qual es mostra la informació de la navegació. Inicialment mostra una pantalla de benvinguda amb diversos enllaços. 
</p>

<p>
En clicar al nom de les taules que es mostren en el marc de l’esquerra es pot veure’n l’estructura (els camps) en el marc de la dreta i apareix un menú horitzontal que permet accedir a les diverses funcionalitats de l’aplicació. 
</p>

<p>
Si seleccioneu una base de dades existent (per exemple <em>mysql</em>) veureu per defecte un llistat de totes les taules que existeixen en la base de dades, tal com podeu veure a la <span class="figref"><a href="#Figura 2"><span>figura<span class=refId> Figura 2</span></span></a></span>. 
</p>
<div class="iocfigure"><a name="Figura 2"></a>
<p>
<figure>
<figcaption><span class="figuretitle">Figura</span>

 Vista de base de dades

</figcaption><img src="../media/002_u1a3.png" alt="" /></figure>

</p>
</div>
<p>
Si feu clic a qualsevol de les taules, podreu veure l’estructura de la taula, examinar-ne el registres o inserir-ne un de nou. 
</p>

<p>
Fent clic a la pestanya SQL podeu inserir consultes directament fent servir sintaxi SQL. Això és molt útil quan esteu programant, ja que podeu comprovar si les consultes que esteu realitzant durant el programa són correctes o no. Simplement copieu el text de la consulta a la caixa i feu clic a <em>Continuar</em>. Podreu veure els registres resultants de la consulta que heu fet. 
</p>

<p>
Finalment, amb l’opció <em>Exportar</em> podeu extraure les dades de la base de dades a un fitxer de text pla que podreu importar posteriorment, amb l’opció <em>Importar</em>, a una base de dades MySQL. 
</p>

</div>

<h2><a id="connexio_amb_el_servidor_mysql" >Connexió amb el servidor MySQL</a></h2>
<div class="level2">

<p>
L’estructura per accedir a una base de dades és molt semblant al protocol per accedir a un fitxer:
</p>
<ol>
<li class="level1"><div class="li"> Obrir la base de dades. </div>
</li>
<li class="level1"><div class="li"> Trametre la comanda SQL a la base de dades. </div>
</li>
<li class="level1"><div class="li"> Retornar el resultat de la consulta. </div>
</li>
<li class="level1"><div class="li"> Tancar la connexió de la base de dades. </div>
</li>
</ol>

<p>
Abans de poder accedir a les dades en una base de dades, s’ha de crear una connexió amb la base de dades. En PHP per connectar amb la base de dades MySQL això es fa amb la funció <code>mysql_connect()</code>.
</p>
<pre class="code">recurs = mysql_connect(nom del servidor, nom d&#039;usuari, contrasenya, nou enllaç, senyals de client);</pre>

<p>
La funció  <code>mysql_connect()</code> retorna una connexió amb el servidor MySQL Server en cas d’èxit, o <code>FALSE</code> i un error en cas de fallada. Podeu amagar la sortida d’error mitjançant l’addició d’una <em>@</em> davant del nom de la funció.
</p>

<p>
Aquesta és la descripció dels paràmetres: 
</p>
<ul>
<li class="level1"><div class="li"> Nom del servidor: és opcional. Especifica el servidor MySQL al qual connectar. Pot incloure un número de port, per exemple <em>Servidor: port</em> o una ruta, per exemple, <em>:/camí/al/directori</em> per al <em>localhost</em>. Si la directiva de PHP <em>mysql.default_host no</em> està definida (per defecte), llavors el valor per defecte és <em>localhost: 3306</em>. En el mode SQL segur, aquest paràmetre s’ignora i <em>localhost: 3306</em> s’utilitza sempre.</div>
</li>
<li class="level1"><div class="li"> Nom d’usuari: és opcional. Especifica el nom d’usuari per iniciar la sessió. El valor per defecte és el nom de l’usuari propietari del procés del servidor que està definit per la directiva <em>mysql.default_user</em>. En el mode SQL segur, aquest paràmetre s’ignora i s’usa el nom de l’usuari propietari del procés del servidor.</div>
</li>
<li class="level1"><div class="li"> Contrasenya: és opcional.  Especifica la contrasenya per iniciar sessió. El valor per defecte és definit per la directiva <em>mysql.default_password</em>. En el mode SQL segur, aquest paràmetre no es té en compte i s’usa la contrasenya buida.</div>
</li>
<li class="level1"><div class="li"> Nou enllaç: és opcional. Si es fa una segona trucada a <code>mysql_connect()</code> amb els mateixos arguments, no s’estableix un nou enllaç, en el seu lloc, es retornarà l’identificador d’enllaç de l’enllaç ja obert . El paràmetre nou enllaç modifica aquest comportament i fa que <code>mysql_connect()</code> sempre obri un nou vincle, encara que s’hagi cridat a <code>mysql_connect()</code>, amb els mateixos paràmetres. En el mode SQL segur, aquest paràmetre s’ignora.</div>
</li>
<li class="level1"><div class="li"> Senyals de client: és opcional. El paràmetre senyals de client pot ser una combinació de les següents constants: 128 (habilita el control de LOAD DATA LOCAL), MYSQL_CLIENT_SSL, MYSQL_CLIENT_COMPRESS, MYSQL_CLIENT_IGNORE_SPACE o MYSQL_CLIENT_INTERACTIVE. En el mode SQL segur, aquest paràmetre s’ignora.</div>
</li>
</ul>

<p>
En el següent exemple s’emmagatzema la connexió en una variable ($connexio) per al seu ús posterior. Si la connexió falla s’executarà el codi de dins de l’<em>if</em> i el programa sortirà. 
</p>
<pre class="code php"><ol><li class="li1"><div class="de1"> <span class="kw2">&lt;?php</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$connexio</span> <span class="sy0">=</span> <a href="http://www.php.net/mysql_connect"><span class="kw3">mysql_connect</span></a><span class="br0">&#40;</span><span class="st0">&quot;localhost&quot;</span><span class="sy0">,</span> <span class="st0">&quot;admin&quot;</span><span class="sy0">,</span> <span class="st0">&quot;12345&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span><span class="re0">$connexio</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">        <a href="http://www.php.net/exit"><span class="kw3">exit</span></a><span class="br0">&#40;</span><span class="st_h">'No es pot connectar:'</span><span class="sy0">.</span> <a href="http://www.php.net/mysql_error"><span class="kw3">mysql_error</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="kw1">echo</span> <span class="st0">&quot;Connexió correcta!&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="sy1">?&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li></ol></pre>

<p>
La funció <code>exit()</code> mostra un missatge i surt de l’execució del codi. La funció <code>mysql_error()</code> retorna un text amb un missatge d’error de la darrera operació MySQL que s’ha executat. 
</p>

</div>

<h2><a id="tancar_la_connexio_a_la_base_de_dades" >Tancar la connexió a la base de dades</a></h2>
<div class="level2">

<p>
La funció de PHP <code>mysql_close()</code>, tanca una connexió MySQL. Aquesta funció retorna <code>TRUE</code> si té èxit, o <code>FALSE</code> en cas de fallada.
</p>

<p>
Té un únic argument opcional que és la connexió MySQL per tancar. Si no s’especifica, s’utilitza l’última connexió oberta per <code>mysql_connect()</code>.
</p>

<p>
L’ús de <code>mysql_close()</code> no és imprescindible, ja que les connexions no persistents són tancades automàticament al final de l’execució de l’script PHP.
</p>

<p>
Aquí teniu un exemple d’utilització: 
</p>
<pre class="code php"><ol><li class="li1"><div class="de1"> <span class="kw2">&lt;?php</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$connexio</span> <span class="sy0">=</span> <a href="http://www.php.net/mysql_connect"><span class="kw3">mysql_connect</span></a><span class="br0">&#40;</span><span class="st0">&quot;localhost&quot;</span><span class="sy0">,</span> <span class="st0">&quot;admin&quot;</span><span class="sy0">,</span> <span class="st0">&quot;12345&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span><span class="re0">$connexio</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">        <a href="http://www.php.net/exit"><span class="kw3">exit</span></a><span class="br0">&#40;</span><span class="st_h">'No es pot connectar:'</span><span class="sy0">.</span> <a href="http://www.php.net/mysql_error"><span class="kw3">mysql_error</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="kw1">echo</span> <span class="st0">&quot;Connexió correcta!&lt;br&gt;&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <a href="http://www.php.net/mysql_close"><span class="kw3">mysql_close</span></a><span class="br0">&#40;</span><span class="re0">$connexio</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="kw1">echo</span> <span class="st0">&quot;Connexió tancada&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="sy1">?&gt;</span></div></li></ol></pre>

</div>

<h2><a id="seleccio_de_la_base_de_dades" >Selecció de la base de dades</a></h2>
<div class="level2">

<p>
Abans de començar a treballar amb una base de dades del servidor, l’hem de seleccionar. Per fer-ho, existeix la funció <code>mysql_select_db($nom, $connexio)</code> que agafa dos arguments que especifiquen el nom de la base de dades que volem escollir, i la connexió al servidor que hem fet amb anterioritat, respectivament. La funció retorna <code>TRUE</code> en cas d’éxit, i <code>FALSE</code> en cas d’error. 
</p>

<p>
Aquí teniu un exemple d’utilització de la funció: 
</p>
<pre class="code php"><ol><li class="li1"><div class="de1"><span class="re0">$connexio</span> <span class="sy0">=</span> <a href="http://www.php.net/mysql_connect"><span class="kw3">mysql_connect</span></a><span class="br0">&#40;</span><span class="st0">&quot;localhost&quot;</span><span class="sy0">,</span> <span class="st0">&quot;usuari&quot;</span><span class="sy0">,</span> <span class="st0">&quot;12345&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span><span class="re0">$connexio</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">        <a href="http://www.php.net/exit"><span class="kw3">exit</span></a><span class="br0">&#40;</span><span class="st_h">'No es pot connectar:'</span><span class="sy0">.</span> <a href="http://www.php.net/mysql_error"><span class="kw3">mysql_error</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="kw1">if</span><span class="br0">&#40;</span><span class="sy0">!</span><a href="http://www.php.net/mysql_select_db"><span class="kw3">mysql_select_db</span></a><span class="br0">&#40;</span><span class="st0">&quot;taula_equips&quot;</span><span class="sy0">,</span> <span class="re0">$connexio</span><span class="br0">&#41;</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">  	 <a href="http://www.php.net/exit"><span class="kw3">exit</span></a><span class="br0">&#40;</span><span class="st0">&quot;Error al connectar amb la base de dades&quot;</span><span class="sy0">.</span> <a href="http://www.php.net/mysql_error"><span class="kw3">mysql_error</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>

</div>

<h2><a id="treball_amb_la_base_de_dades" >Treball amb la base de dades</a></h2>
<div class="level2">

<p>
Amb una base de dades es poden fer diverses operacions: consultar dades, inserir dades, actualitzar dades i esborrar dades.
</p>

<p>
Per aquestes operacions l’estructura del codi de programació és exactament igual. Sempre que es programa una connexió a una base de dades MySQL s’han de fer els passos següents:
</p>
<ol>
<li class="level1"><div class="li"> Connexió al servidor MySQL: per fer aquesta operació s’utilitza la funció <code>mysql_connect($servidor, $usuari, $contrasenya)</code>. La funció retorna un valor del tipus <em>resource</em> (recurs), que representa la connexió amb la base de dades.</div>
</li>
<li class="level1"><div class="li"> Selecció de la base de dades amb la qual es treballa: amb <code>mysql_select_db($nom_BD, $connexió)</code>. S’ha d’indicar el nom de la base de dades amb la qual es vol treballar i de la connexió amb el servidor.</div>
</li>
<li class="level1"><div class="li"> Fer la consulta/operació necessària amb la funció <code>mysql_query($consulta)</code>.</div>
</li>
<li class="level1"><div class="li"> Podeu comprovar quantes files ha retornat un <code>SELECT</code> o han estat inserides modificades. Per consultar quantes files ha retornat un consulta, podeu fer servir la funció <code>mysql_num_rows ($result)</code> que retorna el número de files que s’han seleccionat amb un <code>SELECT</code> o <code>SHOW</code>. Per consultar quantes files han estat inserides, modificades o esborrades amb <code>INSERT</code>, <code>UPDATE</code>, <code>REPLACE</code> o <code>DELETE</code>, podeu fer servir la funció <code>mysql_affected_rows()</code>.</div>
</li>
<li class="level1"><div class="li"> Si és una operació de consulta de dades (com un <code>SELECT</code>), falta llegir les dades que retorna la consulta SQL. Per fer-ho podeu fer servir la funció <code>mysql_fetch_array($result)</code> que retorna els valors en forma de matriu associativa en la qual les claus són les columnes de la taula. Retorna <code>FALSE</code> si no hi ha més files. </div>
</li>
</ol>

</div>

<h3><a id="insercio_d_informacio" >Inserció d&#039;informació</a></h3>
<div class="level3">

<p>
Per afegir registres a la base de dades heu de fer servir una consulta MySQL de tipus <code>INSERT</code> que té la següent estructura:
</p>
<pre class="code">INSERT INTO nom_taula [(columna1, columna2, ...)]
    VALUES (valor1, valor2,...);</pre>

<p>
Podeu consultar la sintaxi completa a:
</p>

<p>
<a href="http://dev.mysql.com/doc/refman/5.5/en/insert.html" class="urlextern" title="http://dev.mysql.com/doc/refman/5.5/en/insert.html"  rel="nofollow">http://dev.mysql.com/doc/refman/5.5/en/insert.html</a>
</p>

<p>
Per exemple:
</p>
<pre class="code sql"><ol><li class="li1"><div class="de1"> <span class="st0">&quot;INSERT INTO discos (titol, autor, any) VALUES ('Axis: Bold as love', 'The Jimi Hendrix Experience', '1967')&quot;</span>;</div></li></ol></pre>

<p>
El següent exemple mostra un codi sencer d’inserció de dades a una base de dades: 
</p>
<pre class="code php"><ol><li class="li1"><div class="de1"><span class="re0">$usuari</span> <span class="sy0">=</span> <span class="st0">&quot;admin&quot;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1"><span class="re0">$contrasenya</span> <span class="sy0">=</span> <span class="st0">&quot;admin&quot;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">// Connexió amb el servidor de base de dades i selecció de la base de dades </span></div></li><li class="li1"><div class="de1"><span class="re0">$connexio</span> <span class="sy0">=</span> <a href="http://www.php.net/mysql_connect"><span class="kw3">mysql_connect</span></a><span class="br0">&#40;</span><span class="st0">&quot;localhost&quot;</span><span class="sy0">,</span> <span class="re0">$usuari</span><span class="sy0">,</span> <span class="re0">$contrasenya</span><span class="br0">&#41;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span><span class="re0">$connexio</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">  <a href="http://www.php.net/exit"><span class="kw3">exit</span></a><span class="br0">&#40;</span><span class="st_h">'No es pot connectar:'</span><span class="sy0">.</span> <a href="http://www.php.net/mysql_error"><span class="kw3">mysql_error</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">&#40;</span><span class="sy0">!</span><a href="http://www.php.net/mysql_select_db"><span class="kw3">mysql_select_db</span></a><span class="br0">&#40;</span><span class="st0">&quot;llibreria&quot;</span><span class="sy0">,</span> <span class="re0">$connexio</span><span class="br0">&#41;</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">   <a href="http://www.php.net/exit"><span class="kw3">exit</span></a><span class="br0">&#40;</span><span class="st0">&quot;Error al connectar amb la base de dades&quot;</span><span class="sy0">.</span> <a href="http://www.php.net/mysql_error"><span class="kw3">mysql_error</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">//Com que no inserirem totes les dades (id és autoincremental) s'han d'especificar els camps </span></div></li><li class="li1"><div class="de1"><span class="re0">$consulta</span> <span class="sy0">=</span> <span class="st0">&quot;INSERT INTO llibres (titol, autor, any) VALUES ('Norwegian Wood', 'Haruki Murakami', '2000')&quot;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">// Fem la consulta al servidor i obtenim la resposta </span></div></li><li class="li1"><div class="de1"><span class="re0">$resultat</span> <span class="sy0">=</span> <a href="http://www.php.net/mysql_query"><span class="kw3">mysql_query</span></a><span class="br0">&#40;</span><span class="re0">$consulta</span><span class="sy0">,</span> <span class="re0">$connexio</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span><span class="re0">$resultat</span><span class="br0">&#41;</span> </div></li><li class="li1"><div class="de1"><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <span class="re0">$missatge</span>  <span class="sy0">=</span> <span class="st_h">'Query incorrecta: '</span> <span class="sy0">.</span> <a href="http://www.php.net/mysql_error"><span class="kw3">mysql_error</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">.</span> <span class="st0">&quot;<span class="es1">\n</span>&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="re0">$missatge</span> <span class="sy0">.=</span> <span class="st_h">'Query sencera: '</span> <span class="sy0">.</span> <span class="re0">$consulta</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <a href="http://www.php.net/exit"><span class="kw3">exit</span></a><span class="br0">&#40;</span><span class="re0">$missatge</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">&quot;Dades introduïdes correctament!!&quot;</span><span class="sy0">;</span></div></li></ol></pre>

<p>
Podeu comprovar posteriorment que s’han inserit les dades (amb una consulta MySQL o des de PHPMyAdmin, per exemple). 
</p>

<p>
La gràcia de les pàgines dinàmiques és que la informació que s’ha d’inserir a la base de dades no és estàtica, com en aquest exemple, sinó que són valors que introdueixen els usuaris. Aquesta tasca es fa mitjançant l’ús de formularis. La seqüència d’accions és la següent:
</p>
<ol>
<li class="level1"><div class="li"> L’usuari introdueix dades amb un formulari.</div>
</li>
<li class="level1"><div class="li"> Quan valida el formulari amb el botó, s’envien les dades utilitzant el mètode <em>POST</em> o <em>GET</em>. </div>
</li>
<li class="level1"><div class="li"> Rebudes les dades del formulari es fa la connexió a la base de dades i la inserció de les dades.</div>
</li>
</ol>

</div>

<h3><a id="consulta_d_informacio" >Consulta d&#039;informació</a></h3>
<div class="level3">

<p>
Per realitzar una consulta a la base de dades per obtenir informació, heu de fer servir una sentència <code>SELECT</code>, que té la següent forma:
</p>
<pre class="code sql"><ol><li class="li1"><div class="de1"><span class="kw1">SELECT</span></div></li><li class="li1"><div class="de1">    expressió </div></li><li class="li1"><div class="de1">    <span class="kw1">FROM</span> taula</div></li><li class="li1"><div class="de1">    <span class="kw1">WHERE</span> condició</div></li><li class="li1"><div class="de1">    <span class="br0">&#91;</span><span class="kw1">GROUP</span> <span class="kw1">BY</span> <span class="br0">&#123;</span>columna <span class="sy0">|</span> expressió <span class="sy0">|</span> posició<span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">      <span class="br0">&#91;</span><span class="kw1">ASC</span> <span class="sy0">|</span> <span class="kw1">DESC</span><span class="br0">&#93;</span><span class="br0">&#93;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#91;</span><span class="kw1">HAVING</span> condició<span class="br0">&#93;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#91;</span><span class="kw1">ORDER</span> <span class="kw1">BY</span> <span class="br0">&#123;</span>columna <span class="sy0">|</span> expressió <span class="sy0">|</span> posició<span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">      <span class="br0">&#91;</span><span class="kw1">ASC</span> <span class="sy0">|</span> <span class="kw1">DESC</span><span class="br0">&#93;</span><span class="br0">&#93;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#91;</span><span class="kw1">LIMIT</span> <span class="br0">&#123;</span><span class="br0">&#91;</span>desplaçament<span class="sy0">,</span><span class="br0">&#93;</span> num_files <span class="sy0">|</span> num_files OFFSET offset<span class="br0">&#125;</span><span class="br0">&#93;</span></div></li></ol></pre>

<p>
Podeu consultar la sintaxi completa a: 
</p>

<p>
<a href="http://dev.mysql.com/doc/refman/5.6/en/select.html" class="urlextern" title="http://dev.mysql.com/doc/refman/5.6/en/select.html"  rel="nofollow">http://dev.mysql.com/doc/refman/5.6/en/select.html</a>
</p>

<p>
Per exemple: 
</p>
<pre class="code sql"><ol><li class="li1"><div class="de1"><span class="kw1">SELECT</span> nom<span class="sy0">,</span> dni <span class="kw1">FROM</span> usuaris <span class="kw1">WHERE</span> uid<span class="sy0">=</span><span class="nu0">1</span></div></li></ol></pre>

<p>
Una vegada creada la consulta i emmagatzemada a una variable, podeu executar-la sobre la base de dades amb la funció <code>mysql_query($consulta, $connexio)</code>.
</p>

<p>
<a href="http://www.php.net/manual/en/function.mysql-query.php" class="urlextern" title="http://www.php.net/manual/en/function.mysql-query.php"  rel="nofollow">www.php.net/manual/en/function.mysql-query.php</a>
</p>

<p>
Aquesta funció:
</p>
<ul>
<li class="level1"><div class="li"> Per consultes del tipus <code>SELECT</code>, <code>SHOW</code>, <code>DESCRIBE</code>, <code>EXPLAIN</code> retorna una variable de tipus <code>resource</code> (recurs) en cas d’éxit i <code>FALSE</code> en cas d’error. </div>
</li>
<li class="level1"><div class="li"> Per consultes <code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code>, <code>DROP</code>, retorna <code>TRUE</code> en cas d’éxit i <code>FALSE</code> en cas d’error. </div>
</li>
</ul>

<p>
Una vegada heu fet la consulta <code>SELECT</code>, podeu esbrinar quantes files ha retornat la consulta amb la funció <code>int mysql_num_rows($result)</code> que retorna el número de files que ha retornat el <code>SELECT</code> o <code>FALSE</code> en cas d’error. 
</p>

<p>
Per obtenir les dades del resultat de la consulta feu servir la funció <code>array mysql_fetch_array ($resultat, $tipus)</code> que retorna un <em>array</em> associatiu que correspon a una fila del resultat de la consulta (i avança el punter que indica la fila a mostrar). 
</p>

<p>
L’argument <code>$tipus</code> indica el tipus de l’<em>array</em> associatiu que s’obté. És una constant que pot agafar els següents valors: MYSQL_ASSOC, MYSQL_NUM o MYSQL_BOTH (que és el valor per defecte). Si deixeu aquest paràmetre en blanc o seleccioneu MYSQL_BOTH obtindreu un <em>array</em> amb el qual podeu accedir als elements tant pel número de la columna, com pel seu nom.  
</p>

<p>
La funció va retornant les diferent files resultants del <code>SELECT</code> segons com és cridada, fins que arriba a l’última fila resultant, en la qual retorna <code>FALSE</code>. Per tant, per obtenir totes les dades de retorn d’un <code>SELECT</code>, heu de cridar a <code>mysql_fetch_array</code> dins d’un bucle fins que la funció us retorni <code>FALSE</code>. Per exemple: 
</p>
<pre class="code php"><ol><li class="li1"><div class="de1"><span class="re0">$result</span> <span class="sy0">=</span> <a href="http://www.php.net/mysql_query"><span class="kw3">mysql_query</span></a><span class="br0">&#40;</span><span class="st0">&quot;SELECT id, nom FROM taula&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">while</span> <span class="br0">&#40;</span><span class="re0">$fila</span> <span class="sy0">=</span> <a href="http://www.php.net/mysql_fetch_array"><span class="kw3">mysql_fetch_array</span></a><span class="br0">&#40;</span><span class="re0">$result</span><span class="sy0">,</span> MYSQL_BOTH<span class="br0">&#41;</span><span class="br0">&#41;</span> </div></li><li class="li1"><div class="de1"><span class="br0">&#123;</span>  </div></li><li class="li1"><div class="de1">    <a href="http://www.php.net/printf"><span class="kw3">printf</span></a><span class="br0">&#40;</span><span class="st0">&quot;ID: <span class="es6">%s</span>  Nom: <span class="es6">%s</span>&quot;</span><span class="sy0">,</span> <span class="re0">$fila</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$fila</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>  </div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="co1">//com fem servir MYSQL_BOTH, és igual a </span></div></li><li class="li1"><div class="de1">    <a href="http://www.php.net/printf"><span class="kw3">printf</span></a><span class="br0">&#40;</span><span class="st0">&quot;ID: <span class="es6">%s</span>  Nom: <span class="es6">%s</span>&quot;</span><span class="sy0">,</span> <span class="re0">$fila</span><span class="br0">&#91;</span><span class="st0">&quot;id&quot;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$fila</span><span class="br0">&#91;</span><span class="st0">&quot;nom&quot;</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>  </div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

<p>
En aquest altre exemple es mostren els continguts dins d’una taula. 
</p>
<pre class="code php"><ol><li class="li1"><div class="de1"><span class="co1">// Connexió amb el servidor de base de dades i selecció de la base de dades</span></div></li><li class="li1"><div class="de1"><span class="re0">$connexio</span> <span class="sy0">=</span> <a href="http://www.php.net/mysql_connect"><span class="kw3">mysql_connect</span></a><span class="br0">&#40;</span><span class="st0">&quot;localhost&quot;</span><span class="sy0">,</span> <span class="re0">$usuari</span><span class="sy0">,</span> <span class="re0">$contrasenya</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span><span class="re0">$connexio</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">  <a href="http://www.php.net/exit"><span class="kw3">exit</span></a><span class="br0">&#40;</span><span class="st_h">'No es pot connectar:'</span><span class="sy0">.</span> <a href="http://www.php.net/mysql_error"><span class="kw3">mysql_error</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">&#40;</span><span class="sy0">!</span><a href="http://www.php.net/mysql_select_db"><span class="kw3">mysql_select_db</span></a><span class="br0">&#40;</span><span class="st0">&quot;llibreria&quot;</span><span class="sy0">,</span> <span class="re0">$connexio</span><span class="br0">&#41;</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">   <a href="http://www.php.net/exit"><span class="kw3">exit</span></a><span class="br0">&#40;</span><span class="st0">&quot;Error al connectar amb la base de dades&quot;</span><span class="sy0">.</span> <a href="http://www.php.net/mysql_error"><span class="kw3">mysql_error</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">//Definim la consulta que recuperarà totes les dades de la taula llibres </span></div></li><li class="li1"><div class="de1"><span class="re0">$consulta</span><span class="sy0">=</span><span class="st0">&quot;SELECT * FROM llibres&quot;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">//Fem la consulta al servidor i obtenim la resposta </span></div></li><li class="li1"><div class="de1"><span class="re0">$resultat</span> <span class="sy0">=</span> <a href="http://www.php.net/mysql_query"><span class="kw3">mysql_query</span></a><span class="br0">&#40;</span> <span class="re0">$consulta</span><span class="sy0">,</span> <span class="re0">$connexio</span><span class="br0">&#41;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">//Si tenim resultats els mostrarem </span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">&#40;</span> <a href="http://www.php.net/mysql_num_rows"><span class="kw3">mysql_num_rows</span></a><span class="br0">&#40;</span><span class="re0">$resultat</span><span class="br0">&#41;</span> <span class="sy0">&gt;</span> <span class="nu0">0</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#123;</span> </div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="co1">//Creem una taula per posar els resultats </span></div></li><li class="li1"><div class="de1">  <span class="kw1">echo</span> <span class="st0">&quot;&lt;table border = '1'&gt;&quot;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">  <span class="kw1">echo</span> <span class="st0">&quot;&lt;tr&gt;&quot;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">  <span class="kw1">echo</span> <span class="st0">&quot;&lt;td&gt;id&lt;/td&gt;&quot;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">  <span class="kw1">echo</span> <span class="st0">&quot;&lt;td&gt;titol&lt;/td&gt;&quot;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">  <span class="kw1">echo</span> <span class="st0">&quot;&lt;td&gt;autor&lt;/td&gt;&quot;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">  <span class="kw1">echo</span> <span class="st0">&quot;&lt;td&gt;editorial&lt;/td&gt;&quot;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">  <span class="kw1">echo</span> <span class="st0">&quot;&lt;/tr&gt;&quot;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="co1">// Mentre hi hagi resultats els afegim a la taula </span></div></li><li class="li1"><div class="de1">  <span class="kw1">while</span><span class="br0">&#40;</span><span class="re0">$fila</span> <span class="sy0">=</span> <a href="http://www.php.net/mysql_fetch_array"><span class="kw3">mysql_fetch_array</span></a><span class="br0">&#40;</span><span class="re0">$resultat</span><span class="br0">&#41;</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#123;</span> </div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">     <span class="co1">//Hi afegim una filera i recuperem els valors utilitzant la matriu associativa que guardem a $fila a cada iteració </span></div></li><li class="li1"><div class="de1">     <span class="kw1">echo</span> <span class="st0">&quot;&lt;tr&gt;&quot;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">     <span class="kw1">echo</span> <span class="st0">&quot;&lt;td&gt;&quot;</span><span class="sy0">.</span><span class="re0">$fila</span><span class="br0">&#91;</span><span class="st_h">'id'</span><span class="br0">&#93;</span><span class="sy0">.</span><span class="st0">&quot;&lt;/td&gt;&quot;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">     <span class="kw1">echo</span> <span class="st0">&quot;&lt;td&gt;&quot;</span><span class="sy0">.</span><span class="re0">$fila</span><span class="br0">&#91;</span><span class="st_h">'titol'</span><span class="br0">&#93;</span><span class="sy0">.</span><span class="st0">&quot;&lt;/td&gt;&quot;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">     <span class="kw1">echo</span> <span class="st0">&quot;&lt;td&gt;&quot;</span><span class="sy0">.</span><span class="re0">$fila</span><span class="br0">&#91;</span><span class="st_h">'autor'</span><span class="br0">&#93;</span><span class="sy0">.</span><span class="st0">&quot;&lt;/td&gt;&quot;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">     <span class="kw1">echo</span> <span class="st0">&quot;&lt;td&gt;&quot;</span><span class="sy0">.</span><span class="re0">$fila</span><span class="br0">&#91;</span><span class="st_h">'editorial'</span><span class="br0">&#93;</span><span class="sy0">.</span><span class="st0">&quot;&lt;/td&gt;&quot;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">     <span class="kw1">echo</span> <span class="st0">&quot;&lt;/tr&gt;&quot;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span> </div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="co1">//fi de la taula </span></div></li><li class="li1"><div class="de1">  <span class="kw1">echo</span> <span class="st0">&quot;&lt;/table&gt;&quot;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span> </div></li><li class="li1"><div class="de1"><span class="kw1">else</span></div></li><li class="li1"><div class="de1"><span class="br0">&#123;</span> </div></li><li class="li1"><div class="de1">  <span class="kw1">echo</span> <span class="st0">&quot;No hi ha cap resultat&quot;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

</div>

<h3><a id="modificacio_d_informacio" >Modificació d&#039;informació</a></h3>
<div class="level3">

<p>
Per modificar la informació de la base de dades heu de fer servir la consulta <code>UPDATE</code> de MySQL que té la següent forma: 
</p>
<pre class="code sql"><ol><li class="li1"><div class="de1"><span class="kw1">UPDATE</span> taula</div></li><li class="li1"><div class="de1">    <span class="kw1">SET</span> nomColumna1<span class="sy0">=</span><span class="br0">&#123;</span>expressió<span class="nu0">1</span><span class="sy0">|</span><span class="kw1">DEFAULT</span><span class="br0">&#125;</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">        nomColumna2<span class="sy0">=</span><span class="br0">&#123;</span>expressió<span class="nu0">2</span><span class="sy0">|</span><span class="kw1">DEFAULT</span><span class="br0">&#125;</span><span class="sy0">...</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    <span class="kw1">WHERE</span> condició</div></li><li class="li1"><div class="de1">    <span class="br0">&#91;</span><span class="kw1">LIMIT</span> numero_files<span class="br0">&#93;</span></div></li></ol></pre>

<p>
Podeu veure’n la sintaxi completa a: 
</p>

<p>
<a href="http://dev.mysql.com/doc/refman/5.6/en/update.html" class="urlextern" title="http://dev.mysql.com/doc/refman/5.6/en/update.html"  rel="nofollow">http://dev.mysql.com/doc/refman/5.6/en/update.html</a>
</p>

<p>
Per exemple:
</p>
<pre class="code SQL"><ol><li class="li1"><div class="de1"><span class="kw1">UPDATE</span> taula <span class="kw1">SET</span> id<span class="sy0">=</span><span class="st0">'200'</span> <span class="kw1">WHERE</span> id<span class="sy0">=</span><span class="nu0">2</span></div></li></ol></pre>

<p>
o 
</p>
<pre class="code SQL"><ol><li class="li1"><div class="de1"><span class="kw1">UPDATE</span> taula1 <span class="kw1">SET</span> col1 <span class="sy0">=</span> col1 <span class="sy0">+</span> <span class="nu0">1</span><span class="sy0">,</span> col2 <span class="sy0">=</span> col1;</div></li></ol></pre>

<p>
No cal posar les cometes a la condició <code>WHERE</code>. 
</p>

<p>
La fareu servir mitjançant la funció <code>mysql_query($consulta)</code>. Posteriorment podeu fer servir la funció <code>mysql_affected_rows()</code> per obtenir la quantitat de files modificades amb la sentència. 
</p>

<p>
En el següent exemple es modifiquen les dades a una base de dades en funció dels valors enviats per un formulari <acronym title="HyperText Markup Language">HTML</acronym>. 
</p>
<pre class="code php"><ol><li class="li1"><div class="de1"><span class="co1">//Connexió amb la base de dades i selecció base dades llibreria</span></div></li><li class="li1"><div class="de1"><span class="re0">$enllac</span> <span class="sy0">=</span> connexioBaseDades<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span> <a href="http://www.php.net/isset"><span class="kw3">isset</span></a><span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'actualitza'</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <span class="co1">//L'usuari ha decidit enviar al servidor les noves dades actualitzades</span></div></li><li class="li1"><div class="de1">      <span class="re0">$consulta</span> <span class="sy0">=</span> <span class="st0">&quot;UPDATE llibres SET titol='&quot;</span><span class="sy0">.</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'titol'</span><span class="br0">&#93;</span><span class="sy0">.</span><span class="st0">&quot;', autor='&quot;</span> <span class="sy0">.</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'autor'</span><span class="br0">&#93;</span><span class="sy0">.</span> <span class="st0">&quot;', editorial='&quot;</span><span class="sy0">.</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'editorial'</span><span class="br0">&#93;</span><span class="sy0">.</span><span class="st0">&quot;' WHERE id=&quot;</span><span class="sy0">.</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'id'</span><span class="br0">&#93;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      <span class="re0">$resultat</span> <span class="sy0">=</span> <a href="http://www.php.net/mysql_query"><span class="kw3">mysql_query</span></a><span class="br0">&#40;</span> <span class="re0">$consulta</span><span class="sy0">,</span> <span class="re0">$enllac</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      <span class="re0">$err</span> <span class="sy0">=</span> <a href="http://www.php.net/mysql_error"><span class="kw3">mysql_error</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">      <span class="kw1">if</span><span class="br0">&#40;</span> <span class="re0">$err</span> <span class="sy0">!=</span> <span class="st0">&quot;&quot;</span> <span class="br0">&#41;</span> </div></li><li class="li1"><div class="de1">        <span class="kw1">echo</span> <span class="st0">&quot;error=<span class="es4">$err</span> &lt;br&gt;&quot;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      <a href="http://www.php.net/printf"><span class="kw3">printf</span></a><span class="br0">&#40;</span><span class="st0">&quot;Registres modificats: <span class="es6">%d</span><span class="es1">\n</span>&quot;</span><span class="sy0">,</span> <a href="http://www.php.net/mysql_affected_rows"><span class="kw3">mysql_affected_rows</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li></ol></pre>

</div>

<h3><a id="esborrar_registres" >Esborrar registres</a></h3>
<div class="level3">

<p>
Per esborrar registres d’una taula heu de fer servir una consulta <code>DELETE</code> que té la següent forma: 
</p>
<pre class="code sql"><ol><li class="li1"><div class="de1"><span class="kw1">DELETE</span> <span class="kw1">FROM</span> taula</div></li><li class="li1"><div class="de1">    <span class="br0">&#91;</span><span class="kw1">WHERE</span> condició<span class="br0">&#93;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#91;</span><span class="kw1">ORDER</span> <span class="kw1">BY</span> <span class="sy0">...</span><span class="br0">&#93;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#91;</span><span class="kw1">LIMIT</span> numero_files<span class="br0">&#93;</span></div></li></ol></pre>

<p>
Podeu trobar-ne la sintaxi sencera a: 
</p>

<p>
<a href="http://dev.mysql.com/doc/refman/5.6/en/delete.html" class="urlextern" title="http://dev.mysql.com/doc/refman/5.6/en/delete.html"  rel="nofollow">http://dev.mysql.com/doc/refman/5.6/en/delete.html</a>
</p>

<p>
Per exemple: 
</p>
<pre class="code sql"><ol><li class="li1"><div class="de1"><span class="kw1">DELETE</span> <span class="kw1">FROM</span> taula <span class="kw1">WHERE</span> id <span class="sy0">&lt;</span> <span class="nu0">10</span></div></li></ol></pre>

<p>
La fareu servir mitjançant la funció <code>mysql_query($consulta)</code>. Posteriorment podeu fer servir la funció <code>mysql_affected_rows()</code> per obtenir la quantitat de files modificades amb la sentència. 
</p>

<p>
Al següent exemple s’esborra un element especificat per un formulari <acronym title="HyperText Markup Language">HTML</acronym> de la taula <em>llibres</em>:
</p>
<pre class="code php"><ol><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">&#40;</span> <a href="http://www.php.net/isset"><span class="kw3">isset</span></a><span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'id'</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <span class="co1">//Definim la consulta que esborra el registre seleccionat</span></div></li><li class="li1"><div class="de1">	<span class="re0">$consulta</span><span class="sy0">=</span><span class="st0">&quot;DELETE FROM llibres WHERE id =&quot;</span><span class="sy0">.</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st_h">'id'</span><span class="br0">&#93;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">	<span class="co1">//Fem la consulta al servidor i obtenim la resposta</span></div></li><li class="li1"><div class="de1">	<span class="re0">$resultat</span> <span class="sy0">=</span> <a href="http://www.php.net/mysql_query"><span class="kw3">mysql_query</span></a><span class="br0">&#40;</span><span class="re0">$consulta</span><span class="sy0">,</span> <span class="re0">$connexio</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"> <span class="co1">//Mireu una forma alternativa de veure si hi ha hagut un error</span></div></li><li class="li1"><div class="de1"> <span class="re0">$err</span> <span class="sy0">=</span> <a href="http://www.php.net/mysql_error"><span class="kw3">mysql_error</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">      <span class="kw1">if</span><span class="br0">&#40;</span> <span class="re0">$err</span> <span class="sy0">!=</span> <span class="st0">&quot;&quot;</span> <span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">        <span class="kw1">echo</span> <span class="st0">&quot;error=<span class="es4">$err</span> &lt;br&gt;&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      <a href="http://www.php.net/printf"><span class="kw3">printf</span></a><span class="br0">&#40;</span><span class="st0">&quot;Registres esborrats: <span class="es6">%d</span><span class="es1">\n</span>&quot;</span><span class="sy0">,</span> <a href="http://www.php.net/mysql_affected_rows"><span class="kw3">mysql_affected_rows</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"> <span class="br0">&#125;</span></div></li></ol></pre>

</div>

<h3><a id="gestio_d_errors" >Gestió d&#039;errors</a></h3>
<div class="level3">

<p>
La funció <code>mysql_error($connexio)</code> retorna un text amb la descripció de l’error de l’última funció MySQL que s’ha executat. Per tant, l’heu d’executar justament després de la funció de la qual voleu saber l’error. 
</p>

<p>
En el cas de que no hi hagi cap error, retorna una cadena buida (””).
</p>

<p>
El paràmetre connexió és opcional. Especifica la connexió MySQL. Si no s’especifica, s’utilitza l’última connexió oberta per <code>mysql_connect()</code>.
</p>

<p>
La funció <code>mysql_errno</code> retorna el número d’error de la sentència SQL anterior. 
</p>

<p>
En aquest exemple podeu veure com tractar una sèrie d’errors treballant amb bases de dades:
</p>
<pre class="code php"><ol><li class="li1"><div class="de1"><span class="kw2">&lt;?php</span></div></li><li class="li1"><div class="de1"><span class="re0">$connexio</span> <span class="sy0">=</span> <a href="http://www.php.net/mysql_connect"><span class="kw3">mysql_connect</span></a><span class="br0">&#40;</span><span class="st0">&quot;localhost&quot;</span><span class="sy0">,</span> <span class="st0">&quot;usuari&quot;</span><span class="sy0">,</span> <span class="st0">&quot;contrasenya&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><a href="http://www.php.net/mysql_select_db"><span class="kw3">mysql_select_db</span></a><span class="br0">&#40;</span><span class="st0">&quot;bd_inexistent&quot;</span><span class="sy0">,</span> <span class="re0">$connexio</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <a href="http://www.php.net/mysql_errno"><span class="kw3">mysql_errno</span></a><span class="br0">&#40;</span><span class="re0">$connexio</span><span class="br0">&#41;</span> <span class="sy0">.</span> <span class="st0">&quot;: &quot;</span> <span class="sy0">.</span> <a href="http://www.php.net/mysql_error"><span class="kw3">mysql_error</span></a><span class="br0">&#40;</span><span class="re0">$connexio</span><span class="br0">&#41;</span><span class="sy0">.</span> <span class="st0">&quot;<span class="es1">\n</span>&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><a href="http://www.php.net/mysql_select_db"><span class="kw3">mysql_select_db</span></a><span class="br0">&#40;</span><span class="st0">&quot;coses&quot;</span><span class="sy0">,</span> <span class="re0">$connexio</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><a href="http://www.php.net/mysql_query"><span class="kw3">mysql_query</span></a><span class="br0">&#40;</span><span class="st0">&quot;SELECT * FROM bd_inexistent&quot;</span><span class="sy0">,</span> <span class="re0">$connexio</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <a href="http://www.php.net/mysql_errno"><span class="kw3">mysql_errno</span></a><span class="br0">&#40;</span><span class="re0">$connexio</span><span class="br0">&#41;</span> <span class="sy0">.</span> <span class="st0">&quot;: &quot;</span> <span class="sy0">.</span> <a href="http://www.php.net/mysql_error"><span class="kw3">mysql_error</span></a><span class="br0">&#40;</span><span class="re0">$connexio</span><span class="br0">&#41;</span> <span class="sy0">.</span> <span class="st0">&quot;<span class="es1">\n</span>&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="sy1">?&gt;</span></div></li></ol></pre>

</div>

<h2><a id="creacio_d_una_base_de_dades" >Creació d&#039;una base de dades</a></h2>
<div class="level2">

<p>
Hi ha diverses formes de crear una base de dades. Generalment la creaureu amb una eina com pot ser PHPMyAdmin, encara que ho podeu fer també des del codi. 
</p>

<p>
Per crear una base de dades a MySQL es fa servir la  sentència:
</p>
<pre class="code">mysql&gt; CREATE DATABASE Nom_base_de_dades;</pre>

<p>
En ambients Unix, els noms de les bases de dades són <em>case sensitive</em> (al contrari que les paraules clau), de manera que sempre s’ha de referir a la base de dades exactament igual (i no nom_base_de_dades o NOM_BASE_DE_DADES). Això també s’aplica als noms de taules. Aquesta restricció no existeix a Windows, encara que pot utilitzar el mateix esquema de majúscules quan es refereixi a bases de dades i taules en una consulta donada.
</p>

<p>
La comanda  <code>mysql_query()</code> de PHP envia una sentència a la base de dades. Per tant podeu fer-la servir per crear una base de dades al servidor:
</p>
<pre class="code php"><ol><li class="li1"><div class="de1"><span class="kw2">&lt;?php</span></div></li><li class="li1"><div class="de1"><span class="re0">$sql</span> <span class="sy0">=</span> <span class="st_h">'CREATE DATABASE LaMevaBD'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">//$con conté la connexió a la BD</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span><a href="http://www.php.net/mysql_query"><span class="kw3">mysql_query</span></a><span class="br0">&#40;</span><span class="re0">$sql</span><span class="sy0">,</span> <span class="re0">$con</span><span class="br0">&#41;</span><span class="br0">&#41;</span> </div></li><li class="li1"><div class="de1"><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">echo</span> <span class="st0">&quot;S'ha creat la Base de dades LaMevaBD<span class="es1">\n</span>&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">echo</span> <span class="st_h">'Error al crear la base de dades: '</span> <span class="sy0">.</span> <a href="http://www.php.net/mysql_error"><span class="kw3">mysql_error</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">.</span> <span class="st0">&quot;<span class="es1">\n</span>&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="sy1">?&gt;</span></div></li></ol></pre>

<p>
En crear una base de dades, aquesta no es selecciona per al seu ús automàticament, s’ha de fer explícitament. La sintaxi per fer-ho a MySQL és
</p>
<pre class="code">mysql&gt; USE Nom_base_de_dades</pre>

<p>
Les bases de dades només necessiten ser creades un sol cop, però han de ser seleccionades cada vegada que s’inicia una sessió de MySQL. Es pot fer a través de la comanda <strong>USE</strong> com es mostra a l’exemple. Quan accediu al MySQL des de consola ho podeu indicar en la línia de comandes en executar MySQL. Simplement s’ha d’indicar el nom de la base de dades a continuació dels paràmetres que necessiteu per ingressar. Per exemple:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">shell<span class="sy0">&gt;</span> mysql <span class="re5">-h</span> host <span class="re5">-o</span> user <span class="re5">-p</span> LaMevaBD</div></li></ol></pre>

<p>
Advertiu que en la comanda anterior LaMevaBD no és la contrasenya. Si es volgués subministrar la contrasenya en la línia de comandes, després de l’opció-p, s’ha de fer sense deixar espais en blanc (per exemple,-pcontrasenya , no -p contrasenya). De tota manera, escriure la contrasenya en la línia de comandes no és recomanable perquè ho exposa a la vista d’altres usuaris.
</p>

<p>
Per eliminar una base de dades a PHP, igual que per  la creació d’una base de dades, utilitzareu la comanda  <code>mysql_query()</code>  per executar la instrucció <code>DROP DATABASE</code>, tal com es pot veure en el següent exemple:
</p>
<pre class="code php"><ol><li class="li1"><div class="de1"><span class="kw2">&lt;?php</span></div></li><li class="li1"><div class="de1">  <span class="re0">$query</span>  <span class="sy0">=</span> <span class="st_h">'DROP DATABASE LaMevaBD'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">  <span class="re0">$result</span> <span class="sy0">=</span> <a href="http://www.php.net/mysql_query"><span class="kw3">mysql_query</span></a><span class="br0">&#40;</span><span class="re0">$query</span><span class="sy0">,</span><span class="re0">$con</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="sy1">?&gt;</span></div></li></ol></pre>

<p>
Podeu veure el contingut de les taules amb l’ordre de MySQL <code>SHOW TABLES</code> directament sobre MySQL:
</p>
<pre class="code">mysql&gt; SHOW TABLES;
Empty setembre (0.00 sec)</pre>

<p>
En un principi la base de dades recent creada està buida. 
</p>

</div>

<h3><a id="creacio_de_taules" >Creació de taules</a></h3>
<div class="level3">

<p>
A MySQL podeu emprar la sentència <code>CREATE TABLE</code> per especificar l’estructura d’una taula:
</p>
<pre class="code">CREATE TABLE nom_taula
(
  nom_columna1 tipus_dades,
  nom_columna2 tipus_dades,
  nom_columna3 tipus_dades,
) </pre>

<p>
Sempre que voleu executar ordres al MySQL podeu fer servir la funció de PHP <code>mysql_query()</code>. En aquest cas s’ha d’executar la instrucció de MySQL <code>CREATE TABLE</code>, com es pot veure en el següent exemple:
</p>
<pre class="code php"><ol><li class="li1"><div class="de1"><span class="kw2">&lt;?php</span></div></li><li class="li1"><div class="de1">  <span class="co1">// Seleccionareu la Base de Dades</span></div></li><li class="li1"><div class="de1">	<a href="http://www.php.net/mysql_select_db"><span class="kw3">mysql_select_db</span></a><span class="br0">&#40;</span><span class="st0">&quot;LaMevaBD&quot;</span><span class="sy0">,</span> <span class="re0">$con</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">	<span class="re0">$sql</span> <span class="sy0">=</span> <span class="st0">&quot;CREATE TABLE nom_taula</span></div></li><li class="li1"><div class="de1"><span class="st0">		(</span></div></li><li class="li1"><div class="de1"><span class="st0">			  nom varchar(15),</span></div></li><li class="li1"><div class="de1"><span class="st0">        cognom varchar(15),</span></div></li><li class="li1"><div class="de1"><span class="st0">        anys int</span></div></li><li class="li1"><div class="de1"><span class="st0">		)&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">	<span class="co1">// Executareu la consulta</span></div></li><li class="li1"><div class="de1">	<a href="http://www.php.net/mysql_query"><span class="kw3">mysql_query</span></a><span class="br0">&#40;</span><span class="re0">$sql</span><span class="sy0">,</span><span class="re0">$con</span><span class="br0">&#41;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1"><span class="sy1">?&gt;</span></div></li></ol></pre>

<p>
Després de crear la taula, des de MySQL amb la comanda <code>SHOW TABLES</code> s’hauria de produir la següent sortida:
</p>
<pre class="code">mysql&gt; SHOW TABLES;
+ ---------------------+
| Tables in LaMevaBD   |
+ ---------------------+
| nom_taula            |
+ ---------------------+
</pre>

<p>
Per verificar que la taula ha estat creada en la forma esperada, utilitzeu la sentència <code>DESCRIBE</code> a MySQL:
</p>
<pre class="code">
mysql&gt; DESCRIBE nom_taula;
+ ----- + ----- + ---- + --- + ------- + ----- +
| Field | Type  | Null | Key | Default | Extra |
+ ----- + ----- + ---- + --- + ------- + ----- +
| col1  | tipus | ca   |     | NULL    |       |
| col2  | tipus | ca   |     | NULL    |       |
| col3  | tipus | ca   |     | NULL    |       |
+ ----- + ----- + ---- + --- + ------- + ----- +
</pre>

<p>
La sentència <code>DESCRIBE</code> pot ser utilitzada en qualsevol moment, per exemple, si oblideu els noms o el tipus de dades de les columnes de la taula.
</p>

<p>
Per acabar veureu un exemple on es crea la base de dades <em>Alumnes_IOC</em> i s’afegeix una taula <em>alumnes</em> amb tres columnes <em>nom</em>, <em>cognom</em> i <em>anys</em>.
</p>
<pre class="code php"><ol><li class="li1"><div class="de1"><span class="kw2">&lt;?php</span></div></li><li class="li1"><div class="de1"><span class="re0">$dbhost</span> <span class="sy0">=</span> <span class="st_h">'localhost'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$dbusuari</span> <span class="sy0">=</span> <span class="st_h">'root'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$dbcon</span> <span class="sy0">=</span> <span class="st_h">'contrasenya'</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1"><span class="re0">$con</span> <span class="sy0">=</span><a href="http://www.php.net/mysql_connect"><span class="kw3">mysql_connect</span></a><span class="br0">&#40;</span><span class="re0">$dbhost</span><span class="sy0">,</span> <span class="re0">$dbusuari</span><span class="sy0">,</span><span class="re0">$dbcon</span><span class="br0">&#41;</span><span class="sy0">;</span> </div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span><span class="re0">$con</span><span class="br0">&#41;</span> </div></li><li class="li1"><div class="de1"><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <a href="http://www.php.net/exit"><span class="kw3">exit</span></a><span class="br0">&#40;</span><span class="st_h">'Error al connectar amb  la  base de dades de mysql: '</span> <span class="sy0">.</span> <a href="http://www.php.net/mysql_error"><span class="kw3">mysql_error</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="re0">$sql</span> <span class="sy0">=</span> <span class="st_h">'CREATE DATABASE Alumnes_IOC'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span><a href="http://www.php.net/mysql_query"><span class="kw3">mysql_query</span></a><span class="br0">&#40;</span><span class="re0">$sql</span><span class="sy0">,</span> <span class="re0">$con</span><span class="br0">&#41;</span><span class="br0">&#41;</span> </div></li><li class="li1"><div class="de1"><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">echo</span> <span class="st0">&quot;S'ha creat la Base de dades Alumnes_IOC<span class="es1">\n</span>&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span> </div></li><li class="li1"><div class="de1"><span class="kw1">else</span> </div></li><li class="li1"><div class="de1"><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">echo</span> <span class="st_h">'Error al crear la base de dades: '</span> <span class="sy0">.</span> <a href="http://www.php.net/mysql_error"><span class="kw3">mysql_error</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">.</span> <span class="st0">&quot;<span class="es1">\n</span>&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">// Seleccionareu la Base de Dades</span></div></li><li class="li1"><div class="de1"><a href="http://www.php.net/mysql_select_db"><span class="kw3">mysql_select_db</span></a><span class="br0">&#40;</span>“Base_de_Dades”<span class="sy0">,</span> <span class="re0">$con</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$sql</span> <span class="sy0">=</span> <span class="st0">&quot;CREATE TABLE alumnes</span></div></li><li class="li1"><div class="de1"><span class="st0">	(</span></div></li><li class="li1"><div class="de1"><span class="st0">		nom varchar(15),</span></div></li><li class="li1"><div class="de1"><span class="st0">		cognom varchar(15),</span></div></li><li class="li1"><div class="de1"><span class="st0">		anys int </span></div></li><li class="li1"><div class="de1"><span class="st0">	) “;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="st0">// Executareu la consulta</span></div></li><li class="li1"><div class="de1"><span class="st0">mysql_query(<span class="es4">$sql</span>,<span class="es4">$con</span>); </span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="st0">// Tancareu la connexió</span></div></li><li class="li1"><div class="de1"><span class="st0">mysql_close(<span class="es4">$con</span>);</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="st0">?&gt;</span></div></li></ol></pre>

</div>

<h2><a id="mecanismes_de_seguretat" >Mecanismes de seguretat</a></h2>
<div class="level2">

<p>
La seguretat és un tema complex que requereix una planificació a tots els nivells en què s’està treballant la pàgina web i la base de dades. Per una banda fareu servir contrasenyes que el més adequat és que guardeu de forma encriptada a la base de dades. 
</p>

<p>
Els usuaris únicament han de poder accedir a les pàgines del web a les quals tenen permisos. Per exemple, un usuari alumne de l’IOC no té accés a l’edició de l’aula. 
</p>

<p>
Per altra banda, els usuaris de la base de dades, han de tenir únicament la capacitat d’accedir a les dades estrictament necessàries. Els usuaris dins de la base de dades també tenen un accés limitat a ella. 
</p>

</div>

<h3><a id="codificacio_de_la_informacio" >Codificació de la informació</a></h3>
<div class="level3">

<p>
Podeu fer servir l’algorisme MD5 per codificar les dades confidencials dins de la base de dades. Podeu trobar-ne l’especificació aquí: 
</p>

<p>
<a href="http://www.faqs.org/rfcs/rfc1321.html" class="urlextern" title="http://www.faqs.org/rfcs/rfc1321.html"  rel="nofollow">www.faqs.org/rfcs/rfc1321.html</a>
</p>

<p>
Afortunadament MD5 està implementat directament a PHP, per això podeu calcular l’MD5 d’una cadena simplement cridant a una funció. 
</p>

<p>
La funció <code>string md5 ($cadena)</code> encripta la cadena fent servir l’algorisme MD5 i la retorna en forma de número hexadecimal de 32 caràcters. 
</p>

<p>
L’ús de l’algorisme SHA1 o MD5 no és estrictament segur per emmagatzemar les dades, tal com podeu veure a aquest article de PHP.net (<a href="http://www.php.net/manual/en/faq.passwords.php#faq.passwords.fasthash" class="urlextern" title="http://www.php.net/manual/en/faq.passwords.php#faq.passwords.fasthash"  rel="nofollow">www.php.net/manual/en/faq.passwords.php#faq.passwords.fasthash</a>), però per fer les nostres proves tindrà una seguretat suficient i servirà per aprendre a treballar amb claus encriptades. 
</p>

<p>
El següent és un exemple molt senzill en el qual es veu el funcionament de la funció: 
</p>
<pre class="code php"><ol><li class="li1"><div class="de1"><span class="kw2">&lt;?php</span></div></li><li class="li1"><div class="de1"><span class="re0">$str</span> <span class="sy0">=</span> <span class="st_h">'apple'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span><a href="http://www.php.net/md5"><span class="kw3">md5</span></a><span class="br0">&#40;</span><span class="re0">$str</span><span class="br0">&#41;</span> <span class="sy0">===</span> <span class="st_h">'1f3870be274f6c49b3e31a0c6728957f'</span><span class="br0">&#41;</span> </div></li><li class="li1"><div class="de1"><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <span class="kw1">echo</span> <span class="st0">&quot;Tens un ordinador Apple&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="sy1">?&gt;</span></div></li></ol></pre>

<p>
En el següent exemple es veu com crear una consulta on es comprova si el valor de nom i contrasenya obtingut d’un formulari està a la base de dades: 
</p>
<pre class="code php"><ol><li class="li1"><div class="de1"><span class="re0">$consulta</span> <span class="sy0">=</span> <a href="http://www.php.net/sprintf"><span class="kw3">sprintf</span></a><span class="br0">&#40;</span><span class="st_h">'select * from usuaris where nom=&quot;%s&quot; and passwd = &quot;%s&quot;'</span><span class="sy0">,</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st0">&quot;nom&quot;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st0">&quot;passwd&quot;</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>

<p>
En el cas que les claus estiguessin encriptades a la base de dades, es podria crear la consulta així: 
</p>
<pre class="code php"><ol><li class="li1"><div class="de1"><span class="re0">$consulta</span> <span class="sy0">=</span> <a href="http://www.php.net/sprintf"><span class="kw3">sprintf</span></a><span class="br0">&#40;</span><span class="st_h">'select * from usuaris where nom=&quot;%s&quot; and passwd = &quot;%s&quot;'</span><span class="sy0">,</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st0">&quot;nom&quot;</span><span class="br0">&#93;</span><span class="sy0">,</span> <a href="http://www.php.net/md5"><span class="kw3">md5</span></a><span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st0">&quot;passwd&quot;</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>

<p>
La funció <code>sprintf()</code> de PHP funciona de forma semblant a la versió de C. És com un <code>printf</code>, però en lloc mostra el resultat per pantalla, el retorna a un string. Us pot resultar molt útil per crear consultes. Podeu veure aquí l’especificació completa de la funció: 
</p>

<p>
<a href="http://www.php.net/manual/en/function.sprintf.php" class="urlextern" title="http://www.php.net/manual/en/function.sprintf.php"  rel="nofollow">www.php.net/manual/en/function.sprintf.php</a>
</p>

<p>
En aquest cas, recordeu que quan creeu un usuari, la seva clau també haurà d’estar encriptada. Per exemple
</p>
<pre class="code php"><ol><li class="li1"><div class="de1"><span class="re0">$consulta</span> <span class="sy0">=</span> <a href="http://www.php.net/sprintf"><span class="kw3">sprintf</span></a><span class="br0">&#40;</span><span class="st_h">'INSERT into usuaris (nom, passwd, administrador) VALUES (&quot;%s&quot;,&quot;%s&quot;,&quot;%s&quot;)'</span><span class="sy0">,</span> <span class="re0">$_REQUEST</span><span class="br0">&#91;</span><span class="st0">&quot;nom&quot;</span><span class="br0">&#93;</span><span class="sy0">,</span> <a href="http://www.php.net/md5"><span class="kw3">md5</span></a><span class="br0">&#40;</span><span class="re0">$_REQUEST</span><span class="br0">&#91;</span><span class="st0">&quot;passwd&quot;</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="re0">$_REQUEST</span><span class="br0">&#91;</span><span class="st0">&quot;administrador&quot;</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>

</div>

<h3><a id="acces_restringit_a_pagines" >Accés restringit a pàgines</a></h3>
<div class="level3">

<p>
Una característica molt habitual dels webs actualment és la de presentar diferents continguts del web depenent de quin sigui el perfil de l’usuari. També hi ha certes pàgines que poden estar protegides per tal d’impedir l’accés als usuaris que no tenen els privilegis necessaris. 
</p>

<p>
Per exemple, un usuari que no està registrat a <a href="http://www.amazon.com" class="urlextern" title="http://www.amazon.com"  rel="nofollow">www.amazon.com</a> pot navegar i veure els productes que estan a la venda. Però no podrà realitzar compres a no ser que estigui registrat, i que hagi iniciat una sessió. D’igual manera, un usuari registrat no podrà accedir a les pàgines d’administració del web si no té els permisos necessaris. 
</p>

<p>
Per implementar aquests permisos d’accés podeu fer servir sessions o emmagatzemar a la base de dades l’estructura de pàgines del web i quins usuaris hi tenen accés. 
</p>

</div>

<h3><a id="seguretat_a_la_base_de_dades" >Seguretat a la base de dades</a></h3>
<div class="level3">

<p>
Les llistes de control d’accés (<acronym title="Access Control List">ACL</acronym> en anglès <em>Access Control List</em>) són el mecanisme de seguretat que utilitza MySQL per a totes les connexions i consultes que els usuaris poden intentar realitzar.
Una llista de control d’accés controla si un usuari té permisos per accedir a un objecte. Les sentències <code>GRANT</code> i <code>REVOKE</code> s’utilitzen per controlar l’accés dels usuaris a MySQL. Els permisos poden donar-se en diversos nivells:
</p>
<ul>
<li class="level1"><div class="li"> Nivell global: els permisos globals s’apliquen a totes les bases de dades d’un servidor donat. Es guarden a la taula <em>mysql.user</em>. </div>
</li>
<li class="level1"><div class="li"> Nivell de base de dades: els permisos de base de dades s’apliquen a tots els objectes en una base de dades especificada. Es guarden a les taules <em>mysql.db</em> i <em>mysql.host</em>. </div>
</li>
<li class="level1"><div class="li"> Nivell de taula: els permisos de taula s’apliquen a totes les columnes en una taula donada. Es guarden a la taula <em>mysql.tables_priv</em>.</div>
</li>
<li class="level1"><div class="li"> Nivell de columna: els permisos de columna s’apliquen a columnes en una taula donada. Es guarden a la taula <em>mysql.columns_priv</em>.</div>
</li>
<li class="level1"><div class="li"> Nivell de rutina: els permisos de rutina s’apliquen a rutines emmagatzemades. Es guarden a la taula <em>mysql.procs_priv</em>.</div>
</li>
</ul>

<p>
Per exemple, per donar el permís <code>SELECT</code> sobre tota la base de dades a l’usuari existent <em>francesc</em>, escriureu la següent comanda:
</p>
<pre class="code sql"><ol><li class="li1"><div class="de1"><span class="kw1">GRANT</span> <span class="kw1">SELECT</span> <span class="kw1">ON</span> base_dades<span class="sy0">.*</span> <span class="kw1">TO</span> francesc@<span class="st0">'localhost'</span>;</div></li></ol></pre>

<p>
Per donar més d’un permís a la vegada, s’han de separar les opcions amb una coma. Així que per atorgar els permisos <code>SELECT</code>, <code>INSERT</code> i <code>DELETE</code> a l’usuari <em>francesc</em>, escriureu la següent comanda:
</p>
<pre class="code php"><ol><li class="li1"><div class="de1">  GRANT SELECT<span class="sy0">,</span> INSERT<span class="sy0">,</span> DELETE ON base_dades<span class="sy0">.*</span> TO francesc<span class="sy0">@</span><span class="st_h">'localhost'</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li></ol></pre>

<p>
Un cop heu acabat heu de refrescar els permisos de la memòria executant la comanda <code>flush privileges</code>.
</p>

<p>
Aquí podeu trobar tota la sintaxi del funcionament de la sentència <code>GRANT</code>: 
</p>

<p>
<a href="http://dev.mysql.com/doc/refman/5.1/en/grant.html" class="urlextern" title="http://dev.mysql.com/doc/refman/5.1/en/grant.html"  rel="nofollow">http://dev.mysql.com/doc/refman/5.1/en/grant.html</a>
</p>

<p>
A continuació es mostra un exemple complet de gestió de permisos d’accés:
</p>

<p>
Primer entreu a la consola MySQL com a usuari <em>root</em> escrivint la següent comanda i a continuació entreu la contrasenya:
</p>
<pre class="code sql"><ol><li class="li1"><div class="de1"># mysql <span class="sy0">-</span>p <span class="sy0">-</span>u root</div></li><li class="li1"><div class="de1">Enter password:</div></li></ol></pre>

<p>
Un cop a la consola de comandes de MySQL , creareu la base de dades <em>base_de_dades</em> escrivint la següent sentència:
</p>
<pre class="code sql"><ol><li class="li1"><div class="de1">mysql<span class="sy0">&gt;</span> <span class="kw1">CREATE</span> <span class="kw1">DATABASE</span> base_de_dades <span class="kw1">CHARACTER</span> <span class="kw1">SET</span> utf8 <span class="kw1">COLLATE</span> utf8_bin;</div></li><li class="li1"><div class="de1">Query OK<span class="sy0">,</span> <span class="nu0">1</span> <span class="kw1">ROW</span> affected <span class="br0">&#40;</span><span class="nu0">0.01</span> sec<span class="br0">&#41;</span></div></li></ol></pre>

<p>
Si ara demanem al MySQL que ens mostri les bases de dades, <em>base_de_dades</em> apareixerà a la llista.
</p>
<pre class="code sql"><ol><li class="li1"><div class="de1">mysql<span class="sy0">&gt;</span> <span class="kw1">SHOW</span> <span class="kw1">DATABASES</span>;</div></li><li class="li1"><div class="de1"><span class="sy0">+</span><span class="co1">--------------------+</span></div></li><li class="li1"><div class="de1"><span class="sy0">|</span> <span class="kw1">DATABASE</span>           <span class="sy0">|</span></div></li><li class="li1"><div class="de1"><span class="sy0">+</span><span class="co1">--------------------+</span></div></li><li class="li1"><div class="de1"><span class="sy0">|</span> information_schema <span class="sy0">|</span></div></li><li class="li1"><div class="de1"><span class="sy0">|</span> base_de_dades      <span class="sy0">|</span></div></li><li class="li1"><div class="de1"><span class="sy0">|</span> mysql              <span class="sy0">|</span></div></li><li class="li1"><div class="de1"><span class="sy0">|</span> phpmyadmin         <span class="sy0">|</span></div></li><li class="li1"><div class="de1"><span class="sy0">+</span><span class="co1">--------------------+</span></div></li><li class="li1"><div class="de1"><span class="nu0">4</span> <span class="kw1">ROWS</span> <span class="kw1">IN</span> <span class="kw1">SET</span> <span class="br0">&#40;</span><span class="nu0">0.00</span> sec<span class="br0">&#41;</span></div></li></ol></pre>

<p>
Ara creareu un usuari anomenat <em>usuari1</em> amb la contrasenya <em>123456</em>.
</p>
<pre class="code sql"><ol><li class="li1"><div class="de1"> mysql<span class="sy0">&gt;</span> <span class="kw1">CREATE</span> <span class="kw1">USER</span> <span class="st0">'usuari1'</span>@<span class="st0">'%'</span> <span class="kw1">IDENTIFIED</span> <span class="kw1">BY</span> <span class="st0">'123456'</span>;</div></li><li class="li1"><div class="de1">Query OK<span class="sy0">,</span> <span class="nu0">0</span> <span class="kw1">ROWS</span> affected <span class="br0">&#40;</span><span class="nu0">0.00</span> sec<span class="br0">&#41;</span></div></li></ol></pre>

<p>
Primer donareu el permís de <code>SELECT</code> a la base de dades <em>base_de_dades</em> per l’usuari  <em>usuari1</em>.
</p>
<pre class="code sql"><ol><li class="li1"><div class="de1"><span class="kw1">GRANT</span> <span class="kw1">SELECT</span> <span class="kw1">ON</span> base_de_dades<span class="sy0">.*</span> <span class="kw1">TO</span> <span class="st0">'usuari1'</span>@<span class="st0">'%'</span>;</div></li><li class="li1"><div class="de1">Query OK<span class="sy0">,</span> <span class="nu0">0</span> <span class="kw1">ROWS</span> affected <span class="br0">&#40;</span><span class="nu0">0.00</span> sec<span class="br0">&#41;</span></div></li></ol></pre>

<p>
Per comprovar els permisos d’un usuari es fa servir la comanda <code>show grants for usuari1</code>.
</p>
<pre class="code sql"><ol><li class="li1"><div class="de1">mysql<span class="sy0">&gt;</span> <span class="kw1">SHOW</span> grants <span class="kw1">FOR</span> usuari1</div></li><li class="li1"><div class="de1">    <span class="sy0">-&gt;</span> ;</div></li><li class="li1"><div class="de1"><span class="sy0">+</span><span class="co1">--------------------------------------------------------------------------------------------------------+</span></div></li><li class="li1"><div class="de1"><span class="sy0">|</span> Grants <span class="kw1">FOR</span> usuari1@%                                                                                   <span class="sy0">|</span></div></li><li class="li1"><div class="de1"><span class="sy0">+</span><span class="co1">--------------------------------------------------------------------------------------------------------+</span></div></li><li class="li1"><div class="de1"><span class="sy0">|</span> <span class="kw1">GRANT</span> USAGE <span class="kw1">ON</span> <span class="sy0">*.*</span> <span class="kw1">TO</span> <span class="st0">'usuari1'</span>@<span class="st0">'%'</span> <span class="kw1">IDENTIFIED</span> <span class="kw1">BY</span> PASSWORD <span class="st0">'*6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9'</span> <span class="sy0">|</span></div></li><li class="li1"><div class="de1"><span class="sy0">|</span> <span class="kw1">GRANT</span> <span class="kw1">SELECT</span> <span class="kw1">ON</span> <span class="st0">`base_de_dades`</span><span class="sy0">.*</span> <span class="kw1">TO</span> <span class="st0">'usuari1'</span>@<span class="st0">'%'</span>                                                     <span class="sy0">|</span></div></li><li class="li1"><div class="de1"><span class="sy0">+</span><span class="co1">--------------------------------------------------------------------------------------------------------+</span></div></li><li class="li1"><div class="de1"><span class="nu0">2</span> <span class="kw1">ROWS</span> <span class="kw1">IN</span> <span class="kw1">SET</span> <span class="br0">&#40;</span><span class="nu0">0.00</span> sec<span class="br0">&#41;</span></div></li></ol></pre>

<p>
Heu pogut comprovar com apareix el permís de <code>SELECT</code>, ara afegirem els permisos de <code>DELETE</code> i <code>INSERT</code> a l’usuari <em>usuari1</em>.
</p>
<pre class="code sql"><ol><li class="li1"><div class="de1">mysql<span class="sy0">&gt;</span> <span class="kw1">GRANT</span> <span class="kw1">DELETE</span><span class="sy0">,</span><span class="kw1">INSERT</span> <span class="kw1">ON</span> base_de_dades<span class="sy0">.*</span> <span class="kw1">TO</span> <span class="st0">'usuari1'</span>@<span class="st0">'%'</span>;</div></li><li class="li1"><div class="de1">Query OK<span class="sy0">,</span> <span class="nu0">0</span> <span class="kw1">ROWS</span> affected <span class="br0">&#40;</span><span class="nu0">0.00</span> sec<span class="br0">&#41;</span></div></li></ol></pre>

<p>
Comproveu els privilegis amb la comanda <code>show grants</code> i veureu com l’usuari <em>usuari1</em> té els privilegis <code>SELECT</code>, <code>INSERT</code>, <code>DELETE</code>  a la base de dades <em>base_de_dades</em>.
</p>
<pre class="code sql"><ol><li class="li1"><div class="de1">mysql<span class="sy0">&gt;</span> <span class="kw1">SHOW</span> grants <span class="kw1">FOR</span> usuari1;</div></li><li class="li1"><div class="de1"><span class="sy0">+</span><span class="co1">--------------------------------------------------------------------------------------------------------+</span></div></li><li class="li1"><div class="de1"><span class="sy0">|</span> Grants <span class="kw1">FOR</span> usuari1@%                                                                                   <span class="sy0">|</span></div></li><li class="li1"><div class="de1"><span class="sy0">+</span><span class="co1">--------------------------------------------------------------------------------------------------------+</span></div></li><li class="li1"><div class="de1"><span class="sy0">|</span> <span class="kw1">GRANT</span> USAGE <span class="kw1">ON</span> <span class="sy0">*.*</span> <span class="kw1">TO</span> <span class="st0">'usuari1'</span>@<span class="st0">'%'</span> <span class="kw1">IDENTIFIED</span> <span class="kw1">BY</span> PASSWORD <span class="st0">'*6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9'</span> <span class="sy0">|</span></div></li><li class="li1"><div class="de1"><span class="sy0">|</span> <span class="kw1">GRANT</span> <span class="kw1">SELECT</span><span class="sy0">,</span> <span class="kw1">INSERT</span><span class="sy0">,</span> <span class="kw1">DELETE</span> <span class="kw1">ON</span> <span class="st0">`base_de_dades`</span><span class="sy0">.*</span> <span class="kw1">TO</span> <span class="st0">'usuari1'</span>@<span class="st0">'%'</span>                                     <span class="sy0">|</span></div></li><li class="li1"><div class="de1"><span class="sy0">+</span><span class="co1">--------------------------------------------------------------------------------------------------------+</span></div></li><li class="li1"><div class="de1"><span class="nu0">2</span> <span class="kw1">ROWS</span> <span class="kw1">IN</span> <span class="kw1">SET</span> <span class="br0">&#40;</span><span class="nu0">0.00</span> sec<span class="br0">&#41;</span></div></li></ol></pre>

<p>
Per acabar i refrescar els permisos de la memòria és necessari executar la comanda <code>flush privileges</code>:
</p>
<pre class="code sql"><ol><li class="li1"><div class="de1">mysql<span class="sy0">&gt;</span> <span class="kw1">FLUSH</span> privileges;</div></li><li class="li1"><div class="de1">Query OK<span class="sy0">,</span> <span class="nu0">0</span> <span class="kw1">ROWS</span> affected <span class="br0">&#40;</span><span class="nu0">0.00</span> sec<span class="br0">&#41;</span></div></li></ol></pre>

</div>

<h2><a id="verificacio_i_proves" >Verificació i proves</a></h2>
<div class="level2">

<p>
Per verificar el funcionament de MySQL podeu fer servir programari de monitorització que controla la disponibilitat de serveis. Per monitoritzar el servei de base de dades MySQL heu d’instal·lar connectors al programari. Entre les eines de programari de monitorització lliures que existeixen parlarem de:
</p>
<ul>
<li class="level1"><div class="li"> Nagios</div>
</li>
<li class="level1"><div class="li"> Pandora FMS</div>
</li>
</ul>

</div>

<h3><a id="nagios" >Nagios</a></h3>
<div class="level3">

<p>
Nagios (<a href="http://www.nagios.com/" class="urlextern" title="http://www.nagios.com/"  rel="nofollow">www.nagios.com</a>) és un programari molt popular de monitorització de xarxes, ordinadors i aplicacions. Està llicenciat sota la GNU (<em>General Public License</em> Version 2 publicada per la Free Software Fundation) i és de codi obert. 
</p>

<p>
Es pot configurar per tal que monitoritzi els equips (maquinari) i serveis (programari) que l’usuari vulgui, alertant quan el comportament d’un recurs no sigui correcte o superi els marges definits per l’administrador de xarxa. Les alertes es poden enviar entre d’altres per correu electrònic i missatges SMS.
</p>

<p>
Entre les seves característiques principals figuren la monitorització de serveis de xarxa (SMTP, POP3, HTTP, NNTP, ICMP, SNMP, <acronym title="File Transfer Protocol">FTP</acronym>, SSH); de sistemes de maquinari (càrrega del processador, ús dels discs, memòria, estat dels ports, arxius de log, temperatura…); remota mitjançant túnels SSL xifrats o SSH.
</p>

<p>
També ofereix la possibilitat de programar complements específics per qualsevol paràmetre d’interès d’un sistema.
</p>

<p>
Podeu trobar diferents <em>plugins</em> per monitoritzar bases de dades MySQL i servidors. Podeu trobar-ne un llistat aquí: 
</p>

<p>
<a href="http://exchange.nagios.org/directory/Plugins/Databases/MySQL" class="urlextern" title="http://exchange.nagios.org/directory/Plugins/Databases/MySQL"  rel="nofollow">http://exchange.nagios.org/directory/Plugins/Databases/MySQL</a>
</p>

<p>
Aquí teniu un llistat d’alguns dels més populars:
</p>
<ul>
<li class="level1"><div class="li"> Element de llista de picscheck_mysql (<a href="http://oss.isg.inf.ethz.ch/nagiosplug/" class="urlextern" title="http://oss.isg.inf.ethz.ch/nagiosplug/"  rel="nofollow">http://oss.isg.inf.ethz.ch/nagiosplug</a>): comprova i mostra l’estat de les connexions a un servidor MySQL . </div>
</li>
<li class="level1"><div class="li"> check_mysqld (<a href="http://william.leibzon.org/nagios/" class="urlextern" title="http://william.leibzon.org/nagios/"  rel="nofollow">http://william.leibzon.org/nagios</a>): permet establir llindars per a les variables de la comanda <code>SHOW STATUS</code> de MySQL. </div>
</li>
<li class="level1"><div class="li"> check_mysql_health (<a href="http://labs.consol.de /nagios/check_mysql_health" class="urlextern" title="http://labs.consol.de /nagios/check_mysql_health"  rel="nofollow">http://labs.consol.de /nagios/check_mysql_health</a>): permet controlar molts paràmetres d’una base de dades, com ara el temps de connexió, número de connexions, índexs, la taxa d’èxit de la memòria cau, les consultes lentes, etc.</div>
</li>
</ul>

</div>

<h3><a id="pandora_fms" >Pandora FMS</a></h3>
<div class="level3">

<p>
Pandora FMS (en anglès <em>Pandora Flexible Monitoring System</em>, Sistema de Monitorització Flexible Pandora, <a href="http://pandorafms.com/" class="urlextern" title="http://pandorafms.com/"  rel="nofollow">http://pandorafms.com</a>) és un programari de codi obert publicat sota llicència GPL2 GNU (<em>General Public License</em>),  que serveix per monitoritzar i mesurar tot tipus d’elements. Monitoritza d’una forma visual al llarg del temps l’estat de sistemes, aplicacions o dispositius. 
</p>

<p>
Pandora FMS pot recollir informació de qualsevol sistema operatiu, amb programari específic per a cada plataforma: GNU/Linux, AIX, Solaris, HP-UX, BSD/IPSO i Windows 2000, XP i 2003.
</p>

<p>
Pandora FMS també pot monitoritzar qualsevol tipus de servei de xarxa com ara: TCP/IP, balancejadors de càrrega, <em>routers</em>, <em>switches</em>, sistemes operatius, aplicacions o impressores. 
</p>

<p>
Per verificar el funcionament de MySQL existeixen mòduls del propi programari i connectors desenvolupats. Entre els mòduls trobem: 
</p>
<ul>
<li class="level1"><div class="li"> MySQL Monitoring: realitza un seguiment general de MySQL. </div>
</li>
<li class="level1"><div class="li"> Mysql Cluster manager proccess: permet fer un seguiment dels processos de MySQL.</div>
</li>
<li class="level1"><div class="li"> Mysql Active Connections: permet verificar les connexions actives de MySQL.</div>
</li>
</ul>

</div>

<h3><a id="proves_de_rendiment" >Proves de rendiment</a></h3>
<div class="level3">

<p>
Una cosa molt important en qualsevol desenvolupament web són les proves de rendiment. Amb elles podreu avaluar atributs quantitatius i qualitatius del vostre sistema com la fiabilitat o la escalabilitat, ja siguin a nivell de programari o maquinari. Dins de les proves, les bases de dades han de ser una cosa fonamental.
</p>

<p>
Mysqlslap és una eina de diagnòstic de MySQL disponible des de la versió 5.1.4 que us permetrà realitzar aquestes proves. Mysqlslap emula la càrrega d’un gran nombre de clients accedint a un servidor MySQL i ofereix informes una vegada acabada la prova.
</p>

<p>
Mysqlslap pot generar sentències SQL automàticament si no es poden utilitzar les sentències que executa el vostre sistema. 
</p>

<p>
Per invocar mysqlslap ho podeu fer d’aquesta manera:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">shell<span class="sy0">&gt;</span> mysqlslap <span class="br0">&#91;</span>opcions<span class="br0">&#93;</span></div></li></ol></pre>

<p>
Podeu trobar aquí un llistat de les diferents opcions de mysqlslap: 
</p>

<p>
<a href="http://dev.mysql.com/doc/refman/5.1/en/mysqlslap.html" class="urlextern" title="http://dev.mysql.com/doc/refman/5.1/en/mysqlslap.html"  rel="nofollow">http://dev.mysql.com/doc/refman/5.1/en/mysqlslap.html</a>
</p>

<p>
Mysqlslap s’executa en tres etapes: preparació, execució i neteja. A la preparació es creen les taules i les consultes per la prova. A l’execució es fan servir més d’una connexió de clients per executar la prova. A a la neteja s’eliminen les taules si s’especifica i es desconnecten els clients.
</p>

<p>
Un exemple el tenim a:
</p>

<p>
Especifiqueu la consulta SQL (<code>SELECT * FROM</code> taula) i creeu  la taula (<code>CREATE TABLE</code> taula (clau int);<code>INSERT INTO</code> taula <code>VALUES (365)</code>) , especifiqueu 50 clients i 200 consultes seleccionades per cadascun:
</p>
<pre class="code sql"><ol><li class="li1"><div class="de1">shell<span class="sy0">&gt;</span> mysqlslap <span class="sy0">-</span>uroot <span class="sy0">-</span>p <span class="co1">--delimiter=&quot;;&quot; \</span></div></li><li class="li1"><div class="de1">  <span class="co1">--create=&quot;CREATE TABLE taula (clau int);INSERT INTO taula VALUES (365)&quot; \</span></div></li><li class="li1"><div class="de1">  <span class="co1">--query=&quot;SELECT * FROM taula&quot; --concurrency=50 --iterations=200</span></div></li></ol></pre>

<p>
Un cop entrat la contrasenya de l’usuari <em>root</em> mostrarà unes estadístiques amb els temps (mitjà, mínim i màxim) d’execució de totes les consultes:
</p>
<pre class="code sql"><ol><li class="li1"><div class="de1">Benchmark </div></li><li class="li1"><div class="de1">  Average <span class="kw1">NUMBER</span> <span class="kw1">OF</span> seconds <span class="kw1">TO</span> run <span class="kw1">ALL</span> queries: <span class="nu0">0.021</span> seconds </div></li><li class="li1"><div class="de1">	Minimum <span class="kw1">NUMBER</span> <span class="kw1">OF</span> seconds <span class="kw1">TO</span> run <span class="kw1">ALL</span> queries: <span class="nu0">0.009</span> seconds </div></li><li class="li1"><div class="de1">	Maximum <span class="kw1">NUMBER</span> <span class="kw1">OF</span> seconds <span class="kw1">TO</span> run <span class="kw1">ALL</span> queries: <span class="nu0">0.900</span> seconds </div></li><li class="li1"><div class="de1">	<span class="kw1">NUMBER</span> <span class="kw1">OF</span> clients running queries: <span class="nu0">50</span> </div></li><li class="li1"><div class="de1">	Average <span class="kw1">NUMBER</span> <span class="kw1">OF</span> queries per client: <span class="nu0">1</span></div></li></ol></pre>

<p>
Especifiqueu que mysqlslap creï la instrucció de consulta SQL a una taula de dues columnes <code>INT</code> i tres columnes <code>VARCHAR</code>. Utilitzeu cinc clients de consulta  20 vegades cada un. No creeu la taula amb la consulta per inserir les dades (és a dir, s’usarà l’esquema de la prova anterior i les dades):
</p>
<pre class="code sql"><ol><li class="li1"><div class="de1">shell<span class="sy0">&gt;</span> mysqlslap <span class="sy0">-</span>uroot <span class="sy0">-</span>p <span class="co1">--concurrency=5 --iterations=20 \</span></div></li><li class="li1"><div class="de1">  <span class="co1">--number-int-cols=2 --number-char-cols=3 \</span></div></li><li class="li1"><div class="de1">  <span class="co1">--auto-generate-sql</span></div></li></ol></pre>

<p>
Un cop entrada la contrasenya de l’usuari <em>root</em>:
</p>
<pre class="code sql"><ol><li class="li1"><div class="de1">Enter password: </div></li><li class="li1"><div class="de1">Benchmark </div></li><li class="li1"><div class="de1">	Average <span class="kw1">NUMBER</span> <span class="kw1">OF</span> seconds <span class="kw1">TO</span> run <span class="kw1">ALL</span> queries: <span class="nu0">0.016</span> seconds </div></li><li class="li1"><div class="de1">	Minimum <span class="kw1">NUMBER</span> <span class="kw1">OF</span> seconds <span class="kw1">TO</span> run <span class="kw1">ALL</span> queries: <span class="nu0">0.009</span> seconds </div></li><li class="li1"><div class="de1">	Maximum <span class="kw1">NUMBER</span> <span class="kw1">OF</span> seconds <span class="kw1">TO</span> run <span class="kw1">ALL</span> queries: <span class="nu0">0.106</span> seconds </div></li><li class="li1"><div class="de1">	<span class="kw1">NUMBER</span> <span class="kw1">OF</span> clients running queries: <span class="nu0">5</span> </div></li><li class="li1"><div class="de1">	Average <span class="kw1">NUMBER</span> <span class="kw1">OF</span> queries per client: <span class="nu0">0</span></div></li></ol></pre>

<p>
Creareu dos arxius un de creació (creacio.sql) amb les sentències (<code>CREATE TABLE</code> i <code>INSERT INTO</code>) i un altre de consultes (consultes.sql) amb sentències (<code>SELECT</code>). Primer executarà l’arxiu de creació i després s’executarà l’arxiu amb les consultes. Especificareu cinc clients, cinc vegades cadascun:
</p>
<pre class="code sql"><ol><li class="li1"><div class="de1">mysqlslap <span class="sy0">-</span>uroot <span class="sy0">-</span>p <span class="co1">--concurrency=5 \</span></div></li><li class="li1"><div class="de1">  <span class="co1">--iterations=5 --query=query.sql --create=create.sql \</span></div></li><li class="li1"><div class="de1">  <span class="co1">--delimiter=&quot;;&quot;</span></div></li></ol></pre>

<p>
Resultat:
</p>
<pre class="code sql"><ol><li class="li1"><div class="de1">Enter password: </div></li><li class="li1"><div class="de1">Benchmark </div></li><li class="li1"><div class="de1">  Average <span class="kw1">NUMBER</span> <span class="kw1">OF</span> seconds <span class="kw1">TO</span> run <span class="kw1">ALL</span> queries: <span class="nu0">0.037</span> seconds </div></li><li class="li1"><div class="de1">	Minimum <span class="kw1">NUMBER</span> <span class="kw1">OF</span> seconds <span class="kw1">TO</span> run <span class="kw1">ALL</span> queries: <span class="nu0">0.037</span> seconds </div></li><li class="li1"><div class="de1">	Maximum <span class="kw1">NUMBER</span> <span class="kw1">OF</span> seconds <span class="kw1">TO</span> run <span class="kw1">ALL</span> queries: <span class="nu0">0.037</span> seconds </div></li><li class="li1"><div class="de1">	<span class="kw1">NUMBER</span> <span class="kw1">OF</span> clients running queries: <span class="nu0">5</span> </div></li><li class="li1"><div class="de1">	Average <span class="kw1">NUMBER</span> <span class="kw1">OF</span> queries per client: <span class="nu0">0</span> </div></li></ol></pre>

</div>

	 </article>
     <div class="pnpage">
      <div class="left-corner"></div>
      <div id="prevpage">Anar a la p&agrave;gina anterior:<br /><a href="../../../WebContent/u1/a2/exercicis.html">Exercicis d'autoavaluació</a></div>
      <div id="nextpage">Anar a la p&agrave;gina seg&uuml;ent:<br /><a href="../../../WebContent/u1/a3/activitats.html">Activitats</a></div>
      <div class="right-corner"></div>
     </div>
    </div>
    <footer class="footer">
      <div><small>Aquest document està subjecte a una llicència oberta de Creative Commons, es reserva el dret de reconeixement de l'autoria, d'exigir que no se'n faci cap mena d'ús comercial. Si altereu o transformeu aquesta obra, o en genereu obres derivades, només podeu distribuir l'obra generada amb una llicència idèntica a aquesta.</small></div>
    </footer>
 </div>
 <div id="back_preview" class="hidden"></div>
 <div id="preview" class="hidden">
  <div class="prevcontent"></div>
 </div>
 <div id="help-tooltips">
  <div id="help-toc" class="hidden tooltip"><span>Taula de continguts:</span> Ofereix una vista general de l&#39;estructura del m&ograve;dul, que us facilitar&agrave; la navegaci&oacute; a trav&eacute;s dels seus continguts.<span class="arrow-left"></span></div> 
  <div id="help-settings" class="hidden tooltip"><span>Opcions de format:</span> Permet configurar el format de lectura a partir de les vostres prefer&egrave;ncies, modificant la mida de la lletra, el color del fons, l&#39;amplada de la p&agrave;gina o l&#39;ocultaci&oacute; dels continguts complementaris, entre d&#39;altres.<span class="arrow-left"></span></div>
  <div id="help-printer" class="hidden tooltip"><span>Imprimir:</span>  Envia el contingut seleccionat a la impressora.<span class="arrow-left"></span></div>
  <div id="help-favorites" class="hidden tooltip"><span>Prefereits:</span> Permet desar aquelles parts del contingut a les que us interessi accedir en un moment posterior; us permetr&agrave; anar creant un repositori personalitzat de les seccions que considereu m&eacute;s rellevants. Un cop l&#39;hageu començat a fer servir se us mostrar&agrave; a sota un comptador que us informar&agrave; del nombre de preferits que s&#39;hagin emmagatzemat fins al moment.<span class="arrow-left"></span></div>
  <div id="help-favcounter" class="hidden tooltip"><span>Comptador i llistat de preferits:</span> Indica el nombre de preferits que s&#39;han desat fins el moment; clicant damunt seu accedireu al llistat de preferits, i a trav&eacute;s d&#39;aquest podreu accedir directament als continguts que hageu emmagatzemat.<span class="arrow-left"></span></div>
  <div id="help-help_icon" class="hidden tooltip"><span>Ajuda:</span> Aquesta opci&oacute; activa la informaci&oacute; de les funcionalitats del web tot situant el punter del ratol&iacute; al damunt dels diferents &iacute;tems.<span class="arrow-left"></span></div>
  <div id="help-sidebar-hide" class="hidden tooltip"><span>Mostrar/Ocultar barra lateral:</span>  Deshabilita la barra d&#39;opcions, permetent la seva recuperaci&oacute; quan es desitgi.<span class="arrow-left"></span></div>
  <div id="help-search" class="hidden tooltip"><span>Cerca:</span>  Introdu&iuml;u les paraules clau sobre aquells conceptes que desitgeu localitzar en els continguts del m&ograve;dul. Tamb&eacute; podeu excloure un terme de la cerca tot afegint-hi el signe &#8220;-&#8221; al davant.<span class="arrow-top"></span></div>
  <div id="help-header" class="hidden tooltip"><span>Cap&ccedil;alera:</span>  Indica l&#39;apartat o secci&oacute; que es mostra en pantalla. Tingueu present que les capçaleres de segon, tercer i quart nivell tamb&eacute; es poden desar com a marcadors.<span class="arrow-left"></span></div>
</div> 
</body>
</html>
