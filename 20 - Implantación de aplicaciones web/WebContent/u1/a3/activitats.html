<!doctype html>

<!--[if lt IE 7 ]> <html class="ie ie6 no-js" lang="ca"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie ie7 no-js" lang="ca"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie ie8 no-js" lang="ca"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie ie9 no-js" lang="ca"> <![endif]-->
<!--[if gt IE 9]><!--><html class="no-js" lang="ca"><!--<![endif]-->
<!-- the "no-js" class is for Modernizr. -->

<head id="www-sitename-com" data-template-set="html5-reset">

	<meta charset="utf-8">
	
	<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title></title>
	
<!-- <meta name="title" content=""> --> 
	<meta name="description" content="">
	<!-- Google will often use this as its description of your page/site. Make it good. -->
	
	<meta name="google-site-verification" content="">
	<!-- Speaking of Google, don't forget to set your site up: http://google.com/webmasters -->
	
	<meta name="author" content="Institut Obert de Catalunya">
	<meta name="Copyright" content="Copyright Institut Obert de Catalunya 2011. All Rights Reserved.">

	<!-- Dublin Core Metadata : http://dublincore.org/ -->
	<meta name="DC.title" content="">
	<meta name="DC.subject" content="Informàtica i comunicacions">
	<meta name="DC.creator" content="Institut Obert de Catalunya">
	
	<!--  Mobile Viewport Fix
	j.mp/mobileviewport & davidbcalhoun.com/2010/viewport-metatag 
	device-width : Occupy full width of the screen in its current orientation
	initial-scale = 1.0 retains dimensions instead of zooming out if page height > device height
	maximum-scale = 1.0 retains dimensions instead of zooming in if page width < device width
	-->
	<!-- Uncomment to use � use thoughtfully!
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	-->

	<link rel="shortcut icon" href="../../../img/favicon.ico">
	<!-- This is the traditional favicon.
		 - size: 16x16 or 32x32
		 - transparency is OK
		 - see wikipedia for info on browser support: http://mky.be/favicon/ -->
		 
	<link rel="apple-touch-icon" href="../../../img/apple-touch-icon.png">
	<!-- The is the icon for iOS's Web Clip.
		 - size: 57x57 for older iPhones, 72x72 for iPads, 114x114 for iPhone4's retina display (IMHO, just go ahead and use the biggest one)
		 - To prevent iOS from applying its styles to the icon name it thusly: apple-touch-icon-precomposed.png
		 - Transparency is not recommended (iOS will put a black BG behind the icon) -->
	
	<!-- CSS: screen, mobile & print are all in the same file -->
	<link rel="stylesheet" href="../../../_/css/style.css">

	<!-- CSS: jQuery UI -->
	<link rel="stylesheet" href="../../../_/css/jquery-ui.css">
	
	<!-- all our JS is at the bottom of the page, except for Modernizr. -->
	<script src="../../../_/js/modernizr-1.7.min.js"></script>
	<script src="../../../_/js/Hyphenator.js" type="text/javascript"></script>
	<script type="text/javascript">
	   Hyphenator.config({
		minwordlength : 4
	   });
	   Hyphenator.run();
	</script>
    <script src="../../../_/js/build.js" type="text/javascript"></script>
</head>

<body class="style-newspaper">

<div class="wrapper"><!-- not needed? up to you: http://camendesign.com/code/developpeurs_sans_frontieres -->

	<header id="header">
		<div class="head"><a href="http://ioc.gencat.cat"><img src="../../../img/logo.png" alt="Institut Obert de Catalunya"/></a><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/es/deed.ca"><img src="../../../img/license.png" alt="Llic&egrave;ncia" class="license"/></a></div>
		<div class="headdocument"><a href="../../../index.html"></a></div>
        <div id="search" class="search" name="search">
         <form id="frmsearch" action="../../../search.html" method="get">
          <input type="text" name="q"/>
        </form>
        </div>
	</header>
   <div id="upbutton" class="upbutton" style="display:none;"><img src="../../../img/uparrow.png" alt="Pujar a l'inici de p&agrave;gina"/></div>
   <aside id="aside">
    <div id="menu">
      <ul>
       <li name="toc"><div><img src="../../../img/toc.png" alt="&Iacute;ndex"/></div></li>
       <li name="settings"><div><img src="../../../img/settings.png" alt="Configuraci&oacute;"/></div></li>
       <li name="printer"><div><img src="../../../img/printer.png" alt="Imprimir"/></div></li>
       <li name="favorites"><div><img src="../../../img/favorites.png" alt="Favorits"/></div></li>
       <li name="help_icon" class="help_icon"><div><img src="../../../img/help_icon.png" alt="Ajuda"/></div></li>
      </ul>
     </div>
   </aside>
   <div id="sidebar-hide" name="sidebar-hide"><img src="../../../img/arrows.png"/></div>
   <section>
     <div id="toc" class="hidden">
      <div class="menucontent">
        <ul>
        <li id="u1" class="parentnode"><p><a href="../../../WebContent/u1/resum.html">1. Llenguatges de guions de servidor</a></p><ul class="expander"><li id="u1resum"><a href="../../../WebContent/u1/resum.html">Resum</a></li><li id="u1resultats"><a href="../../../WebContent/u1/resultats.html">Resultats d'aprenentatge</a></li><li id="u1referencies"><a href="../../../WebContent/u1/referencies.html">Referències</a></li><li id="u1a1" class="tocsection"><p id="u1a1continguts"><a href="../../../WebContent/u1/a1/continguts.html">Instal·lació de servidors d'aplicacions web</a><span class="buttonexp"></span></p><ul><li id="u1a1activitats"><a href="../../../WebContent/u1/a1/activitats.html">Activitats</a></li><li id="u1a1exercicis"><a href="../../../WebContent/u1/a1/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><li id="u1a2" class="tocsection"><p id="u1a2continguts"><a href="../../../WebContent/u1/a2/continguts.html">Programació web de servidor</a><span class="buttonexp"></span></p><ul><li id="u1a2activitats"><a href="../../../WebContent/u1/a2/activitats.html">Activitats</a></li><li id="u1a2exercicis"><a href="../../../WebContent/u1/a2/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><li id="u1a3" class="tocsection"><p id="u1a3continguts"><a href="../../../WebContent/u1/a3/continguts.html">Accés a bases de dades des de PHP</a><span class="buttonexp"></span></p><ul><li id="u1a3activitats"><a href="../../../WebContent/u1/a3/activitats.html">Activitats</a></li><li id="u1a3exercicis"><a href="../../../WebContent/u1/a3/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li></ul></li><li id="" class="indexnode"><p><a href="../../../index.html">Anar a l&#39;&iacute;ndex general</a></p></li>
        </ul>
      </div>
    </div>
   </section>
   <section>
   <div id="settings" class="hidden">
    <div class="menucontent">
     <div class="allsettings">
     <div class="settings">
      <label>Font i Color</label>
		<div class="setting-option">
	        <ul class="fontBackground">
				<li id="style-newspaper" title="Newspaper" class="appearance-style-newspaper"><span>Newspaper</span></li>
                <li id="style-novel" title="Novel" class="appearance-style-novel"><span>Novel</span></li>
                <li id="style-ebook" title="eBook" class="appearance-style-ebook"><span>eBook</span></li>
				<li id="style-inverse" title="Inverse" class="appearance-style-inverse active"><span>Inverse</span></li>
				<li id="style-athelas" title="Athelas" class="appearance-style-athelas"><span>Athelas</span></li>
			</ul>
		</div>
     </div>
	<div class="settings">
      <label>Amplada</label>
		<div class="setting-option">
	        <div id="slider-width"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
		<div class="setting-option">
	        <div id="slider-font"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
	  <div class="setting-option">
       <form action="" class="sett-options">
		<ul>
		    <li><input type="checkbox" id="secondary-content" /><label for="secondary-content">Mostra recursos complementaris</label></li>
		    <li><input type="checkbox" id="main-images" /><label for="main-images">Mostra imatges</label></li>
		    <li><input type="checkbox" id="text-alignment" /><label for="text-alignment">Text justificat</label></li>
			<li><input type="checkbox" id="text-hyphen" /><label for="text-hyphen">Partici&oacute; sil·l&agrave;bica</label></li>
		</ul>
       </form>
	  </div>
     </div>
     </div>
    </div>
   </div>
   </section>
 <section>
 <div id="favorites" class="hidden"></div>
 </section>   
 <div id="bridge" class="hidden"></div>
 <div id="help" class="hidden">
  <div class="helptitle">Dreceres del teclat<hr></div>
  <div class="helpsection"><span>General</span>
   <ul>
    <li><span class="shortcut">g</span>: Anar al men&uacute; de navegaci&oacute;</li>
    <li><span class="shortcut">o</span>: Anar a opcions</li>
    <li><span class="shortcut">s</span>: Guardar la p&agrave;gina actual a favorits</li>
    <li><span class="shortcut">p</span>: Imprimir la p&agrave;gina actual</li>
    <li><span class="shortcut">?</span>: Mostrar/Ocultar l&#39;ajuda</li>
   </ul>
  </div>
  <div class="helpsection"><span>Navegaci&oacute;</span>
   <ul>
    <li><span class="shortcut">i</span>: Anar a l&#39;&iacute;ndex general</li>
    <li><span class="shortcut">t</span>: Anar a l&#39;inici de p&agrave;gina</li>
    <li><span class="shortcut">b</span>: Anar al final de p&agrave;gina</li>
    <li><span class="shortcut">j</span>: Anar cap endavant dintre la p&agrave;gina</li>
    <li><span class="shortcut">k</span>: Anar cap enrere dintre la p&agrave;gina</li>
    <li><span class="shortcut">h</span>: Anar a la p&agrave;gina anterior:</li>
    <li><span class="shortcut">l</span>: Anar a la p&agrave;gina seg&uuml;ent:</li>
   </ul>
   </div>
 </div>
 <div id="favcounter" name="favcounter" class="hidden"><span></span></div>
 <div id="navmenu" class="navmenu"><ul class="webnav"><li><a href="../../../index.html" title="Anar a l&#39;&iacute;ndex general">Inici</a></li><li><a href="../resum.html">Llenguatges de guions de servidor</a></li><li><a href="continguts.html">Accés a bases de dades des de PHP</a></li><li>Activitats</li></ul></div>
	<div id="content" lang="ca" class="hyphenate text">
     <article lang="ca" class="sheet">
        <h1><a id="activitats"> Activitats </a></h1>
    	
<h2><a id="phpmyadmin" >PHPMyadmin</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és crear una base de dades senzilla amb PHPMyAdmin.
</p>

<p>
La base de dades es dirà <em>biblioteca</em> i tindrà dues úniques taules. 
</p>

<p>
La taula <em>usuaris</em> servirà per emmagatzemar les dades dels usuaris i tindrà la següent estructura: 
</p>
<div class="ioctable"><div class="titletable"><a name="Taula 1"><span>Taula</span></a>

Taula usuaris

</div><div class="table tabminheight"><table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> nom   </th><th class="col1"> tipus </th><th class="col2"> mida </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> id    </td><td class="col1 centeralign">   INT   </td><td class="col2 centeralign">   8    </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> nom   </td><td class="col1 centeralign">   VARCHAR   </td><td class="col2 centeralign">   32    </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> clau  </td><td class="col1 centeralign">   VARCHAR   </td><td class="col2 centeralign">   64    </td>
	</tr>
	<tr class="row4">
		<td class="col0"> tipus </td><td class="col1 centeralign">   INT    </td><td class="col2 centeralign">  2      </td>
	</tr>
</table></div>
</div>
<p>
La segona taula servirà per emmagatzemar llibres.
</p>
<div class="ioctable"><div class="titletable"><a name="Taula 2"><span>Taula</span></a>

Taula llibres

</div><div class="table tabminheight"><table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> nom       </th><th class="col1"> tipus </th><th class="col2"> mida </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> id        </td><td class="col1 centeralign">   INT   </td><td class="col2 centeralign">  8   </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> nom      </td><td class="col1 centeralign">   VARCHAR   </td><td class="col2 centeralign">  128   </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> autor     </td><td class="col1 centeralign">   VARCHAR   </td><td class="col2 centeralign">  64   </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> isbn      </td><td class="col1 centeralign">   VARCHAR    </td><td class="col2 centeralign">  13    </td>
	</tr>
	<tr class="row5">
		<td class="col0"> puntuacio </td><td class="col1 centeralign">   INT    </td><td class="col2 centeralign">  8    </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> genere     </td><td class="col1 centeralign">  VARCHAR     </td><td class="col2 centeralign">   64   </td>
	</tr>
</table></div>
</div>
<p>
<form action=""><div class="solution ioccontent">
<p>
En primer lloc heu d’entrar a PHPMyadmin per començar a administrar la base de dades. Per fer-ho entreu al navegador de la pàgina: <a href="http://localhost/phpmyadmin" class="urlextern" title="http://localhost/phpmyadmin"  rel="nofollow">http://localhost/phpmyadmin</a>
</p>

<p>
Una vegada heu introduit les dades d’un usuari amb permisos d’edició a la base de dades (per exemple, <em>root</em>) veureu la pàgina principal com es pot veure a la següent figura:
</p>
<div class="iocfigure"><a name="Figura A1"></a>
<p>
<figure>
<figcaption><span class="figuretitle">Figura</span>

 Pantalla d’inici de PHPMyAdmin

</figcaption><img src="../media/asxm09u1_05.png" alt="" /></figure>

</p>
</div>
<p>
Al centre de la pantalla teniu l’opció <em>Create new database</em>. Introduïu el nom <em>biblioteca</em> i feu clic al botó <em>Create</em>.
</p>

<p>
Automàticament us entrarà dins de la base de dades recent creada. Entreu a la pestanya <em>Structure</em> i creeu una nova taula omplint el formulari que us mostra. 
</p>
<ul>
<li class="level1"><div class="li"> Name: usuaris</div>
</li>
<li class="level1"><div class="li"> Number of fields: 4</div>
</li>
</ul>

<p>
Feu clic al botó <em>Go</em> i podreu veure una pantalla en la qual podreu especificar les característiques de les columnes de la taula, tal com es pot veure a la figura següent: 
</p>
<div class="iocfigure"><a name="Figura A2"></a>
<p>
<figure>
<figcaption><span class="figuretitle">Figura</span>

 Creació d’una taula

</figcaption><img src="../media/asxm09u1_06.png" alt="" /></figure>

</p>
</div>
<p>
Especifiqueu cadascuna de les columnes tal com estan especificades a la <span class="tabref"><a href="#Taula 1"><span>taula<span class=refId> Taula 1</span></span></a></span>. A la columna <em>id</em>, a més a més digueu que és clau primària (atribut <code>Index</code>) i té un valor autoincremental (<code>atribut A_I</code>). 
</p>

<p>
No us confongueu, perquè en aquesta pantalla del PHPMyAdmin, cada fila representa una columna de la taula SQL. 
</p>

<p>
Una vegada heu acabat d’especificar la taula, feu clic al botó <em>Save</em>, no el botó *<em>Go</em>. 
</p>

<p>
Una vegada fet això, veureu una pantalla en la qual es veu la consulta SQL que ha creat la taula i l’estructura de la taula. Si voleu modificar, esborrar o afegir columnes a la taula SQL (recordeu, aquí mostrades en forma de files) ho podeu fer des d’aquesta pantalla, tal com es veu a la següent figura: 
</p>
<div class="iocfigure"><a name="Figura A3"></a>
<p>
<figure>
<figcaption><span class="figuretitle">Figura</span>

 Edició taula

</figcaption><img src="../media/asxm09u1_07.png" alt="" /></figure>

</p>
</div>
<p>
Repetiu el mateix procediment, per crear la taula <em>llibres</em>, fent que l’<em>id</em> sigui també clau primària i autoincremental. 
</p>

<p>
A la pantalla principal de la base de dades, ara veureu les dues taules. Hi ha una sèrie de botons, que us permetran: 
</p>
<ul>
<li class="level1"><div class="li"> Veure el contingut de la taula.</div>
</li>
<li class="level1"><div class="li"> Veure l’estructura de la taula.</div>
</li>
<li class="level1"><div class="li"> Fer una cerca sobre la taula.</div>
</li>
<li class="level1"><div class="li"> Inserir dades a la taula.</div>
</li>
<li class="level1"><div class="li"> Buidar la taula.</div>
</li>
<li class="level1"><div class="li"> Esborrar la taula.</div>
</li>
</ul>

<p>
Podeu veure els botons a la següent figura:
</p>
<div class="iocfigure"><a name="Figura A4"></a>
<p>
<figure>
<figcaption><span class="figuretitle">Figura</span>

 Treball amb taules

</figcaption><img src="../media/asxm09u1_08.png" alt="" /></figure>

</p>
</div>
<p>
A continuació podeu inserir alguns registres a les taules, per tal que aquestes tinguin algun contingut. Feu clic a l’opció <em>Insert</em> per inserir dades a la taula d’usuaris. En la següent pantalla podeu posar-hi les dades per introduir un parell d’usuaris: 
</p>
<div class="ioctable"><div class="titletable"><a name="Taula 3"><span>Taula</span></a>

Usuaris

</div><div class="table tabminheight"><table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> nom   </th><th class="col1"> clau </th><th class="col2"> tipus </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> user    </td><td class="col1 centeralign">   user   </td><td class="col2 centeralign">   1    </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> admin   </td><td class="col1 centeralign">   admin   </td><td class="col2 centeralign">   0    </td>
	</tr>
</table></div>
</div>
<p>
Però en lloc de desar les contrasenyes directament, les podeu encriptar fent servir una funció, com es pot veure a la següent figura: 
</p>
<div class="iocfigure"><a name="Figura A5"></a>
<p>
<figure>
<figcaption><span class="figuretitle">Figura</span>

Codificar les contrasenyes

</figcaption><img src="../media/asxm09u1_09.png" alt="" /></figure>

</p>
</div>
<p>
El camp <em>id</em> hem dit que és autoincremental, i per tant no cal omplir-lo. 
</p>

<p>
Podeu crear alguns llibres també a la taula de llibres seguint el mateix procediment. 
</p>

<p>
En aquest moments ja teniu la base de dades amb algunes taules poblades, que us serviran per fer proves. És interessant també poder exportar l’estructura i les dades de la base de dades per poder portar-les fàcilment a altre servidor, o simplement a forma de <em>back-up</em>. 
</p>

<p>
Per fer-ho, situeu-vos dins de la configuració de la base de dades que voleu exportar. A continuació feu clic a la pestanya <em>Export</em>. Veureu una pantalla on podreu modificar les característiques de l’exportació. En general, està bé tal com està. Podeu escollir també si voleu que l’exportació estigui comprimida. 
</p>

<p>
Feu clic al botó <em>Go</em> i us descarregarà un fitxer amb el nom de la base de dades (<em>biblioteca</em>) i amb extensió <strong>sql</strong>. El seu contingut conté les dades necessàries per crear l’estructura de la base de dades seleccionada i omplir-la de dades. 
</p>

<p>
Aquest fitxer pot tenir un contingut semblant al següent:
</p>
<pre class="code sql"><ol><li class="li1"><div class="de1"><span class="co1">-- phpMyAdmin SQL Dump</span></div></li><li class="li1"><div class="de1"><span class="co1">-- version 3.3.7deb7</span></div></li><li class="li1"><div class="de1"><span class="co1">-- http://www.phpmyadmin.net</span></div></li><li class="li1"><div class="de1"><span class="co1">--</span></div></li><li class="li1"><div class="de1"><span class="co1">-- Host: localhost</span></div></li><li class="li1"><div class="de1"><span class="co1">-- Generation Time: Mar 13, 2013 at 08:23 PM</span></div></li><li class="li1"><div class="de1"><span class="co1">-- Server version: 5.1.66</span></div></li><li class="li1"><div class="de1"><span class="co1">-- PHP Version: 5.3.3-7+squeeze14</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">SET</span> SQL_MODE<span class="sy0">=</span><span class="st0">&quot;NO_AUTO_VALUE_ON_ZERO&quot;</span>;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="coMULTI">/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */</span>;</div></li><li class="li1"><div class="de1"><span class="coMULTI">/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */</span>;</div></li><li class="li1"><div class="de1"><span class="coMULTI">/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */</span>;</div></li><li class="li1"><div class="de1"><span class="coMULTI">/*!40101 SET NAMES utf8 */</span>;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">--</span></div></li><li class="li1"><div class="de1"><span class="co1">-- Database: `biblioteca`</span></div></li><li class="li1"><div class="de1"><span class="co1">--</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">-- --------------------------------------------------------</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">--</span></div></li><li class="li1"><div class="de1"><span class="co1">-- Table structure for table `llibres`</span></div></li><li class="li1"><div class="de1"><span class="co1">--</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">CREATE</span> <span class="kw1">TABLE</span> <span class="kw1">IF</span> <span class="kw1">NOT</span> <span class="kw1">EXISTS</span> <span class="st0">`llibres`</span> <span class="br0">&#40;</span></div></li><li class="li1"><div class="de1">  <span class="st0">`id`</span> <span class="kw1">INT</span><span class="br0">&#40;</span><span class="nu0">8</span><span class="br0">&#41;</span> <span class="kw1">NOT</span> <span class="kw1">NULL</span> <span class="kw1">AUTO_INCREMENT</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">  <span class="st0">`nom`</span> <span class="kw1">VARCHAR</span><span class="br0">&#40;</span><span class="nu0">128</span><span class="br0">&#41;</span> <span class="kw1">NOT</span> <span class="kw1">NULL</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">  <span class="st0">`autor`</span> <span class="kw1">VARCHAR</span><span class="br0">&#40;</span><span class="nu0">64</span><span class="br0">&#41;</span> <span class="kw1">NOT</span> <span class="kw1">NULL</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">  <span class="st0">`isbn`</span> <span class="kw1">VARCHAR</span><span class="br0">&#40;</span><span class="nu0">13</span><span class="br0">&#41;</span> <span class="kw1">NOT</span> <span class="kw1">NULL</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">  <span class="st0">`puntuacio`</span> <span class="kw1">INT</span><span class="br0">&#40;</span><span class="nu0">8</span><span class="br0">&#41;</span> <span class="kw1">NOT</span> <span class="kw1">NULL</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">  <span class="st0">`genero`</span> <span class="kw1">VARCHAR</span><span class="br0">&#40;</span><span class="nu0">64</span><span class="br0">&#41;</span> <span class="kw1">NOT</span> <span class="kw1">NULL</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">  <span class="kw1">PRIMARY</span> <span class="kw1">KEY</span> <span class="br0">&#40;</span><span class="st0">`id`</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#41;</span> ENGINE<span class="sy0">=</span>MyISAM  <span class="kw1">DEFAULT</span> CHARSET<span class="sy0">=</span>latin1 <span class="kw1">AUTO_INCREMENT</span><span class="sy0">=</span><span class="nu0">3</span> ;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">--</span></div></li><li class="li1"><div class="de1"><span class="co1">-- Dumping data for table `llibres`</span></div></li><li class="li1"><div class="de1"><span class="co1">--</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">INSERT</span> <span class="kw1">INTO</span> <span class="st0">`llibres`</span> <span class="br0">&#40;</span><span class="st0">`id`</span><span class="sy0">,</span> <span class="st0">`nom`</span><span class="sy0">,</span> <span class="st0">`autor`</span><span class="sy0">,</span> <span class="st0">`isbn`</span><span class="sy0">,</span> <span class="st0">`puntuacio`</span><span class="sy0">,</span> <span class="st0">`genero`</span><span class="br0">&#41;</span> <span class="kw1">VALUES</span></div></li><li class="li1"><div class="de1"><span class="br0">&#40;</span><span class="nu0">1</span><span class="sy0">,</span> <span class="st0">'Biografia a dos voces '</span><span class="sy0">,</span> <span class="st0">'Ignacio Ramonet'</span><span class="sy0">,</span> <span class="st0">'9788483065570'</span><span class="sy0">,</span> <span class="nu0">5</span><span class="sy0">,</span> <span class="st0">'Biografia'</span><span class="br0">&#41;</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1"><span class="br0">&#40;</span><span class="nu0">2</span><span class="sy0">,</span> <span class="st0">'Lo que decimos, se hace: sobre el poder de EEUU en un mundo en cambio'</span><span class="sy0">,</span> <span class="st0">'Noam Chomsky'</span><span class="sy0">,</span> <span class="st0">'9788483078341'</span><span class="sy0">,</span> <span class="nu0">5</span><span class="sy0">,</span> <span class="st0">'Assaig'</span><span class="br0">&#41;</span>;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">-- --------------------------------------------------------</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">--</span></div></li><li class="li1"><div class="de1"><span class="co1">-- Table structure for table `usuaris`</span></div></li><li class="li1"><div class="de1"><span class="co1">--</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">CREATE</span> <span class="kw1">TABLE</span> <span class="kw1">IF</span> <span class="kw1">NOT</span> <span class="kw1">EXISTS</span> <span class="st0">`usuaris`</span> <span class="br0">&#40;</span></div></li><li class="li1"><div class="de1">  <span class="st0">`id`</span> <span class="kw1">INT</span><span class="br0">&#40;</span><span class="nu0">8</span><span class="br0">&#41;</span> <span class="kw1">NOT</span> <span class="kw1">NULL</span> <span class="kw1">AUTO_INCREMENT</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">  <span class="st0">`nom`</span> <span class="kw1">VARCHAR</span><span class="br0">&#40;</span><span class="nu0">32</span><span class="br0">&#41;</span> <span class="kw1">NOT</span> <span class="kw1">NULL</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">  <span class="st0">`clau`</span> <span class="kw1">VARCHAR</span><span class="br0">&#40;</span><span class="nu0">64</span><span class="br0">&#41;</span> <span class="kw1">NOT</span> <span class="kw1">NULL</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">  <span class="st0">`tipus`</span> <span class="kw1">INT</span><span class="br0">&#40;</span><span class="nu0">2</span><span class="br0">&#41;</span> <span class="kw1">NOT</span> <span class="kw1">NULL</span> COMMENT <span class="st0">'0 admin, 1 user'</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1">  <span class="kw1">PRIMARY</span> <span class="kw1">KEY</span> <span class="br0">&#40;</span><span class="st0">`id`</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#41;</span> ENGINE<span class="sy0">=</span>MyISAM  <span class="kw1">DEFAULT</span> CHARSET<span class="sy0">=</span>latin1 <span class="kw1">AUTO_INCREMENT</span><span class="sy0">=</span><span class="nu0">3</span> ;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">--</span></div></li><li class="li1"><div class="de1"><span class="co1">-- Dumping data for table `usuaris`</span></div></li><li class="li1"><div class="de1"><span class="co1">--</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">INSERT</span> <span class="kw1">INTO</span> <span class="st0">`usuaris`</span> <span class="br0">&#40;</span><span class="st0">`id`</span><span class="sy0">,</span> <span class="st0">`nom`</span><span class="sy0">,</span> <span class="st0">`clau`</span><span class="sy0">,</span> <span class="st0">`tipus`</span><span class="br0">&#41;</span> <span class="kw1">VALUES</span></div></li><li class="li1"><div class="de1"><span class="br0">&#40;</span><span class="nu0">1</span><span class="sy0">,</span> <span class="st0">'user'</span><span class="sy0">,</span> <span class="st0">'ee11cbb19052e40b07aac0ca060c23ee'</span><span class="sy0">,</span> <span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">,</span></div></li><li class="li1"><div class="de1"><span class="br0">&#40;</span><span class="nu0">2</span><span class="sy0">,</span> <span class="st0">'admin'</span><span class="sy0">,</span> <span class="st0">'21232f297a57a5a743894a0e4a801fc3'</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">&#41;</span>;</div></li></ol></pre>

<p>
Per importar una base de dades, feu els següents passos:
</p>
<ol>
<li class="level1"><div class="li"> Creeu una base de dades nova, a la qual importareu les dades del fitxer.</div>
</li>
<li class="level1"><div class="li"> Feu clic a la pestanya <em>Import</em>.</div>
</li>
<li class="level1"><div class="li"> Seleccioneu el fitxer, fent clic al botó <em>Choose File</em> i feu clic al botó <em>Go</em>. </div>
</li>
</ol>

<p>
Com heu pogut veure, l’administració de la base de dades amb PHPMyAdmin és una tasca molt senzilla. Podeu anar comprovant que la feina amb el PHP està creant els resultats desitjats. 
</p>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

<h2><a id="autentificacio_d_usuaris_amb_bases_de_dades" >Autentificació d&#039;usuaris amb bases de dades</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és fer un sistema d’autentificació d’usuaris a partir de les bases de dades. 
</p>

<p>
<form action=""><div class="solution ioccontent">
<p>
Abans de començar a programar l’accés a bases de dades, afegim algunes variables al fitxer cap.php per tal de no haver d’anar replicant els valors d’accés durant tot el codi de la pàgina web. També, si en algun moment es modifica cap d’aquesta valors (per exemple el nom del servidor) únicament s’hauran de modificar una vegada a cap.php. 
</p>

<p>
Com a alternativa es podria especificar al començament de cada fitxer PHP del web o simplement escriure les constants de cadena cada vegada. 
</p>

<p>
Així, per simplicitat, afegim el següent codi a cap.php
</p>
<pre class="code php"><ol><li class="li1"><div class="de1"><span class="re0">$servidor</span> <span class="sy0">=</span> <span class="st0">&quot;localhost&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$userBD</span> <span class="sy0">=</span> <span class="st0">&quot;root&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$passwdBD</span> <span class="sy0">=</span> <span class="st0">&quot;root&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$nomBD</span> <span class="sy0">=</span> <span class="st0">&quot;biblioteca&quot;</span><span class="sy0">;</span></div></li></ol></pre>

<p>
El següent pas serà el de fer servir un fitxer (login.html) que tindrà un formulari per enviar les dades d’usuari i contrasenya. Aquest és un formulari estàndard per enviar dades. 
</p>

<p>
index.php
</p>
<pre class="code html4strict"><ol><li class="li1"><div class="de1"><span class="sc2">&lt;?php</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc2"><span class="sy0">/</span>*</span></div></li><li class="li1"><div class="de1"><span class="sc2">  Fitxer index.php</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc2">    Fitxer d<span class="st0">'inici</span></span></div></li><li class="li1"><div class="de1"><span class="sc2"> </span></div></li><li class="li1"><div class="de1"><span class="sc2"><span class="st0">*/</span></span></div></li><li class="li1"><div class="de1"><span class="sc2"> </span></div></li><li class="li1"><div class="de1"><span class="sc2"><span class="st0">//Arguments per la capçalera header. Aquestes variables seran visibles</span></span></div></li><li class="li1"><div class="de1"><span class="sc2"><span class="st0">//des de cap.php</span></span></div></li><li class="li1"><div class="de1"><span class="sc2"><span class="st0">$TITOL = &quot;cookie&quot;;</span></span></div></li><li class="li1"><div class="de1"><span class="sc2"><span class="st0">$ESTIL = &quot;estil.css&quot;;</span></span></div></li><li class="li1"><div class="de1"><span class="sc2"> </span></div></li><li class="li1"><div class="de1"><span class="sc2"><span class="st0">include(&quot;cap.php&quot;);</span></span></div></li><li class="li1"><div class="de1"><span class="sc2"><span class="st0">session_unset();</span></span></div></li><li class="li1"><div class="de1"><span class="sc2"><span class="st0">?&gt;</span></span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc-1">&lt;!-- Formulari d'entrada --&gt;</span></div></li><li class="li1"><div class="de1"><span class="sc2">&lt;<a href="http://december.com/html/4/element/div.html"><span class="kw2">div</span></a> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;login&quot;</span>&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc2">&lt;<a href="http://december.com/html/4/element/form.html"><span class="kw2">form</span></a> <span class="kw3">action</span><span class="sy0">=</span><span class="st0">&quot;vista.php&quot;</span>  <span class="kw3">method</span><span class="sy0">=</span><span class="st0">&quot;POST&quot;</span> <span class="kw3">name</span><span class="sy0">=</span><span class="st0">&quot;entrada&quot;</span>&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="sc2">&lt;<a href="http://december.com/html/4/element/table.html"><span class="kw2">table</span></a>&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">		<span class="sc2">&lt;<a href="http://december.com/html/4/element/tr.html"><span class="kw2">tr</span></a>&gt;</span></div></li><li class="li1"><div class="de1">    			<span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a> <span class="kw3">align</span><span class="sy0">=</span><span class="st0">&quot;right&quot;</span>&gt;</span>Nom<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span></div></li><li class="li1"><div class="de1">		        <span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a> <span class="kw3">align</span><span class="sy0">=</span><span class="st0">&quot;left&quot;</span>&gt;</span>  </div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">		 		 <span class="sc2">&lt;?php</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc2">					if<span class="br0">&#40;</span>isset<span class="br0">&#40;</span>$_COOKIE<span class="br0">&#91;</span><span class="st0">&quot;nom&quot;</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>			</span></div></li><li class="li1"><div class="de1"><span class="sc2">					<span class="br0">&#123;</span></span></div></li><li class="li1"><div class="de1"><span class="sc2">						$nom <span class="sy0">=</span> $_COOKIE<span class="br0">&#91;</span><span class="st0">&quot;nom&quot;</span><span class="br0">&#93;</span>;</span></div></li><li class="li1"><div class="de1"><span class="sc2">					<span class="br0">&#125;</span></span></div></li><li class="li1"><div class="de1"><span class="sc2">					else</span></div></li><li class="li1"><div class="de1"><span class="sc2">					<span class="br0">&#123;</span></span></div></li><li class="li1"><div class="de1"><span class="sc2">						$nom <span class="sy0">=</span> <span class="st0">&quot;&quot;</span>;</span></div></li><li class="li1"><div class="de1"><span class="sc2">					<span class="br0">&#125;</span></span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc2">				?&gt;</span></div></li><li class="li1"><div class="de1">	   			<span class="sc2">&lt;<a href="http://december.com/html/4/element/input.html"><span class="kw2">input</span></a> <span class="kw3">type</span><span class="sy0">=</span><span class="st0">&quot;text&quot;</span> <span class="kw3">name</span><span class="sy0">=</span><span class="st0">&quot;nom&quot;</span> <span class="kw3">VALUE</span><span class="sy0">=</span><span class="st0">&quot;&lt;?php echo $nom ?&gt;</span></span>&quot; size=&quot;15&quot; maxlength=&quot;15&quot; /&gt; </div></li><li class="li1"><div class="de1">				<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span></div></li><li class="li1"><div class="de1">    		<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/tr.html"><span class="kw2">tr</span></a>&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">		<span class="sc2">&lt;<a href="http://december.com/html/4/element/tr.html"><span class="kw2">tr</span></a>&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">			<span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a> <span class="kw3">align</span><span class="sy0">=</span><span class="st0">&quot;right&quot;</span>&gt;</span>Passwd<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span></div></li><li class="li1"><div class="de1">			<span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span></div></li><li class="li1"><div class="de1">		       <span class="sc2">&lt;?php</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc2">		    	if<span class="br0">&#40;</span>isset<span class="br0">&#40;</span>$_COOKIE<span class="br0">&#91;</span><span class="st0">&quot;passwd&quot;</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>			</span></div></li><li class="li1"><div class="de1"><span class="sc2">				<span class="br0">&#123;</span></span></div></li><li class="li1"><div class="de1"><span class="sc2">					$passwd <span class="sy0">=</span> $_COOKIE<span class="br0">&#91;</span><span class="st0">&quot;passwd&quot;</span><span class="br0">&#93;</span>;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc2">					<span class="sy0">//</span>Per deixar el checkbox marcat</span></div></li><li class="li1"><div class="de1"><span class="sc2">					$recordar <span class="sy0">=</span> <span class="st0">&quot;CHECKED&quot;</span>;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc2">				<span class="br0">&#125;</span></span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc2">				else</span></div></li><li class="li1"><div class="de1"><span class="sc2">				<span class="br0">&#123;</span></span></div></li><li class="li1"><div class="de1"><span class="sc2">					$passwd <span class="sy0">=</span> <span class="st0">&quot;&quot;</span>;</span></div></li><li class="li1"><div class="de1"><span class="sc2">					$recordar <span class="sy0">=</span> <span class="st0">&quot;&quot;</span>;</span></div></li><li class="li1"><div class="de1"><span class="sc2">				<span class="br0">&#125;</span>					</span></div></li><li class="li1"><div class="de1"><span class="sc2">			?&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">		    	<span class="sc2">&lt;<a href="http://december.com/html/4/element/input.html"><span class="kw2">INPUT</span></a> <span class="kw3">TYPE</span><span class="sy0">=</span>PASSWORD <span class="kw3">NAME</span><span class="sy0">=</span><span class="st0">&quot;passwd&quot;</span> <span class="kw3">VALUE</span><span class="sy0">=</span><span class="st0">&quot;&lt;?php echo $passwd?&gt;</span></span>&quot; SIZE=&quot;15&quot; MAXLENGTH=&quot;15&quot;&gt;</div></li><li class="li1"><div class="de1">		    <span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span>   </div></li><li class="li1"><div class="de1">    	<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/tr.html"><span class="kw2">tr</span></a>&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">	 	 <span class="sc2">&lt;<a href="http://december.com/html/4/element/tr.html"><span class="kw2">tr</span></a>&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">			<span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a> <span class="kw3">align</span><span class="sy0">=</span><span class="st0">&quot;right&quot;</span>&gt;</span>  <span class="sc2">&lt;<a href="http://december.com/html/4/element/input.html"><span class="kw2">input</span></a> <span class="kw3">type</span><span class="sy0">=</span><span class="st0">&quot;checkbox&quot;</span> <span class="kw3">name</span><span class="sy0">=</span><span class="st0">&quot;recordar&quot;</span> &lt;?php echo $recordar ?&gt;</span>/&gt; <span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span></div></li><li class="li1"><div class="de1">		     	<span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span>Recordar en aquest equip<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span></div></li><li class="li1"><div class="de1">		<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/tr.html"><span class="kw2">tr</span></a>&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">		<span class="sc2">&lt;<a href="http://december.com/html/4/element/tr.html"><span class="kw2">tr</span></a>&gt;</span></div></li><li class="li1"><div class="de1">			<span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span></div></li><li class="li1"><div class="de1">			<span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a> <span class="kw3">colspan</span><span class="sy0">=</span><span class="st0">&quot;2&quot;</span> <span class="kw3">align</span><span class="sy0">=</span><span class="st0">&quot;center&quot;</span>&gt;</span></div></li><li class="li1"><div class="de1">				<span class="sc2">&lt;<a href="http://december.com/html/4/element/input.html"><span class="kw2">input</span></a> <span class="kw3">type</span><span class="sy0">=</span><span class="st0">&quot;submit&quot;</span> <span class="kw3">value</span><span class="sy0">=</span><span class="st0">&quot;Enviar&quot;</span>&gt;</span>  <span class="sc2">&lt;<a href="http://december.com/html/4/element/input.html"><span class="kw2">INPUT</span></a> <span class="kw3">type</span><span class="sy0">=</span><span class="st0">&quot;reset&quot;</span> <span class="kw3">value</span><span class="sy0">=</span><span class="st0">&quot;Esborrar&quot;</span> &gt;</span></div></li><li class="li1"><div class="de1">			<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    	<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/tr.html"><span class="kw2">tr</span></a>&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">	<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/table.html"><span class="kw2">table</span></a>&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/form.html"><span class="kw2">form</span></a>&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/div.html"><span class="kw2">div</span></a>&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc2">&lt;?php</span></div></li><li class="li1"><div class="de1"><span class="sc2">include<span class="br0">&#40;</span><span class="st0">&quot;peu.php&quot;</span><span class="br0">&#41;</span>;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc2">?&gt;</span></div></li></ol></pre>

<p>
A continuació el fitxer vista.php farà la comprovació sobre les dades d’usuari i clau, fent una consulta a la base de dades. 
</p>

<p>
En primer lloc es connecta al servidor i es selecciona la base de dades amb la qual treballarem.
</p>
<pre class="code php"><ol><li class="li1"><div class="de1">  <span class="co1">//Connectem al servidor</span></div></li><li class="li1"><div class="de1">	<span class="re0">$connexio</span> <span class="sy0">=</span> <a href="http://www.php.net/mysql_connect"><span class="kw3">mysql_connect</span></a><span class="br0">&#40;</span><span class="re0">$servidor</span><span class="sy0">,</span> <span class="re0">$userBD</span><span class="sy0">,</span> <span class="re0">$passwdBD</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span><span class="re0">$connexio</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">        <a href="http://www.php.net/exit"><span class="kw3">exit</span></a><span class="br0">&#40;</span><span class="st_h">'No es pot connectar:'</span><span class="sy0">.</span> <a href="http://www.php.net/mysql_error"><span class="kw3">mysql_error</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">	<span class="kw1">if</span><span class="br0">&#40;</span><span class="sy0">!</span><a href="http://www.php.net/mysql_select_db"><span class="kw3">mysql_select_db</span></a><span class="br0">&#40;</span><span class="re0">$nomBD</span><span class="sy0">,</span> <span class="re0">$connexio</span><span class="br0">&#41;</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">  	 <a href="http://www.php.net/exit"><span class="kw3">exit</span></a><span class="br0">&#40;</span><span class="st0">&quot;Error al connectar amb la base de dades&quot;</span><span class="sy0">.</span> <a href="http://www.php.net/mysql_error"><span class="kw3">mysql_error</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>

<p>
Per crear la consulta podeu fer servir la funció <code>sprintf</code> que té un funcionament semblant a la de C. És igual que el <code>printf</code>, però en lloc de mostrar per pantalla, retorna el resultat en forma de cadena. Podeu veure’n el funcionament aquí: 
<a href="http://www.php.net/manual/en/function.sprintf.php" class="urlextern" title="http://www.php.net/manual/en/function.sprintf.php"  rel="nofollow">http://www.php.net/manual/en/function.sprintf.php</a>
</p>

<p>
Fixeu-vos que, com que les contrasenyes estan encriptades a la base de dades amb MD5, heu d’enviar el camp de la contrasenya també encriptat. 
</p>
<pre class="code php"><ol><li class="li1"><div class="de1"><span class="co1">//Podeu mostrar aquesta cadena per pantalla per comprobar que la consulta sigui correcta </span></div></li><li class="li1"><div class="de1">  <span class="re0">$consulta</span> <span class="sy0">=</span> <a href="http://www.php.net/sprintf"><span class="kw3">sprintf</span></a><span class="br0">&#40;</span><span class="st_h">'select * from usuaris where nom=&quot;%s&quot; and clau = &quot;%s&quot;'</span><span class="sy0">,</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st0">&quot;nom&quot;</span><span class="br0">&#93;</span><span class="sy0">,</span> <a href="http://www.php.net/md5"><span class="kw3">md5</span></a><span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st0">&quot;passwd&quot;</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>

<p>
A continuació es llança la consulta a la base de dades i es comprova si hi ha un usuari amb aquest nom i contrasenya. 
</p>
<pre class="code php"><ol><li class="li1"><div class="de1">  <span class="co1">//Fem la consulta</span></div></li><li class="li1"><div class="de1">	<span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$result</span> <span class="sy0">=</span> <a href="http://www.php.net/mysql_query"><span class="kw3">mysql_query</span></a><span class="br0">&#40;</span><span class="re0">$consulta</span><span class="sy0">,</span> <span class="re0">$connexio</span><span class="br0">&#41;</span>  <span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">	<span class="br0">&#123;</span>				</div></li><li class="li1"><div class="de1">		<span class="co1">//Mirem quants registres ha retornat la consulta			</span></div></li><li class="li1"><div class="de1">		<span class="re0">$afectades</span> <span class="sy0">=</span> <a href="http://www.php.net/mysql_num_rows"><span class="kw3">mysql_num_rows</span></a><span class="br0">&#40;</span><span class="re0">$result</span><span class="br0">&#41;</span><span class="sy0">;</span>		</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">		<span class="co1">//Existeix un usuari amb aquest nom i contrasenya</span></div></li><li class="li1"><div class="de1">		<span class="kw1">if</span><span class="br0">&#40;</span><span class="re0">$afectades</span><span class="sy0">!=</span><span class="nu0">0</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">		<span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">      <span class="co1">//login correcte</span></div></li><li class="li1"><div class="de1">      <a href="http://www.php.net/printf"><span class="kw3">printf</span></a><span class="br0">&#40;</span><span class="st_h">'&lt;div class=&quot;login&quot;&gt;Login correcte &lt;/div&gt;'</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  	<span class="kw1">else</span></div></li><li class="li1"><div class="de1">		<span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">			<span class="co1">//Login incorrecte</span></div></li><li class="li1"><div class="de1">			<a href="http://www.php.net/printf"><span class="kw3">printf</span></a><span class="br0">&#40;</span><span class="st_h">'&lt;div class=&quot;login&quot;&gt;Nom o password incorrecte &lt;/div&gt;'</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">		<span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">else</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#123;</span>			</div></li><li class="li1"><div class="de1">		<a href="http://www.php.net/printf"><span class="kw3">printf</span></a><span class="br0">&#40;</span><span class="st_h">'&lt;div class=&quot;login&quot;&gt;Error al fer la consulta &lt;/div&gt;'</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">	<span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">	 <span class="co1">//Tanquem la connexió</span></div></li><li class="li1"><div class="de1">	 <a href="http://www.php.net/mysql_close"><span class="kw3">mysql_close</span></a><span class="br0">&#40;</span><span class="re0">$connexio</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li></ol></pre>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

<h2><a id="creacio_de_registres_amb_la_base_de_dades" >Creació de registres amb la base de dades</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és crear nous registres a la base de dades mitjançant un formulari. Creeu un programa en PHP (en diferents fitxers) que afegirà llibres a la base de dades. 
</p>

<p>
Abans d’inserir un llibre, heu de comprovar que no existeixi cap llibre amb el mateix ISBN. 
<form action=""><div class="solution ioccontent">
<p>
El primer pas és fer un formulari per enviar totes les dades del llibre que volem crear. El següent codi servirà per aquest propòsit:
</p>

<p>
index.html
</p>
<pre class="code html4strict"><ol><li class="li1"><div class="de1"><span class="sc2">&lt;<a href="http://december.com/html/4/element/h1.html"><span class="kw2">h1</span></a>&gt;</span> Crear llibre <span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/h1.html"><span class="kw2">h1</span></a>&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc2">&lt;<a href="http://december.com/html/4/element/form.html"><span class="kw2">FORM</span></a> <span class="kw3">METHOD</span><span class="sy0">=</span>POST <span class="kw3">ACTION</span><span class="sy0">=</span><span class="st0">&quot;creallibre.php&quot;</span>&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    <span class="sc2">&lt;<a href="http://december.com/html/4/element/table.html"><span class="kw2">table</span></a>&gt;</span></div></li><li class="li1"><div class="de1">        <span class="sc2">&lt;<a href="http://december.com/html/4/element/tr.html"><span class="kw2">tr</span></a>&gt;</span></div></li><li class="li1"><div class="de1">            <span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span>Nom<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span></div></li><li class="li1"><div class="de1">            <span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;&lt;<a href="http://december.com/html/4/element/input.html"><span class="kw2">INPUT</span></a> <span class="kw3">TYPE</span><span class="sy0">=</span><span class="kw3">TEXT</span> <span class="kw3">NAME</span><span class="sy0">=</span><span class="st0">&quot;nom&quot;</span> <span class="kw3">VALUE</span><span class="sy0">=</span><span class="st0">&quot;&quot;</span> <span class="kw3">SIZE</span><span class="sy0">=</span><span class="nu0">32</span> <span class="kw3">MAXLENGTH</span><span class="sy0">=</span><span class="nu0">128</span>&gt;&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span>        </div></li><li class="li1"><div class="de1">        <span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/tr.html"><span class="kw2">tr</span></a>&gt;</span></div></li><li class="li1"><div class="de1">        <span class="sc2">&lt;<a href="http://december.com/html/4/element/tr.html"><span class="kw2">tr</span></a>&gt;</span></div></li><li class="li1"><div class="de1">            <span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span>Autor<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span></div></li><li class="li1"><div class="de1">            <span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;&lt;<a href="http://december.com/html/4/element/input.html"><span class="kw2">INPUT</span></a> <span class="kw3">TYPE</span><span class="sy0">=</span><span class="kw3">TEXT</span> <span class="kw3">NAME</span><span class="sy0">=</span><span class="st0">&quot;autor&quot;</span> <span class="kw3">VALUE</span><span class="sy0">=</span><span class="st0">&quot;&quot;</span> <span class="kw3">SIZE</span><span class="sy0">=</span><span class="nu0">32</span> <span class="kw3">MAXLENGTH</span><span class="sy0">=</span><span class="nu0">128</span>&gt;&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span>        </div></li><li class="li1"><div class="de1">        <span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/tr.html"><span class="kw2">tr</span></a>&gt;</span></div></li><li class="li1"><div class="de1">        <span class="sc2">&lt;<a href="http://december.com/html/4/element/tr.html"><span class="kw2">tr</span></a>&gt;</span></div></li><li class="li1"><div class="de1">         	<span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span>ISBN<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span></div></li><li class="li1"><div class="de1">           	<span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a> &gt;&lt;<a href="http://december.com/html/4/element/input.html"><span class="kw2">INPUT</span></a> <span class="kw3">TYPE</span><span class="sy0">=</span><span class="kw3">TEXT</span> <span class="kw3">NAME</span><span class="sy0">=</span><span class="st0">&quot;isbn&quot;</span> <span class="kw3">VALUE</span><span class="sy0">=</span><span class="st0">&quot;&quot;</span> <span class="kw3">SIZE</span><span class="sy0">=</span><span class="nu0">32</span> <span class="kw3">MAXLENGTH</span><span class="sy0">=</span><span class="nu0">32</span>&gt;&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span>        </div></li><li class="li1"><div class="de1">        <span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/tr.html"><span class="kw2">tr</span></a>&gt;</span>            </div></li><li class="li1"><div class="de1">        <span class="sc2">&lt;<a href="http://december.com/html/4/element/tr.html"><span class="kw2">tr</span></a>&gt;</span></div></li><li class="li1"><div class="de1">            <span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span>Puntuació<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span></div></li><li class="li1"><div class="de1">            <span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span></div></li><li class="li1"><div class="de1">				<span class="sc2">&lt;<a href="http://december.com/html/4/element/select.html"><span class="kw2">SELECT</span></a> <span class="kw3">NAME</span><span class="sy0">=</span><span class="st0">&quot;puntuacio&quot;</span>&gt;</span></div></li><li class="li1"><div class="de1">					<span class="sc2">&lt;<a href="http://december.com/html/4/element/option.html"><span class="kw2">OPTION</span></a> <span class="kw3">SELECTED</span> <span class="kw3">VALUE</span><span class="sy0">=</span><span class="nu0">1</span>&gt;</span> 1</div></li><li class="li1"><div class="de1">					<span class="sc2">&lt;<a href="http://december.com/html/4/element/option.html"><span class="kw2">OPTION</span></a> <span class="kw3">VALUE</span><span class="sy0">=</span><span class="nu0">2</span>&gt;</span> 2</div></li><li class="li1"><div class="de1">					<span class="sc2">&lt;<a href="http://december.com/html/4/element/option.html"><span class="kw2">OPTION</span></a> <span class="kw3">VALUE</span><span class="sy0">=</span><span class="nu0">3</span>&gt;</span> 3</div></li><li class="li1"><div class="de1">					<span class="sc2">&lt;<a href="http://december.com/html/4/element/option.html"><span class="kw2">OPTION</span></a> <span class="kw3">VALUE</span><span class="sy0">=</span><span class="nu0">4</span>&gt;</span> 4</div></li><li class="li1"><div class="de1">					<span class="sc2">&lt;<a href="http://december.com/html/4/element/option.html"><span class="kw2">OPTION</span></a> <span class="kw3">VALUE</span><span class="sy0">=</span><span class="nu0">5</span>&gt;</span> 5</div></li><li class="li1"><div class="de1">				<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/select.html"><span class="kw2">SELECT</span></a>&gt;</span></div></li><li class="li1"><div class="de1">			<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span>        </div></li><li class="li1"><div class="de1">        <span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/tr.html"><span class="kw2">tr</span></a>&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">        <span class="sc2">&lt;<a href="http://december.com/html/4/element/tr.html"><span class="kw2">tr</span></a>&gt;</span></div></li><li class="li1"><div class="de1">            <span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span>Genere<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span></div></li><li class="li1"><div class="de1">            <span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;&lt;<a href="http://december.com/html/4/element/input.html"><span class="kw2">INPUT</span></a> <span class="kw3">TYPE</span><span class="sy0">=</span><span class="kw3">TEXT</span> <span class="kw3">NAME</span><span class="sy0">=</span><span class="st0">&quot;genere&quot;</span> <span class="kw3">VALUE</span><span class="sy0">=</span><span class="st0">&quot;&quot;</span> <span class="kw3">SIZE</span><span class="sy0">=</span><span class="nu0">32</span> <span class="kw3">MAXLENGTH</span><span class="sy0">=</span><span class="nu0">128</span>&gt;&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span>        </div></li><li class="li1"><div class="de1">        <span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/tr.html"><span class="kw2">tr</span></a>&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">                <span class="sc2">&lt;<a href="http://december.com/html/4/element/tr.html"><span class="kw2">tr</span></a>&gt;</span></div></li><li class="li1"><div class="de1">					<span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span></div></li><li class="li1"><div class="de1">                    <span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;&lt;<a href="http://december.com/html/4/element/input.html"><span class="kw2">INPUT</span></a> <span class="kw3">TYPE</span><span class="sy0">=</span>SUBMIT&gt;</span></div></li><li class="li1"><div class="de1">                    <span class="sc2">&lt;<a href="http://december.com/html/4/element/input.html"><span class="kw2">INPUT</span></a> <span class="kw3">TYPE</span><span class="sy0">=</span>RESET&gt;&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span>        </div></li><li class="li1"><div class="de1">                <span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/tr.html"><span class="kw2">tr</span></a>&gt;</span></div></li><li class="li1"><div class="de1">	            <span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/table.html"><span class="kw2">table</span></a>&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">	            <span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/form.html"><span class="kw2">FORM</span></a>&gt;</span></div></li></ol></pre>

<p>
A continuació rebrem les dades en el fitxer creallibre.php. En primer lloc podem fer una comprovació que ens estan enviant dades pel $_POST, i mostrar-les per pantalla. Mostrar el contingut del $_POST per pantalla, en les fases inicials del desenvolupament us ajudarà a estalviar-vos molts problemes, ja que podreu detectar errors ràpidament. Moltes vegades, es perden hores per errors tan trivials com intentar llegir la variable $_POST[“nom”], quan el formulari el que ha enviat és $_POST[“nombre”], per exemple. Mirant un únic fitxer PHP és molt difícil trobar aquestes errades, ja que tota la programació del fitxer és correcta. 
</p>

<p>
Posteriorment, podeu amagar el contingut de $_POST per tal que els usuaris no ho vegin. Penseu en això, com una tècnica a fer servir durant el desenvolupament. 
</p>
<pre class="code php"><ol><li class="li1"><div class="de1"><span class="co1">//Mirem si estem accedint des del formulari de crear llibre</span></div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">&#40;</span><a href="http://www.php.net/isset"><span class="kw3">isset</span></a><span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st0">&quot;isbn&quot;</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">  <span class="co1">//Variables de POST definides</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">	<span class="co1">//Podem mostrar tot el contingut de POST a mode de debug</span></div></li><li class="li1"><div class="de1">	<span class="re0">$var</span> <span class="sy0">=</span> <span class="st0">&quot;&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">	<span class="kw1">foreach</span><span class="br0">&#40;</span><span class="re0">$_POST</span> <span class="kw1">as</span> <span class="re0">$key</span> <span class="sy0">=&gt;</span> <span class="re0">$value</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">		<span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">			<span class="re0">$var</span> <span class="sy0">.=</span> <span class="st0">&quot;POST[&quot;</span> <span class="sy0">.</span> <span class="re0">$key</span> <span class="sy0">.</span> <span class="st0">&quot;]= &quot;</span> <span class="sy0">.</span> <span class="re0">$value</span> <span class="sy0">.</span> <span class="st0">&quot;&lt;br&gt;&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">			<span class="co1">//$var = $var . &quot;POST[&quot; . $key . &quot;]= &quot; . $value . &quot;&lt;br&gt;&quot;;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">		<span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">			<span class="kw1">echo</span><span class="br0">&#40;</span><span class="re0">$var</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">	<span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">  <span class="kw1">else</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">    <span class="co1">//Sense dades del formulari</span></div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li></ol></pre>

<p>
A continuació ens connectem al servidor, escollim la base de dades i, en primer lloc, comprovem si ja existeix un llibre amb el mateix ISBN. 
</p>

<p>
De nou, com a tècnica de desenvolupament, podeu mostrar el contingut de la consulta abans d’executar-lo, per comprovar si és correcte. Podeu copiar i enganxar aquesta consulta a la pestanya <em>SQL</em> de PHPMyAdmin per comprovar si els resultats obtinguts són els esperats. 
</p>
<pre class="code php"><ol><li class="li1"><div class="de1"><span class="co1">//Connectem al servidor</span></div></li><li class="li1"><div class="de1">  <span class="re0">$connexio</span> <span class="sy0">=</span> <a href="http://www.php.net/mysql_connect"><span class="kw3">mysql_connect</span></a><span class="br0">&#40;</span><span class="re0">$servidor</span><span class="sy0">,</span> <span class="re0">$userBD</span><span class="sy0">,</span> <span class="re0">$passwdBD</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span><span class="re0">$connexio</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">        <a href="http://www.php.net/exit"><span class="kw3">exit</span></a><span class="br0">&#40;</span><span class="st_h">'No es pot connectar:'</span><span class="sy0">.</span> <a href="http://www.php.net/mysql_error"><span class="kw3">mysql_error</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">	<span class="kw1">if</span><span class="br0">&#40;</span><span class="sy0">!</span><a href="http://www.php.net/mysql_select_db"><span class="kw3">mysql_select_db</span></a><span class="br0">&#40;</span><span class="re0">$nomBD</span><span class="sy0">,</span> <span class="re0">$connexio</span><span class="br0">&#41;</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">  	 <a href="http://www.php.net/exit"><span class="kw3">exit</span></a><span class="br0">&#40;</span><span class="st0">&quot;Error al connectar amb la base de dades&quot;</span><span class="sy0">.</span> <a href="http://www.php.net/mysql_error"><span class="kw3">mysql_error</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">	<span class="co1">//En primer lloc comprovem que no hi ha cap llibre amb el mateix isbn</span></div></li><li class="li1"><div class="de1">	<span class="re0">$consulta</span> <span class="sy0">=</span> <a href="http://www.php.net/sprintf"><span class="kw3">sprintf</span></a><span class="br0">&#40;</span><span class="st_h">'select * from llibres where isbn=&quot;%s&quot; '</span><span class="sy0">,</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st0">&quot;isbn&quot;</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">	<span class="kw1">echo</span> <span class="re0">$consulta</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">	<span class="co1">//Fem la consulta</span></div></li><li class="li1"><div class="de1">	<span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$result</span> <span class="sy0">=</span> <a href="http://www.php.net/mysql_query"><span class="kw3">mysql_query</span></a><span class="br0">&#40;</span><span class="re0">$consulta</span><span class="sy0">,</span> <span class="re0">$connexio</span><span class="br0">&#41;</span>  <span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">	<span class="br0">&#123;</span>				</div></li><li class="li1"><div class="de1">		<span class="co1">//Mirem quants registres ha retornat la consulta			</span></div></li><li class="li1"><div class="de1">		<span class="re0">$afectades</span> <span class="sy0">=</span> <a href="http://www.php.net/mysql_num_rows"><span class="kw3">mysql_num_rows</span></a><span class="br0">&#40;</span><span class="re0">$result</span><span class="br0">&#41;</span><span class="sy0">;</span>		</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">		<span class="co1">//Existeix un llibre amb aquest isbn</span></div></li><li class="li1"><div class="de1">		<span class="kw1">if</span><span class="br0">&#40;</span><span class="re0">$afectades</span><span class="sy0">!=</span><span class="nu0">0</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">		<span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">			<span class="co1">//Llibre existent</span></div></li><li class="li1"><div class="de1">			<a href="http://www.php.net/printf"><span class="kw3">printf</span></a><span class="br0">&#40;</span><span class="st_h">'&lt;div class=&quot;login&quot;&gt;Ja existeix un llibre amb ISBN = %s &lt;/div&gt;'</span><span class="sy0">,</span>  <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st0">&quot;isbn&quot;</span><span class="br0">&#93;</span> <span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">		<span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">		<span class="kw1">else</span></div></li><li class="li1"><div class="de1">		<span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">			<span class="co1">//No existeix cap llibre, el creem</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  <span class="kw1">else</span></div></li><li class="li1"><div class="de1">	<span class="br0">&#123;</span>			</div></li><li class="li1"><div class="de1">		<a href="http://www.php.net/printf"><span class="kw3">printf</span></a><span class="br0">&#40;</span><span class="st_h">'&lt;div class=&quot;login&quot;&gt;Error al fer la consulta &lt;/div&gt;'</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">	<span class="br0">&#125;</span></div></li></ol></pre>

<p>
Finalment, en cas que no existeixi cap llibre a la base de dades amb el mateix ISBN, el creeu amb una altra sentència MySQL. 
</p>
<pre class="code php"><ol><li class="li1"><div class="de1"><span class="re0">$consulta</span> <span class="sy0">=</span> <a href="http://www.php.net/sprintf"><span class="kw3">sprintf</span></a><span class="br0">&#40;</span><span class="st_h">'insert into llibres (nom, autor, isbn, puntuacio, genere) values (&quot;%s&quot;, &quot;%s&quot;, &quot;%s&quot;, &quot;%s&quot;, &quot;%s&quot;)'</span><span class="sy0">,</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st0">&quot;nom&quot;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st0">&quot;autor&quot;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st0">&quot;isbn&quot;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st0">&quot;puntuacio&quot;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st0">&quot;genere&quot;</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  		<span class="co1">//echo $consulta;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">			<span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$result</span> <span class="sy0">=</span> <a href="http://www.php.net/mysql_query"><span class="kw3">mysql_query</span></a><span class="br0">&#40;</span><span class="re0">$consulta</span><span class="sy0">,</span> <span class="re0">$connexio</span><span class="br0">&#41;</span>  <span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">			<span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">				<span class="co1">//Inserció correcta</span></div></li><li class="li1"><div class="de1">				<a href="http://www.php.net/printf"><span class="kw3">printf</span></a><span class="br0">&#40;</span><span class="st_h">'&lt;div class=&quot;login&quot;&gt;Inserció correcta &lt;/div&gt;'</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">			<span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">			<span class="kw1">else</span></div></li><li class="li1"><div class="de1">			<span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">				<span class="co1">//Error a l'inserir</span></div></li><li class="li1"><div class="de1">				<a href="http://www.php.net/printf"><span class="kw3">printf</span></a><span class="br0">&#40;</span><span class="st_h">'&lt;div class=&quot;login&quot;&gt;Error inserint &lt;/div&gt;'</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">			<span class="br0">&#125;</span></div></li></ol></pre>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

<h2><a id="obtencio_de_registres_de_la_base_de_dades" >Obtenció de registres de la base de dades</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és obtenir registres de la base de dades i mostrar-los en forma de taula. Creeu un programa en PHP (en diferents fitxers) que mostrarà els llibres de la base de dades. A més a més, la pàgina principal mostrarà un formulari en el qual es podrà escollir la puntuació dels llibres que volem cercar a la base de dades.  
</p>

<p>
<form action=""><div class="solution ioccontent">
<p>
Per fer l’activitat més interessant, farem un formulari que mostri tots els diferents camps dels llibres. El farem operatiu únicament amb la cerca per puntuació dels llibres, però queda obert per tal que l’alumne pugui fer modificacions de l’activitat per fer cerques per nom, autor o fins i tot, més d’un camp. 
</p>

<p>
L’estructura general de la pàgina serà la següent:
</p>
<pre class="code php"><ol><li class="li1"><div class="de1">Mostrem formulari <span class="br0">&#40;</span>l<span class="st_h">'objectiu del formulari serà la pròpia pàgina, es a dir, s'</span>enviarà les dades a sí mateixa<span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">&#40;</span>no s<span class="st_h">'ha enviat la puntuació a través del formulari)</span></div></li><li class="li1"><div class="de1"><span class="st_h">{</span></div></li><li class="li1"><div class="de1"><span class="st_h">  consulta = mostrar tots els llibres</span></div></li><li class="li1"><div class="de1"><span class="st_h">}</span></div></li><li class="li1"><div class="de1"><span class="st_h">else</span></div></li><li class="li1"><div class="de1"><span class="st_h">{</span></div></li><li class="li1"><div class="de1"><span class="st_h">  consulta = mostrar els llibres amb la puntuació rebuda del POST</span></div></li><li class="li1"><div class="de1"><span class="st_h">}</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="st_h">Realitzar consulta</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="st_h">Mostrar els llibres un per cada fila d'</span>una taula</div></li></ol></pre>

<p>
L’objectiu és mostrar un formulari com el que es pot veure a la següent figura. Totes les caixes estaran dins de la mateixa fila: 
</p>
<div class="iocfigure"><a name="Figura A6"></a>
<p>
<figure>
<figcaption><span class="figuretitle">Figura</span>

Resultat del formulari

</figcaption><img src="../media/asxm09u1_10.png" alt="" /></figure>

</p>
</div><pre class="code html4strict"><ol><li class="li1"><div class="de1"><span class="sc-1">&lt;!-- Formulari d'entrada --&gt;</span></div></li><li class="li1"><div class="de1"><span class="sc2">&lt;<a href="http://december.com/html/4/element/h1.html"><span class="kw2">h1</span></a>&gt;</span> Mostrar llibres <span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/h1.html"><span class="kw2">h1</span></a>&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc2">&lt;<a href="http://december.com/html/4/element/form.html"><span class="kw2">FORM</span></a> <span class="kw3">METHOD</span><span class="sy0">=</span>POST <span class="kw3">ACTION</span><span class="sy0">=</span><span class="st0">&quot;index.php&quot;</span>&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    <span class="sc2">&lt;<a href="http://december.com/html/4/element/table.html"><span class="kw2">table</span></a>&gt;</span></div></li><li class="li1"><div class="de1">        <span class="sc2">&lt;<a href="http://december.com/html/4/element/tr.html"><span class="kw2">tr</span></a>&gt;</span></div></li><li class="li1"><div class="de1">  		<span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span></div></li><li class="li1"><div class="de1">            <span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span>Nom<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span></div></li><li class="li1"><div class="de1">            <span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;&lt;<a href="http://december.com/html/4/element/input.html"><span class="kw2">INPUT</span></a> <span class="kw3">TYPE</span><span class="sy0">=</span><span class="kw3">TEXT</span> <span class="kw3">NAME</span><span class="sy0">=</span><span class="st0">&quot;nom&quot;</span> <span class="kw3">VALUE</span><span class="sy0">=</span><span class="st0">&quot; &quot;</span> <span class="kw3">SIZE</span><span class="sy0">=</span><span class="nu0">16</span> <span class="kw3">MAXLENGTH</span><span class="sy0">=</span><span class="nu0">32</span>&gt;&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span>  </div></li><li class="li1"><div class="de1">			<span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span>Autor<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span></div></li><li class="li1"><div class="de1">			<span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;&lt;<a href="http://december.com/html/4/element/input.html"><span class="kw2">INPUT</span></a> <span class="kw3">TYPE</span><span class="sy0">=</span><span class="kw3">TEXT</span> <span class="kw3">NAME</span><span class="sy0">=</span><span class="st0">&quot;autor&quot;</span> <span class="kw3">VALUE</span><span class="sy0">=</span><span class="st0">&quot; &quot;</span> <span class="kw3">SIZE</span><span class="sy0">=</span><span class="nu0">16</span> <span class="kw3">MAXLENGTH</span><span class="sy0">=</span><span class="nu0">32</span>&gt;&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span>  </div></li><li class="li1"><div class="de1">			<span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span>ISBN<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span></div></li><li class="li1"><div class="de1">           	<span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a> &gt;&lt;<a href="http://december.com/html/4/element/input.html"><span class="kw2">INPUT</span></a> <span class="kw3">TYPE</span><span class="sy0">=</span><span class="kw3">TEXT</span> <span class="kw3">NAME</span><span class="sy0">=</span><span class="st0">&quot;isbn&quot;</span> <span class="kw3">VALUE</span><span class="sy0">=</span><span class="st0">&quot; &quot;</span> <span class="kw3">SIZE</span><span class="sy0">=</span><span class="nu0">16</span> <span class="kw3">MAXLENGTH</span><span class="sy0">=</span><span class="nu0">32</span>&gt;&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span> </div></li><li class="li1"><div class="de1">		    <span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span>Puntuació<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span></div></li><li class="li1"><div class="de1">		        <span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span></div></li><li class="li1"><div class="de1">					<span class="sc2">&lt;<a href="http://december.com/html/4/element/select.html"><span class="kw2">SELECT</span></a> <span class="kw3">NAME</span><span class="sy0">=</span><span class="st0">&quot;puntuacio&quot;</span>&gt;</span></div></li><li class="li1"><div class="de1">						<span class="sc2">&lt;<a href="http://december.com/html/4/element/option.html"><span class="kw2">OPTION</span></a> <span class="kw3">SELECTED</span> <span class="kw3">VALUE</span><span class="sy0">=</span><span class="nu0">0</span>&gt;</span> -</div></li><li class="li1"><div class="de1">						<span class="sc2">&lt;<a href="http://december.com/html/4/element/option.html"><span class="kw2">OPTION</span></a> <span class="kw3">VALUE</span><span class="sy0">=</span><span class="nu0">1</span>&gt;</span> 1</div></li><li class="li1"><div class="de1">						<span class="sc2">&lt;<a href="http://december.com/html/4/element/option.html"><span class="kw2">OPTION</span></a> <span class="kw3">VALUE</span><span class="sy0">=</span><span class="nu0">2</span>&gt;</span> 2</div></li><li class="li1"><div class="de1">						<span class="sc2">&lt;<a href="http://december.com/html/4/element/option.html"><span class="kw2">OPTION</span></a> <span class="kw3">VALUE</span><span class="sy0">=</span><span class="nu0">3</span>&gt;</span> 3</div></li><li class="li1"><div class="de1">						<span class="sc2">&lt;<a href="http://december.com/html/4/element/option.html"><span class="kw2">OPTION</span></a> <span class="kw3">VALUE</span><span class="sy0">=</span><span class="nu0">4</span>&gt;</span> 4</div></li><li class="li1"><div class="de1">						<span class="sc2">&lt;<a href="http://december.com/html/4/element/option.html"><span class="kw2">OPTION</span></a> <span class="kw3">VALUE</span><span class="sy0">=</span><span class="nu0">5</span>&gt;</span> 5</div></li><li class="li1"><div class="de1">					<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/select.html"><span class="kw2">SELECT</span></a>&gt;</span></div></li><li class="li1"><div class="de1">			<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span> </div></li><li class="li1"><div class="de1">			<span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span>Genere<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span></div></li><li class="li1"><div class="de1">            <span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;&lt;<a href="http://december.com/html/4/element/input.html"><span class="kw2">INPUT</span></a> <span class="kw3">TYPE</span><span class="sy0">=</span><span class="kw3">TEXT</span> <span class="kw3">NAME</span><span class="sy0">=</span><span class="st0">&quot;genere&quot;</span> <span class="kw3">VALUE</span><span class="sy0">=</span><span class="st0">&quot;&quot;</span> <span class="kw3">SIZE</span><span class="sy0">=</span><span class="nu0">16</span> <span class="kw3">MAXLENGTH</span><span class="sy0">=</span><span class="nu0">32</span>&gt;&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span>               </div></li><li class="li1"><div class="de1">			<span class="sc2">&lt;<a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;&lt;<a href="http://december.com/html/4/element/input.html"><span class="kw2">INPUT</span></a> <span class="kw3">TYPE</span><span class="sy0">=</span>SUBMIT&gt;&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/td.html"><span class="kw2">td</span></a>&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">        <span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/tr.html"><span class="kw2">tr</span></a>&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li></ol></pre>

<p>
El següent pas és connectar a la base de dades i crear la consulta, en funció de si hem rebut pel $_POST el valor de la puntuació dels llibres a mostrar o no. 
</p>
<pre class="code php"><ol><li class="li1"><div class="de1"><span class="co1">//Connectem al servidor</span></div></li><li class="li1"><div class="de1">  <span class="re0">$connexio</span> <span class="sy0">=</span> <a href="http://www.php.net/mysql_connect"><span class="kw3">mysql_connect</span></a><span class="br0">&#40;</span><span class="re0">$servidor</span><span class="sy0">,</span> <span class="re0">$userBD</span><span class="sy0">,</span> <span class="re0">$passwdBD</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span><span class="re0">$connexio</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">        <a href="http://www.php.net/exit"><span class="kw3">exit</span></a><span class="br0">&#40;</span><span class="st_h">'No es pot connectar:'</span><span class="sy0">.</span> <a href="http://www.php.net/mysql_error"><span class="kw3">mysql_error</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">	<span class="kw1">if</span><span class="br0">&#40;</span><span class="sy0">!</span><a href="http://www.php.net/mysql_select_db"><span class="kw3">mysql_select_db</span></a><span class="br0">&#40;</span><span class="re0">$nomBD</span><span class="sy0">,</span> <span class="re0">$connexio</span><span class="br0">&#41;</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">  	 <a href="http://www.php.net/exit"><span class="kw3">exit</span></a><span class="br0">&#40;</span><span class="st0">&quot;Error al connectar amb la base de dades&quot;</span><span class="sy0">.</span> <a href="http://www.php.net/mysql_error"><span class="kw3">mysql_error</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">//Si no tenim cap cerca pel $_POST, mostrem tots els llibres</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">&#40;</span><span class="sy0">!</span><a href="http://www.php.net/isset"><span class="kw3">isset</span></a><span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st0">&quot;puntuacio&quot;</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="sy0">||</span> <span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st0">&quot;puntuacio&quot;</span><span class="br0">&#93;</span><span class="sy0">==</span><span class="st0">&quot;0&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">	<span class="co1">//Mostrem tots els llibres</span></div></li><li class="li1"><div class="de1">	<span class="re0">$consulta</span> <span class="sy0">=</span> <a href="http://www.php.net/sprintf"><span class="kw3">sprintf</span></a><span class="br0">&#40;</span><span class="st_h">'select * from llibres'</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="kw1">else</span></div></li><li class="li1"><div class="de1"><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">	<span class="co1">//Mostrem únicament els llibres que coincideixen amb la cerca</span></div></li><li class="li1"><div class="de1">	<span class="re0">$consulta</span> <span class="sy0">=</span> <a href="http://www.php.net/sprintf"><span class="kw3">sprintf</span></a><span class="br0">&#40;</span><span class="st_h">'select * from llibres where puntuacio=%s'</span><span class="sy0">,</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st0">&quot;puntuacio&quot;</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">&quot;<span class="es4">$consulta</span>&quot;</span><span class="sy0">;</span></div></li></ol></pre>

<p>
Finalment fem la consulta a la base de dades amb <code>mysql_query</code>. Les crides succesives a <code>mysql_fetch_array()</code> ens van tornant les diferents files de la taula de la base de dades. A la variable $fila tindrem en cada iteració del bucle un dels llibres del resultat de la consulta. 
</p>

<p>
Cada llibre és mostrat dins d’una fila de la taula. S’han deixat algunes cel·les extres buides, per tal que coincideixin amb el formulari creat abans, així el nom del llibre es mostrarà a baix de la columna del formulari corresponent. 
</p>
<pre class="code php"><ol><li class="li1"><div class="de1">//Fem la consulta</div></li><li class="li1"><div class="de1">  if ($result = mysql_query($consulta, $connexio)  )</div></li><li class="li1"><div class="de1">	{		</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">		//Anem obtenim tots els registres del resultat de la consulta</div></li><li class="li1"><div class="de1">	 while ($fila = mysql_fetch_array($result, MYSQL_BOTH))</div></li><li class="li1"><div class="de1">        {</div></li><li class="li1"><div class="de1">            //Mostrem un llibre</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">            printf(&quot;&lt;tr&gt;</div></li><li class="li1"><div class="de1">              &lt;td&gt;&lt;/td&gt;</div></li><li class="li1"><div class="de1">              &lt;td&gt;%s&lt;/td&gt;</div></li><li class="li1"><div class="de1">              &lt;td&gt;&lt;/td&gt;</div></li><li class="li1"><div class="de1">              &lt;td&gt;%s&lt;/td&gt;</div></li><li class="li1"><div class="de1">              &lt;td&gt;&lt;/td&gt;</div></li><li class="li1"><div class="de1">              &lt;td&gt;%s&lt;/td&gt;</div></li><li class="li1"><div class="de1">              &lt;td&gt;&lt;/td&gt;</div></li><li class="li1"><div class="de1">              &lt;td&gt;%s&lt;/td&gt;</div></li><li class="li1"><div class="de1">              &lt;td&gt;&lt;/td&gt;</div></li><li class="li1"><div class="de1">              &lt;td&gt;%s&lt;/td&gt;</div></li><li class="li1"><div class="de1">              &lt;td&gt;&lt;/td&gt;</div></li><li class="li1"><div class="de1">              &lt;td&gt;%s&lt;/td&gt;&lt;/tr&gt;&quot;, $fila[&quot;id&quot;], $fila[&quot;nom&quot;], $fila[&quot;autor&quot;], $fila[&quot;isbn&quot;], $fila[&quot;puntuacio&quot;], $fila[&quot;genere&quot;]);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">        }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">	}</div></li><li class="li1"><div class="de1">	else</div></li><li class="li1"><div class="de1">	{</div></li><li class="li1"><div class="de1">		printf('&lt;div class=&quot;login&quot;&gt;Error consultant tots els llibres &lt;/div&gt;');</div></li><li class="li1"><div class="de1">	}	</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  //Per acabar el codi de la pàgina tanquem la taula i el formulari</div></li><li class="li1"><div class="de1">?&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">	            &lt;/table&gt;</div></li><li class="li1"><div class="de1">	            &lt;/FORM&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw2">&lt;?php</span></div></li><li class="li1"><div class="de1"><span class="kw1">include</span><span class="br0">&#40;</span><span class="st0">&quot;peu.php&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sy1">?&gt;</span></div></li></ol></pre>

<p>
En aquesta activitat, si no s’escull cap tipus de puntuació es mostraran tots els llibres. Si s’escull una puntuació en concret, únicament es mostraran els llibres amb aquesta puntuació. 
</p>

<p>
Podeu provar de fer modificacions en la consulta per agafar més valors del formulari. 
</p>

<p>
Aquest és el codi sencer de la pàgina:
</p>
<pre class="code php"><ol><li class="li1"><div class="de1"><span class="kw2">&lt;?php</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="coMULTI">/*</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">&nbsp; Fitxer index.php</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">&nbsp;</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">&nbsp;   Fitxer d'inici</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">&nbsp;</span></div></li><li class="li1"><div class="de1"><span class="coMULTI">*/</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">//Arguments per la capçalera header. Aquestes variables seran visibles</span></div></li><li class="li1"><div class="de1"><span class="co1">//des de cap.php</span></div></li><li class="li1"><div class="de1"><span class="re0">$TITOL</span> <span class="sy0">=</span> <span class="st0">&quot;cookie&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="re0">$ESTIL</span> <span class="sy0">=</span> <span class="st0">&quot;estil.css&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">include</span><span class="br0">&#40;</span><span class="st0">&quot;cap.php&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sy1">?&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&lt;!-- Formulari d'entrada --&gt;</div></li><li class="li1"><div class="de1">&lt;h1&gt; Mostrar llibres &lt;/h1&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&lt;FORM METHOD=POST ACTION=&quot;index.php&quot;&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    &lt;table&gt;</div></li><li class="li1"><div class="de1">        &lt;tr&gt;</div></li><li class="li1"><div class="de1">  		&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;</div></li><li class="li1"><div class="de1">            &lt;td&gt;Nom&lt;/td&gt;</div></li><li class="li1"><div class="de1">            &lt;td&gt;&lt;INPUT TYPE=TEXT NAME=&quot;nom&quot; VALUE=&quot; &quot; SIZE=16 MAXLENGTH=32&gt;&lt;/td&gt;  </div></li><li class="li1"><div class="de1">			&lt;td&gt;Autor&lt;/td&gt;</div></li><li class="li1"><div class="de1">			&lt;td&gt;&lt;INPUT TYPE=TEXT NAME=&quot;autor&quot; VALUE=&quot; &quot; SIZE=16 MAXLENGTH=32&gt;&lt;/td&gt;  </div></li><li class="li1"><div class="de1">			&lt;td&gt;ISBN&lt;/td&gt;</div></li><li class="li1"><div class="de1">           	&lt;td &gt;&lt;INPUT TYPE=TEXT NAME=&quot;isbn&quot; VALUE=&quot; &quot; SIZE=16 MAXLENGTH=32&gt;&lt;/td&gt; </div></li><li class="li1"><div class="de1">		    &lt;td&gt;Puntuació&lt;/td&gt;</div></li><li class="li1"><div class="de1">		        &lt;td&gt;</div></li><li class="li1"><div class="de1">					&lt;SELECT NAME=&quot;puntuacio&quot;&gt;</div></li><li class="li1"><div class="de1">						&lt;OPTION SELECTED VALUE=0&gt; -</div></li><li class="li1"><div class="de1">						&lt;OPTION VALUE=1&gt; 1</div></li><li class="li1"><div class="de1">						&lt;OPTION VALUE=2&gt; 2</div></li><li class="li1"><div class="de1">						&lt;OPTION VALUE=3&gt; 3</div></li><li class="li1"><div class="de1">						&lt;OPTION VALUE=4&gt; 4</div></li><li class="li1"><div class="de1">						&lt;OPTION VALUE=5&gt; 5</div></li><li class="li1"><div class="de1">					&lt;/SELECT&gt;</div></li><li class="li1"><div class="de1">			&lt;/td&gt; </div></li><li class="li1"><div class="de1">			&lt;td&gt;Genere&lt;/td&gt;</div></li><li class="li1"><div class="de1">            &lt;td&gt;&lt;INPUT TYPE=TEXT NAME=&quot;genere&quot; VALUE=&quot;&quot; SIZE=16 MAXLENGTH=32&gt;&lt;/td&gt;               </div></li><li class="li1"><div class="de1">			&lt;td&gt;&lt;INPUT TYPE=SUBMIT&gt;&lt;/td&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">        &lt;/tr&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw2">&lt;?php</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">//Connectem al servidor</span></div></li><li class="li1"><div class="de1">	<span class="re0">$connexio</span> <span class="sy0">=</span> <a href="http://www.php.net/mysql_connect"><span class="kw3">mysql_connect</span></a><span class="br0">&#40;</span><span class="re0">$servidor</span><span class="sy0">,</span> <span class="re0">$userBD</span><span class="sy0">,</span> <span class="re0">$passwdBD</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span><span class="re0">$connexio</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">        <a href="http://www.php.net/exit"><span class="kw3">exit</span></a><span class="br0">&#40;</span><span class="st_h">'No es pot connectar:'</span><span class="sy0">.</span> <a href="http://www.php.net/mysql_error"><span class="kw3">mysql_error</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">    <span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">	<span class="kw1">if</span><span class="br0">&#40;</span><span class="sy0">!</span><a href="http://www.php.net/mysql_select_db"><span class="kw3">mysql_select_db</span></a><span class="br0">&#40;</span><span class="re0">$nomBD</span><span class="sy0">,</span> <span class="re0">$connexio</span><span class="br0">&#41;</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">  	 <a href="http://www.php.net/exit"><span class="kw3">exit</span></a><span class="br0">&#40;</span><span class="st0">&quot;Error al connectar amb la base de dades&quot;</span><span class="sy0">.</span> <a href="http://www.php.net/mysql_error"><span class="kw3">mysql_error</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">//Si no tenim cap cerca pel $_POST, mostrem tots els llibres</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">if</span><span class="br0">&#40;</span><span class="sy0">!</span><a href="http://www.php.net/isset"><span class="kw3">isset</span></a><span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st0">&quot;puntuacio&quot;</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="sy0">||</span> <span class="br0">&#40;</span><span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st0">&quot;puntuacio&quot;</span><span class="br0">&#93;</span><span class="sy0">==</span><span class="st0">&quot;0&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">	<span class="co1">//Mostrem tots els llibres</span></div></li><li class="li1"><div class="de1">	<span class="re0">$consulta</span> <span class="sy0">=</span> <a href="http://www.php.net/sprintf"><span class="kw3">sprintf</span></a><span class="br0">&#40;</span><span class="st_h">'select * from llibres'</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li><li class="li1"><div class="de1"><span class="kw1">else</span></div></li><li class="li1"><div class="de1"><span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">	<span class="co1">//Mostrem únicament els llibres que coincideixen amb la cerca</span></div></li><li class="li1"><div class="de1">	<span class="re0">$consulta</span> <span class="sy0">=</span> <a href="http://www.php.net/sprintf"><span class="kw3">sprintf</span></a><span class="br0">&#40;</span><span class="st_h">'select * from llibres where puntuacio=%s'</span><span class="sy0">,</span> <span class="re0">$_POST</span><span class="br0">&#91;</span><span class="st0">&quot;puntuacio&quot;</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1"><span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw1">echo</span> <span class="st0">&quot;<span class="es4">$consulta</span>&quot;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="co1">//Fem la consulta</span></div></li><li class="li1"><div class="de1">	<span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$result</span> <span class="sy0">=</span> <a href="http://www.php.net/mysql_query"><span class="kw3">mysql_query</span></a><span class="br0">&#40;</span><span class="re0">$consulta</span><span class="sy0">,</span> <span class="re0">$connexio</span><span class="br0">&#41;</span>  <span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">	<span class="br0">&#123;</span>		</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">		<span class="co1">//Anem obtenim tots els registres del resultat de la consulta</span></div></li><li class="li1"><div class="de1">		<span class="kw1">while</span> <span class="br0">&#40;</span><span class="re0">$fila</span> <span class="sy0">=</span> <a href="http://www.php.net/mysql_fetch_array"><span class="kw3">mysql_fetch_array</span></a><span class="br0">&#40;</span><span class="re0">$result</span><span class="sy0">,</span> MYSQL_BOTH<span class="br0">&#41;</span><span class="br0">&#41;</span></div></li><li class="li1"><div class="de1">		<span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">			<span class="co1">//Mostrem un llibre</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">			<a href="http://www.php.net/printf"><span class="kw3">printf</span></a><span class="br0">&#40;</span><span class="st0">&quot;&lt;tr&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">              &lt;td&gt;&lt;/td&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">              &lt;td&gt;<span class="es6">%s</span>&lt;/td&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">              &lt;td&gt;&lt;/td&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">              &lt;td&gt;<span class="es6">%s</span>&lt;/td&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">              &lt;td&gt;&lt;/td&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">              &lt;td&gt;<span class="es6">%s</span>&lt;/td&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">              &lt;td&gt;&lt;/td&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">              &lt;td&gt;<span class="es6">%s</span>&lt;/td&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">              &lt;td&gt;&lt;/td&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">              &lt;td&gt;<span class="es6">%s</span>&lt;/td&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">              &lt;td&gt;&lt;/td&gt;</span></div></li><li class="li1"><div class="de1"><span class="st0">              &lt;td&gt;<span class="es6">%s</span>&lt;/td&gt;&lt;/tr&gt;&quot;</span><span class="sy0">,</span> <span class="re0">$fila</span><span class="br0">&#91;</span><span class="st0">&quot;id&quot;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$fila</span><span class="br0">&#91;</span><span class="st0">&quot;nom&quot;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$fila</span><span class="br0">&#91;</span><span class="st0">&quot;autor&quot;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$fila</span><span class="br0">&#91;</span><span class="st0">&quot;isbn&quot;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$fila</span><span class="br0">&#91;</span><span class="st0">&quot;puntuacio&quot;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="re0">$fila</span><span class="br0">&#91;</span><span class="st0">&quot;genere&quot;</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">		<span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">	<span class="br0">&#125;</span></div></li><li class="li1"><div class="de1">	<span class="kw1">else</span></div></li><li class="li1"><div class="de1">	<span class="br0">&#123;</span></div></li><li class="li1"><div class="de1">		<a href="http://www.php.net/printf"><span class="kw3">printf</span></a><span class="br0">&#40;</span><span class="st_h">'&lt;div class=&quot;login&quot;&gt;Error consultant tots els llibres &lt;/div&gt;'</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">	<span class="br0">&#125;</span>	</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sy1">?&gt;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">	            &lt;/table&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">	            &lt;/FORM&gt;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="kw2">&lt;?php</span></div></li><li class="li1"><div class="de1"><span class="kw1">include</span><span class="br0">&#40;</span><span class="st0">&quot;peu.php&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sy1">?&gt;</span></div></li></ol></pre>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

	 </article>
     <div class="pnpage">
      <div class="left-corner"></div>
      <div id="prevpage">Anar a la p&agrave;gina anterior:<br /><a href="../../../WebContent/u1/a3/continguts.html">Accés a bases de dades des de PHP</a></div>
      <div id="nextpage">Anar a la p&agrave;gina seg&uuml;ent:<br /><a href="../../../WebContent/u1/a3/exercicis.html">Exercicis d'autoavaluació</a></div>
      <div class="right-corner"></div>
     </div>
    </div>
    <footer class="footer">
      <div><small>Aquest document està subjecte a una llicència oberta de Creative Commons, es reserva el dret de reconeixement de l'autoria, d'exigir que no se'n faci cap mena d'ús comercial. Si altereu o transformeu aquesta obra, o en genereu obres derivades, només podeu distribuir l'obra generada amb una llicència idèntica a aquesta.</small></div>
    </footer>
 </div>
 <div id="back_preview" class="hidden"></div>
 <div id="preview" class="hidden">
  <div class="prevcontent"></div>
 </div>
 <div id="help-tooltips">
  <div id="help-toc" class="hidden tooltip"><span>Taula de continguts:</span> Ofereix una vista general de l&#39;estructura del m&ograve;dul, que us facilitar&agrave; la navegaci&oacute; a trav&eacute;s dels seus continguts.<span class="arrow-left"></span></div> 
  <div id="help-settings" class="hidden tooltip"><span>Opcions de format:</span> Permet configurar el format de lectura a partir de les vostres prefer&egrave;ncies, modificant la mida de la lletra, el color del fons, l&#39;amplada de la p&agrave;gina o l&#39;ocultaci&oacute; dels continguts complementaris, entre d&#39;altres.<span class="arrow-left"></span></div>
  <div id="help-printer" class="hidden tooltip"><span>Imprimir:</span>  Envia el contingut seleccionat a la impressora.<span class="arrow-left"></span></div>
  <div id="help-favorites" class="hidden tooltip"><span>Prefereits:</span> Permet desar aquelles parts del contingut a les que us interessi accedir en un moment posterior; us permetr&agrave; anar creant un repositori personalitzat de les seccions que considereu m&eacute;s rellevants. Un cop l&#39;hageu començat a fer servir se us mostrar&agrave; a sota un comptador que us informar&agrave; del nombre de preferits que s&#39;hagin emmagatzemat fins al moment.<span class="arrow-left"></span></div>
  <div id="help-favcounter" class="hidden tooltip"><span>Comptador i llistat de preferits:</span> Indica el nombre de preferits que s&#39;han desat fins el moment; clicant damunt seu accedireu al llistat de preferits, i a trav&eacute;s d&#39;aquest podreu accedir directament als continguts que hageu emmagatzemat.<span class="arrow-left"></span></div>
  <div id="help-help_icon" class="hidden tooltip"><span>Ajuda:</span> Aquesta opci&oacute; activa la informaci&oacute; de les funcionalitats del web tot situant el punter del ratol&iacute; al damunt dels diferents &iacute;tems.<span class="arrow-left"></span></div>
  <div id="help-sidebar-hide" class="hidden tooltip"><span>Mostrar/Ocultar barra lateral:</span>  Deshabilita la barra d&#39;opcions, permetent la seva recuperaci&oacute; quan es desitgi.<span class="arrow-left"></span></div>
  <div id="help-search" class="hidden tooltip"><span>Cerca:</span>  Introdu&iuml;u les paraules clau sobre aquells conceptes que desitgeu localitzar en els continguts del m&ograve;dul. Tamb&eacute; podeu excloure un terme de la cerca tot afegint-hi el signe &#8220;-&#8221; al davant.<span class="arrow-top"></span></div>
  <div id="help-header" class="hidden tooltip"><span>Cap&ccedil;alera:</span>  Indica l&#39;apartat o secci&oacute; que es mostra en pantalla. Tingueu present que les capçaleres de segon, tercer i quart nivell tamb&eacute; es poden desar com a marcadors.<span class="arrow-left"></span></div>
</div> 
</body>
</html>
