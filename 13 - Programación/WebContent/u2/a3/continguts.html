<!doctype html>

<!--[if lt IE 7 ]> <html class="ie ie6 no-js" lang="ca"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie ie7 no-js" lang="ca"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie ie8 no-js" lang="ca"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie ie9 no-js" lang="ca"> <![endif]-->
<!--[if gt IE 9]><!--><html class="no-js" lang="ca"><!--<![endif]-->
<!-- the "no-js" class is for Modernizr. -->

<head id="www-sitename-com" data-template-set="html5-reset">

	<meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html">
        
	<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>Programació bàsica (ASX) \ Programació (DAM i DAW)</title>
	
<!-- <meta name="title" content=""> --> 
	<meta name="description" content="">
	<!-- Google will often use this as its description of your page/site. Make it good. -->
	
	<meta name="google-site-verification" content="">
	<!-- Speaking of Google, don't forget to set your site up: http://google.com/webmasters -->
	
	<meta name="author" content="Institut Obert de Catalunya">
	<meta name="Copyright" content="Copyright Institut Obert de Catalunya 2011. All Rights Reserved.">

	<!-- Dublin Core Metadata : http://dublincore.org/ -->
	<meta name="DC.title" content="Programació bàsica (ASX) \ Programació (DAM i DAW)">
	<meta name="DC.subject" content="Informàtica i comunicacions">
	<meta name="DC.creator" content="Institut Obert de Catalunya">
	
	<!--  Mobile Viewport Fix
	j.mp/mobileviewport & davidbcalhoun.com/2010/viewport-metatag 
	device-width : Occupy full width of the screen in its current orientation
	initial-scale = 1.0 retains dimensions instead of zooming out if page height > device height
	maximum-scale = 1.0 retains dimensions instead of zooming in if page width < device width
	-->
	<!-- Uncomment to use � use thoughtfully!
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	-->

	<link rel="shortcut icon" href="../../../img/favicon.ico">
	<!-- This is the traditional favicon.
		 - size: 16x16 or 32x32
		 - transparency is OK
		 - see wikipedia for info on browser support: http://mky.be/favicon/ -->
		 
	<link rel="apple-touch-icon" href="../../../img/apple-touch-icon.png">
	<!-- The is the icon for iOS's Web Clip.
		 - size: 57x57 for older iPhones, 72x72 for iPads, 114x114 for iPhone4's retina display (IMHO, just go ahead and use the biggest one)
		 - To prevent iOS from applying its styles to the icon name it thusly: apple-touch-icon-precomposed.png
		 - Transparency is not recommended (iOS will put a black BG behind the icon) -->
	
	<!-- CSS: screen, mobile & print are all in the same file -->
	<link rel="stylesheet" href="../../../_/css/style.css">

	<!-- CSS: jQuery UI -->
	<link rel="stylesheet" href="../../../_/css/jquery-ui.css">
	
	<!-- all our JS is at the bottom of the page, except for Modernizr. -->
	<script src="../../../_/js/modernizr-1.7.min.js"></script>
	<script src="../../../_/js/Hyphenator.js" type="text/javascript"></script>
	<script type="text/javascript">
	   Hyphenator.config({
		minwordlength : 4
	   });
	   Hyphenator.run();
	</script>
    <script src="../../../_/js/build.js" type="text/javascript"></script>
</head>

<body class="style-newspaper">

<div class="wrapper"><!-- not needed? up to you: http://camendesign.com/code/developpeurs_sans_frontieres -->

	<header id="header">
		<div class="head"><a href="http://ioc.gencat.cat"><img src="../../../img/logo.png" alt="Institut Obert de Catalunya"/></a><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/es/deed.ca"><img src="../../../img/license.png" alt="Llic&egrave;ncia" class="license"/></a></div>
		<div class="headdocument"><a href="../../../index.html">Programació bàsica (ASX) \ Programació (DAM i DAW)</a></div>
        <div id="search" class="search" name="search">
         <form id="frmsearch" action="../../../search.html" method="get">
          <input type="text" name="q"/>
        </form>
        </div>
	</header>
   <div id="upbutton" class="upbutton" style="display:none;"><img src="../../../img/uparrow.png" alt="Pujar a l'inici de p&agrave;gina"/></div>
   <aside id="aside">
    <div id="menu">
      <ul>
       <li name="toc"><div><img src="../../../img/toc.png" alt="&Iacute;ndex"/></div></li>
       <li name="settings"><div><img src="../../../img/settings.png" alt="Configuraci&oacute;"/></div></li>
       <li name="printer"><div><img src="../../../img/printer.png" alt="Imprimir"/></div></li>
       <li name="favorites"><div><img src="../../../img/favorites.png" alt="Favorits"/></div></li>
       <li name="help_icon" class="help_icon"><div><img src="../../../img/help_icon.png" alt="Ajuda"/></div></li>
      </ul>
     </div>
   </aside>
   <div id="sidebar-hide" name="sidebar-hide"><img src="../../../img/arrows.png"/></div>
   <section>
     <div id="toc" class="hidden">
      <div class="menucontent">
        <ul>
        <li id="u2" class="parentnode"><p><a class="unit" href="../../../WebContent/u2/introduccio.html">2. Programació estructurada</a></p><ul class="expander"><li id="u2introduccio"><a href="../../../WebContent/u2/introduccio.html">Introducció</a></li><li id="u2resum"><a href="../../../WebContent/u2/resum.html">Resum</a></li><li id="u2resultats_d_aprenentatge"><a href="../../../WebContent/u2/resultats_d_aprenentatge.html">Resultats d'aprenentatge</a></li><li id="u2mapa"><a href="../../../WebContent/u2/mapa.html">Mapa conceptual</a></li><li id="u2referencies"><a href="../../../WebContent/u2/referencies.html">Referències</a></li><li id="u2a1" class="tocsection"><p id='u2a1continguts'><a class="section" href="../../../WebContent/u2/a1/continguts.html">Algorismes</a><span class="buttonexp"></span></p><ul><li id="u2a1activitats"><a href="../../../WebContent/u2/a1/activitats.html">Activitats</a></li><li id="u2a1exercicis"><a href="../../../WebContent/u2/a1/exercicis.html">Exercicis d'autoavaluació</a></li><li id="u2a1annexos"><a href="../../../WebContent/u2/a1/annexos.html">Annexos</a></li></ul></li><div data-parent-id='u2a1' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u2/a1/continguts.html#definicio_del_problema">Definició del problema</a></li><li><a href="../../../WebContent/u2/a1/continguts.html#disseny_de_l_algorisme">Disseny de l’algorisme</a></li><li><a href="../../../WebContent/u2/a1/continguts.html#implementacio_del_programa">Implementació del programa</a></li><li><a href="../../../WebContent/u2/a1/continguts.html#verificacio_i_proves">Verificació i proves</a></li><li><a href="../../../WebContent/u2/a1/continguts.html#posada_en_marxa_i_manteniment">Posada en marxa i manteniment</a></li></ul></div></div><li id="u2a2" class="tocsection"><p id='u2a2continguts'><a class="section" href="../../../WebContent/u2/a2/continguts.html">Estructures de selecció</a><span class="buttonexp"></span></p><ul><li id="u2a2activitats"><a href="../../../WebContent/u2/a2/activitats.html">Activitats</a></li><li id="u2a2exercicis"><a href="../../../WebContent/u2/a2/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u2a2' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u2/a2/continguts.html#una_desviacio_temporal_del_camiseleccio_simple">Una desviació temporal del camí: selecció simple</a></li><li><a href="../../../WebContent/u2/a2/continguts.html#dos_camins_alternatiusla_sentencia_if_else">Dos camins alternatius: la sentència ''if/else''</a></li><li><a href="../../../WebContent/u2/a2/continguts.html#diversos_caminsla_sentencia_if_else_if_else">Diversos camins: la sentència ''if/else if/else''</a></li><li><a href="../../../WebContent/u2/a2/continguts.html#combinacio_d_estructures_de_seleccio">Combinació d'estructures de selecció</a></li><li><a href="../../../WebContent/u2/a2/continguts.html#el_commutadorla_sentencia_switch">El commutador: la sentència ''switch''</a></li><li><a href="../../../WebContent/u2/a2/continguts.html#control_d_errors_en_l_entrada_basica_mitjancant_estructures_de_seleccio">Control d'errors en l'entrada bàsica mitjançant estructures de selecció</a></li><li><a href="../../../WebContent/u2/a2/continguts.html#solucions_dels_reptes_proposats">Solucions dels reptes proposats</a></li></ul></div></div><li id="u2a3" class="tocsection"><p id='u2a3continguts'><a class="section" href="../../../WebContent/u2/a3/continguts.html">Estructures de repetició</a><span class="buttonexp"></span></p><ul><li id="u2a3activitats"><a href="../../../WebContent/u2/a3/activitats.html">Activitats</a></li><li id="u2a3exercicis"><a href="../../../WebContent/u2/a3/exercicis.html">Exercicis d'autoavaluació</a></li><li id="u2a3annexos"><a href="../../../WebContent/u2/a3/annexos.html">Annexos</a></li></ul></li><div data-parent-id='u2a3' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u2/a3/continguts.html#control_de_les_estructures_repetitives">Control de les estructures repetitives</a></li><li><a href="../../../WebContent/u2/a3/continguts.html#repetir_si_es_compleix_una_condiciola_sentencia_while">Repetir si es compleix una condició: la sentència ''while''</a></li><li><a href="../../../WebContent/u2/a3/continguts.html#repetir_almenys_un_copla_sentencia_do_while">Repetir almenys un cop: la sentència ''do/while''</a></li><li><a href="../../../WebContent/u2/a3/continguts.html#repetir_un_cert_nombre_de_vegadesla_sentencia_for">Repetir un cert nombre de vegades: la sentència ''for''</a></li><li><a href="../../../WebContent/u2/a3/continguts.html#combinacio_d_estructures_de_seleccio">Combinació d'estructures de selecció</a></li><li><a href="../../../WebContent/u2/a3/continguts.html#solucions_dels_reptes_proposats">Solucions dels reptes proposats</a></li></ul></div></div></ul></li><li id="" class="indexnode"><p><a href="../../../index.html">Anar a l&#39;&iacute;ndex general</a></p></li>
        </ul>
      </div>
    </div>
   </section>
   <section>
   <div id="settings" class="hidden">
    <div class="menucontent">
     <div class="allsettings">
     <div class="settings">
      <label>Font i Color</label>
		<div class="setting-option">
	        <ul class="fontBackground">
				<li id="style-newspaper" title="Newspaper" class="appearance-style-newspaper"><span>Newspaper</span></li>
                <li id="style-novel" title="Novel" class="appearance-style-novel"><span>Novel</span></li>
                <li id="style-ebook" title="eBook" class="appearance-style-ebook"><span>eBook</span></li>
				<li id="style-inverse" title="Inverse" class="appearance-style-inverse active"><span>Inverse</span></li>
				<li id="style-athelas" title="Athelas" class="appearance-style-athelas"><span>Athelas</span></li>
			</ul>
		</div>
     </div>
	<div class="settings">
      <label>Amplada</label>
		<div class="setting-option">
	        <div id="slider-width"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
		<div class="setting-option">
	        <div id="slider-font"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
	  <div class="setting-option">
       <form action="" class="sett-options">
		<ul>
		    <li><input type="checkbox" id="secondary-content" /><label for="secondary-content">Mostra recursos complementaris</label></li>
		    <li><input type="checkbox" id="main-images" /><label for="main-images">Mostra imatges</label></li>
		    <li><input type="checkbox" id="text-alignment" /><label for="text-alignment">Text justificat</label></li>
			<li><input type="checkbox" id="text-hyphen" /><label for="text-hyphen">Partici&oacute; sil·l&agrave;bica</label></li>
		</ul>
       </form>
	  </div>
     </div>
     </div>
    </div>
   </div>
   </section>
 <section>
 <div id="favorites" class="hidden"></div>
 </section>   
 <div id="bridge" class="hidden"></div>
 <div id="help" class="hidden">
  <div class="helptitle">Dreceres del teclat<hr></div>
  <div class="helpsection"><span>General</span>
   <ul>
    <li><span class="shortcut">g</span>: Anar al men&uacute; de navegaci&oacute;</li>
    <li><span class="shortcut">o</span>: Anar a opcions</li>
    <li><span class="shortcut">s</span>: Guardar la p&agrave;gina actual a favorits</li>
    <li><span class="shortcut">p</span>: Imprimir la p&agrave;gina actual</li>
    <li><span class="shortcut">?</span>: Mostrar/Ocultar l&#39;ajuda</li>
   </ul>
  </div>
  <div class="helpsection"><span>Navegaci&oacute;</span>
   <ul>
    <li><span class="shortcut">i</span>: Anar a l&#39;&iacute;ndex general</li>
    <li><span class="shortcut">t</span>: Anar a l&#39;inici de p&agrave;gina</li>
    <li><span class="shortcut">b</span>: Anar al final de p&agrave;gina</li>
    <li><span class="shortcut">j</span>: Anar cap endavant dintre la p&agrave;gina</li>
    <li><span class="shortcut">k</span>: Anar cap enrere dintre la p&agrave;gina</li>
    <li><span class="shortcut">h</span>: Anar a la p&agrave;gina anterior:</li>
    <li><span class="shortcut">l</span>: Anar a la p&agrave;gina seg&uuml;ent:</li>
   </ul>
   </div>
 </div>
 <div id="favcounter" name="favcounter" class="hidden"><span></span></div>
 <div id="navmenu" class="navmenu"><ul class="webnav"><li><a href="../../../index.html" title="Anar a l&#39;&iacute;ndex general">Inici</a></li><li><a href="../introduccio.html">Programació estructurada</a></li><li>Estructures de repetició</li></ul></div>
	<div id="content" lang="ca" class="hyphenate text">
     <article lang="ca" class="sheet">
        <h1><a id="estructures_de_repeticio"> Estructures de repetició </a></h1>
    	
<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/ic10mu2_20.png" class="imgB" title="Una estructura de repetició permet executar les mateixes instruccions diverses vegades.  Imatge de Wikimedia Commons" alt="Una estructura de repetició permet executar les mateixes instruccions diverses vegades.  Imatge de Wikimedia Commons" /></li><li><small>Una estructura de repetició permet executar les mateixes instruccions diverses vegades.  Imatge de Wikimedia Commons</small></li>
</ul></div>

</p>

<p>
Fins al moment, tots els programes que heu estudiat, ja fossin més complexos o més senzills, tenien una característica en comú. El seu flux de control avançava inexorablement cap a la instrucció final del mètode principal sense possibilitat de recular. Sigui quin sigui el camí alternatiu per on s’hi ha arribat, un cop una instrucció ha estat executada, ja no es tornarà a executar mai més. Aquest fet contrasta amb el comportament que podeu observar en moltes activitats que fem diàriament, com per exemple, quan posem sal al menjar que cuinem. Podem repetir diverses vegades el procés de posar sal i tastar-ho fins que el gust sigui el que volem (i llavors ja deixem de posar sal i de tastar). Aquest procés es representa com un diagrama de flux de control a la <span class="figref"><a href="#Figure18"><span>figura</span></a></span>.
</p>
<div class="iocfigure"><a name="Figure18"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Una acció es repeteix mentre es compleixi una condició

</figcaption><img src="../media/ic10mu2_21.png" alt="" /></figure>
</div>
<p>
Això també passa en programes del vostre ordinador, en què es poden repetir accions sense problemes: obrir i desar diferents fitxers, connectar-se a diferents pàgines web, etc. Aquí és on entra en joc el tipus següent d’estructura de control, també molt important dins el codi d’un programa.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
Les <strong>estructures de repetició</strong> o iteratives permeten repetir una mateixa seqüència d’instruccions diverses vegades, mentre es compleixi una certa condició.
</p>
</div></div>
<p>
En el seu aspecte general, tenen molt de semblant a una estructura de selecció. Hi ha una sentència especial que cal escriure al codi font, unida a una condició lògica i un bloc de codi (en aquest cas, sempre en serà només un). Però en aquest cas, mentre la condició lògica sigui certa, tota la seqüència d’instruccions es va executant repetidament. En el moment en què es deixa de complir la condició, es deixa d’executar el bloc de codi i ja se segueix amb la instrucció que hi ha després de la sentència de l’estructura de repetició.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
Anomenem <strong>bucle</strong> o cicle el conjunt d’instruccions que s’ha de repetir un cert nombre de vegades, i anomenem <strong>iteració</strong> cada execució individual del bucle.
</p>
</div></div>
<p>
Com passa amb les estructures de selecció, hi ha diferents tipus de sentències, cadascuna amb les seves particularitats. Normalment, la diferència principal està vinculada al moment en què s’avalua la condició per veure si cal tornar a repetir el bloc d’instruccions o no. Al llarg d’aquest apartat, les anireu veient amb detall.
</p>

<h2><a id="control_de_les_estructures_repetitives" >Control de les estructures repetitives</a></h2>
<div class="level2">

<p>
Com passava amb les estructures de selecció, les estructures de repetició no tenen sentit si no és que la condició lògica depèn d’alguna variable que pugui veure modificat el seu valor per a diferents execucions. En cas contrari, la condició sempre valdrà el mateix per a qualsevol execució possible i usar una estructura de control no serà gaire útil. En aquest cas, si la condició sempre és <code>false</code>, mai no s’executa el bucle, per la qual cosa és codi inútil. Però, per a les estructures de repetició, si la condició sempre és <code>true</code> el problema és molt més greu. Com que absolutament sempre que s’avalua si cal fer una nova iteració, la condició es compleix, el bucle no es deixa mai de repetir. El programa mai no acabarà!
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
Un <strong>bucle infinit</strong> és una seqüència d’instruccions dins d’un programa que itera indefinidament, normalment perquè s’espera que s’assoleixi una condició que mai no s’arriba a produir.
</p>
</div></div>
<p>
Quan això succeeix, el programa no es pot aturar de cap altra manera que no sigui tancant-lo directament des del sistema operatiu (per exemple, tancant la finestra associada o amb alguna seqüència especial d’escapament del teclat) o usant algun mecanisme de control de l’execució del vostre programa que ofereixi l’IDE usat.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">Bucle infinit</p>
<p>
Un bucle infinit és un error semàntic de programació. Si n’hi ha, el programa compilarà perfectament de tota manera.
</p>
</div></div>
<p>
Tenint en compte el perill que un programa s’acabi executant indefinidament, forçosament dins de tot bucle hi ha d’haver instruccions que manipulin variables el valor de les quals permeti controlar la repetició o el final del bucle. Aquestes variables s’anomenen <strong>variables de control</strong>.
</p>

<p>
Garantir l’assignació correcta de valors de les variables de control d’una estructura repetitiva és extremadament important. Quan genereu un programa, és imprescindible que el codi permeti que, en algun moment, la variable canviï de valor, de manera que la condició lògica es deixi de complir. Si això no és així, tindreu un bucle infinit.
</p>

<p>

</p>

<p>
Normalment, les variables de control dins d’un bucle es poden englobar dins d’algun d’aquests tipus de comportament:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Comptador:</strong> una variable de tipus enter que va augmentant o disminuint, indicant de manera clara el nombre d’iteracions que caldrà fer.</div>
</li>
<li class="level1"><div class="li"> <strong>Acumulador:</strong> una variable en què es van acumulant directament els càlculs que es volen fer, de manera que en assolir cert valor es considera que ja no cal fer més iteracions. Si bé s’assemblen als comptadors, no són ben bé el mateix. </div>
</li>
<li class="level1"><div class="li"> <strong>Semàfor:</strong> una variable que serveix com a interruptor explícit de si cal seguir fent iteracions. Quan ja no en volem fer més, el codi simplement s’encarrega d’assignar-li el valor específic que servirà perquè la condició avaluï <code>false</code>.</div>
</li>
</ul>

<p>
Evidentment, una condició lògica pot prendre la forma d’una expressió molt complexa, però per començar n’hi ha prou de conèixer aquests tres models. De vegades, les diferències poden ser subtils, i per això tampoc no cal amoïnar-se gaire si no es té clar a quin tipus pertany exactament la variable de control. Igualment, tenir presents aquests tres papers bàsics pot ser d’ajut amb vista a enfocar la programació d’una estructura de selecció.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
Els semàfors també s’anomenen popularment <em>flags</em> (banderoles d’avís).
</p>
</div></div>
</div>

<h2><a id="repetir_si_es_compleix_una_condiciola_sentencia_while" >Repetir si es compleix una condició: la sentència &#039;&#039;while&#039;&#039;</a></h2>
<div class="level2">

<p>
L’estructura de repetició per antonomàsia és la codificada mitjançant la sentència <code>while</code>. Aquesta existeix d’una manera o una altra en la majoria de llenguatges de programació. La seva particularitat és que pràcticament qualsevol codi basat en una estructura de repetició es pot representar usant aquesta sentència. Amb aquesta ja en tindríeu prou per tractar gairebé qualsevol cas possible. Això succeeix amb contraposició de les estructures de selecció, en què cada tipus de sentència ofereix diferents possibilitats.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
La sentència <strong>while</strong> permet repetir l’execució del bucle mentre es verifiqui la condició lògica. Aquesta condició es verifica al principi de cada iteració. Si la primera vegada, tot just quan s’executa la sentència per primer cop, ja no es compleix, no s’executa cap iteració.
</p>
</div></div>
</div>

<h3><a id="sintaxi_i_estructura" >Sintaxi i estructura</a></h3>
<div class="level3">

<p>
Per dur a terme aquest tipus de control sobre les iteracions d’un bucle, la sintaxi d’aquesta sentència en el llenguatge Java és la següent: 
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">while (expressió booleana) {</div></li><li class="li1"><div class="de1">  Instruccions per executar dins del bucle</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

<p>
Com podeu veure, el seu format és molt semblant a la sentència <code>if</code>, simplement canviant la paraula clau per <code>while</code>. Com ja passava amb les diferents sentències dins les estructures de selecció, si entre els parèntesis es posa una expressió que no avalua un resultat de tipus booleà, hi haurà un error de compilació.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">while</p>
<p>
El nom de la sentència <code>while</code> bàsicament significa: “Mentre això es compleixi, fes això altre…”.
</p>
</div></div>
<p>
La <span class="figref"><a href="#Figure19"><span>figura</span></a></span> mostra un diagrama del flux de control d’aquesta sentència, i estableix l’ordre sota el qual s’avalua la condició lògica representada per l’expressió booleana amb vista a establir si cal executar o no una iteració del bucle. 
</p>
<div class="iocfigure"><a name="Figure19"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Diagrama de flux de control d’una sentència <code>while</code>

</figcaption><img src="../media/ic10mu2_22.png" alt="" /></figure>
</div>
<p>
La millor manera de veure com funciona i constatar-ne la utilitat és mitjançant alguns exemples concrets.
</p>

</div>

<h3><a id="exempleestalviar-vos_d_escriure_el_mateix_molts_cops" >Exemple: estalviar-vos d&#039;escriure el mateix molts cops</a></h3>
<div class="level3">

<p>
La utilitat més directa d’una estructura de repetició és que, en cas que vulgueu executar exactament les mateixes instruccions moltes vegades, no les hàgiu d’escriure una pila de cops. Per exemple, suposeu que voleu escriure una línia horitzontal a la pantalla exactament amb quaranta caràcters <code>’-</code>’. Evidentment, res us impedeix pitjar exactament 40 vegades la tecla, ni una més ni una menys, i ja està. Però, també ho faríeu si cal escriure’n cent, mil o fins i tot més? Fer-ho amb una estructura de repetició és més còmode.
</p>

<p>
Per assolir aquesta fita, cal que el bucle iteri un cert nombre de vegades. Per fer-ho, us caldrà una variable de control de tipus comptador, que serveixi per comptar quantes iteracions hi ha fetes. O sigui, cada cop que es produeix una iteració, sumar-hi 1. Un cop aquesta variable supera el valor que volem, ja no cal fer més iteracions. Per tant, la condició lògica ha de controlar si el valor de la variable és inferior al nombre d’iteracions que cal fer.
</p>

<p>
Un possible codi que il·lustra això seria el següent. Compileu-lo i executeu-lo per veure què fa:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">//Un programa que escriu una línia amb 100 caràcters '-'.</div></li><li class="li1"><div class="de1">public class Linia {</div></li><li class="li1"><div class="de1">  public static void main (String[] args) {    </div></li><li class="li1"><div class="de1">    //Inicialitzem un comptador</div></li><li class="li1"><div class="de1">    int i = 0;</div></li><li class="li1"><div class="de1">    //Ja hem fet això 100 cops?</div></li><li class="li1"><div class="de1">    while (i &lt; 100) {      </div></li><li class="li1"><div class="de1">      System.out.print('-');</div></li><li class="li1"><div class="de1">      //Ho hem fet un cop, sumem 1 al comptador</div></li><li class="li1"><div class="de1">      i = i + 1;</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">    //Forcem un salt de línia</div></li><li class="li1"><div class="de1">    System.out.println();</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

<p>
Hi ha un parell de qüestions del codi anterior que val la pena comentar. D’una banda, la nomenclatura de la variable de control de tipus comptador. Evidentment, es pot usar l’identificador que es vulgui, però és comú usar lletres individuals (<code>i</code>, <code>j</code>, <code>k</code>…) per poder identificar ràpidament quina variable dins un bucle és un comptador i facilitar-ne la comprensió. D’altra banda, a l’hora d’usar comptadors, se sol començar des del valor 0 en lloc d’1.
</p>

<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/ic10mu2_23.jpg" class="imgB" title="Un comptador controla el nombre d&#039;iteracions que cal fer. Imatge de Wikimedia Commons/5" alt="Un comptador controla el nombre d&#039;iteracions que cal fer. Imatge de Wikimedia Commons/5" /></li><li><small>Un comptador controla el nombre d&#039;iteracions que cal fer. Imatge de Wikimedia Commons</small></li>
</ul></div>

</p>

<p>
Per veure amb més detall què està passant dins un bucle, en lloc d’un esquema basat en el diagrama de flux de control usarem una taula. Cada fila correspondrà a una iteració i a cada columna s’especificarà el valor de les diferents variables dins del bucle, de manera que es pot veure com evolucionen a cada iteració. Normalment, es fa èmfasi en el valor a l’inici del bucle, tot just abans d’avaluar la condició lògica, i al final del bucle, tot just després de la darrera instrucció, per veure quines han estat les modificacions en executar les instruccions contingudes. Evidentment, els valors de les variables a l’inici d’una iteració han de ser exactament els mateixos que tot just a l’inici de la següent.
</p>

<p>
La <span class="tabref"><a href="#Table3"><span>taula</span></a></span> mostra un resum de com canvia el valor de la variable de control i de quin és el resultat d’avaluar la condició lògica a cada iteració per a l’exemple actual.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
Col·loquialment, per dir que ja no cal fer més iteracions se sol dir que “se surt del bucle”.
</p>
</div></div><div class="ioctable ">
<div class="titletable"><a name="Table3"><span>Taula: </span></a>Evolució del bucle per escriure 100 caràcters <code>-</code></div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0">Iteració </th><th class="col1" colspan="2">Inici del bucle </th><th class="col3">Fi del bucle </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign">  </td><td class="col1"> <strong>‘i’ val</strong> </td><td class="col2"> <strong>Condició val</strong></td><td class="col3"> <strong>‘i’ val</strong></td>
	</tr>
	<tr class="row2">
		<td class="col0"> 1 </td><td class="col1"> 0 </td><td class="col2"> (0 &lt; 100), <code>true</code></td><td class="col3"> 1 </td>
	</tr>
	<tr class="row3">
		<td class="col0"> 2 </td><td class="col1"> 1 </td><td class="col2"> (1 &lt; 100), <code>true</code></td><td class="col3"> 2 </td>
	</tr>
	<tr class="row4">
		<td class="col0"> 3 </td><td class="col1"> 2 </td><td class="col2"> (2 &lt; 100), <code>true</code></td><td class="col3"> 3 </td>
	</tr>
	<tr class="row5">
		<td class="col0" colspan="4">…</td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> 99  </td><td class="col1 leftalign"> 98  </td><td class="col2"> (98 &lt; 100), <code>true</code></td><td class="col3"> 99 </td>
	</tr>
	<tr class="row7">
		<td class="col0"> 100 </td><td class="col1 leftalign"> 99  </td><td class="col2"> (99 &lt; 100), <code>true</code></td><td class="col3"> 100 </td>
	</tr>
	<tr class="row8">
		<td class="col0"> 101 </td><td class="col1"> 100 </td><td class="col2"> (100 &lt; 100), <code>false</code></td><td class="col3"> Ja hem sortit del bucle </td>
	</tr>
</table></div>
</div>
<p>

</p>

<p>
<strong>Repte 1:</strong> en molts casos, el nombre de repeticions no serà fix, sinó que podrà dependre d’una altra variable. Modifiqueu l’exemple perquè primer pregunti a l’usuari quants caràcters &#039;-&#039; vol escriure per pantalla, i llavors els escrigui. Quan proveu el programa, no introduïu un nombre gaire alt!
</p>

</div>

<h3><a id="exempleaprofitar_un_comptador" >Exemple: aprofitar un comptador</a></h3>
<div class="level3">

<p>
La utilitat de les estructures de selecció va molt més enllà de ser una manera senzilla d’estalviar-se escriure el mateix codi moltes vegades. Amb aquestes es poden executar instruccions de maneres que no es poden replicar simplement fent moltes vegades “copiar” i “enganxar” dins del codi font. I és que, a l’hora de la veritat, un comptador sol tenir un paper més important que simplement comptar el nombre d’iteracions que s’han fet. El valor que emmagatzema també es pot usar dins del bucle per dur a terme altres propòsits.
</p>

<p>
Per exemple suposeu que voleu imprimir per pantalla tots els valors de la taula de multiplicar d’un nombre enter qualsevol, des de l’1 fins al 10. Sense aturar-nos gaire a pensar, aquest programa hauria de fer:
</p>
<ul>
<li class="level1"><div class="li"> 1. Demanar que s’introdueixi un nombre pel teclat.</div>
</li>
<li class="level1"><div class="li"> 2. Llegir-lo.</div>
</li>
<li class="level1"><div class="li"> 3. Mostrar el resultat de multiplicar el nombre per 1.</div>
</li>
<li class="level1"><div class="li"> 4. Mostrar el resultat de multiplicar el nombre per 2.</div>
</li>
<li class="level1"><div class="li"> …</div>
</li>
<li class="level1"><div class="li"> 12. Mostrar el resultat de multiplicar el nombre per 10.</div>
</li>
</ul>

<p>
D’aquesta descripció es desprèn que del pas 3 al 12 s’estan repetint ordres, que segurament es poden reemplaçar per una estructura de repetició. Concretament hi ha 10 passes entre la 3 i la 12, i a cadascuna el que es fa és més o menys el mateix: multiplicar el valor introduït per un valor que cada vegada s’incrementa en 1. És a dir, cal un comptador. Però aquest comptador ara, a més a més de garantir que es fan 10 iteracions, també s’usa per fer càlculs.
</p>

<p>
D’acord amb això, un possible codi podria ser el següent. Proveu que funciona.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">import java.util.Scanner;</div></li><li class="li1"><div class="de1">//Un programa que mostra la taula de multiplicar d'un nombre.</div></li><li class="li1"><div class="de1">public class TaulaMultiplicar {</div></li><li class="li1"><div class="de1">  public static void main (String[] args) {</div></li><li class="li1"><div class="de1">    //S'inicialitza la biblioteca.</div></li><li class="li1"><div class="de1">    Scanner lector = new Scanner(System.in);</div></li><li class="li1"><div class="de1">    //Pregunta el nombre.</div></li><li class="li1"><div class="de1">    System.out.print(&quot;Quina taula de multiplicar vols? &quot;);</div></li><li class="li1"><div class="de1">    int taula = lector.nextInt();</div></li><li class="li1"><div class="de1">    lector.nextLine();</div></li><li class="li1"><div class="de1">    //El comptador servirà per fer càlculs.</div></li><li class="li1"><div class="de1">    int i = 1;</div></li><li class="li1"><div class="de1">    while (i &lt;= 10) {</div></li><li class="li1"><div class="de1">      int resultat = taula*i;</div></li><li class="li1"><div class="de1">      System.out.println(taula + &quot; * &quot; + i + &quot; = &quot; + resultat);</div></li><li class="li1"><div class="de1">      i = i + 1;</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">    System.out.println(&quot;Aquesta ha estat la taula del &quot; + taula);</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

<p>
Fixeu-vos que, tot i que normalment en els comptadors es comença a comptar pel 0, en aquest cas cal començar per l’1, ja que dins dels càlculs que cal fer, el primer pas requereix que la multiplicació sigui per 1. La <span class="tabref"><a href="#Table4"><span>taula</span></a></span> mostra l’evolució de les variables a cada iteració, suposant que es faci la taula de multiplicar del 5.
</p>
<div class="ioctable ">
<div class="titletable"><a name="Table4"><span>Taula: </span></a>Evolució del bucle per escriure la taula de multiplicar del 5</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0">Iteració </th><th class="col1" colspan="2">Inici del bucle </th><th class="col3" colspan="2">Fi del bucle </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign">  </td><td class="col1"> <strong>‘i’ val</strong> </td><td class="col2"> <strong>Condició val</strong></td><td class="col3"> <strong>‘resultat’ val</strong></td><td class="col4"> <strong>‘i’ val</strong></td>
	</tr>
	<tr class="row2">
		<td class="col0"> 1 </td><td class="col1"> 1 </td><td class="col2"> (1 ≤ 10), <code>true</code></td><td class="col3"> 5*1, 5 </td><td class="col4"> 2 </td>
	</tr>
	<tr class="row3">
		<td class="col0"> 2 </td><td class="col1"> 2 </td><td class="col2"> (2 ≤ 10), <code>true</code></td><td class="col3"> 5*2, 10 </td><td class="col4"> 3 </td>
	</tr>
	<tr class="row4">
		<td class="col0"> 3 </td><td class="col1"> 3 </td><td class="col2"> (3 ≤ 10), <code>true</code></td><td class="col3"> 5*3, 15 </td><td class="col4"> 4 </td>
	</tr>
	<tr class="row5">
		<td class="col0" colspan="5">…</td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> 9  </td><td class="col1 leftalign"> 9  </td><td class="col2"> (9 ≤ 10), <code>true</code></td><td class="col3"> 5*19, 45 </td><td class="col4"> 10 </td>
	</tr>
	<tr class="row7">
		<td class="col0"> 10 </td><td class="col1"> 10 </td><td class="col2"> (10 ≤ 10), <code>true</code></td><td class="col3"> 5*10, 50 </td><td class="col4"> 11 </td>
	</tr>
	<tr class="row8">
		<td class="col0"> 11 </td><td class="col1"> 11 </td><td class="col2"> (11 ≤ 10), <code>false</code></td><td class="col3" colspan="2"> Ja hem sortit del bucle </td>
	</tr>
</table></div>
</div>
<p>
<strong>Repte 2:</strong> un comptador tant pot començar a comptar des de 0 i anar pujant, com des del final i anar disminuint com un compte enrere. Modifiqueu aquest programa perquè la taula de multiplicar comenci mostrant el valor per a 10 i vagi baixant fins a l’1.
</p>

</div>

<h3><a id="exempleno_sempre_se_suma_u" >Exemple: no sempre se suma u</a></h3>
<div class="level3">

<p>
A l’hora d’usar variables de control amb la funció de comptador, és molt típic que l’increment sigui d’u en u. Això és lògic, ja que és la manera més simple de comptar quantes iteracions s’han fet. Per fer 10 iteracions, si bé és el mateix sumar d’u en u i comparar amb 10 o sumar de dos en dos i comparar amb 20, és clar que el primer cas és molt més entenedor. Ara bé, quan els comptadors també tenen dins del bucle un paper per fer certes operacions, s’ha de tenir present que es poden incrementar o modificar en qualsevol valor.
</p>

<p>
Per exemple suposeu un programa que permeti sumar tots els valors enters múltiples de 3 dins d’un interval entre 0 i un valor qualsevol. Una primera aproximació podria ser:
</p>
<ol>
<li class="level1"><div class="li"> Preguntar el límit de l’interval.</div>
</li>
<li class="level1"><div class="li"> Llegir-lo.</div>
</li>
<li class="level1"><div class="li"> Anar mirant un per un tots els valors dins l’interval, de 0 al límit estipulat.</div>
<ol>
<li class="level2"><div class="li"> Si és múltiple de tres, es va acumulant en una variable en què es desa el resultat final.</div>
</li>
<li class="level2"><div class="li"> Si no ho és, s’ignora.</div>
</li>
</ol>
</li>
<li class="level1"><div class="li"> Un cop recorregut tot l’interval (superat el valor límit), es mostra el resultat acumulat.</div>
</li>
</ol>

<p>
El codi font que faria això podria ser el següent. Aquest codi té la particularitat –i per això val la pena estudiar-lo– que combina estructures de repetició amb estructures de selecció. Ara bé, el format de l’estructura de repetició no és gaire diferent dels exemples anteriors: un comptador que va de 0 a un valor concret per controlar quants cops itera el bucle. Per fer-lo més entenedor quan l’executeu, cada cop que es troba un múltiple de 3 el mostra per pantalla.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
Per veure si un nombre és múltiple de 3 cal comprovar si el seu mòdul (<code>%</code>) 3 és igual a 0.
</p>
</div></div><pre class="code java"><ol><li class="li1"><div class="de1">import java.util.Scanner;</div></li><li class="li1"><div class="de1">//Anem a sumar un seguit de múltiples de tres.</div></li><li class="li1"><div class="de1">public class SumarMultiplesTres {</div></li><li class="li1"><div class="de1">  public static void main (String[] args) {</div></li><li class="li1"><div class="de1">    Scanner lector = new Scanner(System.in);</div></li><li class="li1"><div class="de1">    //PAS 1 i 2</div></li><li class="li1"><div class="de1">    System.out.print(&quot;Fins a quin valor vols sumar múltiples de 3? &quot;);</div></li><li class="li1"><div class="de1">    int limit = lector.nextInt();</div></li><li class="li1"><div class="de1">    lector.nextLine();</div></li><li class="li1"><div class="de1">    int resultat = 0;</div></li><li class="li1"><div class="de1">    //PAS 3: Anar mirant els valors un per un. Es comença pel 0.</div></li><li class="li1"><div class="de1">    int i = 0;</div></li><li class="li1"><div class="de1">    while (i &lt;= limit) {</div></li><li class="li1"><div class="de1">      //PAS a: És múltiple de tres?</div></li><li class="li1"><div class="de1">      if ( (i%3) == 0) {</div></li><li class="li1"><div class="de1">        System.out.println(&quot;Afegim &quot; + i +&quot;...&quot;);</div></li><li class="li1"><div class="de1">        resultat = resultat + i;    </div></li><li class="li1"><div class="de1">      }</div></li><li class="li1"><div class="de1">      //PAS 3: Seguir anar mirant els valors un per un. </div></li><li class="li1"><div class="de1">      i = i + 1;</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">    System.out.println(&quot;El resultat final és &quot; + resultat + &quot;.&quot;);</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

<p>
Ara bé, hi ha una manera de simplificar aquest programa. Seria molt més senzill si, en lloc d’anar provant un per un tots els valors dins del rang, el comptador sempre tingui únicament valors múltiples de 3. En aquest cas, només caldria anar sumant els valors sense necessitar cap estructura de selecció. Partint d’aquest fet, quins valors hauria d’anar prenent el comptador? Doncs 0, 3, 6, 9, 12, 15, etc. Si pensem una mica en aquesta seqüència de nombres, es veu que hi ha prou que el comptador s’incrementi de tres en tres. 
</p>

<p>
Per tant, el codi del bucle es podria reemplaçar pel següent:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">    ...</div></li><li class="li1"><div class="de1">    while (i &lt;= limit) {</div></li><li class="li1"><div class="de1">      System.out.println(&quot;Afegim &quot; + i +&quot;...&quot;);</div></li><li class="li1"><div class="de1">      resultat = resultat + i;    </div></li><li class="li1"><div class="de1">      //Incrementem de tres en tres.</div></li><li class="li1"><div class="de1">      i = i + 3;</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">    ...</div></li></ol></pre>
<div class="iocimportant"><div class="ioccontent">
<p>
Una variable de control amb el paper de comptador es pot modificar de qualsevol manera que es consideri escaient. Ara bé, sempre cal garantir que a cada iteració us apropeu a la condició lògica <code>false</code>, i eviteu així un possible bucle infinit.
</p>
</div></div>
<p>
La <span class="tabref"><a href="#Table5"><span>taula</span></a></span> mostra l’evolució de les variables del programa a cada iteració del bucle, suposant que es vol fer càlcul fins al nombre 20. La prova que es fan 7 iteracions és que, si executeu el programa, es pot veure com s’executa exactament 7 vegades la instrucció <code>System.out.println…</code>.
</p>
<div class="ioctable ">
<div class="titletable"><a name="Table5"><span>Taula: </span></a>Evolució del bucle per escriure la suma dels valors enters múltiples de 3</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0">Iteració </th><th class="col1" colspan="2">Inici del bucle </th><th class="col3" colspan="2">Fi del bucle </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign">  </td><td class="col1"> <strong>‘i’ val</strong> </td><td class="col2"> <strong>Condició val</strong></td><td class="col3"> <strong>‘resultat’ val</strong></td><td class="col4"> <strong>‘i’ val</strong></td>
	</tr>
	<tr class="row2">
		<td class="col0"> 1 </td><td class="col1"> 0 </td><td class="col2"> (0 ≤ 20), <code>true</code></td><td class="col3"> 0+0, 0 </td><td class="col4"> 3 </td>
	</tr>
	<tr class="row3">
		<td class="col0"> 2 </td><td class="col1"> 3 </td><td class="col2"> (3 ≤ 20), <code>true</code></td><td class="col3"> 0+3, 3 </td><td class="col4"> 6 </td>
	</tr>
	<tr class="row4">
		<td class="col0"> 3 </td><td class="col1"> 6 </td><td class="col2"> (6 ≤ 20), <code>true</code></td><td class="col3"> 3+6, 9 </td><td class="col4"> 9 </td>
	</tr>
	<tr class="row5">
		<td class="col0"> 4 </td><td class="col1"> 9 </td><td class="col2"> (9 ≤ 20), <code>true</code></td><td class="col3"> 9+9, 18 </td><td class="col4"> 12 </td>
	</tr>
	<tr class="row6">
		<td class="col0"> 5 </td><td class="col1"> 12 </td><td class="col2"> (12 ≤ 20), <code>true</code></td><td class="col3"> 18+12, 30 </td><td class="col4"> 15 </td>
	</tr>
	<tr class="row7">
		<td class="col0"> 6 </td><td class="col1"> 15 </td><td class="col2"> (15 ≤ 20), <code>true</code></td><td class="col3"> 30+15, 45 </td><td class="col4"> 18 </td>
	</tr>
	<tr class="row8">
		<td class="col0"> 7 </td><td class="col1"> 18 </td><td class="col2"> (18 ≤ 20), <code>true</code></td><td class="col3"> 45+18, 63 </td><td class="col4"> 21 </td>
	</tr>
	<tr class="row9">
		<td class="col0"> 8 </td><td class="col1"> 21 </td><td class="col2"> (21 ≤ 20), <code>false</code></td><td class="col3" colspan="2"> Ja hem sortit del bucle </td>
	</tr>
</table></div>
</div>
<p>
Abans de donar per tancat aquest exemple, hi ha un aspecte força significatiu que val la pena tenir en compte quan s’usen estructures de repetició. En aquest cas concret, què passa si quan us pregunten el valor fins on es vol sumar escriviu 0 o un nombre negatiu? Bé, per contestar aquesta pregunta cal recordar que la condició s’avalua tot just abans de cada iteració, inclosa la primera vegada que s’arriba a la sentència <code>while</code>. En aquest cas, tan sols començar, la condició lògica no es compleix, per la qual cosa mai no s’arriba a executar cap iteració.
</p>

<p>
Recordeu, doncs, que en usar una sentència <code>while</code> si la primera vegada que s’avalua la condició lògica aquesta avalua a <code>false</code> el codi inclòs dins del bucle no s’arribarà a executar mai.
</p>

</div>

<h3><a id="exempleacumular_calculs" >Exemple: acumular càlculs</a></h3>
<div class="level3">

<p>

</p>

<p>
Els exemples que heu vist fins ara tenien en comú l’ús d’una variable de control de tipus comptador, a partir de la qual es pot veure de manera més o menys clara quantes iteracions farà el bucle. En tots els casos, la particularitat és que aquest comptador serveix com a valor auxiliar, que fins i tot pot ajudar a fer els càlculs que volem, però no és pròpiament el valor resultant. En l’exemple d’imprimir diversos caràcters &#039;-&#039; el resultat és el fet d’imprimir per pantalla. En el de la taula de multiplicar, el resultat que volem és el resultat de la multiplicació. Finalment, en l’exemple de sumar múltiples de tres, el resultat és la variable mateixa <code>resultat</code>.
</p>

<p>
Ara bé, en una estructura de repetició, l’evolució del mateix resultat que s’està calculant pot ser el senyal de sortida per deixar de fer iteracions. Aquest seria el cas d’usar variables amb el paper d’acumulador. Un exemple d’aquest comportament, en què una variable es va modificant de manera que es deixa d’iterar quan aquesta conté el resultat final, és el càlcul de l’operació mòdul amb enters (<code>%</code>).
</p>

<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/ic10mu2_24.png" class="imgB" title="Un acumulador reflecteix les modificacions en el resultat que apropen el final del bucle. Imatge de Paul Carvill/6" alt="Un acumulador reflecteix les modificacions en el resultat que apropen el final del bucle. Imatge de Paul Carvill/6" /></li><li><small>Un acumulador reflecteix les modificacions en el resultat que apropen el final del bucle. Imatge de Paul Carvill</small></li>
</ul></div>

</p>

<p>
El mòdul calcula el residu de dividir un enter (el dividend) per un altre (el divisor). Una estratègia simple per calcular-lo és anar restant el divisor al dividend fins que ja no es pot fer més, ja que donaria negatiu. En aquest cas, el valor del dividend es va modificant directament fins a trobar la solució.
</p>

<p>
Si s’estructura pas per pas, seria:
</p>
<ol>
<li class="level1"><div class="li"> Es pregunta quin és el dividend.</div>
</li>
<li class="level1"><div class="li"> Es llegeix.</div>
</li>
<li class="level1"><div class="li"> Es pregunta quin és el divisor.</div>
</li>
<li class="level1"><div class="li"> Es llegeix.</div>
</li>
<li class="level1"><div class="li"> Si el dividend és més petit que el divisor, ja hem acabat. El divisor ja és resultat del mòdul.</div>
</li>
<li class="level1"><div class="li"> En cas contrari, al dividend se li resta el divisor.</div>
</li>
<li class="level1"><div class="li"> Es torna a comprovar el pas 5. </div>
</li>
</ol>

<p>
Tot i que s’ha usat la paraula “si” en el pas 5, observant atentament les passes 5 a 7 es veu que en realitat denoten un bucle, ja que es van repetint fins que es produeix una condició concreta: que el valor del divisor és menor que el del dividend. Per tant, la condició per seguir repetint les instruccions és que el dividend sigui igual o més gran que el divisor.
</p>

<p>
El codi font del programa que du a terme aquestes passes seria el següent. Proveu que funciona al vostre entorn de treball. Per fer l’execució més aclaridora, a cada iteració es mostra per pantalla com es va modificant el dividend.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">import java.util.Scanner;</div></li><li class="li1"><div class="de1">//Un programa que llegeix un enter i el mostra per pantalla.</div></li><li class="li1"><div class="de1">public class Modul {</div></li><li class="li1"><div class="de1">  public static void main (String[] args) {</div></li><li class="li1"><div class="de1">    Scanner lector = new Scanner(System.in);</div></li><li class="li1"><div class="de1">    //PAS 1 i 2</div></li><li class="li1"><div class="de1">    System.out.print(&quot;Quin és el dividend? &quot;);</div></li><li class="li1"><div class="de1">    int dividend = lector.nextInt();</div></li><li class="li1"><div class="de1">    lector.nextLine();</div></li><li class="li1"><div class="de1">    //PAS 2 i 3</div></li><li class="li1"><div class="de1">    System.out.print(&quot;Quin és el divisor? &quot;);</div></li><li class="li1"><div class="de1">    int divisor = lector.nextInt();</div></li><li class="li1"><div class="de1">    lector.nextLine();</div></li><li class="li1"><div class="de1">    //PAS 5</div></li><li class="li1"><div class="de1">    while (dividend &gt;= divisor) {</div></li><li class="li1"><div class="de1">      //PAS 6</div></li><li class="li1"><div class="de1">      dividend = dividend - divisor;</div></li><li class="li1"><div class="de1">      System.out.println(&quot;Bucle: per ara el dividend val &quot; + dividend + &quot;.&quot;);</div></li><li class="li1"><div class="de1">      //PAS 7: Simplement equival a dir que fem la volta al bucle per avaluar la condició</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">    System.out.println(&quot;El resultat final és &quot; + dividend + &quot;.&quot;);</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

<p>
La <span class="tabref"><a href="#Table6"><span>taula</span></a></span> mostra l’evolució del valor del dividend per a cada iteració per al càlcul de 17%4 (que ha de donar 1). El resultat final és el valor acumulat en la variable <code>dividend</code> quan se surt del bucle.
</p>
<div class="ioctable ">
<div class="titletable"><a name="Table6"><span>Taula: </span></a>Evolució del bucle per calcular el mòdul usant un acumulador</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0">Iteració </th><th class="col1" colspan="2">Inici del bucle </th><th class="col3">Fi del bucle </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign">  </td><td class="col1"> <strong>‘dividend’ val</strong> </td><td class="col2"> <strong>Condició val</strong></td><td class="col3"> <strong>‘dividend’ val</strong></td>
	</tr>
	<tr class="row2">
		<td class="col0"> 1 </td><td class="col1"> 17 </td><td class="col2"> (17 &gt; 4), <code>true</code></td><td class="col3"> 17 – 4 = 13 </td>
	</tr>
	<tr class="row3">
		<td class="col0"> 2 </td><td class="col1"> 13 </td><td class="col2"> (13 &gt; 4), <code>true</code></td><td class="col3"> 13 – 4 = 9 </td>
	</tr>
	<tr class="row4">
		<td class="col0"> 3 </td><td class="col1"> 9 </td><td class="col2"> (9 &gt; 4), <code>true</code></td><td class="col3"> 9 – 4 = 5 </td>
	</tr>
	<tr class="row5">
		<td class="col0"> 4 </td><td class="col1"> 5 </td><td class="col2"> (5 &gt; 4), <code>true</code></td><td class="col3"> 5 – 4 = 1 </td>
	</tr>
	<tr class="row6">
		<td class="col0"> 5 </td><td class="col1"> 1 </td><td class="col2"> (1 &gt; 20), <code>false</code></td><td class="col3"> Ja hem sortit del bucle </td>
	</tr>
</table></div>
</div>
<p>
<strong>Repte 3:</strong> l’ús de comptadors i acumuladors no és excloent, sinó que pot ser complementari. Penseu com es podria modificar el programa per calcular el resultat del mòdul <em class="u">i</em> la divisió entera alhora. Recordeu que la divisió entera simplement seria comptar quantes vegades s’ha pogut restar el divisor.
</p>

</div>

<h3><a id="exemplesemafors" >Exemple: semàfors</a></h3>
<div class="level3">

<p>
El darrer cas que queda per estudiar és l’us d’un semàfor per indicar de manera explícita si ja no cal fer iteracions. Aquesta estratègia d’ús de variables de control es basa en situacions en què decidir si es vol continuar fent iteracions d’un bucle no es pot predir o calcular d’acord amb un valor que va augmentant o disminuint. Simplement, cal anar repetint fins que es compleixi una condició molt concreta. Llavors, del que es disposa és d’una variable de control, normalment de tipus booleà, sobre la qual es fa una assignació explícita que provocarà que la condició lògica avaluï directament a <code>false</code> i se surti del bucle.
</p>

<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/ic10mu2_25.png" class="imgB" title="Un semàfor o banderola avisa: &quot;Objectiu complert! No cal iterar més.&quot;" alt="Un semàfor o banderola avisa: &quot;Objectiu complert! No cal iterar més.&quot;" /></li><li><small>Un semàfor o banderola avisa: &quot;Objectiu complert! No cal iterar més.&quot;</small></li>
</ul></div>

</p>

<p>
Un exemple d’aquest cas és un programa en què cal endevinar un valor secret. Mitjançant una estructura de selecció és possible establir si s’ha encertat o no, però el que no té sentit és que cada cop que es vulgui provar d’endevinar-lo, s’hagi d’executar el programa de nou. El més normal és que es pregunti a l’usuari fins que l’encerti. En aquest cas, però, no hi ha un valor que a poc a poc, gradualment, va variant fins a poder establir que cal deixar d’iterar. Es passa de cop de continuar preguntant al fet que ja no calgui, segons la condició de si s’ha encertat o no. Aquesta es pot donar en qualsevol iteració, però és impossible estimar quan, ja que depèn totalment del valor introduït per l’usuari.
</p>

<p>

</p>

<p>
Si descrivim el què cal fer pas per pas, seria:
</p>
<ol>
<li class="level1"><div class="li"> Decidir quin serà el nombre per endevinar.</div>
</li>
<li class="level1"><div class="li"> Demanar que s’introdueixi un nombre pel teclat.</div>
</li>
<li class="level1"><div class="li"> Llegir-lo.</div>
</li>
<li class="level1"><div class="li"> Si el nombre no és el valor secret:</div>
<ol>
<li class="level2"><div class="li"> Cal avisar que s’ha fallat. </div>
</li>
<li class="level2"><div class="li"> Tornar al pas 2.</div>
</li>
</ol>
</li>
<li class="level1"><div class="li"> En cas contrari, ja hem acabat. Mostrar una felicitació.</div>
</li>
</ol>

<p>
Les passes 2 a 4 denoten que hi ha una estructura de repetició, la condició de la qual és que cal iterar mentre el valor secret no s’encerti.
</p>

<p>
El codi corresponent a aquest procés és el que es mostra tot seguit. Proveu que, efectivament, continua preguntant nombres fins que s’encerta el valor secret. En aquest cas, la variable de control que fa de semàfor és <code>haEncertat</code>. Fixeu-vos que, evidentment, cal que el valor inicial sigui el que permetrà que, com a mínim, hi hagi una iteració del bucle (la condició avaluï a <code>true</code>). En cas contrari, mai no s’entraria al bucle.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">import java.util.Scanner;</div></li><li class="li1"><div class="de1">//Un programa en què cal endevinar un nombre.</div></li><li class="li1"><div class="de1">public class Endevina {</div></li><li class="li1"><div class="de1">  //PAS 1</div></li><li class="li1"><div class="de1">  public static final int VALOR_SECRET = 4;  </div></li><li class="li1"><div class="de1">  public static void main (String[] args) {</div></li><li class="li1"><div class="de1">    Scanner lector = new Scanner(System.in);</div></li><li class="li1"><div class="de1">    System.out.println(&quot;Comencem el joc.&quot;);</div></li><li class="li1"><div class="de1">    System.out.println(&quot;Endevina el valor enter, entre 0 i 10.&quot;);</div></li><li class="li1"><div class="de1">    boolean haEncertat = false;</div></li><li class="li1"><div class="de1">    while (!haEncertat) {</div></li><li class="li1"><div class="de1">      System.out.print(&quot;Quin valor creus que és? &quot;);</div></li><li class="li1"><div class="de1">      int valorUsuari = lector.nextInt();</div></li><li class="li1"><div class="de1">      lector.nextLine();</div></li><li class="li1"><div class="de1">      if (VALOR_SECRET != valorUsuari) {</div></li><li class="li1"><div class="de1">        System.out.print(&quot;Has fallat! Torna a intentar-ho...&quot;);</div></li><li class="li1"><div class="de1">      } else {</div></li><li class="li1"><div class="de1">        haEncertat = true;</div></li><li class="li1"><div class="de1">      }</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">    System.out.println(&quot;Enhorabona. Per fi l'has encertat!&quot;);</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

<p>

</p>

<p>
La <span class="tabref"><a href="#Table7"><span>taula</span></a></span> mostra l’evolució de les iteracions del bucle quan algú prova els nombres 3, 6, 9 i 4, en aquest ordre.
</p>
<div class="ioctable ">
<div class="titletable"><a name="Table7"><span>Taula: </span></a>Evolució del bucle per endevinar un valor secret</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0">Iteració </th><th class="col1" colspan="2">Inici del bucle </th><th class="col3" colspan="2">Fi del bucle </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign">   </td><td class="col1"> <strong>‘haEncertat’ val</strong> </td><td class="col2"> <strong>Condició val</strong></td><td class="col3"> <strong>‘valorUsuari’ val</strong></td><td class="col4"> <strong>‘haEncertat’ val</strong></td>
	</tr>
	<tr class="row2">
		<td class="col0"> 1 </td><td class="col1"> <code>false</code> </td><td class="col2"> (!<code>false</code>), <code>true</code> </td><td class="col3"> 3 </td><td class="col4"> <code>false</code></td>
	</tr>
	<tr class="row3">
		<td class="col0"> 2 </td><td class="col1"> <code>false</code> </td><td class="col2"> (!<code>false</code>), <code>true</code> </td><td class="col3"> 6 </td><td class="col4"> <code>false</code></td>
	</tr>
	<tr class="row4">
		<td class="col0"> 3 </td><td class="col1"> <code>false</code> </td><td class="col2"> (!<code>false</code>), <code>true</code> </td><td class="col3"> 9 </td><td class="col4"> <code>false</code></td>
	</tr>
	<tr class="row5">
		<td class="col0"> 4 </td><td class="col1"> <code>false</code> </td><td class="col2"> (!<code>false</code>), <code>true</code> </td><td class="col3"> 4 </td><td class="col4"> <code>true</code></td>
	</tr>
	<tr class="row6">
		<td class="col0"> 5 </td><td class="col1"> <code>true</code> </td><td class="col2"> (!<code>true</code>), <code>false</code></td><td class="col3" colspan="2"> Ja hem sortit del bucle </td>
	</tr>
</table></div>
</div>
</div>

<h3><a id="exemplesemafors_i_comptadors_alhora" >Exemple: semàfors i comptadors alhora</a></h3>
<div class="level3">

<p>
La categorització de les variables de control en tres models diferents no significa que una estructura de repetició sempre hagi de dependre d’una única variable. Recordeu que la condició lògica es representa com una expressió booleana i, per tant, pot ser tan complexa com es vulgui. En alguns casos, hi pot haver més d’una condició sota les quals es considera que no cal fer més iteracions d’un bucle.
</p>

<p>
Torneu a fer una ullada al programa per endevinar un valor secret. Ara ja té una mica més de sentit, però encara hi ha un aspecte que potser el fa una mica estrany: el programa no s’acabarà fins que endevineu el valor secret. Continuarà preguntant una vegada i una altra fins que encerteu. Si no encerteu mai, no s’acabarà mai. Potser seria més raonable posar un límit al nombre d’intents, de manera que si es falla més d’un cert nombre de vegades es considera que heu perdut el joc i s’acaba el programa. En aquest cas, la condició lògica ha de preveure <strong>dues</strong> possibilitats: si s’ha encertat el valor secret o si s’ha esgotat el nombre d’intents. És a dir, combinar un semàfor i un comptador.
</p>

<p>
Descrit pas per pas, podria ser:
</p>
<div class="iocnote"><div class="ioccontent">
<p>
Mai no hi haurà més iteracions que el valor estipulat en el comptador d’intents, d’acord amb el seu increment.
</p>
</div></div><ol>
<li class="level1"><div class="li"> Decidir quin serà el nombre per endevinar i el màxim d’intents.</div>
</li>
<li class="level1"><div class="li"> Demanar que s’introdueixi un nombre pel teclat.</div>
</li>
<li class="level1"><div class="li"> Llegir-lo.</div>
</li>
<li class="level1"><div class="li"> Descomptar un intent.</div>
</li>
<li class="level1"><div class="li"> Si el nombre no és el valor secret, i si no s’han esgotat els intents: </div>
<ol>
<li class="level2"><div class="li"> Cal avisar que s’ha fallat. </div>
</li>
<li class="level2"><div class="li"> Tornar al pas 2.</div>
</li>
</ol>
</li>
<li class="level1"><div class="li"> En cas contrari, ja hem acabat.</div>
</li>
<li class="level1"><div class="li"> Si el darrer nombre dit és el valor secret, cal dir que s’ha guanyat.</div>
</li>
<li class="level1"><div class="li"> Si el darrer nombre dit no és el valor secret, cal dir que s’ha perdut.</div>
</li>
</ol>

<p>
La característica més important d’aquest problema, en què hi ha més d’una possibilitat sota la qual el bucle deixa d’iterar, és, un cop se’n surt, detectar el motiu exacte pel qual se n’ha sortit. Abans, sortir del bucle sempre implicava que s’havia encertat el valor secret, però ara ja no. Aquest és el paper que tenen les passes 7 i 8. En aquest cas, una manera de veure si les iteracions han acabat perquè s’ha endevinat el valor secret o perquè s’han esgotat els intents és mirant el darrer valor que s’ha entrat.
</p>

<p>
El programa que duria a terme aquest joc seria el següent. Proveu de posar-lo en marxa.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">import java.util.Scanner;</div></li><li class="li1"><div class="de1">//Un programa en què cal endevinar un nombre.</div></li><li class="li1"><div class="de1">public class EndevinaSemafor {</div></li><li class="li1"><div class="de1">  //PAS 1 </div></li><li class="li1"><div class="de1">  public static final int VALOR_SECRET = 4;</div></li><li class="li1"><div class="de1">  public static final int MAX_INTENTS = 3;</div></li><li class="li1"><div class="de1">  public static void main (String[] args) {</div></li><li class="li1"><div class="de1">    Scanner lector = new Scanner(System.in);</div></li><li class="li1"><div class="de1">    System.out.println(&quot;Comencem el joc.&quot;);</div></li><li class="li1"><div class="de1">    System.out.println(&quot;Endevina el valor enter, entre 0 i 10, en tres intents.&quot;);</div></li><li class="li1"><div class="de1">    boolean haEncertat = false;</div></li><li class="li1"><div class="de1">    int intents = MAX_INTENTS;</div></li><li class="li1"><div class="de1">    //Per garantir l'àmbit correcte de la variable, ara cal declarar-la.</div></li><li class="li1"><div class="de1">    int valorUsuari = 0;</div></li><li class="li1"><div class="de1">    while ((!haEncertat)&amp;&amp;(intents &gt; 0)) {</div></li><li class="li1"><div class="de1">      //PAS 2 i 3</div></li><li class="li1"><div class="de1">      System.out.print(&quot;Quin valor creus que és? &quot;);</div></li><li class="li1"><div class="de1">      valorUsuari = lector.nextInt();</div></li><li class="li1"><div class="de1">      lector.nextLine();</div></li><li class="li1"><div class="de1">      //PAS 4</div></li><li class="li1"><div class="de1">      intents = intents - 1;      </div></li><li class="li1"><div class="de1">      //PAS 5 i 6</div></li><li class="li1"><div class="de1">      if (VALOR_SECRET != valorUsuari) {</div></li><li class="li1"><div class="de1">        System.out.print(&quot;Has fallat! Torna a intentar-ho.&quot;);</div></li><li class="li1"><div class="de1">      } else {</div></li><li class="li1"><div class="de1">        haEncertat = true;</div></li><li class="li1"><div class="de1">      }</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">    if (valorUsuari == VALOR_SECRET) {</div></li><li class="li1"><div class="de1">      //PAS 7: S'ha sortit del bucle perquè el valor era correcte.</div></li><li class="li1"><div class="de1">      System.out.println(&quot;Enhorabona. Has encertat!&quot;);</div></li><li class="li1"><div class="de1">    } else {</div></li><li class="li1"><div class="de1">      //PAS 8: S'ha sortit del bucle perquè s'han esgotat els intents.</div></li><li class="li1"><div class="de1">      System.out.println(&quot;Intents esgotats. Has perdut!&quot;);</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

<p>
Abans de seguir, val la pena subratllar que, en aquest programa, el valor llegit des del teclat s’usa fora del bucle, en la sentència <code>if/else</code>. Per tant, per garantir que l’àmbit de la variable <code>valorUsuari</code> és el correcte, s’ha de declarar amb anterioritat i dins del mateix bloc. Si es declara dins del codi del bucle, hi haurà un error.
</p>

<p>
La <span class="tabref"><a href="#Table8"><span>taula</span></a></span> mostra un exemple d’evolució del bucle per a un cas en què s’intenten els valors 2 i 4, de manera que s’encerta el valor abans d’esgotar els intents. A la darrera fila se subratlla la part de la condició que és determinant perquè avaluï a fals. Noteu que, en sortir del bucle, <code>valorUsuari</code> val 4, raó per la qual l’estructura de selecció considerarà que s’ha guanyat.
</p>

<p>

</p>
<div class="ioctable ">
<div class="titletable"><a name="Table8"><span>Taula: </span></a>Evolució del bucle per endevinar un valor secret, amb intents limitats, guanyant</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0">Iteració </th><th class="col1" colspan="3">Inici del bucle </th><th class="col4" colspan="3">Fi del bucle </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign">   </td><td class="col1"> <strong>‘haEncertat’ val</strong> </td><td class="col2"> <strong>‘intents’ val</strong> </td><td class="col3"> <strong>Condició val</strong></td><td class="col4"> <strong>‘valorUsuari’ val</strong></td><td class="col5"> <strong>‘haEncertat’ val</strong></td><td class="col6"> <strong>‘intents’ val</strong> </td>
	</tr>
	<tr class="row2">
		<td class="col0"> 1 </td><td class="col1"> <code>false</code> </td><td class="col2"> 3 </td><td class="col3"> (!<code>false</code>)&amp;&amp;(3&gt;0), <code>true</code> </td><td class="col4 rightalign">  2 </td><td class="col5"> <code>false</code></td><td class="col6"> 2 </td>
	</tr>
	<tr class="row3">
		<td class="col0"> 2 </td><td class="col1"> <code>false</code> </td><td class="col2"> 2</td><td class="col3"> (!<code>false</code>)&amp;&amp;(2&gt;0), <code>true</code> </td><td class="col4 rightalign">  4 </td><td class="col5"> <code>true</code></td><td class="col6"> 1 </td>
	</tr>
	<tr class="row4">
		<td class="col0"> 3 </td><td class="col1"> <code>true</code> </td><td class="col2"> 1 </td><td class="col3"> (!<code>true</code>)&amp;&amp;(1&gt;0), <code>false</code></td><td class="col4 rightalign" colspan="3">  Ja hem sortit del bucle </td>
	</tr>
</table></div>
</div>
<p>
També és interessant veure què passa si es fallen tots els intents, per exemple introduint 2, 5 i 7. Això es veu a la <span class="tabref"><a href="#Table9"><span>taula</span></a></span>. En aquest cas, en sortir del bucle, <code>valorUsuari</code> val 7, de manera que l’estructura de selecció considerarà que s’ha perdut.
</p>
<div class="ioctable ">
<div class="titletable"><a name="Table9"><span>Taula: </span></a>Evolució del bucle per endevinar un valor secret, amb intents limitats, perdent</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0">Iteració </th><th class="col1" colspan="3">Inici del bucle </th><th class="col4" colspan="3">Fi del bucle </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign">   </td><td class="col1"> <strong>‘haEncertat’ val</strong> </td><td class="col2"> <strong>‘intents’ val</strong> </td><td class="col3"> <strong>Condició val</strong></td><td class="col4"> <strong>‘valorUsuari’ val</strong></td><td class="col5"> <strong>‘haEncertat’ val</strong></td><td class="col6"> <strong>‘intents’ val</strong> </td>
	</tr>
	<tr class="row2">
		<td class="col0"> 1 </td><td class="col1"> <code>false</code> </td><td class="col2"> 3 </td><td class="col3"> (!<code>false</code>)&amp;&amp;(3&gt;0), <code>true</code> </td><td class="col4 rightalign">  2 </td><td class="col5"> <code>false</code></td><td class="col6"> 2 </td>
	</tr>
	<tr class="row3">
		<td class="col0"> 2 </td><td class="col1"> <code>false</code> </td><td class="col2"> 2 </td><td class="col3"> (!<code>false</code>)&amp;&amp;(2&gt;0), <code>true</code> </td><td class="col4 rightalign">  5 </td><td class="col5"> <code>false</code></td><td class="col6"> 1 </td>
	</tr>
	<tr class="row4">
		<td class="col0"> 3 </td><td class="col1"> <code>false</code> </td><td class="col2"> 1 </td><td class="col3"> (!<code>false</code>)&amp;&amp;(1&gt;0), <code>true</code> </td><td class="col4 rightalign">  7 </td><td class="col5"> <code>false</code></td><td class="col6"> 0 </td>
	</tr>
	<tr class="row5">
		<td class="col0"> 4 </td><td class="col1"> <code>false</code> </td><td class="col2"> 0 </td><td class="col3"> (!<code>false</code>)&amp;&amp;(0&gt;0), <code>false</code></td><td class="col4 rightalign" colspan="3">  Ja hem sortit del bucle </td>
	</tr>
</table></div>
</div>
<p>
Finalment, per la complexitat de l’exemple, també val la pena estudiar amb detall un cas especial: quan s’encerta en el darrer intent, per exemple, en introduir successivament els valors 2, 5 i 4. Aquest cas és especial, ja que la condició lògica avalua a <code>false</code> com a resultat del fet que les dues expressions individuals també avaluen a <code>false</code>, tant la que comprova si s’han esgotat el nombre d’intents com la que comprova si ha encertat. Ara bé, com que el darrer valor que s’ha intentat és el correcte, l’estructura de selecció considera que es guanya el joc. Això es pot veure més detalladament a la <span class="tabref"><a href="#Table10"><span>taula</span></a></span>.
</p>
<div class="ioctable ">
<div class="titletable"><a name="Table10"><span>Taula: </span></a>Evolució del bucle per endevinar un valor secret, amb intents limitats, guanyant in extremis</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0">Iteració </th><th class="col1" colspan="3">Inici del bucle </th><th class="col4" colspan="3">Fi del bucle </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign">   </td><td class="col1"> <strong>‘haEncertat’ val</strong> </td><td class="col2"> <strong>‘intents’ val</strong> </td><td class="col3"> <strong>Condició val</strong></td><td class="col4"> <strong>‘valorUsuari’ val</strong></td><td class="col5"> <strong>‘haEncertat’ val</strong></td><td class="col6"> <strong>‘intents’ val</strong> </td>
	</tr>
	<tr class="row2">
		<td class="col0"> 1 </td><td class="col1"> <code>false</code> </td><td class="col2"> 3 </td><td class="col3"> (!<code>false</code>)&amp;&amp;(3&gt;0), <code>true</code> </td><td class="col4 rightalign">  2 </td><td class="col5"> <code>false</code></td><td class="col6"> 2 </td>
	</tr>
	<tr class="row3">
		<td class="col0"> 2 </td><td class="col1"> <code>false</code> </td><td class="col2"> 2 </td><td class="col3"> (!<code>false</code>)&amp;&amp;(2&gt;0), <code>true</code> </td><td class="col4 rightalign">  5 </td><td class="col5"> <code>false</code></td><td class="col6"> 1 </td>
	</tr>
	<tr class="row4">
		<td class="col0"> 3 </td><td class="col1"> <code>false</code> </td><td class="col2"> 1 </td><td class="col3"> (!<code>false</code>)&amp;&amp;(1&gt;0), <code>true</code> </td><td class="col4 rightalign">  4 </td><td class="col5"> <code>true</code></td><td class="col6"> 0 </td>
	</tr>
	<tr class="row5">
		<td class="col0"> 4 </td><td class="col1 leftalign"> <code>true</code>  </td><td class="col2"> 0 </td><td class="col3"> (!<code>true</code>)&amp;&amp;(0&gt;0), <code>false</code></td><td class="col4 rightalign" colspan="3">  Ja hem sortit del bucle </td>
	</tr>
</table></div>
</div>
</div>

<h2><a id="repetir_almenys_un_copla_sentencia_do_while" >Repetir almenys un cop: la sentència &#039;&#039;do/while&#039;&#039;</a></h2>
<div class="level2">

<p>
Tot i que la sentència <code>while</code> és més que suficient per dur a terme pràcticament qualsevol estructura de repetició, n’hi ha d’altres que s’adapten millor a certs casos molt concrets. La seva aportació consisteix exclusivament a facilitar la lectura del codi o permetre dur a terme algunes tasques de manera automàtica.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
La sentència <strong>do/while</strong> permet repetir l’execució del bucle mentre es verifiqui la condició lògica. A diferència de la sentència <code>while</code>, la condició es verifica al final de cada iteració. Per tant, independentment de com avaluï la condició, com a mínim sempre es durà a terme la primera iteració.
</p>
</div></div>
<p>
Al contrari que la sentència <code>while</code>, la sentència <code>do/while</code> no és tan comuna en els llenguatges de programació.
</p>

</div>

<h3><a id="sintaxi_i_estructura1" >Sintaxi i estructura</a></h3>
<div class="level3">

<p>
Per dur a terme aquest tipus de control sobre les iteracions d’un bucle, la sintaxi d’aquesta sentència en llenguatge Java és la següent:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">do {</div></li><li class="li1"><div class="de1">  Instruccions per executar dins del bucle</div></li><li class="li1"><div class="de1">} while (expressió booleana); </div></li></ol></pre>

<p>
Com podeu veure, és molt semblant a la sentència <code>while</code>, però invertint el lloc on apareix la condició lògica. Per poder distingir clarament on comença el bucle s’usa la paraula clau <code>do</code>. Les instruccions del bucle continuen encerclades entre claus, <code>{…}</code>.
</p>

<p>
La <span class="figref"><a href="#Figure20"><span>figura</span></a></span> mostra un diagrama del flux de control d’aquesta sentència i estableix també l’ordre sota el qual s’avalua l’expressió que representa la condició lògica, en aquest cas al final, amb vista a decidir si cal executar o no una nova iteració del bucle.
</p>
<div class="iocfigure"><a name="Figure20"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Diagrama de flux de control d’una sentència <code>do-while</code>

</figcaption><img src="../media/ic10mu2_26.png" alt="" /></figure>
</div>
</div>

<h3><a id="exemplecontrol_d_entrada_per_teclat" >Exemple: control d&#039;entrada per teclat</a></h3>
<div class="level3">

<p>
En un exemple anterior ja s’ha vist la utilitat de les estructures de repetició a l’hora de preguntar dades a l’usuari. Ara bé, un àmbit en què encara és més útil i més freqüent usar-la és el de controlar si la dada es correspon amb algun dels valors esperats abans de donar-la per bona i usar-la. Amb el que heu vist fins al moment, si l’usuari s’equivoca i escriu alguna dada errònia (per exemple, fora del rang esperat), sou capaços de detectar-ho i mitjançant una estructura de selecció avisar l’usuari, però llavors el programa acaba. Això no té gaire sentit; seria molt més còmode simplement tornar-li a preguntar repetidament fins que introdueixi un valor que s’adeqüi als valors esperats.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">do/while</p>
<p>
El nom de la sentència <code>do/while</code> vol dir: “Fes això, i continua fent-ho mentre es compleixi aquesta condició”.
</p>
</div></div>
<p>
Tot i que amb un ús assenyat de la sentència <code>while</code> és pot dur a terme aquesta tasca, reemplaçar-la per la sentència <code>do/while</code> pot ser especialment còmode. El motiu principal és que en aquests casos, abans d’avaluar si la dada és correcta o no, primer cal haver-la llegit. Per tant, és més intuïtiu avaluar la condició lògica al final i no al principi del bucle, un cop realment ja es disposa de la dada.
</p>

<p>
Normalment, en usar aquesta sentència, la condició lògica avalua directament el valor que es vol controlar, per veure si compleix els requisits establerts. La dada llegida mateixa fa les funcions de semàfor.
</p>

<p>
L’esquema general per fer això seria:
</p>
<ol>
<li class="level1"><div class="li"> Demanar la dada a l’usuari.</div>
</li>
<li class="level1"><div class="li"> Llegir-la.</div>
</li>
<li class="level1"><div class="li"> Mirar si la dada és correcta. Si no ho és, tornar al punt 1.</div>
</li>
<li class="level1"><div class="li"> Si és correcta, ja hi podem operar.</div>
</li>
</ol>

<p>
Les passes 1 a 3 identifiquen que hi ha un bucle que té com a condició lògica que les dades escrites no són correctes. Ara bé, l’avaluació d’aquest fet es fa al final, no al principi de la seqüència d’instruccions. A més a més, es compleix que, fins i tot en el millor cas, si l’usuari no s’equivoca, les passes 1 a 3 sempre es duran a terme almenys un cop.
</p>

<p>
Per exemple, proveu el programa següent, que garanteix que qualsevol valor introduït estarà entre 0 i 10 (com és el cas del que s’espera en l’exemple anterior d’endevinar un nombre). 
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">import java.util.Scanner;</div></li><li class="li1"><div class="de1">//Anem a llegir un enter entre 0 i 10.</div></li><li class="li1"><div class="de1">public class ValorFitat {</div></li><li class="li1"><div class="de1">  public static void main (String[] args) {</div></li><li class="li1"><div class="de1">    Scanner lector = new Scanner(System.in);</div></li><li class="li1"><div class="de1">    int valorUsuari = 0;</div></li><li class="li1"><div class="de1">    do {</div></li><li class="li1"><div class="de1">      //PAS 1 i 2: Com a mínim, segur que es pregunta un cop.</div></li><li class="li1"><div class="de1">      System.out.print(&quot;Introdueix un valor enter entre 0 i 10: &quot;);</div></li><li class="li1"><div class="de1">      valorUsuari = lector.nextInt();</div></li><li class="li1"><div class="de1">      lector.nextLine();</div></li><li class="li1"><div class="de1">      //PAS 3: Només té sentit avaluar si 'valor' és vàlid un cop s'ha llegit.</div></li><li class="li1"><div class="de1">    } while ((valorUsuari &lt; 0)||(valorUsuari &gt; 10));</div></li><li class="li1"><div class="de1">    //PAS 4: Tot correcte</div></li><li class="li1"><div class="de1">    System.out.println(&quot;Dada correcta. Has escrit &quot; + valorUsuari);</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

<p>
La <span class="tabref"><a href="#Table11"><span>taula</span></a></span> mostra un exemple d’evolució del bucle amb l’entrada dels nombres –4, 15 i 4. En aquest cas, la columna d’avaluació de la condició es troba al final del bucle. A l’avaluació, se subratlla la part de l’expressió que és determinant perquè avaluï a <code>true</code> i es provoqui una nova iteració.
</p>
<div class="ioctable ">
<div class="titletable"><a name="Table11"><span>Taula: </span></a>Evolució del bucle per garantir un valor entre 0 i 10 amb una sentència <code>do/while</code></div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0">Iteració </th><th class="col1">Inici del bucle </th><th class="col2" colspan="2">Fi del bucle </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign">   </td><td class="col1"> <strong>‘valorUsuari’ val</strong> </td><td class="col2"> <strong>‘valorUsuari’ val</strong> </td><td class="col3"> <strong>Condició val</strong></td>
	</tr>
	<tr class="row2">
		<td class="col0"> 1 </td><td class="col1 leftalign"> 0   </td><td class="col2 leftalign"> -4  </td><td class="col3"> (–4&lt;0)<code>||</code>(–4&gt;10), <code>true</code> </td>
	</tr>
	<tr class="row3">
		<td class="col0"> 2 </td><td class="col1 leftalign"> -4  </td><td class="col2 leftalign"> 15  </td><td class="col3"> (15&lt;0)<code>||</code>(15&gt;10), <code>true</code> </td>
	</tr>
	<tr class="row4">
		<td class="col0"> 3 </td><td class="col1 leftalign"> 15  </td><td class="col2 leftalign"> 4   </td><td class="col3"> (4&lt;0)<code>||</code>(4&gt;10), <code>false</code> </td>
	</tr>
	<tr class="row5">
		<td class="col0"> 4 </td><td class="col1 leftalign"> 4  </td><td class="col2" colspan="2"> Ja hem sortit del bucle </td>
	</tr>
</table></div>
</div>
<p>
En realitat, en aquest cas, un cop la condició ha avaluat a <code>false</code> a la tercera iteració ja es continua directament amb la instrucció següent del programa. No hi ha cap nou salt a l’inici del bucle, al contrari del que passa amb la sentència <code>while</code>. L’avaluació de la condició es fa al final de cada iteració, i no abans de començar cada una.
</p>

<p>
<strong>Repte 4:</strong> apliqueu aquesta comprovació a algun dels exemples anteriors vistos fins al moment. Per exemple, altres casos en què té sentit comprovar si un valor pertany a un rang esperat per garantir que un preu és positiu, o si un nombre de mes està entre 1 i 12.
</p>

</div>

<h2><a id="repetir_un_cert_nombre_de_vegadesla_sentencia_for" >Repetir un cert nombre de vegades: la sentència &#039;&#039;for&#039;&#039;</a></h2>
<div class="level2">

<p>
En algunes situacions especials ja es coneix, <em>a priori</em>, la quantitat exacta de vegades que caldrà repetir el bucle. En tal cas és útil disposar d’un mecanisme que representi de manera més clara la declaració d’una variable de control de tipus comptador, l’especificació de fins on s’ha de comptar, i que al final de cada iteració incrementi o disminueixi el seu valor de manera automàtica, en lloc d’haver de fer-ho nosaltres. Automatitzar aquest darrer punt és molt important, ja que evita que per un oblit no es faci i s’acabi generant un bucle infinit.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
Oblidar-se de modificar una variable comptador és un error molt típic quan s’usen estructures de repetició.
</p>
</div></div><div class="iocimportant"><div class="ioccontent">
<p>
La sentència <strong>for</strong> permet repetir un nombre determinat de vegades un conjunt d’instruccions.
</p>
</div></div>
<p>
La majoria de llenguatges solen disposar de l’equivalent a aquesta sentència.
</p>

</div>

<h3><a id="sintaxi_i_estructura2" >Sintaxi i estructura</a></h3>
<div class="level3">

<p>
La sintaxi d’aquesta sentència en llenguatge Java és una mica més complexa, ja que hi intervenen molts factors. Cal especificar tres apartats especials separats per punt i coma (<code>;</code>):
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">for (inicialització comptador ; expressió booleana ; increment comptador) {</div></li><li class="li1"><div class="de1">  Instruccions per executar dins del bucle</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

<p>
La descripció de cada apartat és la següent:
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">for</p>
<p>
El nom de la sentència <code>for</code> vol dir: “Per veure quantes vegades cal fer això, compta d’aquest valor a aquest altre”.
</p>
</div></div><ul>
<li class="level1"><div class="li"> Inicialització comptador: es tracta de la inicialització d’una variable de tipus numèric que servirà com a comptador. És exactament igual que assignar un valor a una variable qualsevol (<code>identificador = valorInicial</code>). Si es vol, es permet declarar la variable alhora que s’inicialitza (<code>tipus identificador = valorInicial</code>). </div>
</li>
<li class="level1"><div class="li"> Expressió booleana: es tracta de la condició lògica que indica si cal fer una nova iteració o no, igual que en la resta d’estructures de repetició.</div>
</li>
<li class="level1"><div class="li"> Increment: es tracta d’una instrucció que modifica el valor del comptador, normalment una assignació. Aquesta instrucció s’executa automàticament al final de cada iteració. Tot i el seu nom, tant pot ser un increment com una disminució del valor.</div>
</li>
</ul>

<p>
La <span class="figref"><a href="#Figure21"><span>figura</span></a></span> mostra un diagrama de flux de control d’aquesta sentència i indica quan s’executa cada element de la declaració de la sentència i quan s’avalua l’expressió que denota la condició lògica. Noteu que la inicialització només es fa una vegada, tot just abans de fer la primera avaluació de la condició lògica. En canvi, l’increment del comptador es fa al final de cada iteració, com si fos la darrera instrucció escrita dins del bucle.
</p>

<p>
De fet, la sentència <code>for</code> és equivalent a una sentència <code>while</code> que segueixi l’estructura següent:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">inicialització comptador</div></li><li class="li1"><div class="de1">while (expressió booleana) {</div></li><li class="li1"><div class="de1">  Instruccions per executar dins del bucle</div></li><li class="li1"><div class="de1">  Increment comptador</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>
<div class="iocfigure"><a name="Figure21"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Diagrama de flux de control d’una sentència <code>for</code>

</figcaption><img src="../media/ic10mu2_27.png" alt="" /></figure>
</div>
</div>

<h3><a id="exemplela_taula_de_multiplicar_versio_2" >Exemple: la taula de multiplicar, versió 2</a></h3>
<div class="level3">

<p>
La sentència <code>for</code> s’usa normalment en lloc de <code>while</code> en casos en què cal una variable de control que va variant el seu valor en una quantitat fixa a cada iteració, ja sigui incrementant-se o decreixent. És el que passa, per exemple, amb els casos controlats per un comptador, com els primers exemples de la sentència <code>while</code>.
</p>
<div class="iocexample"><div class="ioccontent"><p class="ioctitle">L&#039;operador postincrement/decrement</p>
<p>
Per posar un exemple de la sentència <code>for</code>, s’introduiran uns nous operadors unaris existents en alguns llenguatges, com el Java. Aquests són especialment útils per especificar l’autoincrement en el tercer apartat de la sentència <code>for</code>. Es tracta del postincrement (<code>++</code>) i del postdecrement (<code>–</code>). El resultat d’aplicar-lo és que se suma o es resta 1 al valor de la variable, respectivament. La sintaxi és: <code>identificadorVariable++</code> i <code>identificadorVariable–</code>, en cada cas. Per exemple, <code>i++</code>, <code>valor–</code>, etc.
</p>

<p>
La seva particularitat és que, com a operador, es pot usar directament dins d’una expressió. En aquest cas, a l’hora d’avaluar-la la seva precedència és la primera.
</p>
</div></div>
<p>
Tot seguit hi ha l’adaptació a la sentència <code>for</code> de l’exemple de la taula de multiplicar. Comproveu que fa exactament el mateix. 
</p>

<p>

</p>
<pre class="code java"><ol><li class="li1"><div class="de1">import java.util.Scanner;</div></li><li class="li1"><div class="de1">//Un programa que mostra la taula de multiplicar d'un nombre, usant 'for'.</div></li><li class="li1"><div class="de1">public class TaulaMultiplicarFor {</div></li><li class="li1"><div class="de1">  public static void main (String[] args) {</div></li><li class="li1"><div class="de1">    //S'inicialitza la biblioteca.</div></li><li class="li1"><div class="de1">    Scanner lector = new Scanner(System.in);</div></li><li class="li1"><div class="de1">    //Pregunta el nombre.</div></li><li class="li1"><div class="de1">    System.out.print(&quot;Quina taula de multiplicar vols? &quot;);</div></li><li class="li1"><div class="de1">    int taula = lector.nextInt();</div></li><li class="li1"><div class="de1">    lector.nextLine();</div></li><li class="li1"><div class="de1">    //El comptador servirà per fer càlculs.</div></li><li class="li1"><div class="de1">    //En lloc de 'i++' també es podria escriure 'i = i + 1'.</div></li><li class="li1"><div class="de1">    for (int i = 0; i &lt;= 10; i++) {</div></li><li class="li1"><div class="de1">      int resultat = taula*i;</div></li><li class="li1"><div class="de1">      System.out.println(taula + &quot; * &quot; + i + &quot; = &quot; + resultat);</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">    System.out.println(&quot;Aquesta ha estat la taula del &quot; + taula);</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

<p>
De fet, la taula d’evolució del bucle és exactament igual que la de la versió original amb la sentència <code>while</code> (<span class="tabref"><a href="#Table4"><span>taula</span></a></span>).
</p>

<p>
<strong>Repte 5:</strong> com passa amb els programes basats en la sentència <code>while</code> amb una variable de control de tipus comptador, el comptador d’una sentència <code>for</code> no necessàriament s’ha de modificar sumant/restant d’u en u. Adapteu l’exemple de la suma de múltiples de tres usant la sentència <code>for</code>.
</p>

</div>

<h3><a id="exemplemes_enlla_de_sumar_i_restar" >Exemple: més enllà de sumar i restar</a></h3>
<div class="level3">

<p>
De la mateixa manera que res no obliga que un comptador s’incrementi d’u en u, tampoc no és imprescindible que l’operació sigui una suma o una resta. Qualsevol operació que garanteixi que el valor es va apropant a un cas en què la condició lògica avaluarà a <code>false</code> i se sortirà del bucle és suficient. Això també és cert per a l’apartat d’autoincrement de la sentència <code>for</code>.
</p>

<p>
Per exemple, el codi següent usa una sentència <code>for</code> per mostrar totes les potències de dos menors o iguals que una fita que estableix l’usuari. Per fer-ho, incrementa la variable de control (en aquest cas, amb el paper d’acumulador) fent multiplicacions. Compileu-lo i executeu-lo per veure que, efectivament, és així.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">import java.util.Scanner;</div></li><li class="li1"><div class="de1">//Anem a calcular potències de dos.</div></li><li class="li1"><div class="de1">public class Potencies {</div></li><li class="li1"><div class="de1">  public static void main (String[] args) {</div></li><li class="li1"><div class="de1">    Scanner lector = new Scanner(System.in);</div></li><li class="li1"><div class="de1">    System.out.print(&quot;Fins a quin valor vols anar cercant potències de dos? &quot;);</div></li><li class="li1"><div class="de1">    int valor = lector.nextInt();</div></li><li class="li1"><div class="de1">    lector.nextLine();</div></li><li class="li1"><div class="de1">    //La variable &quot;i&quot; s'incrementa multiplicant en lloc de sumant.</div></li><li class="li1"><div class="de1">    //&quot;i&quot; és el mateix resultat.</div></li><li class="li1"><div class="de1">    for (int i = 1; i &lt;= valor; i = i*2) {</div></li><li class="li1"><div class="de1">      System.out.println(i);</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

<p>
La <span class="tabref"><a href="#Table12"><span>taula</span></a></span> mostra l’evolució del bucle per al cas de posar com a límit el valor 70. Recordeu que el valor inicial de la variable <code>i</code> en la primera iteració del bucle es deu a la inicialització dins del primer apartat de la sentència <code>for</code>, mentre que el valor al final es deu a l’autoincrement especificat en el tercer apartat (<code>i = 2*i</code>).
</p>
<div class="ioctable ">
<div class="titletable"><a name="Table12"><span>Taula: </span></a>Evolució del bucle per calcular potències de 2 usant una sentència <code>for</code></div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0">Iteració </th><th class="col1" colspan="2">Inici del bucle </th><th class="col3">Fi del bucle </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign">  </td><td class="col1"> <strong>‘i’ val</strong> </td><td class="col2"> <strong>Condició val</strong></td><td class="col3"> <strong>‘i’ val</strong></td>
	</tr>
	<tr class="row2">
		<td class="col0"> 1 </td><td class="col1"> 1 </td><td class="col2"> (1 ≤ 70), <code>true</code></td><td class="col3"> 2 * 1 = 2 </td>
	</tr>
	<tr class="row3">
		<td class="col0"> 2 </td><td class="col1"> 2 </td><td class="col2"> (2 ≤ 70), <code>true</code></td><td class="col3"> 2 * 2 = 4 </td>
	</tr>
	<tr class="row4">
		<td class="col0"> 3 </td><td class="col1"> 4 </td><td class="col2"> (4 ≤ 70), <code>true</code></td><td class="col3"> 2 * 4 = 8 </td>
	</tr>
	<tr class="row5">
		<td class="col0"> 4 </td><td class="col1"> 8 </td><td class="col2"> (8 ≤ 70), <code>true</code></td><td class="col3"> 2 * 8 = 16 </td>
	</tr>
	<tr class="row6">
		<td class="col0"> 5 </td><td class="col1"> 16 </td><td class="col2"> (16 ≤ 70), <code>true</code></td><td class="col3"> 2 * 16 = 32 </td>
	</tr>
	<tr class="row7">
		<td class="col0"> 6 </td><td class="col1"> 32 </td><td class="col2"> (32 ≤ 70), <code>true</code></td><td class="col3"> 2 * 32 = 64 </td>
	</tr>
	<tr class="row8">
		<td class="col0"> 7 </td><td class="col1"> 64 </td><td class="col2"> (64 ≤ 70), <code>true</code></td><td class="col3"> 2 * 64 = 128 </td>
	</tr>
	<tr class="row9">
		<td class="col0"> 8 </td><td class="col1"> 128 </td><td class="col2"> (128 ≤ 100), <code>false</code></td><td class="col3"> Ja hem sortit del bucle </td>
	</tr>
</table></div>
</div>
</div>

<h2><a id="combinacio_d_estructures_de_seleccio" >Combinació d&#039;estructures de selecció</a></h2>
<div class="level2">

<p>
<div class="iocfigurec">
<ul>
<li>
<img src="../media/ic10mu2_28.png" class="imgB" title="Fer bucles dins d&#039;altres bucles és com una &quot;rotonda màgica&quot; Imatge de Wikimedia Commons/5" alt="Fer bucles dins d&#039;altres bucles és com una &quot;rotonda màgica&quot; Imatge de Wikimedia Commons/5" /></li><li><small>Fer bucles dins d&#039;altres bucles és com una &quot;rotonda màgica&quot; Imatge de Wikimedia Commons</small></li>
</ul></div>

</p>

<p>
Com passava amb les estructures de selecció, res no impedeix combinar diferents estructures de repetició, imbricades unes dins de les altres, per dur a terme tasques més complexes. En darrera instància, la combinació i imbricació d’estructures de selecció i repetició conformarà el vostre programa. 
</p>

<p>
Quan es combinen estructures de repetició cal ser molt acurats i tenir present quines variables de control estan associades a la condició lògica de cada bucle. Tampoc no us oblideu de sagnar correctament cada bloc d’instruccions, per poder així identificar ràpidament on acaba i comença cada estructura.
</p>

</div>

<h3><a id="exemplela_taula_de_multiplicar_versio_3" >Exemple: la taula de multiplicar, versió 3</a></h3>
<div class="level3">

<p>
Normalment, la combinació d’estructures de repetició sempre està fonamentada per la necessitat de fer diversos cops una tasca que ja de per si requereix una estructura de repetició. Per exemple, suposeu que en lloc de voler un programa que mostri una única taula de multiplicar, com en un exemple anterior, es volen mostrar diverses taules de multiplicar. Des de la de l’1 fins al valor que escolliu. Hi ha dues tasques repetitives: cal repetir <em>N</em> vegades una tasca que mostra una taula completa, la qual és a la vegada la repetició de 10 multiplicacions.
</p>

<p>
El codi que duria a terme aquesta tasca seria el següent. Com que es tracta d’una tasca basada en un comptador, s’usarà la sentència <code>for</code> per a les dues estructures repetitives.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">import java.util.Scanner;</div></li><li class="li1"><div class="de1">//Un programa que mostra N taules de multiplicar.</div></li><li class="li1"><div class="de1">public class TaulaMultiplicarN {</div></li><li class="li1"><div class="de1">  public static void main (String[] args) {</div></li><li class="li1"><div class="de1">    Scanner lector = new Scanner(System.in);</div></li><li class="li1"><div class="de1">    System.out.print(&quot;Fins a quina taula de multiplicar vols conèixer? &quot;);</div></li><li class="li1"><div class="de1">    int taules = lector.nextInt();</div></li><li class="li1"><div class="de1">    lector.nextLine();</div></li><li class="li1"><div class="de1">    //Bucle de primer nivell: inici del bucle que genera N taules de multiplicar.</div></li><li class="li1"><div class="de1">    for(int i = 1; i &lt;= taules; i++) {</div></li><li class="li1"><div class="de1">      System.out.println(&quot;La taula del &quot; + i);</div></li><li class="li1"><div class="de1">      //Bucle de segon nivell: inici del bucle que genera una taula concreta.</div></li><li class="li1"><div class="de1">      for(int j = 1; j &lt;= 10; j++) {</div></li><li class="li1"><div class="de1">        int resultat = i*j;</div></li><li class="li1"><div class="de1">        System.out.println(i + &quot; * &quot; + j + &quot; = &quot; + resultat);</div></li><li class="li1"><div class="de1">      }  </div></li><li class="li1"><div class="de1">      //Fi del bucle que genera una taula concreta.</div></li><li class="li1"><div class="de1">      System.out.println(&quot;----------&quot;);</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">    //Fi del bucle que genera N taules de multiplicar.</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

<p>
Aquest exemple també és força interessant, ja que té en compte l’àmbit de les variables que s’usen com a comptador per dur a terme la seva tasca. Així, doncs, la variable <code>i</code>, el comptador del bucle de primer nivell (el més “extern”), pot ser usada dins del bucle de segon nivell (el més “intern”), ja que es considera declarada fins a la clau que tanca el seu bloc de codi. El cas invers per a <code>j</code> no és cert i fer-ho produiria un error de sintaxi.
</p>

</div>

<h3><a id="exempleendevinar_el_nombre_secret_versio_3" >Exemple: endevinar el nombre secret, versió 3</a></h3>
<div class="level3">

<p>
Val la pena mostrar com a exemple un programa una mica més complex, també basat en la combinació d’estructures de repetició. En un exemple anterior s’ha vist que aquest tipus d’estructures són útils per controlar si l’entrada de dades és correcta. Si es combina aquest exemple amb el programa per endevinar un nombre secret, en què es pregunta repetides vegades a l’usuari quina resposta vol donar, llavors tindreu l’esquema del programa següent, que depèn de dues estructures de repetició, una dins de l’altra:
</p>
<ol>
<li class="level1"><div class="li"> Decidir quin serà el nombre per endevinar i el màxim d’intents.</div>
</li>
<li class="level1"><div class="li"> Demanar que s’introdueixi un nombre pel teclat.</div>
</li>
<li class="level1"><div class="li"> Llegir-lo.</div>
</li>
<li class="level1"><div class="li"> Mirar si el valor és correcte. Si no ho és, tornar al pas 2.</div>
</li>
<li class="level1"><div class="li"> Si és correcte, ja s’hi pot operar.</div>
</li>
<li class="level1"><div class="li"> Descomptar un intent.</div>
</li>
<li class="level1"><div class="li"> Si el nombre no és el valor secret i no s’han esgotat els intents:</div>
<ol>
<li class="level2"><div class="li"> Cal avisar que s’ha fallat.</div>
</li>
<li class="level2"><div class="li"> Tornar al pas 2.</div>
</li>
</ol>
</li>
<li class="level1"><div class="li"> En cas contrari, ja hem acabat.</div>
</li>
<li class="level1"><div class="li"> Si el darrer nombre dit és el valor secret, cal dir que s’ha guanyat.</div>
</li>
<li class="level1"><div class="li"> Si el darrer nombre dit no és el valor secret, cal dir que s’ha perdut.</div>
</li>
</ol>

<p>
El codi seria el que es mostra tot seguit. Tot i l’aparent complexitat, fixeu-vos que, bàsicament, es parteix del programa original d’endevinar el valor secret i que, a la part on es demanava el valor, s’insereix directament l’estructura de l’exemple de control de dades correctes. Compileu-lo i executeu-lo per comprovar que funciona.
</p>

<p>

</p>
<pre class="code java"><ol><li class="li1"><div class="de1">import java.util.Scanner;</div></li><li class="li1"><div class="de1">//Un programa en què cal endevinar un nombre.</div></li><li class="li1"><div class="de1">public class EndevinaN {</div></li><li class="li1"><div class="de1">  //PAS 1</div></li><li class="li1"><div class="de1">  public static final int VALOR_SECRET = 4;</div></li><li class="li1"><div class="de1">  public static final int MAX_INTENTS = 3;</div></li><li class="li1"><div class="de1">  public static void main (String[] args) {</div></li><li class="li1"><div class="de1">    Scanner lector = new Scanner(System.in);</div></li><li class="li1"><div class="de1">    System.out.println(&quot;Comencem el joc.&quot;);</div></li><li class="li1"><div class="de1">    System.out.println(&quot;Endevina el valor enter entre 0 i 10 en tres intents.&quot;);</div></li><li class="li1"><div class="de1">    boolean haEncertat = false;</div></li><li class="li1"><div class="de1">    int intents = MAX_INTENTS;</div></li><li class="li1"><div class="de1">    int valorUsuari = 0;</div></li><li class="li1"><div class="de1">    //Inici bucle per endevinar el valor.</div></li><li class="li1"><div class="de1">    while ((!haEncertat)&amp;&amp;(intents &gt; 0)) {</div></li><li class="li1"><div class="de1">      //Inici bucle per obtenir una dada des del teclat.</div></li><li class="li1"><div class="de1">      do {</div></li><li class="li1"><div class="de1">        //PAS 2 i 3: Com a mínim, segur que es pregunta un cop.</div></li><li class="li1"><div class="de1">        System.out.print(&quot;Introdueix un valor enter entre 0 i 10: &quot;);</div></li><li class="li1"><div class="de1">        valorUsuari = lector.nextInt();</div></li><li class="li1"><div class="de1">        lector.nextLine();</div></li><li class="li1"><div class="de1">        //PAS 4</div></li><li class="li1"><div class="de1">      } while ((valorUsuari &lt; 0)||(valorUsuari &gt; 10));</div></li><li class="li1"><div class="de1">      //Fi bucle per obtenir una dada des del teclat.</div></li><li class="li1"><div class="de1">      //PAS 6</div></li><li class="li1"><div class="de1">      intents = intents - 1;</div></li><li class="li1"><div class="de1">      //PAS 7 i 8</div></li><li class="li1"><div class="de1">      if (VALOR_SECRET != valorUsuari) {</div></li><li class="li1"><div class="de1">        System.out.print(&quot;Has fallat! Torna a intentar-ho.&quot;);</div></li><li class="li1"><div class="de1">      } else {</div></li><li class="li1"><div class="de1">        haEncertat = true;</div></li><li class="li1"><div class="de1">      }</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">    //Fi bucle per endevinar el valor.</div></li><li class="li1"><div class="de1">    if (valorUsuari == VALOR_SECRET) {</div></li><li class="li1"><div class="de1">      //PAS 9: S'ha sortit del bucle perquè el valor era correcte.</div></li><li class="li1"><div class="de1">      System.out.println(&quot;Enhorabona. Ho has encertat!&quot;);</div></li><li class="li1"><div class="de1">    } else {</div></li><li class="li1"><div class="de1">      //PAS 10: S'ha sortit del bucle perquè s'han esgotat els intents.</div></li><li class="li1"><div class="de1">      System.out.println(&quot;Intents esgotats. Has perdut!&quot;);</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

</div>

<h2><a id="solucions_dels_reptes_proposats" >Solucions dels reptes proposats</a></h2>
<div class="level2">

<p>
<strong>Repte 1:</strong>
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">import java.util.Scanner;</div></li><li class="li1"><div class="de1">public class LiniaPregunta {</div></li><li class="li1"><div class="de1">  public static void main (String[] args) {</div></li><li class="li1"><div class="de1">    //Part  modificada. Es pregunta el valor del comptador.</div></li><li class="li1"><div class="de1">    Scanner lector = new Scanner(System.in);</div></li><li class="li1"><div class="de1">    System.out.print(&quot;Quantes iteracions vols fer? &quot;);</div></li><li class="li1"><div class="de1">    boolean tipusCorrecte = lector.hasNextInt();</div></li><li class="li1"><div class="de1">    //S'ha escrit un enter correctament. Ja es pot llegir.</div></li><li class="li1"><div class="de1">    if (tipusCorrecte) {</div></li><li class="li1"><div class="de1">      //Llegim el nombre d'iteracions.</div></li><li class="li1"><div class="de1">      int iteracions = lector.nextInt();</div></li><li class="li1"><div class="de1">      //Inicialitzem un comptador.</div></li><li class="li1"><div class="de1">      int i = 0;</div></li><li class="li1"><div class="de1">      //Ja hem fet això els cops que toca?</div></li><li class="li1"><div class="de1">      while (i &lt; iteracions) {</div></li><li class="li1"><div class="de1">        System.out.print('-');</div></li><li class="li1"><div class="de1">        //Ho hem fet un cop, sumem 1 al comptador.</div></li><li class="li1"><div class="de1">        i = i + 1;</div></li><li class="li1"><div class="de1">      }</div></li><li class="li1"><div class="de1">      //Forcem un salt de línia.</div></li><li class="li1"><div class="de1">      System.out.println();</div></li><li class="li1"><div class="de1">    } else {</div></li><li class="li1"><div class="de1">      //No s'ha escrit un enter.</div></li><li class="li1"><div class="de1">      System.out.println(&quot;El valor introduït no és un enter.&quot;);</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">    lector.nextLine();</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

<p>
<strong>Repte 2:</strong>
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">import java.util.Scanner;</div></li><li class="li1"><div class="de1">public class TaulaMultiplicarEnrere {</div></li><li class="li1"><div class="de1">  public static void main (String[] args) {</div></li><li class="li1"><div class="de1">    //S'inicialitza la biblioteca.</div></li><li class="li1"><div class="de1">    Scanner lector = new Scanner(System.in);</div></li><li class="li1"><div class="de1">    //Pregunta el nombre.</div></li><li class="li1"><div class="de1">    System.out.print(&quot;Quina taula de multiplicar vols veure? &quot;);</div></li><li class="li1"><div class="de1">    int taula = lector.nextInt();</div></li><li class="li1"><div class="de1">    lector.nextLine();</div></li><li class="li1"><div class="de1">    //El comptador servirà per fer càlculs.</div></li><li class="li1"><div class="de1">    int i = 10;</div></li><li class="li1"><div class="de1">    while (i &gt;= 1) {</div></li><li class="li1"><div class="de1">      int resultat = taula*i;</div></li><li class="li1"><div class="de1">      System.out.println(taula + &quot; * &quot; + i + &quot; = &quot; + resultat);</div></li><li class="li1"><div class="de1">      i = i - 1;</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">    System.out.println(&quot;Aquesta ha estat la taula del &quot; + taula);</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

<p>

</p>

<p>
<strong>Repte 3:</strong>
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">import java.util.Scanner;</div></li><li class="li1"><div class="de1">public class ModulIDivisio {</div></li><li class="li1"><div class="de1">  public static void main (String[] args) {</div></li><li class="li1"><div class="de1">    Scanner lector = new Scanner(System.in);</div></li><li class="li1"><div class="de1">    //PAS 1 i 2</div></li><li class="li1"><div class="de1">    System.out.print(&quot;Quin serà el dividend? &quot;);</div></li><li class="li1"><div class="de1">    int dividend = lector.nextInt();</div></li><li class="li1"><div class="de1">    lector.nextLine();</div></li><li class="li1"><div class="de1">    //PAS 2 i 3</div></li><li class="li1"><div class="de1">    System.out.print(&quot;Quin serà el divisor? &quot;);</div></li><li class="li1"><div class="de1">    int divisor = lector.nextInt();</div></li><li class="li1"><div class="de1">    lector.nextLine();</div></li><li class="li1"><div class="de1">    //PAS 5</div></li><li class="li1"><div class="de1">    int quocient = 0;</div></li><li class="li1"><div class="de1">    //PAS 6</div></li><li class="li1"><div class="de1">    while (dividend &gt;= divisor) {</div></li><li class="li1"><div class="de1">      //PAS 7</div></li><li class="li1"><div class="de1">      dividend = dividend - divisor;</div></li><li class="li1"><div class="de1">      //PAS 8 </div></li><li class="li1"><div class="de1">      quocient++;</div></li><li class="li1"><div class="de1">      //PAS 9: Simplement equival a dir que fem la volta al bucle per avaluar la condició</div></li><li class="li1"><div class="de1">      System.out.println(&quot;Bucle: per ara el dividend val &quot; + dividend + &quot;.&quot;);</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">    //PAS 10: La variable &quot;quocient&quot; té el quocient en acabar el bucle!</div></li><li class="li1"><div class="de1">    System.out.println(&quot;La divisió és &quot; + quocient + &quot;.&quot;);</div></li><li class="li1"><div class="de1">    //PAS 11: La variable &quot;dividend&quot; té el mòdul en acabar el bucle!</div></li><li class="li1"><div class="de1">    System.out.println(&quot;El mòdul és &quot; + dividend + &quot;.&quot;);</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

<p>
<strong>Repte 4:</strong>
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">import java.util.Scanner;</div></li><li class="li1"><div class="de1">public class ValorMesFitat {</div></li><li class="li1"><div class="de1">  public static void main (String[] args) {</div></li><li class="li1"><div class="de1">    Scanner lector = new Scanner(System.in);</div></li><li class="li1"><div class="de1">    int mes = 0;</div></li><li class="li1"><div class="de1">    do {</div></li><li class="li1"><div class="de1">      System.out.print(&quot;Introdueix un número de mes [1-12]: &quot;);</div></li><li class="li1"><div class="de1">      mes = lector.nextInt();</div></li><li class="li1"><div class="de1">      lector.nextLine();</div></li><li class="li1"><div class="de1">    } while ((mes &lt; 1)||(mes &gt; 12));</div></li><li class="li1"><div class="de1">    System.out.println(&quot;Dada correcta. Has escrit &quot; + mes);</div></li><li class="li1"><div class="de1">    System.out.print(&quot;Els dies d'aquest mes són...&quot;);</div></li><li class="li1"><div class="de1">    if (mes == 2) {</div></li><li class="li1"><div class="de1">      System.out.println(&quot;28 o 29!&quot;);</div></li><li class="li1"><div class="de1">    } else if ((mes == 4)||(mes == 6)||(mes == 9)||(mes == 11)) {</div></li><li class="li1"><div class="de1">      System.out.println(&quot;30!&quot;);</div></li><li class="li1"><div class="de1">    } else {</div></li><li class="li1"><div class="de1">      System.out.println(&quot;31!&quot;);</div></li><li class="li1"><div class="de1">    } </div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

<p>

</p>

<p>
<strong>Repte 5:</strong>
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">import java.util.Scanner;</div></li><li class="li1"><div class="de1">public class SumarMultiplesTresFor {</div></li><li class="li1"><div class="de1">  public static void main (String[] args) {</div></li><li class="li1"><div class="de1">    Scanner lector = new Scanner(System.in);</div></li><li class="li1"><div class="de1">    System.out.print(&quot;Fins a quin valor vols sumar múltiples de 3? &quot;);</div></li><li class="li1"><div class="de1">    int limit = lector.nextInt();</div></li><li class="li1"><div class="de1">    lector.nextLine();</div></li><li class="li1"><div class="de1">    int resultat = 0;</div></li><li class="li1"><div class="de1">    for(int i = 0; i &lt;= limit; i = i + 3 ) {</div></li><li class="li1"><div class="de1">      System.out.println(&quot;Afegim &quot; + i +&quot;...&quot;);</div></li><li class="li1"><div class="de1">      resultat = resultat + i;</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">    System.out.println(&quot;El resultat final és &quot; + resultat + &quot;.&quot;);</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

</div>

	 </article>
     <div class="pnpage">
      <div class="left-corner"></div>
      <div id="prevpage">Anar a la p&agrave;gina anterior:<br /><a href="../../../WebContent/u2/a2/exercicis.html">Exercicis d'autoavaluació</a></div>
      <div id="nextpage">Anar a la p&agrave;gina seg&uuml;ent:<br /><a href="../../../WebContent/u2/a3/activitats.html">Activitats</a></div>
      <div class="right-corner"></div>
     </div>
    </div>
    <footer class="footer">
      <div><small>Aquest document està subjecte a una llicència oberta de Creative Commons, es reserva el dret de reconeixement de l'autoria, d'exigir que no se'n faci cap mena d'ús comercial. Si altereu o transformeu aquesta obra, o en genereu obres derivades, només podeu distribuir l'obra generada amb una llicència idèntica a aquesta.</small></div>
    </footer>
 </div>
 <div id="back_preview" class="hidden"></div>
 <div id="preview" class="hidden">
  <div class="prevcontent"></div>
 </div>
 <div id="help-tooltips">
  <div id="help-toc" class="hidden tooltip"><span>Taula de continguts:</span> Ofereix una vista general de l&#39;estructura del m&ograve;dul, que us facilitar&agrave; la navegaci&oacute; a trav&eacute;s dels seus continguts.<span class="arrow-left"></span></div> 
  <div id="help-settings" class="hidden tooltip"><span>Opcions de format:</span> Permet configurar el format de lectura a partir de les vostres prefer&egrave;ncies, modificant la mida de la lletra, el color del fons, l&#39;amplada de la p&agrave;gina o l&#39;ocultaci&oacute; dels continguts complementaris, entre d&#39;altres.<span class="arrow-left"></span></div>
  <div id="help-printer" class="hidden tooltip"><span>Imprimir:</span>  Envia el contingut seleccionat a la impressora.<span class="arrow-left"></span></div>
  <div id="help-favorites" class="hidden tooltip"><span>Prefereits:</span> Permet desar aquelles parts del contingut a les que us interessi accedir en un moment posterior; us permetr&agrave; anar creant un repositori personalitzat de les seccions que considereu m&eacute;s rellevants. Un cop l&#39;hageu començat a fer servir se us mostrar&agrave; a sota un comptador que us informar&agrave; del nombre de preferits que s&#39;hagin emmagatzemat fins al moment.<span class="arrow-left"></span></div>
  <div id="help-favcounter" class="hidden tooltip"><span>Comptador i llistat de preferits:</span> Indica el nombre de preferits que s&#39;han desat fins el moment; clicant damunt seu accedireu al llistat de preferits, i a trav&eacute;s d&#39;aquest podreu accedir directament als continguts que hageu emmagatzemat.<span class="arrow-left"></span></div>
  <div id="help-help_icon" class="hidden tooltip"><span>Ajuda:</span> Aquesta opci&oacute; activa la informaci&oacute; de les funcionalitats del web tot situant el punter del ratol&iacute; al damunt dels diferents &iacute;tems.<span class="arrow-left"></span></div>
  <div id="help-sidebar-hide" class="hidden tooltip"><span>Mostrar/Ocultar barra lateral:</span>  Deshabilita la barra d&#39;opcions, permetent la seva recuperaci&oacute; quan es desitgi.<span class="arrow-left"></span></div>
  <div id="help-search" class="hidden tooltip"><span>Cerca:</span>  Introdu&iuml;u les paraules clau sobre aquells conceptes que desitgeu localitzar en els continguts del m&ograve;dul. Tamb&eacute; podeu excloure un terme de la cerca tot afegint-hi el signe &#8220;-&#8221; al davant.<span class="arrow-top"></span></div>
  <div id="help-header" class="hidden tooltip"><span>Cap&ccedil;alera:</span>  Indica l&#39;apartat o secci&oacute; que es mostra en pantalla. Tingueu present que les capçaleres de segon, tercer i quart nivell tamb&eacute; es poden desar com a marcadors.<span class="arrow-left"></span></div>
</div> 
</body>
</html>
