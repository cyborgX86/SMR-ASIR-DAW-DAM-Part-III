<!doctype html>

<!--[if lt IE 7 ]> <html class="ie ie6 no-js" lang="ca"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie ie7 no-js" lang="ca"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie ie8 no-js" lang="ca"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie ie9 no-js" lang="ca"> <![endif]-->
<!--[if gt IE 9]><!--><html class="no-js" lang="ca"><!--<![endif]-->
<!-- the "no-js" class is for Modernizr. -->

<head id="www-sitename-com" data-template-set="html5-reset">

	<meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html">
        
	<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>Programació bàsica (ASX) \ Programació (DAM i DAW)</title>
	
<!-- <meta name="title" content=""> --> 
	<meta name="description" content="">
	<!-- Google will often use this as its description of your page/site. Make it good. -->
	
	<meta name="google-site-verification" content="">
	<!-- Speaking of Google, don't forget to set your site up: http://google.com/webmasters -->
	
	<meta name="author" content="Institut Obert de Catalunya">
	<meta name="Copyright" content="Copyright Institut Obert de Catalunya 2011. All Rights Reserved.">

	<!-- Dublin Core Metadata : http://dublincore.org/ -->
	<meta name="DC.title" content="Programació bàsica (ASX) \ Programació (DAM i DAW)">
	<meta name="DC.subject" content="Informàtica i comunicacions">
	<meta name="DC.creator" content="Institut Obert de Catalunya">
	
	<!--  Mobile Viewport Fix
	j.mp/mobileviewport & davidbcalhoun.com/2010/viewport-metatag 
	device-width : Occupy full width of the screen in its current orientation
	initial-scale = 1.0 retains dimensions instead of zooming out if page height > device height
	maximum-scale = 1.0 retains dimensions instead of zooming in if page width < device width
	-->
	<!-- Uncomment to use � use thoughtfully!
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	-->

	<link rel="shortcut icon" href="../../../img/favicon.ico">
	<!-- This is the traditional favicon.
		 - size: 16x16 or 32x32
		 - transparency is OK
		 - see wikipedia for info on browser support: http://mky.be/favicon/ -->
		 
	<link rel="apple-touch-icon" href="../../../img/apple-touch-icon.png">
	<!-- The is the icon for iOS's Web Clip.
		 - size: 57x57 for older iPhones, 72x72 for iPads, 114x114 for iPhone4's retina display (IMHO, just go ahead and use the biggest one)
		 - To prevent iOS from applying its styles to the icon name it thusly: apple-touch-icon-precomposed.png
		 - Transparency is not recommended (iOS will put a black BG behind the icon) -->
	
	<!-- CSS: screen, mobile & print are all in the same file -->
	<link rel="stylesheet" href="../../../_/css/style.css">

	<!-- CSS: jQuery UI -->
	<link rel="stylesheet" href="../../../_/css/jquery-ui.css">
	
	<!-- all our JS is at the bottom of the page, except for Modernizr. -->
	<script src="../../../_/js/modernizr-1.7.min.js"></script>
	<script src="../../../_/js/Hyphenator.js" type="text/javascript"></script>
	<script type="text/javascript">
	   Hyphenator.config({
		minwordlength : 4
	   });
	   Hyphenator.run();
	</script>
    <script src="../../../_/js/build.js" type="text/javascript"></script>
</head>

<body class="style-newspaper">

<div class="wrapper"><!-- not needed? up to you: http://camendesign.com/code/developpeurs_sans_frontieres -->

	<header id="header">
		<div class="head"><a href="http://ioc.gencat.cat"><img src="../../../img/logo.png" alt="Institut Obert de Catalunya"/></a><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/es/deed.ca"><img src="../../../img/license.png" alt="Llic&egrave;ncia" class="license"/></a></div>
		<div class="headdocument"><a href="../../../index.html">Programació bàsica (ASX) \ Programació (DAM i DAW)</a></div>
        <div id="search" class="search" name="search">
         <form id="frmsearch" action="../../../search.html" method="get">
          <input type="text" name="q"/>
        </form>
        </div>
	</header>
   <div id="upbutton" class="upbutton" style="display:none;"><img src="../../../img/uparrow.png" alt="Pujar a l'inici de p&agrave;gina"/></div>
   <aside id="aside">
    <div id="menu">
      <ul>
       <li name="toc"><div><img src="../../../img/toc.png" alt="&Iacute;ndex"/></div></li>
       <li name="settings"><div><img src="../../../img/settings.png" alt="Configuraci&oacute;"/></div></li>
       <li name="printer"><div><img src="../../../img/printer.png" alt="Imprimir"/></div></li>
       <li name="favorites"><div><img src="../../../img/favorites.png" alt="Favorits"/></div></li>
       <li name="help_icon" class="help_icon"><div><img src="../../../img/help_icon.png" alt="Ajuda"/></div></li>
      </ul>
     </div>
   </aside>
   <div id="sidebar-hide" name="sidebar-hide"><img src="../../../img/arrows.png"/></div>
   <section>
     <div id="toc" class="hidden">
      <div class="menucontent">
        <ul>
        <li id="u6" class="parentnode"><p><a class="unit" href="../../../WebContent/u6/introduccio.html">6. Fitxers</a></p><ul class="expander"><li id="u6introduccio"><a href="../../../WebContent/u6/introduccio.html">Introducció</a></li><li id="u6resum"><a href="../../../WebContent/u6/resum.html">Resum</a></li><li id="u6resultats_d_aprenentatge"><a href="../../../WebContent/u6/resultats_d_aprenentatge.html">Resultats d'aprenentatge</a></li><li id="u6mapa"><a href="../../../WebContent/u6/mapa.html">Mapa conceptual</a></li><li id="u6referencies"><a href="../../../WebContent/u6/referencies.html">Referències</a></li><li id="u6a1" class="tocsection"><p id='u6a1continguts'><a class="section" href="../../../WebContent/u6/a1/continguts.html">Gestió de fitxers</a><span class="buttonexp"></span></p><ul><li id="u6a1activitats"><a href="../../../WebContent/u6/a1/activitats.html">Activitats</a></li><li id="u6a1exercicis"><a href="../../../WebContent/u6/a1/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u6a1' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u6/a1/continguts.html#la_classe_file">La classe File</a></li><li><a href="../../../WebContent/u6/a1/continguts.html#solucio_dels_reptes_proposats">Solució dels reptes proposats</a></li></ul></div></div><li id="u6a2" class="tocsection"><p id='u6a2continguts'><a class="section" href="../../../WebContent/u6/a2/continguts.html">Tractament bàsic de dades</a><span class="buttonexp"></span></p><ul><li id="u6a2activitats"><a href="../../../WebContent/u6/a2/activitats.html">Activitats</a></li><li id="u6a2exercicis"><a href="../../../WebContent/u6/a2/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u6a2' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u6/a2/continguts.html#acces_sequeencial_a_fitxers_orientats_a_caracter">Accés seqüencial a fitxers orientats a caràcter</a></li><li><a href="../../../WebContent/u6/a2/continguts.html#aspectes_importants_de_l_acces_sequeencial">Aspectes importants de l'accés seqüencial</a></li><li><a href="../../../WebContent/u6/a2/continguts.html#acces_sequeencial_a_fitxers_orientats_a_byte">Accés seqüencial a fitxers orientats a byte</a></li><li><a href="../../../WebContent/u6/a2/continguts.html#acces_relatiu_a_les_dades">Accés relatiu a les dades</a></li><li><a href="../../../WebContent/u6/a2/continguts.html#solucions_als_reptes_proposats">Solucions als reptes proposats</a></li></ul></div></div><li id="u6a3" class="tocsection"><p id='u6a3continguts'><a class="section" href="../../../WebContent/u6/a3/continguts.html">Tractament modular de dades. El joc de combats a l'arena</a><span class="buttonexp"></span></p><ul><li id="u6a3activitats"><a href="../../../WebContent/u6/a3/activitats.html">Activitats</a></li><li id="u6a3exercicis"><a href="../../../WebContent/u6/a3/exercicis.html">Exercicis d'autoavaluació</a></li><li id="u6a3annexos"><a href="../../../WebContent/u6/a3/annexos.html">Annexos</a></li></ul></li><div data-parent-id='u6a3' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u6/a3/continguts.html#descripcio_del_problema">Descripció del problema</a></li><li><a href="../../../WebContent/u6/a3/continguts.html#criteris_d_eleccio_de_tipus_de_fitxer">Criteris d'elecció de tipus de fitxer</a></li><li><a href="../../../WebContent/u6/a3/continguts.html#la_biblioteca_jocarenafitxers">La biblioteca "joc.arena.fitxers"</a></li><li><a href="../../../WebContent/u6/a3/continguts.html#esmenes_als_moduls_originals">Esmenes als mòduls originals</a></li></ul></div></div></ul></li><li id="" class="indexnode"><p><a href="../../../index.html">Anar a l&#39;&iacute;ndex general</a></p></li>
        </ul>
      </div>
    </div>
   </section>
   <section>
   <div id="settings" class="hidden">
    <div class="menucontent">
     <div class="allsettings">
     <div class="settings">
      <label>Font i Color</label>
		<div class="setting-option">
	        <ul class="fontBackground">
				<li id="style-newspaper" title="Newspaper" class="appearance-style-newspaper"><span>Newspaper</span></li>
                <li id="style-novel" title="Novel" class="appearance-style-novel"><span>Novel</span></li>
                <li id="style-ebook" title="eBook" class="appearance-style-ebook"><span>eBook</span></li>
				<li id="style-inverse" title="Inverse" class="appearance-style-inverse active"><span>Inverse</span></li>
				<li id="style-athelas" title="Athelas" class="appearance-style-athelas"><span>Athelas</span></li>
			</ul>
		</div>
     </div>
	<div class="settings">
      <label>Amplada</label>
		<div class="setting-option">
	        <div id="slider-width"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
		<div class="setting-option">
	        <div id="slider-font"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
	  <div class="setting-option">
       <form action="" class="sett-options">
		<ul>
		    <li><input type="checkbox" id="secondary-content" /><label for="secondary-content">Mostra recursos complementaris</label></li>
		    <li><input type="checkbox" id="main-images" /><label for="main-images">Mostra imatges</label></li>
		    <li><input type="checkbox" id="text-alignment" /><label for="text-alignment">Text justificat</label></li>
			<li><input type="checkbox" id="text-hyphen" /><label for="text-hyphen">Partici&oacute; sil·l&agrave;bica</label></li>
		</ul>
       </form>
	  </div>
     </div>
     </div>
    </div>
   </div>
   </section>
 <section>
 <div id="favorites" class="hidden"></div>
 </section>   
 <div id="bridge" class="hidden"></div>
 <div id="help" class="hidden">
  <div class="helptitle">Dreceres del teclat<hr></div>
  <div class="helpsection"><span>General</span>
   <ul>
    <li><span class="shortcut">g</span>: Anar al men&uacute; de navegaci&oacute;</li>
    <li><span class="shortcut">o</span>: Anar a opcions</li>
    <li><span class="shortcut">s</span>: Guardar la p&agrave;gina actual a favorits</li>
    <li><span class="shortcut">p</span>: Imprimir la p&agrave;gina actual</li>
    <li><span class="shortcut">?</span>: Mostrar/Ocultar l&#39;ajuda</li>
   </ul>
  </div>
  <div class="helpsection"><span>Navegaci&oacute;</span>
   <ul>
    <li><span class="shortcut">i</span>: Anar a l&#39;&iacute;ndex general</li>
    <li><span class="shortcut">t</span>: Anar a l&#39;inici de p&agrave;gina</li>
    <li><span class="shortcut">b</span>: Anar al final de p&agrave;gina</li>
    <li><span class="shortcut">j</span>: Anar cap endavant dintre la p&agrave;gina</li>
    <li><span class="shortcut">k</span>: Anar cap enrere dintre la p&agrave;gina</li>
    <li><span class="shortcut">h</span>: Anar a la p&agrave;gina anterior:</li>
    <li><span class="shortcut">l</span>: Anar a la p&agrave;gina seg&uuml;ent:</li>
   </ul>
   </div>
 </div>
 <div id="favcounter" name="favcounter" class="hidden"><span></span></div>
 <div id="navmenu" class="navmenu"><ul class="webnav"><li><a href="../../../index.html" title="Anar a l&#39;&iacute;ndex general">Inici</a></li><li><a href="../introduccio.html">Fitxers</a></li><li>Gestió de fitxers</li></ul></div>
	<div id="content" lang="ca" class="hyphenate text">
     <article lang="ca" class="sheet">
        <h1><a id="gestio_de_fitxers"> Gestió de fitxers </a></h1>
    	
<p>
Entre les funcions d’un sistema operatiu hi ha la d’oferir mecanismes genèrics per gestionar sistemes de fitxers. Normalment, dins un sistema operatiu modern (o ja no tant modern), s’espera disposar d’algun tipus d’interfície o explorador per poder gestionar fitxers, ja sigui gràficament o usant una línia d’ordres de text. Si bé la manera com les dades es desen realment en els dispositius físics d’emmagatzematge de dades pot ser molt diferent segons cada tipus (magnètic, òptic, etc.), la manera de gestionar el sistema de fitxers sol ser molt similar en la immensa majoria dels casos: una estructura jeràrquica amb carpetes i fitxers.
</p>

<p>
Ara bé, en realitat, la capacitat d’operar amb el sistema de fitxers no és exclusiva de la interfície oferta pel sistema operatiu. Molts llenguatges de programació proporcionen biblioteques que permeten accedir directament als mecanismes interns que ofereix el sistema, de manera que és possible crear codi font des del qual, amb les instruccions adients, es poden realitzar operacions típiques d’un explorador de fitxers. De fet, les interfícies ofertes, com un explorador de fitxers, són un programa com qualsevol altre, el qual, usant precisament aquestes llibreries, permet que l’usuari gestioni fitxers fàcilment. Però no és estrany trobar altres aplicacions amb la seva pròpia interfície per gestionar fitxers, encara que només sigui per poder seleccionar quin cal carregar o desar en un moment donat: editors de text, compressors, reproductors de música, etc.
</p>

<p>
Java no és cap excepció oferint aquest tipus de biblioteca, en forma del conjunt de classes incloses dins del <em>package</em> <strong>java.io</strong>. Mitjançant la invocació dels mètodes adients definits d’aquestes classes, és possible dur a terme pràcticament qualsevol tasca sobre el sistema de fitxers. 
</p>

<h2><a id="la_classe_file" >La classe File</a></h2>
<div class="level2">

<p>
La peça més bàsica per poder operar amb fitxers, independentment del seu tipus, en un programa fet en Java és el tipus compost <code>File</code>. Aquesta classe pertany al <em>package</em> <strong>java.io</strong>. Per tant, l’haureu d’importar abans de poder usar-la. Aquesta us permet manipular qualsevol aspecte vinculat al sistema de fitxers. Ara bé, cal anar amb compte, ja que el seu nom (“fitxer”, en anglès) és una mica enganyós, ja que no es refereix exactament a un fitxer.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
La classe <strong>File</strong> indica, més concretament, una ruta dins el sistema de fitxers. 
</p>
</div></div>
<p>

</p>

<p>
Concretament, serveix per fer operacions tant sobre rutes al sistema de fitxers que ja existeixin com no existents. A més a més, aquesta classe es pot usar tant per manipular fitxers de dades com carpetes.
</p>

</div>

<h3><a id="inicialitzacio" >Inicialització</a></h3>
<div class="level3">

<p>
Com qualsevol altra classe, abans de poder treballar amb <code>File</code>, a part d’importar-la correctament, cal inicialitzar-la, de manera que sigui possible invocar els seus mètodes. En aquest cas, per fer-ho cal incloure com a paràmetre una cadena de text corresponent a la ruta sobre la qual es volen dur a terme les operacions.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">File f = new File (String ruta)</div></li></ol></pre>
<div class="iocimportant"><div class="ioccontent">
<p>
Una <strong>ruta</strong> és la forma general d’un nom de fitxer o carpeta, de manera que identifica únicament la seva localització en el sistema de fitxers.
</p>
</div></div>
<p>
Cadascun dels elements de la ruta poden existir realment o no, però això no impedeix de cap manera poder inicialitzar <code>File</code>. En realitat, el seu comportament és com una declaració d’intencions sobre quina ruta del sistema de fitxers es vol interactuar. No és fins que es criden els diferents mètodes definits a <code>File</code>, o fins que s’hi escriuen o s’hi llegeixen dades, que realment s’accedeix al sistema de fitxers i es processa la informació.
</p>

<p>
Un aspecte important que cal tenir present en inicialitzar <code>File</code> és tenir sempre present que el format de la cadena de text que conforma la ruta pot ser diferent segons el sistema operatiu sobre el qual s’executa l’aplicació. Per exemple, el sistema operatiu Windows inicia les rutes per un nom d’unitat (C:, D:, etc.), mentre que els sistemes operatius basats en Unix comencen directament amb una barra (“/”). A més a més, els diferents sistemes operatius usen diferents separadors dins les rutes. Per exemple, els sistemes Unix usen la barra (“/”) mentre que el Windows la contrabarra (“\”). 
</p>
<div class="iocnote"><div class="ioccontent">
<p>
Cal tenir sempre present si el sistema operatiu distingeix entre majúscules i minúscules o no.
</p>
</div></div><ul>
<li class="level1"><div class="li"> Ruta Unix: <code>/usr/bin</code></div>
</li>
<li class="level1"><div class="li"> Ruta Windows: <code>C:\Windows\System32</code></div>
</li>
</ul>

<p>
Per generar aplicacions totalment portables en diferents sistemes, la classe File ofereix la possibilitat d’accedir a una constant declarada dins d’aquesta classe per especificar separadors de ruta dins una cadena de text de manera genèrica, anomenada <code>File.separator</code>. Quan s’usa, el seu valor és el que correspon segons el sistema operatiu on s’executa el programa. L’accés a aquesta constant es fa de manera molt semblant a com s’invoca un mètode estàtic.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">File f = new File(File.separator + &quot;usr&quot; + File.separator + &quot;bin&quot;);</div></li></ol></pre>

<p>
De totes maneres, Java adopta per defecte el sistema Unix com a separador per defecte (usant la barra, <code>/</code>), independentment del sistema operatiu. Per tant, en un sistema Windows és possible separar una ruta amb aquest caràcter i Java ho sabrà interpretar correctament. A partir d’ara, tots exemples es basaran en un sistema Windows (rutes iniciades amb un nom d’unitat,, C:, D:, etc.), però s’usarà la barra per referir-se a qualsevol ruta.
</p>

<p>
De fet, en fer un programa en Java en un sistema Windows cal ser especialment acurat amb aquest fet, ja que la contrabarra no és un caràcter permès dins una cadena de text, i serveix per declarar valors especials d’escapament (<code>\n</code> salt de línia, <code>\t</code> tabulador, etc.). 
</p>
<div class="iocnote"><div class="ioccontent">
<p>
Per escriure una contrabarra a una cadena de text cal escriure ‘\’.
</p>
</div></div>
<p>
Un altre aspecte molt important en inicialitzar <code>File</code> és que es tracta d’una classe que defineix un tipus compost (com <code>String</code>), i no un simple repositori de mètodes (com <code>Scanner</code> o <code>Random</code>). En conseqüència, cada cop que s’inicialitza, a l’identificador emprat s’hi assigna un valor associat a aquella ruta. A partir de llavors, l’identificador actua com una variable dins el programa. Per operar amb diferents rutes alhora caldrà inicialitzar i manipular diferents variables, igual que es faria amb diferents cadenes de text.
</p>

<p>
Per exemple, en el codi següent es declaren tres variables diferents, cadascuna de les quals emmagatzema un valor de tipus <code>File</code> diferent. Per treballar amb cada ruta, ja sigui carpeta o fitxer, caldrà usar la variable corresponent.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">...</div></li><li class="li1"><div class="de1">File carpetaFotos = new File(&quot;C:/Personal/LesMevesFotos&quot;);</div></li><li class="li1"><div class="de1">File unaFoto = new File(&quot;C:/Personal/LesMevesFotos/Foto1.png&quot;);</div></li><li class="li1"><div class="de1">File unaAltraFoto = new File(&quot;C:/Personal/LesMevesFotos/Foto2.png&quot;);</div></li><li class="li1"><div class="de1">...</div></li></ol></pre>

</div>

<h3><a id="rutes_relatives_i_absolutes" >Rutes relatives i absolutes</a></h3>
<div class="level3">

<p>
En els exemples emprats fins al moment per inicialitzar variables del tipus <code>File</code> s’han usat <strong>rutes absolutes</strong>, ja que és la manera de deixar més clar a quin element dins del sistema de fitxers, ja sigui fitxer o carpeta, s’està fent referència.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
Una <strong>ruta absoluta</strong> és aquella que es refereix a un element destinació a partir de la carpeta arrel d’un sistema de fitxers. En aquesta s’enumeren, una per una, totes les carpetes que hi ha entre la carpeta arrel fins a la carpeta que conté l’element destinació.
</p>
</div></div>
<p>
Les rutes absolutes es distingeixen fàcilment, ja que el text que les representa comença d’una manera molt característica depenent del sistema operatiu de l’ordinador. En el cas dels sistemes operatius Windows al seu inici sempre es posa el nom de la unitat (“C:”, “D:”, etc.), mentre que en el cas dels sistemes operatius Unix, aquestes comencen sempre per una barra (“/”). 
</p>

<p>
Per exemple, les cadenes de text següents representen rutes absolutes dins un sistema de fitxers de Windows:
</p>
<ul>
<li class="level1"><div class="li"> <code>C:\Fotos\Viatges</code> (ruta a una carpeta)</div>
</li>
<li class="level1"><div class="li"> <code>M:\Documents\Unitat6\Apartat1</code> (ruta a una carpeta)</div>
</li>
<li class="level1"><div class="li"> <code>N:\Documents\Unitat6\Apartat1\Activitats.txt</code> (ruta a un fitxer)</div>
</li>
</ul>

<p>
En canvi, en el cas d’una jerarquia de fitxers sota un sistema operatiu Unix, un conjunt de rutes podrien estar representades de la manera següent:
</p>
<ul>
<li class="level1"><div class="li"> <code>/Fotos/Viatges</code> (ruta a una carpeta)</div>
</li>
<li class="level1"><div class="li"> <code>/Documents/Unitat6/Apartat1</code> (ruta a una carpeta)</div>
</li>
<li class="level1"><div class="li"> <code>/Documents/Unitat6/Apartat1/Activitats.txt</code> (ruta a un fitxer)</div>
</li>
</ul>

<p>
En inicialitzar variables de tipus <code>File</code> usant una ruta absoluta, sempre cal usar la representació correcta segons el sistema en què s’executa el programa.
</p>

<p>
Si bé l’ús de rutes absolutes resulta útil per indicar amb tota claredat quin element dins el sistema de fitxers s’està manipulant, hi ha casos que el seu ús comporta certes complicacions. Suposeu que heu fet un programa en el qual es duen a terme operacions sobre el sistema de fitxers. Un cop veieu que funciona, deixeu el projecte Java a un amic, que el copia al seu ordinador dins d’una carpeta qualsevol i l’obre amb el seu entorn de treball. Perquè el programa li funcioni perfectament, abans caldrà que al seu ordinador hi hagi exactament les mateixes carpetes que heu usat al vostre ordinador, tal com estan escrites en el codi font del vostre programa. En cas contrari, no funcionarà, ja que les carpetes i fitxers esperats no existiran, i  per tant, no es trobaran. Usar rutes absolutes fa que un programa sempre hagi de treballar amb una estructura del sistema de fitxers exactament igual sigui on sigui on s’executi, cosa no gaire còmoda.
</p>

<p>
Per resoldre aquest problema, a l’hora d’inicialitzar una variable de tipus <code>File</code>, també es pot fer referint-se a una ruta relativa.
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
Una <strong>ruta relativa</strong> es aquella que es considera que parteix des de la carpeta, o directori, de treball de l’aplicació. Aquesta carpeta pot ser diferent cada cop que s’executa el programa i depèn de la manera com s’ha dut a terme aquesta execució.
</p>
</div></div>
<p>
Quan un programa s’executa, ja sigui en Java o en qualsevol altre llenguatge de programació, per defecte se li assigna una carpeta de treball. Aquesta carpeta sol ser, per defecte, la carpeta des d’on es llença el programa, si bé hi ha sistemes operatius que permeten especificar-la explícitament mitjançant alguna opció sobre les seves dreceres o fitxers executables. En el cas d’un programa en Java executat a través d’un IDE, la carpeta de treball sol ser la mateixa carpeta on s’ha triat desar els fitxers del projecte. 
</p>
<div class="iocnote"><div class="ioccontent">
<p>
En els sistemes Windows, dins de les propietats d’una drecera, hi ha una opció per especificar el “Directori de treball” de la seva aplicació associada.
</p>
</div></div>
<p>

</p>

<p>
El format d’una ruta relativa és semblant a una ruta absoluta, però mai s’indica l’arrel del sistema de fitxers. Directament es comença pel primer element escollit dins la ruta. Per exemple:
</p>
<ul>
<li class="level1"><div class="li"> <code>Viatges</code> </div>
</li>
<li class="level1"><div class="li"> <code>Unitat6\Apartat1</code> </div>
</li>
<li class="level1"><div class="li"> <code>Unitat6\Apartat1\Activitats.txt</code> </div>
</li>
</ul>

<p>
La propietat especial d’una ruta relativa és que, implícitament, es considera que aquesta sempre inclou el directori de treball de l’aplicació com a part inicial del text, tot i no haver-se escrit. Ara bé, el tret distintiu és que, precisament, aquest directori de treball pot variar. Per exemple, donada la inicialització següent, l’element al qual es refereix la ruta varia segons com indica la <span class="tabref"><a href="#Table1"><span>taula</span></a></span>:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">File f = new File (&quot;Unitat6/Apartat1/Activitats.txt&quot;);</div></li></ol></pre>
<div class="ioctable ">
<div class="titletable"><a name="Table1"><span>Taula: </span></a>Rangs i paraules clau dels tipus primitius numèrics a Java</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0">Directori de treball </th><th class="col1 leftalign">Ruta real  </th>
	</tr>
	<tr class="row1">
		<td class="col0"> <code>C:\Projectes\Java</code> </td><td class="col1"> <code>C:\Projectes\Java\Unitat6\Apartat1\Activitats.txt</code> </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>D:\Unitats</code> </td><td class="col1"> <code>X:\Unitats\Unitat6\Apartat1\Activitats.txt</code> </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>/Programes</code> </td><td class="col1"> <code>/Programes/Unitat6/Apartat1/Activitats.txt</code> </td>
	</tr>
</table></div>
</div>
<p>
Aquest mecanisme permet minimitzar el nombre de carpetes que cal garantir que hi ha quan executem programes en diferents equips, ja que només cal controlar la vinculada a la ruta relativa. La part vinculada al directori de treball varia automàticament per cada versió copiada en cada màquina. En el cas més senzill d’entendre, suposeu la inicialització següent:
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">File f = new File (&quot;Activitats.txt&quot;);</div></li></ol></pre>

<p>
Donada aquesta ruta, n’hi ha prou a garantir que el fitxer “Activitats.txt” està sempre al mateix directori de treball de l’aplicació, sigui quin sigui aquest (en un ordinador pot ser “C:\Programes”, en un altre “/Java”, etc.). En qualsevol de tots aquests casos, la ruta sempre serà correcta. De fet, encara més. Noteu com les rutes relatives a Java permeten crear codi independent del sistema operatiu, ja que no cal especificar un format d’arrel lligada a un sistema de fitxers concret (“C:”, “D:”, “/”, etc.). 
</p>

<p>
Java disposa de dues instruccions per consultar quina és la carpeta de treball d’un programa i canviar-la per un altre, si així es vol fer. De totes maneres, normalment es deixa la carpeta que assigna per defecte el sistema operatiu en executar el programa.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">//Assigna en forma de cadena de text la ruta de la carpeta de treball actual.</div></li><li class="li1"><div class="de1">String dirTreball = System.getProperty(&quot;user.dir&quot;);</div></li></ol></pre>
<pre class="code java"><ol><li class="li1"><div class="de1">//Indica quina és la ruta de la nova carpeta de treball a partir d'una cadena de text.</div></li><li class="li1"><div class="de1">String nouDirTreball = &quot;...&quot;;</div></li><li class="li1"><div class="de1">System.setProperty(&quot;user.dir&quot;, nouDirTreball);</div></li></ol></pre>

<p>
De totes maneres, a mesura que aneu veient com realitzar operacions amb fitxers a partir de rutes, es veurà més clar el funcionament de rutes relatives i absolutes.
</p>

</div>

<h3><a id="operacions_tipiques_de_la_classe_file" >Operacions típiques de la classe File</a></h3>
<div class="level3">

<p>
Al contrari que les cadenes de text, el tipus compost <code>File</code> no permet usar absolutament cap mena d’operador, ni tant sols el &#039;+&#039;. Qualsevol operació que es vulgui dur a terme amb una ruta s’haurà de fer mitjançant la invocació de mètodes sobre la variable corresponent. En aquest sentit, <code>File</code> ofereix diversos mètodes per poder manipular el sistema de fitxers o obtenir informació a partir de la seva ruta. Alguns dels més significatius per entendre’n les funcionalitats es mostren tot seguit, ordenats per tipus d’operació.
</p>

<p>
Aquest cop, per descriure cada mètode s’emprarà la seva definició tal com apareix a la documentació del Java, especificant el tipus del valor de retorn i dels seus paràmetres.
</p>

</div>

<h4><a id="obtencio_de_la_ruta" >Obtenció de la ruta</a></h4>
<div class="level4">

<p>
Un cop s’ha inicialitzat una variable de tipus <code>File</code>, pot ser necessari recuperar la informació emprada durant la seva inicialització i conèixer en format text a quina ruta s’està referint, o com a mínim part d’ella.
</p>
<ul>
<li class="level1"><div class="li"> <code>String getParent()</code> avalua la ruta de la carpeta pare de l’element referit per aquesta ruta. Bàsicament, la cadena de text resultant és idèntica a la ruta original usada en inicialitzar la variable de tipus <code>File</code>, eliminant el darrer element. Si la ruta tractada es refereix a la carpeta arrel d’un sistema de fitxers (“C:\”, “/”, etc.), aquest mètode avalua <code>null</code>. En el cas de tractar-se d’una ruta relativa, aquest mètode <em class="u">no</em> inclou la part de la carpeta de treball. </div>
</li>
<li class="level1"><div class="li"> <code>String getName()</code> avalua El nom de L’element que representa aquesta ruta, ja sigui una carpeta o un fitxer. Es tracta del cas invers del mètode <code>getParent()</code>, ja que el text resultant és només el darrer element, descartant la resta del text de la ruta prèvia.</div>
</li>
<li class="level1"><div class="li"> <code>String getAbsolutePath()</code> avalua el text relatiu a la ruta absoluta. Si la variable <code>File</code> es va inicialitzar usant una ruta relativa, el resultat inclou també la part associada a la carpeta de treball.</div>
</li>
</ul>

<p>
La <span class="figref"><a href="#Figure1"><span>figura</span></a></span> mostra un resum del text que avalua cada mètode, donada una ruta concreta.
</p>
<div class="iocfigure"><a name="Figure1"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Avaluació dels mètodes d’obtenció de ruta a File

</figcaption><img src="../media/ic10m3u6_01.png" alt="" /></figure>
</div>
<p>
El programa següent mostra un exemple de com funcionen aquests tres mètodes. Noteu com a les rutes relatives se’ls afegeix la carpeta de treball, que serà la carpeta on teniu el vostre projecte amb el codi font del programa.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">package unitat6.apartat1.exemples;</div></li><li class="li1"><div class="de1">//Cal importar la classe File</div></li><li class="li1"><div class="de1">import java.io.File;</div></li><li class="li1"><div class="de1">public class FileObtenirRuta {</div></li><li class="li1"><div class="de1">  public static void main(String[] args) {</div></li><li class="li1"><div class="de1">    FileObtenirRuta programa = new FileObtenirRuta();</div></li><li class="li1"><div class="de1">    programa.inici();</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">  public void inici() {</div></li><li class="li1"><div class="de1">    //S'inicialitzen dues rutes absolutes diferents</div></li><li class="li1"><div class="de1">    File carpetaAbs= new File (&quot;c:/Temp&quot;);</div></li><li class="li1"><div class="de1">    File fitxerAbs = new File (&quot;c:/Temp/Document.txt&quot;);</div></li><li class="li1"><div class="de1">    //I unes rutes relatives</div></li><li class="li1"><div class="de1">    File carpetaRel = new File (&quot;Temp&quot;);</div></li><li class="li1"><div class="de1">    File fitxerRel = new File (&quot;Temp/Document.txt&quot;);</div></li><li class="li1"><div class="de1">    //Mostrem les dades de cadascuna</div></li><li class="li1"><div class="de1">    mostrarRutes(carpetaAbs);</div></li><li class="li1"><div class="de1">    mostrarRutes(fitxerAbs );</div></li><li class="li1"><div class="de1">    mostrarRutes(carpetaRel );</div></li><li class="li1"><div class="de1">    mostrarRutes(fitxerRel );</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">  public void mostrarRutes(File f) {</div></li><li class="li1"><div class="de1">    System.out.println(&quot;La ruta és &quot; + f.getAbsolutePath());</div></li><li class="li1"><div class="de1">    System.out.println(&quot;El seu pare és &quot; + f.getParent());</div></li><li class="li1"><div class="de1">    System.out.println(&quot;El seu nom és &quot; + f.getName() + &quot;\n&quot;);</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

</div>

<h4><a id="comprovacions_d_estat" >Comprovacions d&#039;estat</a></h4>
<div class="level4">

<p>
Donada la ruta emprada per inicialitzar una variable de tipus <code>File</code>, aquesta pot ser que realment existeixi dins el sistema de fitxers o no, ja sigui en forma de fitxer o carpeta. La classe <code>File</code> ofereix un conjunt de mètodes que permeten fer comprovacions sobre el seu estat i saber si és així.
</p>

<p>
<code>boolean exists()</code> comprova si la ruta existeix dins del sistema de fitxers o no. Avaluarà <code>true</code> o <code>false</code>, per a cada cas, respectivament. Es considera que la ruta no existeix si qualsevol dels elements individuals que la conformen no existeix.
</p>

<p>
Normalment, donat el text d’una ruta, els fitxers es distingeixen de les carpetes pel seu format, en tenir extensió (l’últim element de la ruta sol ser de la forma <code>nom.extensió</code>, com <code>Foto1.jpg</code> o <code>Document.txt</code>). Tot i així, cal tenir en compte que l’extensió no és un element obligatori en el nom d’un fitxer, només s’usa com a mecanisme perquè tant l’usuari com alguns programes puguin discriminar més fàcilment tipus de fitxers. Per tant, només amb el text d’una ruta no es pot estar 100% segur de si aquesta es refereix a un fitxer o a una carpeta. Per poder estar realment segurs, es poden usar els mètodes següents:
</p>
<ul>
<li class="level1"><div class="li"> <code>boolean isFile()</code> permet comprovar si la ruta es refereix a un fitxer (avaluant <code>true</code>) o no (avaluant <code>false</code>). Aquesta comprovació no es duu a terme únicament sobre el text de la ruta, sinó que es mira al sistema de fitxers si la ruta existeix, i llavors es mira si l’element amb aquest nom es tracta d’un fitxer o carpeta. Si no existeix, sempre s’avalua a <code>false</code>.</div>
</li>
<li class="level1"><div class="li"> <code>boolean isDirectory()</code> funciona igual que l’anterior, però comprovant si es tracta d’una carpeta.</div>
</li>
</ul>

<p>
Per exemple, el programa següent fa un seguit de comprovacions sobre un conjunt de rutes. Per poder-lo provar de manera efectiva, però, caldria preparar el sistema de fitxers del vostre ordinador. Per exemple, podeu crear una carpeta anomenada “Temp” a l’arrel de la unitat “C:”. Dins d’aquesta, creeu-ne una altra anomenada “Fotos”. A la mateixa carpeta “Temp”, creeu un nou fitxer (que pot estar buit) anomenat “Document.txt”. Després, esborreu la carpeta o el document i torneu a executar el programa. 
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">package unitat6.apartat1.exemples;</div></li><li class="li1"><div class="de1">import java.io.File;</div></li><li class="li1"><div class="de1">public class FileComprovarFitxers {</div></li><li class="li1"><div class="de1">  public static void main(String[] args) {</div></li><li class="li1"><div class="de1">    FileComprovarFitxers programa = new FileComprovarFitxers();</div></li><li class="li1"><div class="de1">    programa.inici();</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">  public void inici() {</div></li><li class="li1"><div class="de1">    File temp = new File (&quot;C:/Temp&quot;);</div></li><li class="li1"><div class="de1">    File fotos = new File (&quot;C:/Temp/Fotos&quot;);</div></li><li class="li1"><div class="de1">    File document = new File (&quot;C:/Temp/Document.txt&quot;);</div></li><li class="li1"><div class="de1">    System.out.println(temp.getAbsolutePath() + &quot; existeix? &quot; + temp.exists());</div></li><li class="li1"><div class="de1">    mostrarEstat(fotos);</div></li><li class="li1"><div class="de1">    mostrarEstat(document);</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">  public void mostrarEstat(File f) {</div></li><li class="li1"><div class="de1">    System.out.println(f.getAbsolutePath() + &quot; és un fitxer? &quot; + f.isFile());</div></li><li class="li1"><div class="de1">    System.out.println(f.getAbsolutePath() + &quot; és una carpeta? &quot; + f.isDirectory());</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

</div>

<h4><a id="lectura_i_modificacio_de_propietats" >Lectura i modificació de propietats</a></h4>
<div class="level4">

<p>
Quan la ruta amb la qual es treballa correspon a un fitxer o carpeta que realment existeix dins del sistema, hi ha tot un seguit d’informació subministrada pel sistema operatiu que pot resultar útil conèixer: els seus atributs d’accés, la seva mida, la data de modificació, etc. En general, totes les dades mostrades en accedir a les propietats del fitxer. Aquesta informació també pot ser consultada usant els mètodes adients. Entre els més populars n’hi ha els següents:
</p>
<ul>
<li class="level1"><div class="li"> <code>long length()</code> avalua la mida d’un fitxer, en bytes. Aquest mètode només pot ser invocat sobre una ruta que representi un fitxer, en cas contrari no es pot garantir la correctesa del resultat (no es pot considerar com a vàlid en cap cas).</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <code>long lastModified()</code> avalua la darrera data d’edició de l’element representat per aquesta ruta. El resultat es codifica en un únic número enter on es mesura el nombre de mil·lisegons que han passat des de l’1 de juny de 1970.</div>
</li>
</ul>
<div class="iocexample"><div class="ioccontent"><p class="ioctitle">De mil·lisegons a una data llegible</p>
<p>
La veritat és que, per tal de mostrar dades a l’usuari, treballar amb mil·lisegons per indicar una data no és gaire còmode. Afortunadament, dins el <em>package</em> <strong>java.util</strong> és possible trobar un tipus compost auxiliar que permet treballar amb dates (igual que <code>File</code> permet treballar amb rutes de fitxers). Es tracta de la classe <code>Date</code>. Per inicialitzar-la, precisament, cal usar com a paràmetre el nombre de mil·lisegons des de l’1 de juny de 1970, en format <code>long</code>.
</p>

<p>
Date data = new Date(1306751122651L);
</p>

<p>
No s’entrarà en més detall sobre com funciona aquesta classe. Si voleu, podeu mirar els seus mètodes a la documentació de l’<acronym title="Application Programming Interface">API</acronym> de Java.
</p>
</div></div>
<p>
L’exemple següent mostra com funcionen aquests mètodes. Per provar-los, abans creeu un fitxer anomenat “Document.txt” a la carpeta “C:\Temp”. Inicialment, deixeu-lo buit i executeu el programa. Després, amb un editor de text, escriviu qualsevol cosa, deseu els canvis i torneu a executar el programa. Observeu com el resultat és diferent. Fixeu-vos també en l’ús de la classe <code>Date</code> per poder mostrar correctament la data en un format llegible.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">package unitat6.apartat1.exemples;</div></li><li class="li1"><div class="de1">import java.io.File;</div></li><li class="li1"><div class="de1">import java.util.Date;</div></li><li class="li1"><div class="de1">public class FileLlegirPropietats {</div></li><li class="li1"><div class="de1">  public static void main(String[] args) {</div></li><li class="li1"><div class="de1">    FileLlegirPropietats programa = new FileLlegirPropietats();</div></li><li class="li1"><div class="de1">    programa.inici();</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">  public void inici() {</div></li><li class="li1"><div class="de1">    File document = new File(&quot;C:/Temp/Document.txt&quot;);</div></li><li class="li1"><div class="de1">    System.out.println(document.getAbsoluteFile());</div></li><li class="li1"><div class="de1">    //S'usa el tipus composta Date per transformar mil·lisegons a data real</div></li><li class="li1"><div class="de1">    Date data = new Date(document.lastModified());</div></li><li class="li1"><div class="de1">    System.out.println(&quot;Darrera modificació: &quot; + data);</div></li><li class="li1"><div class="de1">    System.out.println(&quot;Mida: &quot; + document.length());</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

</div>

<h4><a id="gestio_de_fitxers" >Gestió de fitxers</a></h4>
<div class="level4">

<p>
De ben segur, el conjunt d’operacions més habituals quan accediu a un sistema de fitxers en treballar en el vostre ordinador són les vinculades a la seva gestió directa: reanomenar fitxers, esborrar-los, copiar-los o moure’ls. Donat el nom d’una ruta, Java també permet realitzar aquestes accions.
</p>
<ul>
<li class="level1"><div class="li"> <code>boolean mkdir()</code> permet crear una carpeta d’acord a la ubicació que indica la ruta. La ruta ha d’indicar el nom d’una carpeta que no existeix en el moment d’invocar el mètode. Concretament, es crea una carpeta amb el nom de la ruta (el darrer element del text), ubicada a la carpeta pare indicada (tot el text anterior). Si s’ha creat correctament, el mètode avalua <code>true</code>. En cas contrari, avalua <code>false</code>. Hi ha diversos motius pels quals pot fallar la creació, però normalment es deurà al fet que la ruta és incorrecta (algun dels elements no existeixen) o la carpeta ja existia.</div>
</li>
<li class="level1"><div class="li"> <code>boolean delete()</code> esborra el fitxer o carpeta que indica la ruta. La ruta ha d’indicar el nom d’una carpeta que sí que existeix en el moment d’invocar el mètode. Igual com en l’anterior mètode, avalua <code>true</code> o <code>false</code> segons si l’operació realment s’ha pogut dur a terme. Els motius pels quals pot fallar són similars a l’anterior, si bé en el cas de les carpetes també pot fallar si no està buida. Només es pot esborrar una carpeta usant aquest mètode si dins seu no hi té res (ni altres carpetes ni fitxers).</div>
</li>
</ul>

<p>

</p>

<p>
Per provar l’exemple que es mostra tot seguit de manera que es pugui veure com funcionen aquests mètodes, novament, cal una organització prèvia del sistema de fitxers. Primer, assegureu-vos que a l’arrel de la unitat “C:” no hi ha cap carpeta anomenada “Temp” i executeu el programa. Tot fallarà, ja que les rutes són incorrectes (no existeix “Temp”). Un cop fet, creeu la carpeta “Temp”, i a dins seu creeu un nou document anomenat “Document.txt” (que pot estar buit si voleu). Ara, en executar el programa, s’haurà creat una nova carpeta anomenada “Fotos”. Si sense tocar la carpeta “Temp” executeu el programa per tercer cop, ara tot s’haurà esborrat.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">package unitat6.apartat1.exemples;</div></li><li class="li1"><div class="de1">import java.io.File;</div></li><li class="li1"><div class="de1">public class FileGestioElements {</div></li><li class="li1"><div class="de1">  public static void main(String[] args) {</div></li><li class="li1"><div class="de1">    FileGestioElements programa = new FileGestioElements();</div></li><li class="li1"><div class="de1">    programa.inici();</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">  public void inici() {</div></li><li class="li1"><div class="de1">    File fotos = new File (&quot;C:/Temp/Fotos&quot;);</div></li><li class="li1"><div class="de1">    File document = new File (&quot;C:/Temp/Document.txt&quot;);</div></li><li class="li1"><div class="de1">    boolean resultat= fotos.mkdir();</div></li><li class="li1"><div class="de1">    System.out.println(&quot;Creada carpeta &quot; + fotos.getName() + &quot;? &quot; + resultat);</div></li><li class="li1"><div class="de1">    if (!resultat) {</div></li><li class="li1"><div class="de1">      boolean delCarpeta = fotos.delete();</div></li><li class="li1"><div class="de1">      System.out.println(&quot;Esborrada carpeta &quot; + fotos.getName() + &quot;? &quot; + delCarpeta);</div></li><li class="li1"><div class="de1">      boolean delFitxer= document.delete();</div></li><li class="li1"><div class="de1">      System.out.println(&quot;Esborrat fitxer &quot; + document.getName() + &quot;? &quot; + delFitxer);</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

<p>
Des del punt de vista d’un sistema operatiu, l’operació de “moure” un fitxer o carpeta no és més que canviar el seu nom, des de la seva ruta original fins a una nova ruta destinació. Per fer això també hi ha un mètode, ja una mica més complex <code>boolean renameTo(File desti)</code>.
</p>

<p>
<code>boolean renameTo(File desti)</code> és un mètode amb un nom una mica enganyós (“reanomenar”, en anglès), ja que la seva funció real no és simplement canviar el nom d’un fitxer o carpeta, sinó canviar la ubicació completa. El mètode s’invoca sobre la variable amb la ruta que es considera el fitxer origen, i el paràmetre d’entrada és la ruta destinació. En aquest cas, el fitxer o carpeta associat a la ruta origen ha d’existir en el moment d’invocar el mètode, però la destinació no. Com en casos anteriors, avalua <code>true</code> o <code>false</code> segons si la tasca s’ha pogut dur a terme correctament o no (la ruta origen i destinació són correctes, no existeix ja un fitxer amb aquest nom a la destinació, etc.). Noteu que, en el cas de carpetes, és possible moure-les tot i que continguin fitxers. Tota l’estructura jeràrquica de carpetes es desplaça. 
</p>

<p>
Un cop més, cal una certa preparació prèvia en l’execució de l’exemple que permet veure com funciona amb més detall aquest mètode. Dins d’una carpeta anomenada “Temp” a la unitat “C:”, creeu una carpeta anomenada “Media” i una altra anomenada “Fotos”. Dins de la carpeta “Fotos”, genereu dos documents (que poden estar buits), anomenats “Document.txt” i “Fotos.txt”. Després d’executar el programa, observeu com la carpeta “Fotos” s’ha mogut i ha canviat de nom, però manté dins seu el fitxer “Fotos.txt”. El fitxer “Document.txt” s’ha mogut fins a la carpeta “Temp”.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">package unitat6.apartat1.exemples;</div></li><li class="li1"><div class="de1">import java.io.File;</div></li><li class="li1"><div class="de1">public class FileMoure {</div></li><li class="li1"><div class="de1">  public static void main(String[] args) {</div></li><li class="li1"><div class="de1">    FileMoure programa = new FileMoure();</div></li><li class="li1"><div class="de1">    programa.inici();</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">  public void inici() {</div></li><li class="li1"><div class="de1">    File origenCarpeta = new File(&quot;C:/Temp/Fotos&quot;);</div></li><li class="li1"><div class="de1">    File destiCarpeta = new File(&quot;C:/Temp/Media/Fotografies&quot;);</div></li><li class="li1"><div class="de1">    File origenDocument = new File(&quot;C:/Temp/Media/Fotografies/Document.txt&quot;);</div></li><li class="li1"><div class="de1">    File destiDocument = new File(&quot;C:/Temp/Document.txt&quot;);</div></li><li class="li1"><div class="de1">    boolean resultat = origenCarpeta.renameTo(destiCarpeta);</div></li><li class="li1"><div class="de1">    System.out.println(&quot;S'ha mogut i reanomenat la carpeta? &quot; + resultat);</div></li><li class="li1"><div class="de1">    resultat = origenDocument.renameTo(destiDocument);</div></li><li class="li1"><div class="de1">    System.out.println(&quot;S'ha mogut el document? &quot; + resultat);</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

<p>
Com es pot veure a l’exemple, aquest mètode també serveix, implícitament, per reanomenar fitxers o carpetes. Si l’element final de les rutes origen i destinació són diferents, el nom de l’element, sigui fitxer o carpeta, canviarà. Per simplement reanomenar un element sense moure’l de lloc, només cal que la seva ruta pare sigui exactament la mateixa. El resultat és que l’element de la ruta origen “es mou” a la mateixa carpeta on està ara, però amb un nom diferent.
</p>

<p>
Per exemple, el codi següent reanomena un fitxer anomenat “Document.txt”, ubicat a la carpeta “C:/Temp”, a “Reanomenat.txt”:
</p>

<p>

</p>
<pre class="code java"><ol><li class="li1"><div class="de1">package unitat6.apartat1.exemples;</div></li><li class="li1"><div class="de1">import java.io.File;</div></li><li class="li1"><div class="de1">public class FileReanomenar {</div></li><li class="li1"><div class="de1">  public static void main(String[] args) {</div></li><li class="li1"><div class="de1">    FileReanomenar programa = new FileReanomenar();</div></li><li class="li1"><div class="de1">    programa.inici();</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">  public void inici() {</div></li><li class="li1"><div class="de1">    File rutaOrigen = new File(&quot;C:/Temp/Document.txt&quot;);</div></li><li class="li1"><div class="de1">    //Reanomenar: mateixa ruta pare però diferent nom final</div></li><li class="li1"><div class="de1">    String nouNom = rutaOrigen.getParent() + File.separator + &quot;Reanomenat.txt&quot;;</div></li><li class="li1"><div class="de1">    File rutaDesti = new File(nouNom);</div></li><li class="li1"><div class="de1">    rutaOrigen.renameTo(rutaDesti);</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

<p>
La creació de fitxers de moment es deixarà pendent, ja que està vinculada al tractament de les dades que ha de contenir, i per tant va més enllà de la mera gestió d’una ruta.
</p>

<p>
<strong>Repte 1</strong>. Creeu un programa que llegeixi un text pel teclat corresponent a la ruta d’un fitxer existent al vostre ordinador. Canvieu el nom d’aquest fitxer de manera que s’elimini la seva extensió, si en té (per exemple, si el fitxer es diu “Document.txt”, passarà a dir-se “Document”). Per dur a terme aquesta tasca haureu de fer memòria de les transformacions sobre cadenes de text.
</p>

</div>

<h4><a id="llistat" >Llistat</a></h4>
<div class="level4">

<p>
Finalment, només en el cas de les carpetes, és possible consultar quin és el llistat de fitxers i carpetes que conté.
</p>

<p>
<code>File[ ] listFiles()</code> avalua un <em>array</em> de <code>File</code> on s’enumeren tots els elements continguts a la carpeta indicada pel text usat en inicialitzar la variable de tipus <code>File</code>. Perquè s’executi correctament, el text de la ruta ha d’indicar forçosament una carpeta. En cada posició d’aquest <em>array</em> hi ha el nom de la ruta de cadascun dels fitxers. La mida de l’<em>array</em> serà igual al nombre d’elements que conté la carpeta. Si la mida és 0, el valor retornat és <code>null</code> i tota operació posterior sobre la variable resultant serà errònia. L’ordre dels elements pot ser qualsevol, no es pot garantir res (al contrari que a l’explorador de fitxers del sistema operatiu, no s’ordena automàticament primer carpetes i després fitxers, o alfabèticament).
</p>

<p>
La particularitat que potser fa una mica complex aquest mètode, a primera vista, és el fet que avaluï un <em>array</em> de <code>File</code>. Atès que la classe <code>File</code> és un tipus compost, amb vista a treballar amb ell només cal que recordeu com es treballa amb un <em>array</em> de cadenes de text, ja que és el mateix des del punt de vista d’accés a les posicions i invocació de mètodes sobre els valors emmagatzemats. 
</p>

<p>
El millor, però, es veure’n un exemple. Abans d’executar-lo, creeu una carpeta anomenada “Temp” a l’arrel de la unitat “C:”. Dins seu creeu o copieu qualsevol quantitat de carpetes o fitxers.
</p>

<p>

</p>
<pre class="code java"><ol><li class="li1"><div class="de1">package unitat6.apartat1.exemples;</div></li><li class="li1"><div class="de1">import java.io.File;</div></li><li class="li1"><div class="de1">public class FileLlistarElements {</div></li><li class="li1"><div class="de1">  public static void main(String[] args) {</div></li><li class="li1"><div class="de1">    FileLlistarElements programa = new FileLlistarElements();</div></li><li class="li1"><div class="de1">    programa.inici();</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">  public void inici() {</div></li><li class="li1"><div class="de1">    File carpeta = new File(&quot;C:/Temp&quot;);</div></li><li class="li1"><div class="de1">    File[] arrayElements = carpeta.listFiles();</div></li><li class="li1"><div class="de1">    System.out.println(&quot;El contingut de &quot; + carpeta.getAbsolutePath() + &quot; és:&quot;);</div></li><li class="li1"><div class="de1">    //Per recórrer un array, s'usa un bucle</div></li><li class="li1"><div class="de1">    for (int i = 0; i &lt; arrayElements.length; i++) {</div></li><li class="li1"><div class="de1">      File f = arrayElements[i];</div></li><li class="li1"><div class="de1">      if (f.isDirectory()) {</div></li><li class="li1"><div class="de1">       System.out.print(&quot;[DIR] &quot;);</div></li><li class="li1"><div class="de1">      } else {</div></li><li class="li1"><div class="de1">       System.out.print(&quot;[FIT] &quot;);</div></li><li class="li1"><div class="de1">      }</div></li><li class="li1"><div class="de1">      System.out.println(f.getName());</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

<p>
<strong>Repte 2</strong>. Realitzeu un programa que llegeixi des del teclat el text associat a la ruta a una carpeta existent dins del vostre ordinador. Esborrar tots els elements que hi ha dins, independentment que siguin fitxers o carpetes. Tingueu en compte que per poder eliminar una carpeta cal abans buidar-la de tot el seu contingut (en la qual hi pot haver alhora tant fitxers o carpetes… i així indefinidament fins a arribar a una carpeta que només té fitxers). Pista: Per resoldre aquest problema és molt més senzill plantejar una solució recursiva.
</p>

<p>

</p>

</div>

<h2><a id="solucio_dels_reptes_proposats" >Solució dels reptes proposats</a></h2>
<div class="level2">

<p>
<strong>Repte 1</strong>
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">package unitat6.apartat1.reptes;</div></li><li class="li1"><div class="de1">import java.io.File;</div></li><li class="li1"><div class="de1">import java.util.Scanner;</div></li><li class="li1"><div class="de1">public class CanviaNom {</div></li><li class="li1"><div class="de1">  public static void main(String[] args) {</div></li><li class="li1"><div class="de1">    CanviaNom programa = new CanviaNom();</div></li><li class="li1"><div class="de1">    programa.inici();</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">  public void inici() {</div></li><li class="li1"><div class="de1">    File rutaFitxer = llegirNomFitxer();</div></li><li class="li1"><div class="de1">    //Cal comprovar si realment existeix i si és un fitxer</div></li><li class="li1"><div class="de1">    if (rutaFitxer.isFile()) {</div></li><li class="li1"><div class="de1">      File novaRuta = treureExtensio(rutaFitxer);</div></li><li class="li1"><div class="de1">      //Es canvia el nom</div></li><li class="li1"><div class="de1">      rutaFitxer.renameTo(novaRuta);</div></li><li class="li1"><div class="de1">      System.out.println(&quot;Nom canviat de &quot; + rutaFitxer + &quot; a &quot; + novaRuta);</div></li><li class="li1"><div class="de1">    } else {</div></li><li class="li1"><div class="de1">      System.out.println(&quot;Aquest fitxer no existeix!&quot;);</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">  /** Pregunta a l'usuari el nom del fitxer, i d'aquest obté una ruta.</div></li><li class="li1"><div class="de1">   *</div></li><li class="li1"><div class="de1">   * @return La ruta associada al text que ha escrit l'usuari.</div></li><li class="li1"><div class="de1">   */</div></li><li class="li1"><div class="de1">  public File llegirNomFitxer() {</div></li><li class="li1"><div class="de1">    Scanner lector = new Scanner(System.in);</div></li><li class="li1"><div class="de1">    System.out.println(&quot;Escriu el nom d'una ruta en un fitxer existent: &quot;);</div></li><li class="li1"><div class="de1">    String nomFitxer = lector.nextLine();</div></li><li class="li1"><div class="de1">    //Fixeu-vos com és possible fer return d'una variable de tipus File,</div></li><li class="li1"><div class="de1">    //igual que es faria per un enter o una cadena de text.</div></li><li class="li1"><div class="de1">    File f = new File(nomFitxer);</div></li><li class="li1"><div class="de1">    return f;</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">  /** Donada una ruta, en crea una de nova igual, però sense extensió (.xxx)</div></li><li class="li1"><div class="de1">   *</div></li><li class="li1"><div class="de1">   * @param original Ruta original que cal transformar</div></li><li class="li1"><div class="de1">   * @return La ruta sense extensió</div></li><li class="li1"><div class="de1">   */</div></li><li class="li1"><div class="de1">  public File treureExtensio(File original) {</div></li><li class="li1"><div class="de1">    String nom = original.getName();</div></li><li class="li1"><div class="de1">    String pare = original.getParent();</div></li><li class="li1"><div class="de1">    //Cerquem el darrer punt, per trobar l'extensió</div></li><li class="li1"><div class="de1">    int posicioPunt = nom.lastIndexOf(&quot;.&quot;);</div></li><li class="li1"><div class="de1">    if (posicioPunt &gt;= 0) {</div></li><li class="li1"><div class="de1">      //eliminem el que hi ha darrera del punt</div></li><li class="li1"><div class="de1">      String nouNom = nom.substring(0, posicioPunt);</div></li><li class="li1"><div class="de1">      //Es fa el text per a la nova ruta, sense extensió</div></li><li class="li1"><div class="de1">      String nouText = pare + File.separator + nouNom;</div></li><li class="li1"><div class="de1">      File novaRuta = new File(nouText);</div></li><li class="li1"><div class="de1">      return novaRuta;</div></li><li class="li1"><div class="de1">    } else {</div></li><li class="li1"><div class="de1">      //Si no té extensió, es deixa tot igual...</div></li><li class="li1"><div class="de1">      return original;</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

<p>

</p>

<p>
<strong>Repte 2</strong>
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">package unitat6.apartat1.reptes;</div></li><li class="li1"><div class="de1">import java.io.File;</div></li><li class="li1"><div class="de1">import java.util.Scanner;</div></li><li class="li1"><div class="de1">public class NetejarCarpeta {</div></li><li class="li1"><div class="de1">  public static void main(String[] args) {</div></li><li class="li1"><div class="de1">    NetejarCarpeta programa = new NetejarCarpeta();</div></li><li class="li1"><div class="de1">    programa.inici();</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">  public void inici() {</div></li><li class="li1"><div class="de1">    File rutaCarpeta = llegirRutaCarpeta();</div></li><li class="li1"><div class="de1">    netejarCarpeta(rutaCarpeta);</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">  /** Pregunta a l'usuari el nom de la carpeta, i d'aquest obté una ruta.</div></li><li class="li1"><div class="de1">   *</div></li><li class="li1"><div class="de1">   * @return La ruta associada al text que ha escrit l'usuari.</div></li><li class="li1"><div class="de1">   */</div></li><li class="li1"><div class="de1">  public File llegirRutaCarpeta() {</div></li><li class="li1"><div class="de1">    //Un tipus compost es pot deixar sense inicialitzar posant &quot;null&quot;</div></li><li class="li1"><div class="de1">    File f = null;</div></li><li class="li1"><div class="de1">    boolean preguntar = true;</div></li><li class="li1"><div class="de1">    Scanner lector = new Scanner(System.in);</div></li><li class="li1"><div class="de1">    while (preguntar) {</div></li><li class="li1"><div class="de1">      System.out.println(&quot;Escriu el nom d'una ruta en una carpeta: &quot;);</div></li><li class="li1"><div class="de1">      String nomCarpeta = lector.nextLine();</div></li><li class="li1"><div class="de1">      f = new File(nomCarpeta);</div></li><li class="li1"><div class="de1">      if (f.isDirectory()) {</div></li><li class="li1"><div class="de1">        preguntar = false;</div></li><li class="li1"><div class="de1">      } else {</div></li><li class="li1"><div class="de1">        System.out.println(&quot;Aquesta carpeta no existeix...&quot;);</div></li><li class="li1"><div class="de1">      }</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">    return f;</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">  /** Donada una ruta associada a una carpeta, esborra tot el seu contingut.</div></li><li class="li1"><div class="de1">   * </div></li><li class="li1"><div class="de1">   * @param ruta Ruta de la carpeta que cal netejar</div></li><li class="li1"><div class="de1">   */</div></li><li class="li1"><div class="de1">  public void netejarCarpeta(File ruta) {</div></li><li class="li1"><div class="de1">    File[] elements = ruta.listFiles();</div></li><li class="li1"><div class="de1">    //Cal mirar tots els elements:</div></li><li class="li1"><div class="de1">    for (int i = 0; i &lt; elements.length; i++) {</div></li><li class="li1"><div class="de1">      if (elements[i].isFile()) {</div></li><li class="li1"><div class="de1">        //Si es un fitxer, s'esborra.</div></li><li class="li1"><div class="de1">        elements[i].delete();</div></li><li class="li1"><div class="de1">      } else if (elements[i].isDirectory()) {</div></li><li class="li1"><div class="de1">        //Si és una carpeta, cal buidar-la primer, o sigui: invocar netejarCarpeta!          </div></li><li class="li1"><div class="de1">        netejarCarpeta(elements[i]);</div></li><li class="li1"><div class="de1">        //Un cop buida, es pot esborrar correctament</div></li><li class="li1"><div class="de1">        elements[i].delete();</div></li><li class="li1"><div class="de1">      }</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

</div>

	 </article>
     <div class="pnpage">
      <div class="left-corner"></div>
      <div id="prevpage">Anar a la p&agrave;gina anterior:<br /><a href="../../../WebContent/u6/referencies.html">Referències</a></div>
      <div id="nextpage">Anar a la p&agrave;gina seg&uuml;ent:<br /><a href="../../../WebContent/u6/a1/activitats.html">Activitats</a></div>
      <div class="right-corner"></div>
     </div>
    </div>
    <footer class="footer">
      <div><small>Aquest document està subjecte a una llicència oberta de Creative Commons, es reserva el dret de reconeixement de l'autoria, d'exigir que no se'n faci cap mena d'ús comercial. Si altereu o transformeu aquesta obra, o en genereu obres derivades, només podeu distribuir l'obra generada amb una llicència idèntica a aquesta.</small></div>
    </footer>
 </div>
 <div id="back_preview" class="hidden"></div>
 <div id="preview" class="hidden">
  <div class="prevcontent"></div>
 </div>
 <div id="help-tooltips">
  <div id="help-toc" class="hidden tooltip"><span>Taula de continguts:</span> Ofereix una vista general de l&#39;estructura del m&ograve;dul, que us facilitar&agrave; la navegaci&oacute; a trav&eacute;s dels seus continguts.<span class="arrow-left"></span></div> 
  <div id="help-settings" class="hidden tooltip"><span>Opcions de format:</span> Permet configurar el format de lectura a partir de les vostres prefer&egrave;ncies, modificant la mida de la lletra, el color del fons, l&#39;amplada de la p&agrave;gina o l&#39;ocultaci&oacute; dels continguts complementaris, entre d&#39;altres.<span class="arrow-left"></span></div>
  <div id="help-printer" class="hidden tooltip"><span>Imprimir:</span>  Envia el contingut seleccionat a la impressora.<span class="arrow-left"></span></div>
  <div id="help-favorites" class="hidden tooltip"><span>Prefereits:</span> Permet desar aquelles parts del contingut a les que us interessi accedir en un moment posterior; us permetr&agrave; anar creant un repositori personalitzat de les seccions que considereu m&eacute;s rellevants. Un cop l&#39;hageu començat a fer servir se us mostrar&agrave; a sota un comptador que us informar&agrave; del nombre de preferits que s&#39;hagin emmagatzemat fins al moment.<span class="arrow-left"></span></div>
  <div id="help-favcounter" class="hidden tooltip"><span>Comptador i llistat de preferits:</span> Indica el nombre de preferits que s&#39;han desat fins el moment; clicant damunt seu accedireu al llistat de preferits, i a trav&eacute;s d&#39;aquest podreu accedir directament als continguts que hageu emmagatzemat.<span class="arrow-left"></span></div>
  <div id="help-help_icon" class="hidden tooltip"><span>Ajuda:</span> Aquesta opci&oacute; activa la informaci&oacute; de les funcionalitats del web tot situant el punter del ratol&iacute; al damunt dels diferents &iacute;tems.<span class="arrow-left"></span></div>
  <div id="help-sidebar-hide" class="hidden tooltip"><span>Mostrar/Ocultar barra lateral:</span>  Deshabilita la barra d&#39;opcions, permetent la seva recuperaci&oacute; quan es desitgi.<span class="arrow-left"></span></div>
  <div id="help-search" class="hidden tooltip"><span>Cerca:</span>  Introdu&iuml;u les paraules clau sobre aquells conceptes que desitgeu localitzar en els continguts del m&ograve;dul. Tamb&eacute; podeu excloure un terme de la cerca tot afegint-hi el signe &#8220;-&#8221; al davant.<span class="arrow-top"></span></div>
  <div id="help-header" class="hidden tooltip"><span>Cap&ccedil;alera:</span>  Indica l&#39;apartat o secci&oacute; que es mostra en pantalla. Tingueu present que les capçaleres de segon, tercer i quart nivell tamb&eacute; es poden desar com a marcadors.<span class="arrow-left"></span></div>
</div> 
</body>
</html>
