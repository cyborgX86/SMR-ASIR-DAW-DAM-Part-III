<!doctype html>

<!--[if lt IE 7 ]> <html class="ie ie6 no-js" lang="ca"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie ie7 no-js" lang="ca"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie ie8 no-js" lang="ca"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie ie9 no-js" lang="ca"> <![endif]-->
<!--[if gt IE 9]><!--><html class="no-js" lang="ca"><!--<![endif]-->
<!-- the "no-js" class is for Modernizr. -->

<head id="www-sitename-com" data-template-set="html5-reset">

	<meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html">
        
	<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>Programació bàsica (ASX) \ Programació (DAM i DAW)</title>
	
<!-- <meta name="title" content=""> --> 
	<meta name="description" content="">
	<!-- Google will often use this as its description of your page/site. Make it good. -->
	
	<meta name="google-site-verification" content="">
	<!-- Speaking of Google, don't forget to set your site up: http://google.com/webmasters -->
	
	<meta name="author" content="Institut Obert de Catalunya">
	<meta name="Copyright" content="Copyright Institut Obert de Catalunya 2011. All Rights Reserved.">

	<!-- Dublin Core Metadata : http://dublincore.org/ -->
	<meta name="DC.title" content="Programació bàsica (ASX) \ Programació (DAM i DAW)">
	<meta name="DC.subject" content="Informàtica i comunicacions">
	<meta name="DC.creator" content="Institut Obert de Catalunya">
	
	<!--  Mobile Viewport Fix
	j.mp/mobileviewport & davidbcalhoun.com/2010/viewport-metatag 
	device-width : Occupy full width of the screen in its current orientation
	initial-scale = 1.0 retains dimensions instead of zooming out if page height > device height
	maximum-scale = 1.0 retains dimensions instead of zooming in if page width < device width
	-->
	<!-- Uncomment to use � use thoughtfully!
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	-->

	<link rel="shortcut icon" href="../../../img/favicon.ico">
	<!-- This is the traditional favicon.
		 - size: 16x16 or 32x32
		 - transparency is OK
		 - see wikipedia for info on browser support: http://mky.be/favicon/ -->
		 
	<link rel="apple-touch-icon" href="../../../img/apple-touch-icon.png">
	<!-- The is the icon for iOS's Web Clip.
		 - size: 57x57 for older iPhones, 72x72 for iPads, 114x114 for iPhone4's retina display (IMHO, just go ahead and use the biggest one)
		 - To prevent iOS from applying its styles to the icon name it thusly: apple-touch-icon-precomposed.png
		 - Transparency is not recommended (iOS will put a black BG behind the icon) -->
	
	<!-- CSS: screen, mobile & print are all in the same file -->
	<link rel="stylesheet" href="../../../_/css/style.css">

	<!-- CSS: jQuery UI -->
	<link rel="stylesheet" href="../../../_/css/jquery-ui.css">
	
	<!-- all our JS is at the bottom of the page, except for Modernizr. -->
	<script src="../../../_/js/modernizr-1.7.min.js"></script>
	<script src="../../../_/js/Hyphenator.js" type="text/javascript"></script>
	<script type="text/javascript">
	   Hyphenator.config({
		minwordlength : 4
	   });
	   Hyphenator.run();
	</script>
    <script src="../../../_/js/build.js" type="text/javascript"></script>
</head>

<body class="style-newspaper">

<div class="wrapper"><!-- not needed? up to you: http://camendesign.com/code/developpeurs_sans_frontieres -->

	<header id="header">
		<div class="head"><a href="http://ioc.gencat.cat"><img src="../../../img/logo.png" alt="Institut Obert de Catalunya"/></a><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/es/deed.ca"><img src="../../../img/license.png" alt="Llic&egrave;ncia" class="license"/></a></div>
		<div class="headdocument"><a href="../../../index.html">Programació bàsica (ASX) \ Programació (DAM i DAW)</a></div>
        <div id="search" class="search" name="search">
         <form id="frmsearch" action="../../../search.html" method="get">
          <input type="text" name="q"/>
        </form>
        </div>
	</header>
   <div id="upbutton" class="upbutton" style="display:none;"><img src="../../../img/uparrow.png" alt="Pujar a l'inici de p&agrave;gina"/></div>
   <aside id="aside">
    <div id="menu">
      <ul>
       <li name="toc"><div><img src="../../../img/toc.png" alt="&Iacute;ndex"/></div></li>
       <li name="settings"><div><img src="../../../img/settings.png" alt="Configuraci&oacute;"/></div></li>
       <li name="printer"><div><img src="../../../img/printer.png" alt="Imprimir"/></div></li>
       <li name="favorites"><div><img src="../../../img/favorites.png" alt="Favorits"/></div></li>
       <li name="help_icon" class="help_icon"><div><img src="../../../img/help_icon.png" alt="Ajuda"/></div></li>
      </ul>
     </div>
   </aside>
   <div id="sidebar-hide" name="sidebar-hide"><img src="../../../img/arrows.png"/></div>
   <section>
     <div id="toc" class="hidden">
      <div class="menucontent">
        <ul>
        <li id="u5" class="parentnode"><p><a class="unit" href="../../../WebContent/u5/introduccio.html">5. Biblioteques. Proves. Recursivitat</a></p><ul class="expander"><li id="u5introduccio"><a href="../../../WebContent/u5/introduccio.html">Introducció</a></li><li id="u5resum"><a href="../../../WebContent/u5/resum.html">Resum</a></li><li id="u5resultats_d_aprenentatge"><a href="../../../WebContent/u5/resultats_d_aprenentatge.html">Resultats d'aprenentatge</a></li><li id="u5mapa"><a href="../../../WebContent/u5/mapa.html">Mapa conceptual</a></li><li id="u5referencies"><a href="../../../WebContent/u5/referencies.html">Referències</a></li><li id="u5a1" class="tocsection"><p id='u5a1continguts'><a class="section" href="../../../WebContent/u5/a1/continguts.html">Descomposició en classes i biblioteques</a><span class="buttonexp"></span></p><ul><li id="u5a1activitats"><a href="../../../WebContent/u5/a1/activitats.html">Activitats</a></li><li id="u5a1exercicis"><a href="../../../WebContent/u5/a1/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><div data-parent-id='u5a1' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u5/a1/continguts.html#programes_amb_multiples_classes">Programes amb múltiples classes</a></li><li><a href="../../../WebContent/u5/a1/continguts.html#biblioteques_de_classespackages">Biblioteques de classes: packages</a></li><li><a href="../../../WebContent/u5/a1/continguts.html#l_api_del_llenguatge_java">L'API del llenguatge Java</a></li><li><a href="../../../WebContent/u5/a1/continguts.html#metodes_estatics">Mètodes estàtics</a></li><li><a href="../../../WebContent/u5/a1/continguts.html#documentacio_de_programes_en_java">Documentació de programes en Java</a></li><li><a href="../../../WebContent/u5/a1/continguts.html#solucio_dels_reptes_proposats">Solució dels reptes proposats</a></li></ul></div></div><li id="u5a2" class="tocsection"><p id='u5a2continguts'><a class="section" href="../../../WebContent/u5/a2/continguts.html">Creació d'una aplicació modular. El joc de combats a l'arena</a><span class="buttonexp"></span></p><ul><li id="u5a2activitats"><a href="../../../WebContent/u5/a2/activitats.html">Activitats</a></li><li id="u5a2exercicis"><a href="../../../WebContent/u5/a2/exercicis.html">Exercicis d'autoavaluació</a></li><li id="u5a2annexos"><a href="../../../WebContent/u5/a2/annexos.html">Annexos</a></li></ul></li><div data-parent-id='u5a2' class='tocssection hidden'><div class="toc"><ul><li><a href="../../../WebContent/u5/a2/continguts.html#el_joc_de_combats_a_l_arena">El joc de combats a l'arena</a></li><li><a href="../../../WebContent/u5/a2/continguts.html#la_biblioteca_jocarenaregles">La biblioteca "joc.arena.regles"</a></li><li><a href="../../../WebContent/u5/a2/continguts.html#la_biblioteca_jocarenainterficie">La biblioteca "joc.arena.interficie"</a></li><li><a href="../../../WebContent/u5/a2/continguts.html#la_classe_principal">La classe principal</a></li><li><a href="../../../WebContent/u5/a2/continguts.html#simplificacio_d_algorismes_complexos_usant_recursivitat">Simplificació d'algorismes complexos usant recursivitat</a></li></ul></div></div></ul></li><li id="" class="indexnode"><p><a href="../../../index.html">Anar a l&#39;&iacute;ndex general</a></p></li>
        </ul>
      </div>
    </div>
   </section>
   <section>
   <div id="settings" class="hidden">
    <div class="menucontent">
     <div class="allsettings">
     <div class="settings">
      <label>Font i Color</label>
		<div class="setting-option">
	        <ul class="fontBackground">
				<li id="style-newspaper" title="Newspaper" class="appearance-style-newspaper"><span>Newspaper</span></li>
                <li id="style-novel" title="Novel" class="appearance-style-novel"><span>Novel</span></li>
                <li id="style-ebook" title="eBook" class="appearance-style-ebook"><span>eBook</span></li>
				<li id="style-inverse" title="Inverse" class="appearance-style-inverse active"><span>Inverse</span></li>
				<li id="style-athelas" title="Athelas" class="appearance-style-athelas"><span>Athelas</span></li>
			</ul>
		</div>
     </div>
	<div class="settings">
      <label>Amplada</label>
		<div class="setting-option">
	        <div id="slider-width"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
		<div class="setting-option">
	        <div id="slider-font"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
	  <div class="setting-option">
       <form action="" class="sett-options">
		<ul>
		    <li><input type="checkbox" id="secondary-content" /><label for="secondary-content">Mostra recursos complementaris</label></li>
		    <li><input type="checkbox" id="main-images" /><label for="main-images">Mostra imatges</label></li>
		    <li><input type="checkbox" id="text-alignment" /><label for="text-alignment">Text justificat</label></li>
			<li><input type="checkbox" id="text-hyphen" /><label for="text-hyphen">Partici&oacute; sil·l&agrave;bica</label></li>
		</ul>
       </form>
	  </div>
     </div>
     </div>
    </div>
   </div>
   </section>
 <section>
 <div id="favorites" class="hidden"></div>
 </section>   
 <div id="bridge" class="hidden"></div>
 <div id="help" class="hidden">
  <div class="helptitle">Dreceres del teclat<hr></div>
  <div class="helpsection"><span>General</span>
   <ul>
    <li><span class="shortcut">g</span>: Anar al men&uacute; de navegaci&oacute;</li>
    <li><span class="shortcut">o</span>: Anar a opcions</li>
    <li><span class="shortcut">s</span>: Guardar la p&agrave;gina actual a favorits</li>
    <li><span class="shortcut">p</span>: Imprimir la p&agrave;gina actual</li>
    <li><span class="shortcut">?</span>: Mostrar/Ocultar l&#39;ajuda</li>
   </ul>
  </div>
  <div class="helpsection"><span>Navegaci&oacute;</span>
   <ul>
    <li><span class="shortcut">i</span>: Anar a l&#39;&iacute;ndex general</li>
    <li><span class="shortcut">t</span>: Anar a l&#39;inici de p&agrave;gina</li>
    <li><span class="shortcut">b</span>: Anar al final de p&agrave;gina</li>
    <li><span class="shortcut">j</span>: Anar cap endavant dintre la p&agrave;gina</li>
    <li><span class="shortcut">k</span>: Anar cap enrere dintre la p&agrave;gina</li>
    <li><span class="shortcut">h</span>: Anar a la p&agrave;gina anterior:</li>
    <li><span class="shortcut">l</span>: Anar a la p&agrave;gina seg&uuml;ent:</li>
   </ul>
   </div>
 </div>
 <div id="favcounter" name="favcounter" class="hidden"><span></span></div>
 <div id="navmenu" class="navmenu"><ul class="webnav"><li><a href="../../../index.html" title="Anar a l&#39;&iacute;ndex general">Inici</a></li><li><a href="../introduccio.html">Biblioteques. Proves. Recursivitat</a></li><li><a href="continguts.html">Creació d'una aplicació modular. El joc de combats a l'arena</a></li><li>Activitats</li></ul></div>
	<div id="content" lang="ca" class="hyphenate text">
     <article lang="ca" class="sheet">
        <h1><a id="activitats"> Activitats </a></h1>
    	
<h2><a id="exits_critics" >Èxits crítics</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és, a partir d’un programa modular, saber triar on afegir noves funcionalitats de manera que se’n tregui màxim profit i mantenint els principis de modularitat inicials.
</p>

<p>
Es vol modificar el programa que ha servit com exemple als continguts d’aquest apartat afegint la regla següent. En mesurar el grau d’èxit d’una estratègia, hi ha d’haver una possibilitat que succeeixi un <em>èxit crític</em>. Quan això succeeix, en grau d’èxit es duplica. La probabilitat que això passi és igual al nivell de lluitador que duu a terme l’estratègia, en tant per cent. Per exemple, si és nivell 2, té una probabilitat de 2 sobre 100, un 2%.
</p>

<p>
Modifiqueu el programa per assolir això de manera que representi el mínim de modificacions al programa original. En fer-ho, mantingueu els principis de modularitat per a aquest programa, creant cada nou mètode que creieu necessari a la classe que li correspon.
</p>

<p>
<form action=""><div class="solution ioccontent">
<p>
Classe <code>Monendes.java</code>
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">package joc.arena.regles;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">import java.util.Random;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">public class Monedes {</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  /** Resol el llançament d'un grup de monedes.</div></li><li class="li1"><div class="de1">   *</div></li><li class="li1"><div class="de1">   * @param numMonedes Nombre de monedes que s'han llençat.</div></li><li class="li1"><div class="de1">   * @param nivell Nivell del llançador de monedes.</div></li><li class="li1"><div class="de1">   * @return Nombre de cares obtingut.</div></li><li class="li1"><div class="de1">   */</div></li><li class="li1"><div class="de1">  public int ferTirada(int numMonedes, int nivell) {</div></li><li class="li1"><div class="de1">    Random rnd = new Random();</div></li><li class="li1"><div class="de1">    int numCares = 0;</div></li><li class="li1"><div class="de1">    for (int i =0; i &lt; numMonedes; i++) {</div></li><li class="li1"><div class="de1">      boolean tirada = rnd.nextBoolean();</div></li><li class="li1"><div class="de1">      if (tirada) {</div></li><li class="li1"><div class="de1">        numCares++;</div></li><li class="li1"><div class="de1">      }</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">    int critic = rnd.nextInt(99);</div></li><li class="li1"><div class="de1">    if (critic &lt; nivell) {</div></li><li class="li1"><div class="de1">     numCares = numCares*2;</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">    return numCares;</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>

<p>
També caldrà modificar les invocacions al mètode <code>ferTirada</code> que es fan des de la classe <code>Lluitador</code>.
</p>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

<h2><a id="seleccionar_un_nom" >Seleccionar un nom</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és, a partir d’un programa modular, saber triar on afegir noves funcionalitats de manera que se’n tregui màxim profit i mantenint els principis de modularitat inicials.
</p>

<p>
Modifiqueu el programa que ha servit com exemple als continguts d’aquest apartat perquè, a l’inici, el jugador pugui triar el seu nom d’entre tots els disponibles dins el joc, incloent els de tots els possibles adversaris, enlloc de dir-se sempre “Aventurer”. Com en el cas del combat, el jugador ha de saber que aquest existeix. A mesura que va fent partides, pot anar aprenent nous noms.
En fer-ho, mantingueu els principis de modularitat per a aquest programa, creant cada nou mètode que creieu necessari a la classe que li correspon.
</p>

<p>
<form action=""><div class="solution ioccontent">
<p>
Classe <code>Lluitador</code>. Cal poder assignar un nou identificador associat a un nom.
</p>
<pre class="code">
  /** Assigna un nou identificador a un lluitador
   * 
   * @param lluitador Lluitador a modficar 
   * @param id Nou identficador
   */
  public void posarId(int[] lluitador, int id) {
    lluitador[ID]= id;    
  }
</pre>

<p>
Classe <code>Bestiari</code>. Cal poder cercar noms i conèixer l’identificador associat.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">  /** Diu l'identificador d'un nom concret</div></li><li class="li1"><div class="de1">   * </div></li><li class="li1"><div class="de1">   * @param nom Nom a cercar</div></li><li class="li1"><div class="de1">   * @return identificador, o -1 si no existeix el nom</div></li><li class="li1"><div class="de1">   */</div></li><li class="li1"><div class="de1">  public int cercarNom(String nom) {</div></li><li class="li1"><div class="de1">    for (int i = 0; i &lt; noms.length; i++) {</div></li><li class="li1"><div class="de1">      if (noms[i].equalsIgnoreCase(nom)) {</div></li><li class="li1"><div class="de1">        return i;    </div></li><li class="li1"><div class="de1">      }    </div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">    return -1;</div></li><li class="li1"><div class="de1">  }</div></li></ol></pre>

<p>
Classe <code>EntradaTeclat</code>. Cal gestionar la pregunta del nou nom.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">  /** Es tria un nom pel jugador.</div></li><li class="li1"><div class="de1">   *</div></li><li class="li1"><div class="de1">   * @param ll Estatus del Jugador, a qui es canvia el nom</div></li><li class="li1"><div class="de1">   */</div></li><li class="li1"><div class="de1">  public void triarNom(int[] ll) {</div></li><li class="li1"><div class="de1">    System.out.print(&quot;Quin nom vols? &quot;);</div></li><li class="li1"><div class="de1">    Scanner lector = new Scanner(System.in);</div></li><li class="li1"><div class="de1">    String resposta = lector.nextLine();</div></li><li class="li1"><div class="de1">    Bestiari bestiari = new Bestiari();</div></li><li class="li1"><div class="de1">    int id = bestiari.cercarNom(resposta);</div></li><li class="li1"><div class="de1">    if (id == -1) {</div></li><li class="li1"><div class="de1">      System.out.println(&quot;Aquest nom no existeix. Et diràs Aventurer.&quot;);</div></li><li class="li1"><div class="de1">    } else {</div></li><li class="li1"><div class="de1">      Lluitador lluitador = new Lluitador();</div></li><li class="li1"><div class="de1">      lluitador.posarId(ll, id);</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">  }</div></li></ol></pre>

<p>
Classe <code>JocArena</code>. Ara es pregunta el nom un cop generat el jugador.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">  public void inici() {</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    sortida.mostarBenvinguda();</div></li><li class="li1"><div class="de1">    int[] jugador = bestiari.generarJugador();</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    entrada.triarNom(jugador);</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    //...</div></li><li class="li1"><div class="de1"> }</div></li></ol></pre>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

<h2><a id="pocions_de_curacio" >Pocions de curació</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és, a partir d’un programa modular, saber triar on afegir noves funcionalitats de manera que se’n tregui màxim profit i mantenint els principis de modularitat inicials.
</p>

<p>
Ara mateix, a partir del programa que ha servit com a exemple als continguts d’aquest apartat, el joc pot ser una mica difícil, ja que el jugador no es guareix entre combats. Modifiqueu el programa de manera que el jugador tingui dues pocions de curació. El jugador ara disposa d’una nova estratègia de lluita consistent en usar-ne una. Quan ho fa, recupera tots els seus punts de vida, independentment de l’estratègia triada pel seu adversari durant aquella ronda. Si intenta usar-ne una quan ja no li queden, el programa dirà que no s’ha pogut dur a terme l’estratègia i rebrà dany si l’adversari tria atacar (en la resta d’estratègies, no passa res). 
</p>

<p>
En fer-ho, mantingueu els principis de modularitat per a aquest programa, creant cada nou mètode que creieu necessari a la classe que li correspon.
</p>

<p>
<form action=""><div class="solution ioccontent">
<p>
Classe <code>LLuitador</code>. El nombre de pocions és un nou atribut. 
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">  public final static int POCIONS = 9;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  /** Intenta gastar una poció.</div></li><li class="li1"><div class="de1">   *</div></li><li class="li1"><div class="de1">   * @param lluitador Estatus del jugador</div></li><li class="li1"><div class="de1">   * @return Si quedaven pocions (true) o no (false)</div></li><li class="li1"><div class="de1">   */</div></li><li class="li1"><div class="de1">  public boolean gastarPocio(int[] lluitador) {</div></li><li class="li1"><div class="de1">    if (lluitador[POCIONS] &gt; 0) {</div></li><li class="li1"><div class="de1">      lluitador[POCIONS]--;</div></li><li class="li1"><div class="de1">      lluitador[VIDA] = lluitador[VIDA_MAX];</div></li><li class="li1"><div class="de1">      return true;</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">    return false;</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  /** diu quantes pocions queden</div></li><li class="li1"><div class="de1">   * </div></li><li class="li1"><div class="de1">   * @param lluitador Estatus del jugador</div></li><li class="li1"><div class="de1">   * @return Nombre de pocions</div></li><li class="li1"><div class="de1">   */</div></li><li class="li1"><div class="de1">  public int llegirPocions(int[] lluitador) {</div></li><li class="li1"><div class="de1">    return lluitador[POCIONS];</div></li><li class="li1"><div class="de1">  }</div></li></ol></pre>

<p>
Classe <code>Combat</code>. Ara hi ha una nova estratègia, i cal dir si s’ha pogut dur a terme.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">  public static final int POCIO = 4;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  public String estrategiaAText(int accio) {</div></li><li class="li1"><div class="de1">    switch(accio) {</div></li><li class="li1"><div class="de1">      case ATAC: return &quot;ATAC&quot;;</div></li><li class="li1"><div class="de1">      case DEFENSA: return &quot;DEFENSA&quot;;</div></li><li class="li1"><div class="de1">      case ENGANY: return &quot;ENGANY&quot;;</div></li><li class="li1"><div class="de1">      case MANIOBRA: return &quot;MANIOBRA&quot;;</div></li><li class="li1"><div class="de1">      case POCIO: return &quot;USAR POCIÓ&quot;;</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">    return &quot;DESCONEGUDA&quot;;</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  public boolean resoldreEstrategies(int[] jug, int accioJug, int[] adv, int accioAdv) {</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    //...</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    } else if ((accioJug == MANIOBRA)&amp;&amp;(accioAdv == MANIOBRA)) {</div></li><li class="li1"><div class="de1">      //Jug i Adv: Penalitzat </div></li><li class="li1"><div class="de1">      lluitador.penalitzar(adv, exitJug);</div></li><li class="li1"><div class="de1">      lluitador.penalitzar(jug, exitAdv);</div></li><li class="li1"><div class="de1">    } else {</div></li><li class="li1"><div class="de1">      //Exercici pocions</div></li><li class="li1"><div class="de1">      if (accioAdv == ATAC) {</div></li><li class="li1"><div class="de1">        lluitador.danyar(jug, exitAdv);</div></li><li class="li1"><div class="de1">      }</div></li><li class="li1"><div class="de1">      if (accioJug == POCIO) {</div></li><li class="li1"><div class="de1">        boolean ok = lluitador.gastarPocio(jug);</div></li><li class="li1"><div class="de1">        return ok;</div></li><li class="li1"><div class="de1">      }</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">    return true;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  }</div></li></ol></pre>

<p>
Classe <code>Bestiari</code>. Cal donar un valor al nou atribut amb les pocions
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">  //Jugador: ID = 0</div></li><li class="li1"><div class="de1">  private int[] jugador = {0,  1,  0, 10, 10, 3, 3, 3, 3, 2};</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  //Adversaris possibles al joc</div></li><li class="li1"><div class="de1">  private int[][] adversaris = {</div></li><li class="li1"><div class="de1">                               {1,  1, 25,  8,  8, 3, 3, 3, 3, 0},</div></li><li class="li1"><div class="de1">                               {2,  1, 30, 10, 10, 4, 4, 2, 2, 0},</div></li><li class="li1"><div class="de1">                               {3,  2, 35, 12, 12, 4, 4, 3, 3, 0},</div></li><li class="li1"><div class="de1">                               {4,  2, 40, 14, 14, 3, 3, 4, 4, 0},</div></li><li class="li1"><div class="de1">                               {5,  3, 45, 15, 15, 3, 3, 5, 5, 0},</div></li><li class="li1"><div class="de1">                               {6,  3, 50, 16, 16, 5, 5, 2, 2, 0},</div></li><li class="li1"><div class="de1">                               {7,  4, 55, 15, 15, 4, 4, 4, 4, 0},</div></li><li class="li1"><div class="de1">                               {8,  4, 60, 18, 18, 3, 3, 5, 5, 0},</div></li><li class="li1"><div class="de1">                               {9,  5, 70, 22, 22, 4, 4, 6, 6, 0},</div></li><li class="li1"><div class="de1">                               {10, 5, 80, 30, 30, 8, 8, 2, 2, 0}</div></li><li class="li1"><div class="de1">                               };</div></li></ol></pre>

<p>
Classe <code>EntradaTeclat</code>. Cal acceptar la nova estratègia
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">  public int preguntarEstrategia() {</div></li><li class="li1"><div class="de1">    Scanner lector = new Scanner(System.in);</div></li><li class="li1"><div class="de1">    System.out.println(&quot;Quina estratègia vols seguir aquesta ronda?&quot;);</div></li><li class="li1"><div class="de1">    System.out.println(&quot;[A]tacar\t[D]efensar\t[E]ngany\t[M]aniobra\t[P]oció&quot;);</div></li><li class="li1"><div class="de1">    System.out.println(&quot;--------&quot;);</div></li><li class="li1"><div class="de1">    boolean preguntar = true;</div></li><li class="li1"><div class="de1">    int accio = -1;</div></li><li class="li1"><div class="de1">    while (preguntar) {</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      //...</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      } else if (&quot;P&quot;.equalsIgnoreCase(resposta)) {</div></li><li class="li1"><div class="de1">        //Activitat pocions  </div></li><li class="li1"><div class="de1">        accio = Combat.POCIO;</div></li><li class="li1"><div class="de1">        preguntar = false;</div></li><li class="li1"><div class="de1">      } else {</div></li><li class="li1"><div class="de1">        System.out.print(&quot;Acció incorrecta...&quot;);</div></li><li class="li1"><div class="de1">      }</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">    return accio;</div></li><li class="li1"><div class="de1">  }</div></li></ol></pre>

<p>
Classe <code>SortidaPantalla</code>. Cal mostrar el nombre de pocions.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">  public void mostrarVersus(int[] jugador, int[] adversari) {</div></li><li class="li1"><div class="de1">    Lluitador lluitador = new Lluitador();</div></li><li class="li1"><div class="de1">    System.out.print(&quot;JUGADOR: &quot;);</div></li><li class="li1"><div class="de1">    mostrarLluitador(jugador);</div></li><li class="li1"><div class="de1">    System.out.println(&quot;POCIONS: &quot; + lluitador.llegirPocions(jugador));</div></li><li class="li1"><div class="de1">    System.out.println(&quot;VS&quot;);</div></li><li class="li1"><div class="de1">    System.out.print(&quot;ADVERSARI: &quot;);</div></li><li class="li1"><div class="de1">    mostrarLluitador(adversari);</div></li><li class="li1"><div class="de1">  }</div></li></ol></pre>

<p>
Classe <code>JocArena</code>. Cal controlar si l’estratègia ha funcionat.
</p>
<pre class="code java"><ol><li class="li1"><div class="de1">public void combatre(int[] jugador, int[] adversari) {</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  //...</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">      System.out.print(&quot;Has triat &quot; + combat.estrategiaAText(accioJug));</div></li><li class="li1"><div class="de1">      System.out.println(&quot; i el teu enemic &quot; + combat.estrategiaAText(accioAdv));</div></li><li class="li1"><div class="de1">      boolean ok = combat.resoldreEstrategies(jugador, accioJug, adversari, accioAdv);</div></li><li class="li1"><div class="de1">      if (ok == false) {</div></li><li class="li1"><div class="de1">        System.out.println(&quot;No s'ha pogut dur a terme l'acció!&quot;);</div></li><li class="li1"><div class="de1">      }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  //...</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

<h2><a id="les_torres_de_hanoi" >Les torres de Hanoi</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és estudiar un nou problema basat en una solució recursiva i veure com solucionar-lo.
</p>

<p>
Un dels problemes clàssics on una solució recursiva és molt més elegant i fàcil de plantejar que qualsevol altre mètode és l’anomenat “Torres de Hanoi”. En aquest es disposa de tres barres, dues de les quals estan buides i una amb un cert nombre de discos de diferent mida apilats, de manera que a sobre de cadascun d’ells sempre hi ha un disc de mida inferior. Mai pot haver-hi a sobre d’un disc un altre de mida superior. L’objectiu és passar tots els discos d’una barra a una altra, movent els discos d’un en un, pas a pas. A cada moviment, només es pot moure un disc que estigui en la posició superior d’alguna barra, i sempre de manera que es compleixi la condició descrita. 
</p>

<p>
Cerqueu informació més detallada sobre aquest problema, estudieu atentament la seva solució recursiva i plantegeu un programa en Java que mostri la llista de moviments (“moure disc de torre X a torre Y”) que cal fer per resoldre el cas de 6 discos. 
</p>

<p>
<form action=""><div class="solution ioccontent"><pre class="code java"><ol><li class="li1"><div class="de1">package unitat5.apartat2.activitats;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">public class Hanoi {</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  public static void main(String[] args) {</div></li><li class="li1"><div class="de1">    Hanoi programa = new Hanoi();</div></li><li class="li1"><div class="de1">    programa.inici();</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  public void inici() {</div></li><li class="li1"><div class="de1">    hanoi(6, 'A', 'B', 'C');</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  /** Solució recursiva a les torres de Hanoi.</div></li><li class="li1"><div class="de1">   * </div></li><li class="li1"><div class="de1">   * @param numDisc Discos que cal moure des de l'origen</div></li><li class="li1"><div class="de1">   * @param origen Torre des d'on moure els discos</div></li><li class="li1"><div class="de1">   * @param desti Torre cap a on posar-los</div></li><li class="li1"><div class="de1">   * @param aux Torre auxiliar en el procés</div></li><li class="li1"><div class="de1">   */</div></li><li class="li1"><div class="de1">  public void hanoi(int numDisc, char origen, char desti, char aux) {</div></li><li class="li1"><div class="de1">    if (numDisc &gt; 0) {</div></li><li class="li1"><div class="de1">      hanoi (numDisc - 1, origen, aux, desti);</div></li><li class="li1"><div class="de1">      System.out.println(&quot;moure disc de torre &quot; + origen + &quot; a torre &quot; + desti);</div></li><li class="li1"><div class="de1">      hanoi (numDisc - 1, aux, desti, origen);</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

<h2><a id="les_torres_de_hanoi_detallades" >Les torres de Hanoi detallades</a></h2>
<div class="level2">

<p>
L’objectiu d’aquesta activitat és entendre quin és l’ordre com s’encadenen les invocacions als mètodes recursius.
</p>

<p>
Feu una nova versió del programa que soluciona les torres de Hanoi, però en aquest cas, en lloc d’enumerar els moviments, el que ha de mostrar és l’evolució de les torres al llarg de tot el procés. Per representar les torres, es poden usar cadenes de text, de manera que els dos primers caràcters diuen el nom de la torre (“A:”, “B:”, “C:”) i la resta son números que representen els discos. 
</p>

<p>
Tingueu en compte que aquest problema és més complicat que la versió on només cal mostrar les passes, per la qual cosa aquí teniu una pista: us caldrà representar les torres usant variables globals.
</p>

<p>
Si es planteja per al cas de 4 discos, el programa podria mostrar:
</p>
<pre class="code">A:6543 B: C:
A:654 B: C:3
A:65 B:4 C:3
A:65 B:43 C:
A:6 B:43 C:5
A:63 B:4 C:5
A:63 B: C:54
A:6 B: C:543
A: B:6 C:543
A: B:63 C:54
A:4 B:63 C:5
A:43 B:6 C:5
A:43 B:65 C:
A:4 B:65 C:3
A: B:654 C:3
A: B:6543 C:</pre>

<p>
<form action=""><div class="solution ioccontent"><pre class="code java"><ol><li class="li1"><div class="de1">package unitat5.apartat2.activitats;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">public class HanoiDetallat {</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  private String torreA = &quot;A:6543&quot;;</div></li><li class="li1"><div class="de1">  private String torreB = &quot;B:&quot;;</div></li><li class="li1"><div class="de1">  private String torreC = &quot;C:&quot;;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  public static void main(String[] args) {</div></li><li class="li1"><div class="de1">    HanoiDetallat programa = new HanoiDetallat();</div></li><li class="li1"><div class="de1">    programa.inici();</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  public void inici() {</div></li><li class="li1"><div class="de1">    hanoi(torreA.length() - 2, 'A', 'B', 'C');</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  /** Solució recursiva a les torres de Hanoi.</div></li><li class="li1"><div class="de1">   * </div></li><li class="li1"><div class="de1">   * @param numDisc Discos que cal moure des de l'origen</div></li><li class="li1"><div class="de1">   * @param origen Torre des d'on moure els discos</div></li><li class="li1"><div class="de1">   * @param desti Torre cap a on posar-los</div></li><li class="li1"><div class="de1">   * @param aux Torre auxiliar en el procés</div></li><li class="li1"><div class="de1">   */</div></li><li class="li1"><div class="de1">  public void hanoi(int numDisc, char origen, char desti, char aux) {</div></li><li class="li1"><div class="de1">    if (numDisc &gt; 0) {</div></li><li class="li1"><div class="de1">      hanoi (numDisc - 1, origen, aux, desti);</div></li><li class="li1"><div class="de1">      char d = treuDisc(origen);</div></li><li class="li1"><div class="de1">      posaDisc(desti, d);</div></li><li class="li1"><div class="de1">      System.out.println(torreA + &quot; &quot; + torreB + &quot; &quot; + torreC);</div></li><li class="li1"><div class="de1">      hanoi (numDisc - 1, aux, desti, origen);</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  /** A partir del nom d'una torre, treu el darrer disc</div></li><li class="li1"><div class="de1">   *</div></li><li class="li1"><div class="de1">   * @param t Nom de la torre a modificar</div></li><li class="li1"><div class="de1">   * @return Disc extret</div></li><li class="li1"><div class="de1">   */</div></li><li class="li1"><div class="de1">  public char treuDisc(char t) {</div></li><li class="li1"><div class="de1">    char d = ' ';</div></li><li class="li1"><div class="de1">    switch(t) {</div></li><li class="li1"><div class="de1">      case 'A':</div></li><li class="li1"><div class="de1">        d = torreA.charAt(torreA.length() - 1);</div></li><li class="li1"><div class="de1">        torreA = torreA.substring(0, torreA.length() - 1);</div></li><li class="li1"><div class="de1">        return d;</div></li><li class="li1"><div class="de1">      case 'B':</div></li><li class="li1"><div class="de1">        d = torreB.charAt(torreB.length() - 1);</div></li><li class="li1"><div class="de1">        torreB = torreB.substring(0, torreB.length() - 1);</div></li><li class="li1"><div class="de1">        return d;</div></li><li class="li1"><div class="de1">      default:</div></li><li class="li1"><div class="de1">        d = torreC.charAt(torreC.length() - 1);</div></li><li class="li1"><div class="de1">        torreC = torreC.substring(0, torreC.length() - 1);</div></li><li class="li1"><div class="de1">        return d;</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  /** A partir del nom d'una torre, hi posa un disc</div></li><li class="li1"><div class="de1">   *</div></li><li class="li1"><div class="de1">   * @param t Nom de la torre a modificar</div></li><li class="li1"><div class="de1">   * @param d Disc a posar</div></li><li class="li1"><div class="de1">   */</div></li><li class="li1"><div class="de1">  public void posaDisc(char t, char d) {</div></li><li class="li1"><div class="de1">    switch(t) {</div></li><li class="li1"><div class="de1">      case 'A':</div></li><li class="li1"><div class="de1">        torreA = torreA + d;</div></li><li class="li1"><div class="de1">        break;</div></li><li class="li1"><div class="de1">      case 'B':</div></li><li class="li1"><div class="de1">        torreB = torreB + d;</div></li><li class="li1"><div class="de1">        break;</div></li><li class="li1"><div class="de1">      default:</div></li><li class="li1"><div class="de1">        torreC = torreC + d;</div></li><li class="li1"><div class="de1">    }</div></li><li class="li1"><div class="de1">  }</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">}</div></li></ol></pre>
</div><input class="btn_solution3" type="button" value="Mostra"></input></form>
</p>

</div>

	 </article>
     <div class="pnpage">
      <div class="left-corner"></div>
      <div id="prevpage">Anar a la p&agrave;gina anterior:<br /><a href="../../../WebContent/u5/a2/continguts.html">Creació d'una aplicació modular. El joc de combats a l'arena</a></div>
      <div id="nextpage">Anar a la p&agrave;gina seg&uuml;ent:<br /><a href="../../../WebContent/u5/a2/exercicis.html">Exercicis d'autoavaluació</a></div>
      <div class="right-corner"></div>
     </div>
    </div>
    <footer class="footer">
      <div><small>Aquest document està subjecte a una llicència oberta de Creative Commons, es reserva el dret de reconeixement de l'autoria, d'exigir que no se'n faci cap mena d'ús comercial. Si altereu o transformeu aquesta obra, o en genereu obres derivades, només podeu distribuir l'obra generada amb una llicència idèntica a aquesta.</small></div>
    </footer>
 </div>
 <div id="back_preview" class="hidden"></div>
 <div id="preview" class="hidden">
  <div class="prevcontent"></div>
 </div>
 <div id="help-tooltips">
  <div id="help-toc" class="hidden tooltip"><span>Taula de continguts:</span> Ofereix una vista general de l&#39;estructura del m&ograve;dul, que us facilitar&agrave; la navegaci&oacute; a trav&eacute;s dels seus continguts.<span class="arrow-left"></span></div> 
  <div id="help-settings" class="hidden tooltip"><span>Opcions de format:</span> Permet configurar el format de lectura a partir de les vostres prefer&egrave;ncies, modificant la mida de la lletra, el color del fons, l&#39;amplada de la p&agrave;gina o l&#39;ocultaci&oacute; dels continguts complementaris, entre d&#39;altres.<span class="arrow-left"></span></div>
  <div id="help-printer" class="hidden tooltip"><span>Imprimir:</span>  Envia el contingut seleccionat a la impressora.<span class="arrow-left"></span></div>
  <div id="help-favorites" class="hidden tooltip"><span>Prefereits:</span> Permet desar aquelles parts del contingut a les que us interessi accedir en un moment posterior; us permetr&agrave; anar creant un repositori personalitzat de les seccions que considereu m&eacute;s rellevants. Un cop l&#39;hageu començat a fer servir se us mostrar&agrave; a sota un comptador que us informar&agrave; del nombre de preferits que s&#39;hagin emmagatzemat fins al moment.<span class="arrow-left"></span></div>
  <div id="help-favcounter" class="hidden tooltip"><span>Comptador i llistat de preferits:</span> Indica el nombre de preferits que s&#39;han desat fins el moment; clicant damunt seu accedireu al llistat de preferits, i a trav&eacute;s d&#39;aquest podreu accedir directament als continguts que hageu emmagatzemat.<span class="arrow-left"></span></div>
  <div id="help-help_icon" class="hidden tooltip"><span>Ajuda:</span> Aquesta opci&oacute; activa la informaci&oacute; de les funcionalitats del web tot situant el punter del ratol&iacute; al damunt dels diferents &iacute;tems.<span class="arrow-left"></span></div>
  <div id="help-sidebar-hide" class="hidden tooltip"><span>Mostrar/Ocultar barra lateral:</span>  Deshabilita la barra d&#39;opcions, permetent la seva recuperaci&oacute; quan es desitgi.<span class="arrow-left"></span></div>
  <div id="help-search" class="hidden tooltip"><span>Cerca:</span>  Introdu&iuml;u les paraules clau sobre aquells conceptes que desitgeu localitzar en els continguts del m&ograve;dul. Tamb&eacute; podeu excloure un terme de la cerca tot afegint-hi el signe &#8220;-&#8221; al davant.<span class="arrow-top"></span></div>
  <div id="help-header" class="hidden tooltip"><span>Cap&ccedil;alera:</span>  Indica l&#39;apartat o secci&oacute; que es mostra en pantalla. Tingueu present que les capçaleres de segon, tercer i quart nivell tamb&eacute; es poden desar com a marcadors.<span class="arrow-left"></span></div>
</div> 
</body>
</html>
